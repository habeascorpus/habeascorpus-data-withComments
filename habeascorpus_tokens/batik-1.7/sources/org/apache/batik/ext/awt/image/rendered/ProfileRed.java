/* Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
rendered	TokenNameIdentifier	 rendered
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
Graphics2D	TokenNameIdentifier	 Graphics2 D
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
Point	TokenNameIdentifier	 Point
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
RenderingHints	TokenNameIdentifier	 Rendering Hints
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
Transparency	TokenNameIdentifier	 Transparency
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
color	TokenNameIdentifier	 color
.	TokenNameDOT	
ColorSpace	TokenNameIdentifier	 Color Space
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
BandedSampleModel	TokenNameIdentifier	 Banded Sample Model
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
BufferedImage	TokenNameIdentifier	 Buffered Image
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
ColorConvertOp	TokenNameIdentifier	 Color Convert Op
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
ColorModel	TokenNameIdentifier	 Color Model
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
ComponentColorModel	TokenNameIdentifier	 Component Color Model
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
DataBuffer	TokenNameIdentifier	 Data Buffer
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
DataBufferByte	TokenNameIdentifier	 Data Buffer Byte
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
DirectColorModel	TokenNameIdentifier	 Direct Color Model
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
Raster	TokenNameIdentifier	 Raster
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
RenderedImage	TokenNameIdentifier	 Rendered Image
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
WritableRaster	TokenNameIdentifier	 Writable Raster
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
color	TokenNameIdentifier	 color
.	TokenNameDOT	
ICCColorSpaceExt	TokenNameIdentifier	 ICC Color Space Ext
;	TokenNameSEMICOLON	
/** * This implementation of rendered image forces a color profile * on its source * * @author <a href="mailto:vincent.hardy@eng.sun.com">Vincent Hardy</a> * @version $Id: ProfileRed.java 504084 2007-02-06 11:24:46Z dvholten $ */	TokenNameCOMMENT_JAVADOC	 This implementation of rendered image forces a color profile on its source * @author <a href="mailto:vincent.hardy@eng.sun.com">Vincent Hardy</a> @version $Id: ProfileRed.java 504084 2007-02-06 11:24:46Z dvholten $ 
public	TokenNamepublic	
class	TokenNameclass	
ProfileRed	TokenNameIdentifier	 Profile Red
extends	TokenNameextends	
AbstractRed	TokenNameIdentifier	 Abstract Red
{	TokenNameLBRACE	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
ColorSpace	TokenNameIdentifier	 Color Space
sRGBCS	TokenNameIdentifier	 s RGBCS
=	TokenNameEQUAL	
ColorSpace	TokenNameIdentifier	 Color Space
.	TokenNameDOT	
getInstance	TokenNameIdentifier	 get Instance
(	TokenNameLPAREN	
ColorSpace	TokenNameIdentifier	 Color Space
.	TokenNameDOT	
CS_sRGB	TokenNameIdentifier	 CS s RGB
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
ColorModel	TokenNameIdentifier	 Color Model
sRGBCM	TokenNameIdentifier	 s RGBCM
=	TokenNameEQUAL	
new	TokenNamenew	
DirectColorModel	TokenNameIdentifier	 Direct Color Model
(	TokenNameLPAREN	
sRGBCS	TokenNameIdentifier	 s RGBCS
,	TokenNameCOMMA	
32	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0x00ff0000	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0x0000ff00	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0x000000ff	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0xff000000	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
false	TokenNamefalse	
,	TokenNameCOMMA	
DataBuffer	TokenNameIdentifier	 Data Buffer
.	TokenNameDOT	
TYPE_INT	TokenNameIdentifier	 TYPE  INT
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
ICCColorSpaceExt	TokenNameIdentifier	 ICC Color Space Ext
colorSpace	TokenNameIdentifier	 color Space
;	TokenNameSEMICOLON	
/** * @param src Images on which the input ColorSpace should * be forced * @param colorSpace colorSpace that should be forced on the * source */	TokenNameCOMMENT_JAVADOC	 @param src Images on which the input ColorSpace should be forced @param colorSpace colorSpace that should be forced on the source 
public	TokenNamepublic	
ProfileRed	TokenNameIdentifier	 Profile Red
(	TokenNameLPAREN	
CachableRed	TokenNameIdentifier	 Cachable Red
src	TokenNameIdentifier	 src
,	TokenNameCOMMA	
ICCColorSpaceExt	TokenNameIdentifier	 ICC Color Space Ext
colorSpace	TokenNameIdentifier	 color Space
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
colorSpace	TokenNameIdentifier	 color Space
=	TokenNameEQUAL	
colorSpace	TokenNameIdentifier	 color Space
;	TokenNameSEMICOLON	
init	TokenNameIdentifier	 init
(	TokenNameLPAREN	
src	TokenNameIdentifier	 src
,	TokenNameCOMMA	
src	TokenNameIdentifier	 src
.	TokenNameDOT	
getBounds	TokenNameIdentifier	 get Bounds
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
sRGBCM	TokenNameIdentifier	 s RGBCM
,	TokenNameCOMMA	
sRGBCM	TokenNameIdentifier	 s RGBCM
.	TokenNameDOT	
createCompatibleSampleModel	TokenNameIdentifier	 create Compatible Sample Model
(	TokenNameLPAREN	
src	TokenNameIdentifier	 src
.	TokenNameDOT	
getWidth	TokenNameIdentifier	 get Width
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
src	TokenNameIdentifier	 src
.	TokenNameDOT	
getHeight	TokenNameIdentifier	 get Height
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
src	TokenNameIdentifier	 src
.	TokenNameDOT	
getTileGridXOffset	TokenNameIdentifier	 get Tile Grid X Offset
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
src	TokenNameIdentifier	 src
.	TokenNameDOT	
getTileGridYOffset	TokenNameIdentifier	 get Tile Grid Y Offset
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
CachableRed	TokenNameIdentifier	 Cachable Red
getSource	TokenNameIdentifier	 get Source
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
(	TokenNameLPAREN	
CachableRed	TokenNameIdentifier	 Cachable Red
)	TokenNameRPAREN	
getSources	TokenNameIdentifier	 get Sources
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * This method will turn the input image in an sRGB image as follows. * If there is no colorSpace defined, then the input image is * simply converted to singlePixelPacked sRGB if needed. * If there is a colorSpace defined, the the image data is 'interpreted' * as being in that space, instead of that of the image's colorSpace. * * Here is how the input image is processed: * a. It is converted to using a ComponentColorModel * b. Its data is extracted, ignoring it's ColorSpace * c. A new ComponentColorModel is built for the replacing colorSpace * Note that if the number of components in the input image and * the number of components in the replacing ColorSpace do not * match, it is not possible to apply the conversion. * d. A new BufferedImage is built, using the new * ComponentColorModel and the data from the original image * converted to the ComponentColorModel built in a. The alpha * channel is excluded from that new BufferedImage. * e. The BufferedImage created in d. is converted to sRGB using * ColorConvertOp * f. The alpha channel information is integrated back into the image. * * IMPORTANT NOTE: The code uses a BandedSampleModel in c.) and * d.) and discard the alpha channel during the color conversions * (it is restored in f.)), because of bugs in the interleaved * model with alpha. The BandedSampleModel did not cause any bug * as of JDK 1.3. */	TokenNameCOMMENT_JAVADOC	 This method will turn the input image in an sRGB image as follows. If there is no colorSpace defined, then the input image is simply converted to singlePixelPacked sRGB if needed. If there is a colorSpace defined, the the image data is 'interpreted' as being in that space, instead of that of the image's colorSpace. * Here is how the input image is processed: a. It is converted to using a ComponentColorModel b. Its data is extracted, ignoring it's ColorSpace c. A new ComponentColorModel is built for the replacing colorSpace Note that if the number of components in the input image and the number of components in the replacing ColorSpace do not match, it is not possible to apply the conversion. d. A new BufferedImage is built, using the new ComponentColorModel and the data from the original image converted to the ComponentColorModel built in a. The alpha channel is excluded from that new BufferedImage. e. The BufferedImage created in d. is converted to sRGB using ColorConvertOp f. The alpha channel information is integrated back into the image. * IMPORTANT NOTE: The code uses a BandedSampleModel in c.) and d.) and discard the alpha channel during the color conversions (it is restored in f.)), because of bugs in the interleaved model with alpha. The BandedSampleModel did not cause any bug as of JDK 1.3. 
public	TokenNamepublic	
WritableRaster	TokenNameIdentifier	 Writable Raster
copyData	TokenNameIdentifier	 copy Data
(	TokenNameLPAREN	
WritableRaster	TokenNameIdentifier	 Writable Raster
argbWR	TokenNameIdentifier	 argb WR
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
RenderedImage	TokenNameIdentifier	 Rendered Image
img	TokenNameIdentifier	 img
=	TokenNameEQUAL	
getSource	TokenNameIdentifier	 get Source
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
/** * Check that the number of color components match in the input * image and in the replacing profile. */	TokenNameCOMMENT_JAVADOC	 Check that the number of color components match in the input image and in the replacing profile. 
ColorModel	TokenNameIdentifier	 Color Model
imgCM	TokenNameIdentifier	 img CM
=	TokenNameEQUAL	
img	TokenNameIdentifier	 img
.	TokenNameDOT	
getColorModel	TokenNameIdentifier	 get Color Model
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ColorSpace	TokenNameIdentifier	 Color Space
imgCS	TokenNameIdentifier	 img CS
=	TokenNameEQUAL	
imgCM	TokenNameIdentifier	 img CM
.	TokenNameDOT	
getColorSpace	TokenNameIdentifier	 get Color Space
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
nImageComponents	TokenNameIdentifier	 n Image Components
=	TokenNameEQUAL	
imgCS	TokenNameIdentifier	 img CS
.	TokenNameDOT	
getNumComponents	TokenNameIdentifier	 get Num Components
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
nProfileComponents	TokenNameIdentifier	 n Profile Components
=	TokenNameEQUAL	
colorSpace	TokenNameIdentifier	 color Space
.	TokenNameDOT	
getNumComponents	TokenNameIdentifier	 get Num Components
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
nImageComponents	TokenNameIdentifier	 n Image Components
!=	TokenNameNOT_EQUAL	
nProfileComponents	TokenNameIdentifier	 n Profile Components
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Should we go in error???? Here we simply trace an error 	TokenNameCOMMENT_LINE	Should we go in error???? Here we simply trace an error 
// and return null 	TokenNameCOMMENT_LINE	and return null 
System	TokenNameIdentifier	 System
.	TokenNameDOT	
err	TokenNameIdentifier	 err
.	TokenNameDOT	
println	TokenNameIdentifier	 println
(	TokenNameLPAREN	
"Input image and associated color profile have"	TokenNameStringLiteral	Input image and associated color profile have
+	TokenNamePLUS	
" mismatching number of color components: conversion is not possible"	TokenNameStringLiteral	 mismatching number of color components: conversion is not possible
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
argbWR	TokenNameIdentifier	 argb WR
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Get the data from the source for the requested region */	TokenNameCOMMENT_JAVADOC	 Get the data from the source for the requested region 
int	TokenNameint	
w	TokenNameIdentifier	 w
=	TokenNameEQUAL	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
getWidth	TokenNameIdentifier	 get Width
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
h	TokenNameIdentifier	 h
=	TokenNameEQUAL	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
getHeight	TokenNameIdentifier	 get Height
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
minX	TokenNameIdentifier	 min X
=	TokenNameEQUAL	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
getMinX	TokenNameIdentifier	 get Min X
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
minY	TokenNameIdentifier	 min Y
=	TokenNameEQUAL	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
getMinY	TokenNameIdentifier	 get Min Y
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
WritableRaster	TokenNameIdentifier	 Writable Raster
srcWR	TokenNameIdentifier	 src WR
=	TokenNameEQUAL	
imgCM	TokenNameIdentifier	 img CM
.	TokenNameDOT	
createCompatibleWritableRaster	TokenNameIdentifier	 create Compatible Writable Raster
(	TokenNameLPAREN	
w	TokenNameIdentifier	 w
,	TokenNameCOMMA	
h	TokenNameIdentifier	 h
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
srcWR	TokenNameIdentifier	 src WR
=	TokenNameEQUAL	
srcWR	TokenNameIdentifier	 src WR
.	TokenNameDOT	
createWritableTranslatedChild	TokenNameIdentifier	 create Writable Translated Child
(	TokenNameLPAREN	
minX	TokenNameIdentifier	 min X
,	TokenNameCOMMA	
minY	TokenNameIdentifier	 min Y
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
img	TokenNameIdentifier	 img
.	TokenNameDOT	
copyData	TokenNameIdentifier	 copy Data
(	TokenNameLPAREN	
srcWR	TokenNameIdentifier	 src WR
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
/** * If the source data is not a ComponentColorModel using a * BandedSampleModel, do the conversion now. */	TokenNameCOMMENT_JAVADOC	 If the source data is not a ComponentColorModel using a BandedSampleModel, do the conversion now. 
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
(	TokenNameLPAREN	
imgCM	TokenNameIdentifier	 img CM
instanceof	TokenNameinstanceof	
ComponentColorModel	TokenNameIdentifier	 Component Color Model
)	TokenNameRPAREN	
||	TokenNameOR_OR	
!	TokenNameNOT	
(	TokenNameLPAREN	
img	TokenNameIdentifier	 img
.	TokenNameDOT	
getSampleModel	TokenNameIdentifier	 get Sample Model
(	TokenNameLPAREN	
)	TokenNameRPAREN	
instanceof	TokenNameinstanceof	
BandedSampleModel	TokenNameIdentifier	 Banded Sample Model
)	TokenNameRPAREN	
||	TokenNameOR_OR	
(	TokenNameLPAREN	
imgCM	TokenNameIdentifier	 img CM
.	TokenNameDOT	
hasAlpha	TokenNameIdentifier	 has Alpha
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
imgCM	TokenNameIdentifier	 img CM
.	TokenNameDOT	
isAlphaPremultiplied	TokenNameIdentifier	 is Alpha Premultiplied
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ComponentColorModel	TokenNameIdentifier	 Component Color Model
imgCompCM	TokenNameIdentifier	 img Comp CM
=	TokenNameEQUAL	
new	TokenNamenew	
ComponentColorModel	TokenNameIdentifier	 Component Color Model
(	TokenNameLPAREN	
imgCS	TokenNameIdentifier	 img CS
,	TokenNameCOMMA	
// Same ColorSpace as img 	TokenNameCOMMENT_LINE	Same ColorSpace as img 
imgCM	TokenNameIdentifier	 img CM
.	TokenNameDOT	
getComponentSize	TokenNameIdentifier	 get Component Size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
// Number of bits/comp 	TokenNameCOMMENT_LINE	Number of bits/comp 
imgCM	TokenNameIdentifier	 img CM
.	TokenNameDOT	
hasAlpha	TokenNameIdentifier	 has Alpha
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
// Same alpha as img 	TokenNameCOMMENT_LINE	Same alpha as img 
false	TokenNamefalse	
,	TokenNameCOMMA	
// unpremult alpha (so we can remove it next). 	TokenNameCOMMENT_LINE	unpremult alpha (so we can remove it next). 
imgCM	TokenNameIdentifier	 img CM
.	TokenNameDOT	
getTransparency	TokenNameIdentifier	 get Transparency
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
// Same trans as img 	TokenNameCOMMENT_LINE	Same trans as img 
DataBuffer	TokenNameIdentifier	 Data Buffer
.	TokenNameDOT	
TYPE_BYTE	TokenNameIdentifier	 TYPE  BYTE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// 8 bit/component. 	TokenNameCOMMENT_LINE	8 bit/component. 
WritableRaster	TokenNameIdentifier	 Writable Raster
wr	TokenNameIdentifier	 wr
=	TokenNameEQUAL	
Raster	TokenNameIdentifier	 Raster
.	TokenNameDOT	
createBandedRaster	TokenNameIdentifier	 create Banded Raster
(	TokenNameLPAREN	
DataBuffer	TokenNameIdentifier	 Data Buffer
.	TokenNameDOT	
TYPE_BYTE	TokenNameIdentifier	 TYPE  BYTE
,	TokenNameCOMMA	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
getWidth	TokenNameIdentifier	 get Width
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
getHeight	TokenNameIdentifier	 get Height
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
imgCompCM	TokenNameIdentifier	 img Comp CM
.	TokenNameDOT	
getNumComponents	TokenNameIdentifier	 get Num Components
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
new	TokenNamenew	
Point	TokenNameIdentifier	 Point
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
BufferedImage	TokenNameIdentifier	 Buffered Image
imgComp	TokenNameIdentifier	 img Comp
=	TokenNameEQUAL	
new	TokenNamenew	
BufferedImage	TokenNameIdentifier	 Buffered Image
(	TokenNameLPAREN	
imgCompCM	TokenNameIdentifier	 img Comp CM
,	TokenNameCOMMA	
wr	TokenNameIdentifier	 wr
,	TokenNameCOMMA	
imgCompCM	TokenNameIdentifier	 img Comp CM
.	TokenNameDOT	
isAlphaPremultiplied	TokenNameIdentifier	 is Alpha Premultiplied
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
BufferedImage	TokenNameIdentifier	 Buffered Image
srcImg	TokenNameIdentifier	 src Img
=	TokenNameEQUAL	
new	TokenNamenew	
BufferedImage	TokenNameIdentifier	 Buffered Image
(	TokenNameLPAREN	
imgCM	TokenNameIdentifier	 img CM
,	TokenNameCOMMA	
srcWR	TokenNameIdentifier	 src WR
.	TokenNameDOT	
createWritableTranslatedChild	TokenNameIdentifier	 create Writable Translated Child
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
imgCM	TokenNameIdentifier	 img CM
.	TokenNameDOT	
isAlphaPremultiplied	TokenNameIdentifier	 is Alpha Premultiplied
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Graphics2D	TokenNameIdentifier	 Graphics2 D
g	TokenNameIdentifier	 g
=	TokenNameEQUAL	
imgComp	TokenNameIdentifier	 img Comp
.	TokenNameDOT	
createGraphics	TokenNameIdentifier	 create Graphics
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
g	TokenNameIdentifier	 g
.	TokenNameDOT	
setRenderingHint	TokenNameIdentifier	 set Rendering Hint
(	TokenNameLPAREN	
RenderingHints	TokenNameIdentifier	 Rendering Hints
.	TokenNameDOT	
KEY_COLOR_RENDERING	TokenNameIdentifier	 KEY  COLOR  RENDERING
,	TokenNameCOMMA	
RenderingHints	TokenNameIdentifier	 Rendering Hints
.	TokenNameDOT	
VALUE_COLOR_RENDER_QUALITY	TokenNameIdentifier	 VALUE  COLOR  RENDER  QUALITY
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
g	TokenNameIdentifier	 g
.	TokenNameDOT	
drawImage	TokenNameIdentifier	 draw Image
(	TokenNameLPAREN	
srcImg	TokenNameIdentifier	 src Img
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
img	TokenNameIdentifier	 img
=	TokenNameEQUAL	
imgComp	TokenNameIdentifier	 img Comp
;	TokenNameSEMICOLON	
imgCM	TokenNameIdentifier	 img CM
=	TokenNameEQUAL	
imgCompCM	TokenNameIdentifier	 img Comp CM
;	TokenNameSEMICOLON	
srcWR	TokenNameIdentifier	 src WR
=	TokenNameEQUAL	
wr	TokenNameIdentifier	 wr
.	TokenNameDOT	
createWritableTranslatedChild	TokenNameIdentifier	 create Writable Translated Child
(	TokenNameLPAREN	
minX	TokenNameIdentifier	 min X
,	TokenNameCOMMA	
minY	TokenNameIdentifier	 min Y
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Now, the input image is using a component color * model. We can therefore create an image with the new * profile, using a ComponentColorModel as well, because * we know the number of components match (this was * checked at the begining of this routine). */	TokenNameCOMMENT_JAVADOC	 Now, the input image is using a component color model. We can therefore create an image with the new profile, using a ComponentColorModel as well, because we know the number of components match (this was checked at the begining of this routine). 
ComponentColorModel	TokenNameIdentifier	 Component Color Model
newCM	TokenNameIdentifier	 new CM
=	TokenNameEQUAL	
new	TokenNamenew	
ComponentColorModel	TokenNameIdentifier	 Component Color Model
(	TokenNameLPAREN	
colorSpace	TokenNameIdentifier	 color Space
,	TokenNameCOMMA	
// **** New ColorSpace **** 	TokenNameCOMMENT_LINE	**** New ColorSpace **** 
imgCM	TokenNameIdentifier	 img CM
.	TokenNameDOT	
getComponentSize	TokenNameIdentifier	 get Component Size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
// Array of number of bits per components 	TokenNameCOMMENT_LINE	Array of number of bits per components 
false	TokenNamefalse	
,	TokenNameCOMMA	
// No alpa 	TokenNameCOMMENT_LINE	No alpa 
false	TokenNamefalse	
,	TokenNameCOMMA	
// Not premultiplied 	TokenNameCOMMENT_LINE	Not premultiplied 
Transparency	TokenNameIdentifier	 Transparency
.	TokenNameDOT	
OPAQUE	TokenNameIdentifier	 OPAQUE
,	TokenNameCOMMA	
// No transparency 	TokenNameCOMMENT_LINE	No transparency 
DataBuffer	TokenNameIdentifier	 Data Buffer
.	TokenNameDOT	
TYPE_BYTE	TokenNameIdentifier	 TYPE  BYTE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// 8 Bits 	TokenNameCOMMENT_LINE	8 Bits 
// Build a raster with bands 0, 1 and 2 of img's raster 	TokenNameCOMMENT_LINE	Build a raster with bands 0, 1 and 2 of img's raster 
DataBufferByte	TokenNameIdentifier	 Data Buffer Byte
data	TokenNameIdentifier	 data
=	TokenNameEQUAL	
(	TokenNameLPAREN	
DataBufferByte	TokenNameIdentifier	 Data Buffer Byte
)	TokenNameRPAREN	
srcWR	TokenNameIdentifier	 src WR
.	TokenNameDOT	
getDataBuffer	TokenNameIdentifier	 get Data Buffer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
srcWR	TokenNameIdentifier	 src WR
=	TokenNameEQUAL	
Raster	TokenNameIdentifier	 Raster
.	TokenNameDOT	
createBandedRaster	TokenNameIdentifier	 create Banded Raster
(	TokenNameLPAREN	
data	TokenNameIdentifier	 data
,	TokenNameCOMMA	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
getWidth	TokenNameIdentifier	 get Width
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
getHeight	TokenNameIdentifier	 get Height
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
getWidth	TokenNameIdentifier	 get Width
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
new	TokenNamenew	
int	TokenNameint	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
1	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
2	TokenNameIntegerLiteral	
}	TokenNameRBRACE	
,	TokenNameCOMMA	
new	TokenNamenew	
int	TokenNameint	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
}	TokenNameRBRACE	
,	TokenNameCOMMA	
new	TokenNamenew	
Point	TokenNameIdentifier	 Point
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
BufferedImage	TokenNameIdentifier	 Buffered Image
newImg	TokenNameIdentifier	 new Img
=	TokenNameEQUAL	
new	TokenNamenew	
BufferedImage	TokenNameIdentifier	 Buffered Image
(	TokenNameLPAREN	
newCM	TokenNameIdentifier	 new CM
,	TokenNameCOMMA	
srcWR	TokenNameIdentifier	 src WR
,	TokenNameCOMMA	
newCM	TokenNameIdentifier	 new CM
.	TokenNameDOT	
isAlphaPremultiplied	TokenNameIdentifier	 is Alpha Premultiplied
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
/** * Now, convert the image to sRGB */	TokenNameCOMMENT_JAVADOC	 Now, convert the image to sRGB 
ComponentColorModel	TokenNameIdentifier	 Component Color Model
sRGBCompCM	TokenNameIdentifier	 s RGB Comp CM
=	TokenNameEQUAL	
new	TokenNamenew	
ComponentColorModel	TokenNameIdentifier	 Component Color Model
(	TokenNameLPAREN	
ColorSpace	TokenNameIdentifier	 Color Space
.	TokenNameDOT	
getInstance	TokenNameIdentifier	 get Instance
(	TokenNameLPAREN	
ColorSpace	TokenNameIdentifier	 Color Space
.	TokenNameDOT	
CS_sRGB	TokenNameIdentifier	 CS s RGB
)	TokenNameRPAREN	
,	TokenNameCOMMA	
new	TokenNamenew	
int	TokenNameint	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
8	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
8	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
8	TokenNameIntegerLiteral	
}	TokenNameRBRACE	
,	TokenNameCOMMA	
false	TokenNamefalse	
,	TokenNameCOMMA	
false	TokenNamefalse	
,	TokenNameCOMMA	
Transparency	TokenNameIdentifier	 Transparency
.	TokenNameDOT	
OPAQUE	TokenNameIdentifier	 OPAQUE
,	TokenNameCOMMA	
DataBuffer	TokenNameIdentifier	 Data Buffer
.	TokenNameDOT	
TYPE_BYTE	TokenNameIdentifier	 TYPE  BYTE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
WritableRaster	TokenNameIdentifier	 Writable Raster
wr	TokenNameIdentifier	 wr
=	TokenNameEQUAL	
Raster	TokenNameIdentifier	 Raster
.	TokenNameDOT	
createBandedRaster	TokenNameIdentifier	 create Banded Raster
(	TokenNameLPAREN	
DataBuffer	TokenNameIdentifier	 Data Buffer
.	TokenNameDOT	
TYPE_BYTE	TokenNameIdentifier	 TYPE  BYTE
,	TokenNameCOMMA	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
getWidth	TokenNameIdentifier	 get Width
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
getHeight	TokenNameIdentifier	 get Height
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
sRGBCompCM	TokenNameIdentifier	 s RGB Comp CM
.	TokenNameDOT	
getNumComponents	TokenNameIdentifier	 get Num Components
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
new	TokenNamenew	
Point	TokenNameIdentifier	 Point
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
BufferedImage	TokenNameIdentifier	 Buffered Image
sRGBImage	TokenNameIdentifier	 s RGB Image
=	TokenNameEQUAL	
new	TokenNamenew	
BufferedImage	TokenNameIdentifier	 Buffered Image
(	TokenNameLPAREN	
sRGBCompCM	TokenNameIdentifier	 s RGB Comp CM
,	TokenNameCOMMA	
wr	TokenNameIdentifier	 wr
,	TokenNameCOMMA	
false	TokenNamefalse	
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ColorConvertOp	TokenNameIdentifier	 Color Convert Op
colorConvertOp	TokenNameIdentifier	 color Convert Op
=	TokenNameEQUAL	
new	TokenNamenew	
ColorConvertOp	TokenNameIdentifier	 Color Convert Op
(	TokenNameLPAREN	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
colorConvertOp	TokenNameIdentifier	 color Convert Op
.	TokenNameDOT	
filter	TokenNameIdentifier	 filter
(	TokenNameLPAREN	
newImg	TokenNameIdentifier	 new Img
,	TokenNameCOMMA	
sRGBImage	TokenNameIdentifier	 s RGB Image
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
/** * Integrate alpha back into the image if there is any */	TokenNameCOMMENT_JAVADOC	 Integrate alpha back into the image if there is any 
if	TokenNameif	
(	TokenNameLPAREN	
imgCM	TokenNameIdentifier	 img CM
.	TokenNameDOT	
hasAlpha	TokenNameIdentifier	 has Alpha
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
DataBufferByte	TokenNameIdentifier	 Data Buffer Byte
rgbData	TokenNameIdentifier	 rgb Data
=	TokenNameEQUAL	
(	TokenNameLPAREN	
DataBufferByte	TokenNameIdentifier	 Data Buffer Byte
)	TokenNameRPAREN	
wr	TokenNameIdentifier	 wr
.	TokenNameDOT	
getDataBuffer	TokenNameIdentifier	 get Data Buffer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
byte	TokenNamebyte	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
imgBanks	TokenNameIdentifier	 img Banks
=	TokenNameEQUAL	
data	TokenNameIdentifier	 data
.	TokenNameDOT	
getBankData	TokenNameIdentifier	 get Bank Data
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
byte	TokenNamebyte	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
rgbBanks	TokenNameIdentifier	 rgb Banks
=	TokenNameEQUAL	
rgbData	TokenNameIdentifier	 rgb Data
.	TokenNameDOT	
getBankData	TokenNameIdentifier	 get Bank Data
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
byte	TokenNamebyte	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
argbBanks	TokenNameIdentifier	 argb Banks
=	TokenNameEQUAL	
{	TokenNameLBRACE	
rgbBanks	TokenNameIdentifier	 rgb Banks
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
,	TokenNameCOMMA	
rgbBanks	TokenNameIdentifier	 rgb Banks
[	TokenNameLBRACKET	
1	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
,	TokenNameCOMMA	
rgbBanks	TokenNameIdentifier	 rgb Banks
[	TokenNameLBRACKET	
2	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
,	TokenNameCOMMA	
imgBanks	TokenNameIdentifier	 img Banks
[	TokenNameLBRACKET	
3	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
}	TokenNameRBRACE	
;	TokenNameSEMICOLON	
DataBufferByte	TokenNameIdentifier	 Data Buffer Byte
argbData	TokenNameIdentifier	 argb Data
=	TokenNameEQUAL	
new	TokenNamenew	
DataBufferByte	TokenNameIdentifier	 Data Buffer Byte
(	TokenNameLPAREN	
argbBanks	TokenNameIdentifier	 argb Banks
,	TokenNameCOMMA	
imgBanks	TokenNameIdentifier	 img Banks
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
.	TokenNameDOT	
length	TokenNameIdentifier	 length
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
srcWR	TokenNameIdentifier	 src WR
=	TokenNameEQUAL	
Raster	TokenNameIdentifier	 Raster
.	TokenNameDOT	
createBandedRaster	TokenNameIdentifier	 create Banded Raster
(	TokenNameLPAREN	
argbData	TokenNameIdentifier	 argb Data
,	TokenNameCOMMA	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
getWidth	TokenNameIdentifier	 get Width
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
getHeight	TokenNameIdentifier	 get Height
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
getWidth	TokenNameIdentifier	 get Width
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
new	TokenNamenew	
int	TokenNameint	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
1	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
2	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
3	TokenNameIntegerLiteral	
}	TokenNameRBRACE	
,	TokenNameCOMMA	
new	TokenNamenew	
int	TokenNameint	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
}	TokenNameRBRACE	
,	TokenNameCOMMA	
new	TokenNamenew	
Point	TokenNameIdentifier	 Point
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
sRGBCompCM	TokenNameIdentifier	 s RGB Comp CM
=	TokenNameEQUAL	
new	TokenNamenew	
ComponentColorModel	TokenNameIdentifier	 Component Color Model
(	TokenNameLPAREN	
ColorSpace	TokenNameIdentifier	 Color Space
.	TokenNameDOT	
getInstance	TokenNameIdentifier	 get Instance
(	TokenNameLPAREN	
ColorSpace	TokenNameIdentifier	 Color Space
.	TokenNameDOT	
CS_sRGB	TokenNameIdentifier	 CS s RGB
)	TokenNameRPAREN	
,	TokenNameCOMMA	
new	TokenNamenew	
int	TokenNameint	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
8	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
8	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
8	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
8	TokenNameIntegerLiteral	
}	TokenNameRBRACE	
,	TokenNameCOMMA	
true	TokenNametrue	
,	TokenNameCOMMA	
false	TokenNamefalse	
,	TokenNameCOMMA	
Transparency	TokenNameIdentifier	 Transparency
.	TokenNameDOT	
TRANSLUCENT	TokenNameIdentifier	 TRANSLUCENT
,	TokenNameCOMMA	
DataBuffer	TokenNameIdentifier	 Data Buffer
.	TokenNameDOT	
TYPE_BYTE	TokenNameIdentifier	 TYPE  BYTE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
sRGBImage	TokenNameIdentifier	 s RGB Image
=	TokenNameEQUAL	
new	TokenNamenew	
BufferedImage	TokenNameIdentifier	 Buffered Image
(	TokenNameLPAREN	
sRGBCompCM	TokenNameIdentifier	 s RGB Comp CM
,	TokenNameCOMMA	
srcWR	TokenNameIdentifier	 src WR
,	TokenNameCOMMA	
false	TokenNamefalse	
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/*BufferedImage result = new BufferedImage(img.getWidth(), img.getHeight(), BufferedImage.TYPE_INT_ARGB);*/	TokenNameCOMMENT_BLOCK	BufferedImage result = new BufferedImage(img.getWidth(), img.getHeight(), BufferedImage.TYPE_INT_ARGB);
BufferedImage	TokenNameIdentifier	 Buffered Image
result	TokenNameIdentifier	 result
=	TokenNameEQUAL	
new	TokenNamenew	
BufferedImage	TokenNameIdentifier	 Buffered Image
(	TokenNameLPAREN	
sRGBCM	TokenNameIdentifier	 s RGBCM
,	TokenNameCOMMA	
argbWR	TokenNameIdentifier	 argb WR
.	TokenNameDOT	
createWritableTranslatedChild	TokenNameIdentifier	 create Writable Translated Child
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
false	TokenNamefalse	
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
/////////////////////////////////////////////// 	TokenNameCOMMENT_LINE	///////////////////////////////////////////// 
// BUG IN ColorConvertOp: The following breaks: 	TokenNameCOMMENT_LINE	BUG IN ColorConvertOp: The following breaks: 
// colorConvertOp.filter(sRGBImage, result); 	TokenNameCOMMENT_LINE	colorConvertOp.filter(sRGBImage, result); 
// 	TokenNameCOMMENT_LINE	 
// Using Graphics2D instead.... 	TokenNameCOMMENT_LINE	Using Graphics2D instead.... 
/////////////////////////////////////////////// 	TokenNameCOMMENT_LINE	///////////////////////////////////////////// 
Graphics2D	TokenNameIdentifier	 Graphics2 D
g	TokenNameIdentifier	 g
=	TokenNameEQUAL	
result	TokenNameIdentifier	 result
.	TokenNameDOT	
createGraphics	TokenNameIdentifier	 create Graphics
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
g	TokenNameIdentifier	 g
.	TokenNameDOT	
setRenderingHint	TokenNameIdentifier	 set Rendering Hint
(	TokenNameLPAREN	
RenderingHints	TokenNameIdentifier	 Rendering Hints
.	TokenNameDOT	
KEY_COLOR_RENDERING	TokenNameIdentifier	 KEY  COLOR  RENDERING
,	TokenNameCOMMA	
RenderingHints	TokenNameIdentifier	 Rendering Hints
.	TokenNameDOT	
VALUE_COLOR_RENDER_QUALITY	TokenNameIdentifier	 VALUE  COLOR  RENDER  QUALITY
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
g	TokenNameIdentifier	 g
.	TokenNameDOT	
drawImage	TokenNameIdentifier	 draw Image
(	TokenNameLPAREN	
sRGBImage	TokenNameIdentifier	 s RGB Image
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
g	TokenNameIdentifier	 g
.	TokenNameDOT	
dispose	TokenNameIdentifier	 dispose
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
argbWR	TokenNameIdentifier	 argb WR
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
Exception	TokenNameIdentifier	 Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
e	TokenNameIdentifier	 e
.	TokenNameDOT	
printStackTrace	TokenNameIdentifier	 print Stack Trace
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
Error	TokenNameIdentifier	 Error
(	TokenNameLPAREN	
e	TokenNameIdentifier	 e
.	TokenNameDOT	
getMessage	TokenNameIdentifier	 get Message
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
