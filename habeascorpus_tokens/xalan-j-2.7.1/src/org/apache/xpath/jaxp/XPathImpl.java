/* * Licensed to the Apache Software Foundation (ASF) under one * or more contributor license agreements. See the NOTICE file * distributed with this work for additional information * regarding copyright ownership. The ASF licenses this file * to you under the Apache License, Version 2.0 (the "License"); * you may not use this file except in compliance with the License. * You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to you under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
// $Id: XPathImpl.java 524814 2007-04-02 15:52:11Z zongaro $ 	TokenNameCOMMENT_LINE	$Id: XPathImpl.java 524814 2007-04-02 15:52:11Z zongaro $ 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
jaxp	TokenNameIdentifier	 jaxp
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
namespace	TokenNameIdentifier	 namespace
.	TokenNameDOT	
QName	TokenNameIdentifier	 Q Name
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
namespace	TokenNameIdentifier	 namespace
.	TokenNameDOT	
NamespaceContext	TokenNameIdentifier	 Namespace Context
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPathExpressionException	TokenNameIdentifier	 X Path Expression Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPathConstants	TokenNameIdentifier	 X Path Constants
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPathFunctionResolver	TokenNameIdentifier	 X Path Function Resolver
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPathVariableResolver	TokenNameIdentifier	 X Path Variable Resolver
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPathExpression	TokenNameIdentifier	 X Path Expression
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
dtm	TokenNameIdentifier	 dtm
.	TokenNameDOT	
DTM	TokenNameIdentifier	 DTM
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
*	TokenNameMULTIPLY	
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
objects	TokenNameIdentifier	 objects
.	TokenNameDOT	
XObject	TokenNameIdentifier	 X Object
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
res	TokenNameIdentifier	 res
.	TokenNameDOT	
XPATHErrorResources	TokenNameIdentifier	 XPATH Error Resources
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
res	TokenNameIdentifier	 res
.	TokenNameDOT	
XSLMessages	TokenNameIdentifier	 XSL Messages
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
w3c	TokenNameIdentifier	 w3c
.	TokenNameDOT	
dom	TokenNameIdentifier	 dom
.	TokenNameDOT	
Node	TokenNameIdentifier	 Node
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
w3c	TokenNameIdentifier	 w3c
.	TokenNameDOT	
dom	TokenNameIdentifier	 dom
.	TokenNameDOT	
DOMImplementation	TokenNameIdentifier	 DOM Implementation
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
w3c	TokenNameIdentifier	 w3c
.	TokenNameDOT	
dom	TokenNameIdentifier	 dom
.	TokenNameDOT	
Document	TokenNameIdentifier	 Document
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
w3c	TokenNameIdentifier	 w3c
.	TokenNameDOT	
dom	TokenNameIdentifier	 dom
.	TokenNameDOT	
traversal	TokenNameIdentifier	 traversal
.	TokenNameDOT	
NodeIterator	TokenNameIdentifier	 Node Iterator
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
sax	TokenNameIdentifier	 sax
.	TokenNameDOT	
InputSource	TokenNameIdentifier	 Input Source
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
sax	TokenNameIdentifier	 sax
.	TokenNameDOT	
SAXException	TokenNameIdentifier	 SAX Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
parsers	TokenNameIdentifier	 parsers
.	TokenNameDOT	
*	TokenNameMULTIPLY	
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
IOException	TokenNameIdentifier	 IO Exception
;	TokenNameSEMICOLON	
/** * The XPathImpl class provides implementation for the methods defined in * javax.xml.xpath.XPath interface. This provide simple access to the results * of an XPath expression. * * * @version $Revision$ * @author Ramesh Mandava */	TokenNameCOMMENT_JAVADOC	 The XPathImpl class provides implementation for the methods defined in javax.xml.xpath.XPath interface. This provide simple access to the results of an XPath expression. * @version $Revision$ @author Ramesh Mandava 
public	TokenNamepublic	
class	TokenNameclass	
XPathImpl	TokenNameIdentifier	 X Path Impl
implements	TokenNameimplements	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPath	TokenNameIdentifier	 X Path
{	TokenNameLBRACE	
// Private variables 	TokenNameCOMMENT_LINE	Private variables 
private	TokenNameprivate	
XPathVariableResolver	TokenNameIdentifier	 X Path Variable Resolver
variableResolver	TokenNameIdentifier	 variable Resolver
;	TokenNameSEMICOLON	
private	TokenNameprivate	
XPathFunctionResolver	TokenNameIdentifier	 X Path Function Resolver
functionResolver	TokenNameIdentifier	 function Resolver
;	TokenNameSEMICOLON	
private	TokenNameprivate	
XPathVariableResolver	TokenNameIdentifier	 X Path Variable Resolver
origVariableResolver	TokenNameIdentifier	 orig Variable Resolver
;	TokenNameSEMICOLON	
private	TokenNameprivate	
XPathFunctionResolver	TokenNameIdentifier	 X Path Function Resolver
origFunctionResolver	TokenNameIdentifier	 orig Function Resolver
;	TokenNameSEMICOLON	
private	TokenNameprivate	
NamespaceContext	TokenNameIdentifier	 Namespace Context
namespaceContext	TokenNameIdentifier	 namespace Context
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
JAXPPrefixResolver	TokenNameIdentifier	 JAXP Prefix Resolver
prefixResolver	TokenNameIdentifier	 prefix Resolver
;	TokenNameSEMICOLON	
// By default Extension Functions are allowed in XPath Expressions. If 	TokenNameCOMMENT_LINE	By default Extension Functions are allowed in XPath Expressions. If 
// Secure Processing Feature is set on XPathFactory then the invocation of 	TokenNameCOMMENT_LINE	Secure Processing Feature is set on XPathFactory then the invocation of 
// extensions function need to throw XPathFunctionException 	TokenNameCOMMENT_LINE	extensions function need to throw XPathFunctionException 
private	TokenNameprivate	
boolean	TokenNameboolean	
featureSecureProcessing	TokenNameIdentifier	 feature Secure Processing
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
XPathImpl	TokenNameIdentifier	 X Path Impl
(	TokenNameLPAREN	
XPathVariableResolver	TokenNameIdentifier	 X Path Variable Resolver
vr	TokenNameIdentifier	 vr
,	TokenNameCOMMA	
XPathFunctionResolver	TokenNameIdentifier	 X Path Function Resolver
fr	TokenNameIdentifier	 fr
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
origVariableResolver	TokenNameIdentifier	 orig Variable Resolver
=	TokenNameEQUAL	
this	TokenNamethis	
.	TokenNameDOT	
variableResolver	TokenNameIdentifier	 variable Resolver
=	TokenNameEQUAL	
vr	TokenNameIdentifier	 vr
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
origFunctionResolver	TokenNameIdentifier	 orig Function Resolver
=	TokenNameEQUAL	
this	TokenNamethis	
.	TokenNameDOT	
functionResolver	TokenNameIdentifier	 function Resolver
=	TokenNameEQUAL	
fr	TokenNameIdentifier	 fr
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
XPathImpl	TokenNameIdentifier	 X Path Impl
(	TokenNameLPAREN	
XPathVariableResolver	TokenNameIdentifier	 X Path Variable Resolver
vr	TokenNameIdentifier	 vr
,	TokenNameCOMMA	
XPathFunctionResolver	TokenNameIdentifier	 X Path Function Resolver
fr	TokenNameIdentifier	 fr
,	TokenNameCOMMA	
boolean	TokenNameboolean	
featureSecureProcessing	TokenNameIdentifier	 feature Secure Processing
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
origVariableResolver	TokenNameIdentifier	 orig Variable Resolver
=	TokenNameEQUAL	
this	TokenNamethis	
.	TokenNameDOT	
variableResolver	TokenNameIdentifier	 variable Resolver
=	TokenNameEQUAL	
vr	TokenNameIdentifier	 vr
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
origFunctionResolver	TokenNameIdentifier	 orig Function Resolver
=	TokenNameEQUAL	
this	TokenNamethis	
.	TokenNameDOT	
functionResolver	TokenNameIdentifier	 function Resolver
=	TokenNameEQUAL	
fr	TokenNameIdentifier	 fr
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
featureSecureProcessing	TokenNameIdentifier	 feature Secure Processing
=	TokenNameEQUAL	
featureSecureProcessing	TokenNameIdentifier	 feature Secure Processing
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * <p>Establishes a variable resolver.</p> * * @param resolver Variable Resolver */	TokenNameCOMMENT_JAVADOC	 <p>Establishes a variable resolver.</p> * @param resolver Variable Resolver 
public	TokenNamepublic	
void	TokenNamevoid	
setXPathVariableResolver	TokenNameIdentifier	 set X Path Variable Resolver
(	TokenNameLPAREN	
XPathVariableResolver	TokenNameIdentifier	 X Path Variable Resolver
resolver	TokenNameIdentifier	 resolver
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
resolver	TokenNameIdentifier	 resolver
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
fmsg	TokenNameIdentifier	 fmsg
=	TokenNameEQUAL	
XSLMessages	TokenNameIdentifier	 XSL Messages
.	TokenNameDOT	
createXPATHMessage	TokenNameIdentifier	 create XPATH Message
(	TokenNameLPAREN	
XPATHErrorResources	TokenNameIdentifier	 XPATH Error Resources
.	TokenNameDOT	
ER_ARG_CANNOT_BE_NULL	TokenNameIdentifier	 ER  ARG  CANNOT  BE  NULL
,	TokenNameCOMMA	
new	TokenNamenew	
Object	TokenNameIdentifier	 Object
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
"XPathVariableResolver"	TokenNameStringLiteral	XPathVariableResolver
}	TokenNameRBRACE	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
NullPointerException	TokenNameIdentifier	 Null Pointer Exception
(	TokenNameLPAREN	
fmsg	TokenNameIdentifier	 fmsg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
this	TokenNamethis	
.	TokenNameDOT	
variableResolver	TokenNameIdentifier	 variable Resolver
=	TokenNameEQUAL	
resolver	TokenNameIdentifier	 resolver
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * <p>Returns the current variable resolver.</p> * * @return Current variable resolver */	TokenNameCOMMENT_JAVADOC	 <p>Returns the current variable resolver.</p> * @return Current variable resolver 
public	TokenNamepublic	
XPathVariableResolver	TokenNameIdentifier	 X Path Variable Resolver
getXPathVariableResolver	TokenNameIdentifier	 get X Path Variable Resolver
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
variableResolver	TokenNameIdentifier	 variable Resolver
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * <p>Establishes a function resolver.</p> * * @param resolver XPath function resolver */	TokenNameCOMMENT_JAVADOC	 <p>Establishes a function resolver.</p> * @param resolver XPath function resolver 
public	TokenNamepublic	
void	TokenNamevoid	
setXPathFunctionResolver	TokenNameIdentifier	 set X Path Function Resolver
(	TokenNameLPAREN	
XPathFunctionResolver	TokenNameIdentifier	 X Path Function Resolver
resolver	TokenNameIdentifier	 resolver
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
resolver	TokenNameIdentifier	 resolver
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
fmsg	TokenNameIdentifier	 fmsg
=	TokenNameEQUAL	
XSLMessages	TokenNameIdentifier	 XSL Messages
.	TokenNameDOT	
createXPATHMessage	TokenNameIdentifier	 create XPATH Message
(	TokenNameLPAREN	
XPATHErrorResources	TokenNameIdentifier	 XPATH Error Resources
.	TokenNameDOT	
ER_ARG_CANNOT_BE_NULL	TokenNameIdentifier	 ER  ARG  CANNOT  BE  NULL
,	TokenNameCOMMA	
new	TokenNamenew	
Object	TokenNameIdentifier	 Object
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
"XPathFunctionResolver"	TokenNameStringLiteral	XPathFunctionResolver
}	TokenNameRBRACE	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
NullPointerException	TokenNameIdentifier	 Null Pointer Exception
(	TokenNameLPAREN	
fmsg	TokenNameIdentifier	 fmsg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
this	TokenNamethis	
.	TokenNameDOT	
functionResolver	TokenNameIdentifier	 function Resolver
=	TokenNameEQUAL	
resolver	TokenNameIdentifier	 resolver
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * <p>Returns the current function resolver.</p> * * @return Current function resolver */	TokenNameCOMMENT_JAVADOC	 <p>Returns the current function resolver.</p> * @return Current function resolver 
public	TokenNamepublic	
XPathFunctionResolver	TokenNameIdentifier	 X Path Function Resolver
getXPathFunctionResolver	TokenNameIdentifier	 get X Path Function Resolver
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
functionResolver	TokenNameIdentifier	 function Resolver
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * <p>Establishes a namespace context.</p> * * @param nsContext Namespace context to use */	TokenNameCOMMENT_JAVADOC	 <p>Establishes a namespace context.</p> * @param nsContext Namespace context to use 
public	TokenNamepublic	
void	TokenNamevoid	
setNamespaceContext	TokenNameIdentifier	 set Namespace Context
(	TokenNameLPAREN	
NamespaceContext	TokenNameIdentifier	 Namespace Context
nsContext	TokenNameIdentifier	 ns Context
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
nsContext	TokenNameIdentifier	 ns Context
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
fmsg	TokenNameIdentifier	 fmsg
=	TokenNameEQUAL	
XSLMessages	TokenNameIdentifier	 XSL Messages
.	TokenNameDOT	
createXPATHMessage	TokenNameIdentifier	 create XPATH Message
(	TokenNameLPAREN	
XPATHErrorResources	TokenNameIdentifier	 XPATH Error Resources
.	TokenNameDOT	
ER_ARG_CANNOT_BE_NULL	TokenNameIdentifier	 ER  ARG  CANNOT  BE  NULL
,	TokenNameCOMMA	
new	TokenNamenew	
Object	TokenNameIdentifier	 Object
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
"NamespaceContext"	TokenNameStringLiteral	NamespaceContext
}	TokenNameRBRACE	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
NullPointerException	TokenNameIdentifier	 Null Pointer Exception
(	TokenNameLPAREN	
fmsg	TokenNameIdentifier	 fmsg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
this	TokenNamethis	
.	TokenNameDOT	
namespaceContext	TokenNameIdentifier	 namespace Context
=	TokenNameEQUAL	
nsContext	TokenNameIdentifier	 ns Context
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
prefixResolver	TokenNameIdentifier	 prefix Resolver
=	TokenNameEQUAL	
new	TokenNamenew	
JAXPPrefixResolver	TokenNameIdentifier	 JAXP Prefix Resolver
(	TokenNameLPAREN	
nsContext	TokenNameIdentifier	 ns Context
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * <p>Returns the current namespace context.</p> * * @return Current Namespace context */	TokenNameCOMMENT_JAVADOC	 <p>Returns the current namespace context.</p> * @return Current Namespace context 
public	TokenNamepublic	
NamespaceContext	TokenNameIdentifier	 Namespace Context
getNamespaceContext	TokenNameIdentifier	 get Namespace Context
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
namespaceContext	TokenNameIdentifier	 namespace Context
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
static	TokenNamestatic	
Document	TokenNameIdentifier	 Document
d	TokenNameIdentifier	 d
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
DocumentBuilder	TokenNameIdentifier	 Document Builder
getParser	TokenNameIdentifier	 get Parser
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
// we'd really like to cache those DocumentBuilders, but we can't because: 	TokenNameCOMMENT_LINE	we'd really like to cache those DocumentBuilders, but we can't because: 
// 1. thread safety. parsers are not thread-safe, so at least 	TokenNameCOMMENT_LINE	1. thread safety. parsers are not thread-safe, so at least 
// we need one instance per a thread. 	TokenNameCOMMENT_LINE	we need one instance per a thread. 
// 2. parsers are non-reentrant, so now we are looking at having a 	TokenNameCOMMENT_LINE	2. parsers are non-reentrant, so now we are looking at having a 
// pool of parsers. 	TokenNameCOMMENT_LINE	pool of parsers. 
// 3. then the class loading issue. The look-up procedure of 	TokenNameCOMMENT_LINE	3. then the class loading issue. The look-up procedure of 
// DocumentBuilderFactory.newInstance() depends on context class loader 	TokenNameCOMMENT_LINE	DocumentBuilderFactory.newInstance() depends on context class loader 
// and system properties, which may change during the execution of JVM. 	TokenNameCOMMENT_LINE	and system properties, which may change during the execution of JVM. 
// 	TokenNameCOMMENT_LINE	 
// so we really have to create a fresh DocumentBuilder every time we need one 	TokenNameCOMMENT_LINE	so we really have to create a fresh DocumentBuilder every time we need one 
// - KK 	TokenNameCOMMENT_LINE	- KK 
DocumentBuilderFactory	TokenNameIdentifier	 Document Builder Factory
dbf	TokenNameIdentifier	 dbf
=	TokenNameEQUAL	
DocumentBuilderFactory	TokenNameIdentifier	 Document Builder Factory
.	TokenNameDOT	
newInstance	TokenNameIdentifier	 new Instance
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dbf	TokenNameIdentifier	 dbf
.	TokenNameDOT	
setNamespaceAware	TokenNameIdentifier	 set Namespace Aware
(	TokenNameLPAREN	
true	TokenNametrue	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dbf	TokenNameIdentifier	 dbf
.	TokenNameDOT	
setValidating	TokenNameIdentifier	 set Validating
(	TokenNameLPAREN	
false	TokenNamefalse	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
dbf	TokenNameIdentifier	 dbf
.	TokenNameDOT	
newDocumentBuilder	TokenNameIdentifier	 new Document Builder
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
ParserConfigurationException	TokenNameIdentifier	 Parser Configuration Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// this should never happen with a well-behaving JAXP implementation. 	TokenNameCOMMENT_LINE	this should never happen with a well-behaving JAXP implementation. 
throw	TokenNamethrow	
new	TokenNamenew	
Error	TokenNameIdentifier	 Error
(	TokenNameLPAREN	
e	TokenNameIdentifier	 e
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
private	TokenNameprivate	
static	TokenNamestatic	
Document	TokenNameIdentifier	 Document
getDummyDocument	TokenNameIdentifier	 get Dummy Document
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// we don't need synchronization here; even if two threads 	TokenNameCOMMENT_LINE	we don't need synchronization here; even if two threads 
// enter this code at the same time, we just waste a little time 	TokenNameCOMMENT_LINE	enter this code at the same time, we just waste a little time 
if	TokenNameif	
(	TokenNameLPAREN	
d	TokenNameIdentifier	 d
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
DOMImplementation	TokenNameIdentifier	 DOM Implementation
dim	TokenNameIdentifier	 dim
=	TokenNameEQUAL	
getParser	TokenNameIdentifier	 get Parser
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getDOMImplementation	TokenNameIdentifier	 get DOM Implementation
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
d	TokenNameIdentifier	 d
=	TokenNameEQUAL	
dim	TokenNameIdentifier	 dim
.	TokenNameDOT	
createDocument	TokenNameIdentifier	 create Document
(	TokenNameLPAREN	
"http://java.sun.com/jaxp/xpath"	TokenNameStringLiteral	http://java.sun.com/jaxp/xpath
,	TokenNameCOMMA	
"dummyroot"	TokenNameStringLiteral	dummyroot
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
d	TokenNameIdentifier	 d
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
XObject	TokenNameIdentifier	 X Object
eval	TokenNameIdentifier	 eval
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
expression	TokenNameIdentifier	 expression
,	TokenNameCOMMA	
Object	TokenNameIdentifier	 Object
contextItem	TokenNameIdentifier	 context Item
)	TokenNameRPAREN	
throws	TokenNamethrows	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
transform	TokenNameIdentifier	 transform
.	TokenNameDOT	
TransformerException	TokenNameIdentifier	 Transformer Exception
{	TokenNameLBRACE	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPath	TokenNameIdentifier	 X Path
xpath	TokenNameIdentifier	 xpath
=	TokenNameEQUAL	
new	TokenNamenew	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPath	TokenNameIdentifier	 X Path
(	TokenNameLPAREN	
expression	TokenNameIdentifier	 expression
,	TokenNameCOMMA	
null	TokenNamenull	
,	TokenNameCOMMA	
prefixResolver	TokenNameIdentifier	 prefix Resolver
,	TokenNameCOMMA	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPath	TokenNameIdentifier	 X Path
.	TokenNameDOT	
SELECT	TokenNameIdentifier	 SELECT
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPathContext	TokenNameIdentifier	 X Path Context
xpathSupport	TokenNameIdentifier	 xpath Support
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
// Create an XPathContext that doesn't support pushing and popping of 	TokenNameCOMMENT_LINE	Create an XPathContext that doesn't support pushing and popping of 
// variable resolution scopes. Sufficient for simple XPath 1.0 	TokenNameCOMMENT_LINE	variable resolution scopes. Sufficient for simple XPath 1.0 
// expressions. 	TokenNameCOMMENT_LINE	expressions. 
if	TokenNameif	
(	TokenNameLPAREN	
functionResolver	TokenNameIdentifier	 function Resolver
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
JAXPExtensionsProvider	TokenNameIdentifier	 JAXP Extensions Provider
jep	TokenNameIdentifier	 jep
=	TokenNameEQUAL	
new	TokenNamenew	
JAXPExtensionsProvider	TokenNameIdentifier	 JAXP Extensions Provider
(	TokenNameLPAREN	
functionResolver	TokenNameIdentifier	 function Resolver
,	TokenNameCOMMA	
featureSecureProcessing	TokenNameIdentifier	 feature Secure Processing
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
xpathSupport	TokenNameIdentifier	 xpath Support
=	TokenNameEQUAL	
new	TokenNamenew	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPathContext	TokenNameIdentifier	 X Path Context
(	TokenNameLPAREN	
jep	TokenNameIdentifier	 jep
,	TokenNameCOMMA	
false	TokenNamefalse	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
xpathSupport	TokenNameIdentifier	 xpath Support
=	TokenNameEQUAL	
new	TokenNamenew	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPathContext	TokenNameIdentifier	 X Path Context
(	TokenNameLPAREN	
false	TokenNamefalse	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
XObject	TokenNameIdentifier	 X Object
xobj	TokenNameIdentifier	 xobj
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
xpathSupport	TokenNameIdentifier	 xpath Support
.	TokenNameDOT	
setVarStack	TokenNameIdentifier	 set Var Stack
(	TokenNameLPAREN	
new	TokenNamenew	
JAXPVariableStack	TokenNameIdentifier	 JAXP Variable Stack
(	TokenNameLPAREN	
variableResolver	TokenNameIdentifier	 variable Resolver
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// If item is null, then we will create a a Dummy contextNode 	TokenNameCOMMENT_LINE	If item is null, then we will create a a Dummy contextNode 
if	TokenNameif	
(	TokenNameLPAREN	
contextItem	TokenNameIdentifier	 context Item
instanceof	TokenNameinstanceof	
Node	TokenNameIdentifier	 Node
)	TokenNameRPAREN	
{	TokenNameLBRACE	
xobj	TokenNameIdentifier	 xobj
=	TokenNameEQUAL	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
xpathSupport	TokenNameIdentifier	 xpath Support
,	TokenNameCOMMA	
(	TokenNameLPAREN	
Node	TokenNameIdentifier	 Node
)	TokenNameRPAREN	
contextItem	TokenNameIdentifier	 context Item
,	TokenNameCOMMA	
prefixResolver	TokenNameIdentifier	 prefix Resolver
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
xobj	TokenNameIdentifier	 xobj
=	TokenNameEQUAL	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
xpathSupport	TokenNameIdentifier	 xpath Support
,	TokenNameCOMMA	
DTM	TokenNameIdentifier	 DTM
.	TokenNameDOT	
NULL	TokenNameIdentifier	 NULL
,	TokenNameCOMMA	
prefixResolver	TokenNameIdentifier	 prefix Resolver
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
xobj	TokenNameIdentifier	 xobj
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * <p>Evaluate an <code>XPath</code> expression in the specified context and return the result as the specified type.</p> * * <p>See "Evaluation of XPath Expressions" section of JAXP 1.3 spec * for context item evaluation, * variable, function and <code>QName</code> resolution and return type conversion.</p> * * <p>If <code>returnType</code> is not one of the types defined in {@link XPathConstants} ( * {@link XPathConstants#NUMBER NUMBER}, * {@link XPathConstants#STRING STRING}, * {@link XPathConstants#BOOLEAN BOOLEAN}, * {@link XPathConstants#NODE NODE} or * {@link XPathConstants#NODESET NODESET}) * then an <code>IllegalArgumentException</code> is thrown.</p> * * <p>If a <code>null</code> value is provided for * <code>item</code>, an empty document will be used for the * context. * If <code>expression</code> or <code>returnType</code> is <code>null</code>, then a * <code>NullPointerException</code> is thrown.</p> * * @param expression The XPath expression. * @param item The starting context (node or node list, for example). * @param returnType The desired return type. * * @return Result of evaluating an XPath expression as an <code>Object</code> of <code>returnType</code>. * * @throws XPathExpressionException If <code>expression</code> cannot be evaluated. * @throws IllegalArgumentException If <code>returnType</code> is not one of the types defined in {@link XPathConstants}. * @throws NullPointerException If <code>expression</code> or <code>returnType</code> is <code>null</code>. */	TokenNameCOMMENT_JAVADOC	 <p>Evaluate an <code>XPath</code> expression in the specified context and return the result as the specified type.</p> * <p>See "Evaluation of XPath Expressions" section of JAXP 1.3 spec for context item evaluation, variable, function and <code>QName</code> resolution and return type conversion.</p> * <p>If <code>returnType</code> is not one of the types defined in {@link XPathConstants} ( {@link XPathConstants#NUMBER NUMBER}, {@link XPathConstants#STRING STRING}, {@link XPathConstants#BOOLEAN BOOLEAN}, {@link XPathConstants#NODE NODE} or {@link XPathConstants#NODESET NODESET}) then an <code>IllegalArgumentException</code> is thrown.</p> * <p>If a <code>null</code> value is provided for <code>item</code>, an empty document will be used for the context. If <code>expression</code> or <code>returnType</code> is <code>null</code>, then a <code>NullPointerException</code> is thrown.</p> * @param expression The XPath expression. @param item The starting context (node or node list, for example). @param returnType The desired return type. * @return Result of evaluating an XPath expression as an <code>Object</code> of <code>returnType</code>. * @throws XPathExpressionException If <code>expression</code> cannot be evaluated. @throws IllegalArgumentException If <code>returnType</code> is not one of the types defined in {@link XPathConstants}. @throws NullPointerException If <code>expression</code> or <code>returnType</code> is <code>null</code>. 
public	TokenNamepublic	
Object	TokenNameIdentifier	 Object
evaluate	TokenNameIdentifier	 evaluate
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
expression	TokenNameIdentifier	 expression
,	TokenNameCOMMA	
Object	TokenNameIdentifier	 Object
item	TokenNameIdentifier	 item
,	TokenNameCOMMA	
QName	TokenNameIdentifier	 Q Name
returnType	TokenNameIdentifier	 return Type
)	TokenNameRPAREN	
throws	TokenNamethrows	
XPathExpressionException	TokenNameIdentifier	 X Path Expression Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
expression	TokenNameIdentifier	 expression
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
fmsg	TokenNameIdentifier	 fmsg
=	TokenNameEQUAL	
XSLMessages	TokenNameIdentifier	 XSL Messages
.	TokenNameDOT	
createXPATHMessage	TokenNameIdentifier	 create XPATH Message
(	TokenNameLPAREN	
XPATHErrorResources	TokenNameIdentifier	 XPATH Error Resources
.	TokenNameDOT	
ER_ARG_CANNOT_BE_NULL	TokenNameIdentifier	 ER  ARG  CANNOT  BE  NULL
,	TokenNameCOMMA	
new	TokenNamenew	
Object	TokenNameIdentifier	 Object
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
"XPath expression"	TokenNameStringLiteral	XPath expression
}	TokenNameRBRACE	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
NullPointerException	TokenNameIdentifier	 Null Pointer Exception
(	TokenNameLPAREN	
fmsg	TokenNameIdentifier	 fmsg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
returnType	TokenNameIdentifier	 return Type
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
fmsg	TokenNameIdentifier	 fmsg
=	TokenNameEQUAL	
XSLMessages	TokenNameIdentifier	 XSL Messages
.	TokenNameDOT	
createXPATHMessage	TokenNameIdentifier	 create XPATH Message
(	TokenNameLPAREN	
XPATHErrorResources	TokenNameIdentifier	 XPATH Error Resources
.	TokenNameDOT	
ER_ARG_CANNOT_BE_NULL	TokenNameIdentifier	 ER  ARG  CANNOT  BE  NULL
,	TokenNameCOMMA	
new	TokenNamenew	
Object	TokenNameIdentifier	 Object
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
"returnType"	TokenNameStringLiteral	returnType
}	TokenNameRBRACE	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
NullPointerException	TokenNameIdentifier	 Null Pointer Exception
(	TokenNameLPAREN	
fmsg	TokenNameIdentifier	 fmsg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Checking if requested returnType is supported. returnType need to 	TokenNameCOMMENT_LINE	Checking if requested returnType is supported. returnType need to 
// be defined in XPathConstants 	TokenNameCOMMENT_LINE	be defined in XPathConstants 
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
isSupported	TokenNameIdentifier	 is Supported
(	TokenNameLPAREN	
returnType	TokenNameIdentifier	 return Type
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
fmsg	TokenNameIdentifier	 fmsg
=	TokenNameEQUAL	
XSLMessages	TokenNameIdentifier	 XSL Messages
.	TokenNameDOT	
createXPATHMessage	TokenNameIdentifier	 create XPATH Message
(	TokenNameLPAREN	
XPATHErrorResources	TokenNameIdentifier	 XPATH Error Resources
.	TokenNameDOT	
ER_UNSUPPORTED_RETURN_TYPE	TokenNameIdentifier	 ER  UNSUPPORTED  RETURN  TYPE
,	TokenNameCOMMA	
new	TokenNamenew	
Object	TokenNameIdentifier	 Object
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
returnType	TokenNameIdentifier	 return Type
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
}	TokenNameRBRACE	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
fmsg	TokenNameIdentifier	 fmsg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
XObject	TokenNameIdentifier	 X Object
resultObject	TokenNameIdentifier	 result Object
=	TokenNameEQUAL	
eval	TokenNameIdentifier	 eval
(	TokenNameLPAREN	
expression	TokenNameIdentifier	 expression
,	TokenNameCOMMA	
item	TokenNameIdentifier	 item
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
getResultAsType	TokenNameIdentifier	 get Result As Type
(	TokenNameLPAREN	
resultObject	TokenNameIdentifier	 result Object
,	TokenNameCOMMA	
returnType	TokenNameIdentifier	 return Type
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
lang	TokenNameIdentifier	 lang
.	TokenNameDOT	
NullPointerException	TokenNameIdentifier	 Null Pointer Exception
npe	TokenNameIdentifier	 npe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// If VariableResolver returns null Or if we get 	TokenNameCOMMENT_LINE	If VariableResolver returns null Or if we get 
// NullPointerException at this stage for some other reason 	TokenNameCOMMENT_LINE	NullPointerException at this stage for some other reason 
// then we have to reurn XPathException 	TokenNameCOMMENT_LINE	then we have to reurn XPathException 
throw	TokenNamethrow	
new	TokenNamenew	
XPathExpressionException	TokenNameIdentifier	 X Path Expression Exception
(	TokenNameLPAREN	
npe	TokenNameIdentifier	 npe
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
transform	TokenNameIdentifier	 transform
.	TokenNameDOT	
TransformerException	TokenNameIdentifier	 Transformer Exception
te	TokenNameIdentifier	 te
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Throwable	TokenNameIdentifier	 Throwable
nestedException	TokenNameIdentifier	 nested Exception
=	TokenNameEQUAL	
te	TokenNameIdentifier	 te
.	TokenNameDOT	
getException	TokenNameIdentifier	 get Exception
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
nestedException	TokenNameIdentifier	 nested Exception
instanceof	TokenNameinstanceof	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPathFunctionException	TokenNameIdentifier	 X Path Function Exception
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
(	TokenNameLPAREN	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPathFunctionException	TokenNameIdentifier	 X Path Function Exception
)	TokenNameRPAREN	
nestedException	TokenNameIdentifier	 nested Exception
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
// For any other exceptions we need to throw 	TokenNameCOMMENT_LINE	For any other exceptions we need to throw 
// XPathExpressionException ( as per spec ) 	TokenNameCOMMENT_LINE	XPathExpressionException ( as per spec ) 
throw	TokenNamethrow	
new	TokenNamenew	
XPathExpressionException	TokenNameIdentifier	 X Path Expression Exception
(	TokenNameLPAREN	
te	TokenNameIdentifier	 te
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
private	TokenNameprivate	
boolean	TokenNameboolean	
isSupported	TokenNameIdentifier	 is Supported
(	TokenNameLPAREN	
QName	TokenNameIdentifier	 Q Name
returnType	TokenNameIdentifier	 return Type
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
returnType	TokenNameIdentifier	 return Type
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
XPathConstants	TokenNameIdentifier	 X Path Constants
.	TokenNameDOT	
STRING	TokenNameIdentifier	 STRING
)	TokenNameRPAREN	
)	TokenNameRPAREN	
||	TokenNameOR_OR	
(	TokenNameLPAREN	
returnType	TokenNameIdentifier	 return Type
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
XPathConstants	TokenNameIdentifier	 X Path Constants
.	TokenNameDOT	
NUMBER	TokenNameIdentifier	 NUMBER
)	TokenNameRPAREN	
)	TokenNameRPAREN	
||	TokenNameOR_OR	
(	TokenNameLPAREN	
returnType	TokenNameIdentifier	 return Type
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
XPathConstants	TokenNameIdentifier	 X Path Constants
.	TokenNameDOT	
BOOLEAN	TokenNameIdentifier	 BOOLEAN
)	TokenNameRPAREN	
)	TokenNameRPAREN	
||	TokenNameOR_OR	
(	TokenNameLPAREN	
returnType	TokenNameIdentifier	 return Type
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
XPathConstants	TokenNameIdentifier	 X Path Constants
.	TokenNameDOT	
NODE	TokenNameIdentifier	 NODE
)	TokenNameRPAREN	
)	TokenNameRPAREN	
||	TokenNameOR_OR	
(	TokenNameLPAREN	
returnType	TokenNameIdentifier	 return Type
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
XPathConstants	TokenNameIdentifier	 X Path Constants
.	TokenNameDOT	
NODESET	TokenNameIdentifier	 NODESET
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
Object	TokenNameIdentifier	 Object
getResultAsType	TokenNameIdentifier	 get Result As Type
(	TokenNameLPAREN	
XObject	TokenNameIdentifier	 X Object
resultObject	TokenNameIdentifier	 result Object
,	TokenNameCOMMA	
QName	TokenNameIdentifier	 Q Name
returnType	TokenNameIdentifier	 return Type
)	TokenNameRPAREN	
throws	TokenNamethrows	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
transform	TokenNameIdentifier	 transform
.	TokenNameDOT	
TransformerException	TokenNameIdentifier	 Transformer Exception
{	TokenNameLBRACE	
// XPathConstants.STRING 	TokenNameCOMMENT_LINE	XPathConstants.STRING 
if	TokenNameif	
(	TokenNameLPAREN	
returnType	TokenNameIdentifier	 return Type
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
XPathConstants	TokenNameIdentifier	 X Path Constants
.	TokenNameDOT	
STRING	TokenNameIdentifier	 STRING
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
resultObject	TokenNameIdentifier	 result Object
.	TokenNameDOT	
str	TokenNameIdentifier	 str
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// XPathConstants.NUMBER 	TokenNameCOMMENT_LINE	XPathConstants.NUMBER 
if	TokenNameif	
(	TokenNameLPAREN	
returnType	TokenNameIdentifier	 return Type
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
XPathConstants	TokenNameIdentifier	 X Path Constants
.	TokenNameDOT	
NUMBER	TokenNameIdentifier	 NUMBER
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
new	TokenNamenew	
Double	TokenNameIdentifier	 Double
(	TokenNameLPAREN	
resultObject	TokenNameIdentifier	 result Object
.	TokenNameDOT	
num	TokenNameIdentifier	 num
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// XPathConstants.BOOLEAN 	TokenNameCOMMENT_LINE	XPathConstants.BOOLEAN 
if	TokenNameif	
(	TokenNameLPAREN	
returnType	TokenNameIdentifier	 return Type
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
XPathConstants	TokenNameIdentifier	 X Path Constants
.	TokenNameDOT	
BOOLEAN	TokenNameIdentifier	 BOOLEAN
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
new	TokenNamenew	
Boolean	TokenNameIdentifier	 Boolean
(	TokenNameLPAREN	
resultObject	TokenNameIdentifier	 result Object
.	TokenNameDOT	
bool	TokenNameIdentifier	 bool
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// XPathConstants.NODESET ---ORdered, UNOrdered??? 	TokenNameCOMMENT_LINE	XPathConstants.NODESET ---ORdered, UNOrdered??? 
if	TokenNameif	
(	TokenNameLPAREN	
returnType	TokenNameIdentifier	 return Type
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
XPathConstants	TokenNameIdentifier	 X Path Constants
.	TokenNameDOT	
NODESET	TokenNameIdentifier	 NODESET
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
resultObject	TokenNameIdentifier	 result Object
.	TokenNameDOT	
nodelist	TokenNameIdentifier	 nodelist
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// XPathConstants.NODE 	TokenNameCOMMENT_LINE	XPathConstants.NODE 
if	TokenNameif	
(	TokenNameLPAREN	
returnType	TokenNameIdentifier	 return Type
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
XPathConstants	TokenNameIdentifier	 X Path Constants
.	TokenNameDOT	
NODE	TokenNameIdentifier	 NODE
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
NodeIterator	TokenNameIdentifier	 Node Iterator
ni	TokenNameIdentifier	 ni
=	TokenNameEQUAL	
resultObject	TokenNameIdentifier	 result Object
.	TokenNameDOT	
nodeset	TokenNameIdentifier	 nodeset
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
//Return the first node, or null 	TokenNameCOMMENT_LINE	Return the first node, or null 
return	TokenNamereturn	
ni	TokenNameIdentifier	 ni
.	TokenNameDOT	
nextNode	TokenNameIdentifier	 next Node
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
String	TokenNameIdentifier	 String
fmsg	TokenNameIdentifier	 fmsg
=	TokenNameEQUAL	
XSLMessages	TokenNameIdentifier	 XSL Messages
.	TokenNameDOT	
createXPATHMessage	TokenNameIdentifier	 create XPATH Message
(	TokenNameLPAREN	
XPATHErrorResources	TokenNameIdentifier	 XPATH Error Resources
.	TokenNameDOT	
ER_UNSUPPORTED_RETURN_TYPE	TokenNameIdentifier	 ER  UNSUPPORTED  RETURN  TYPE
,	TokenNameCOMMA	
new	TokenNamenew	
Object	TokenNameIdentifier	 Object
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
returnType	TokenNameIdentifier	 return Type
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
}	TokenNameRBRACE	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
fmsg	TokenNameIdentifier	 fmsg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * <p>Evaluate an XPath expression in the specified context and return the result as a <code>String</code>.</p> * * <p>This method calls {@link #evaluate(String expression, Object item, QName returnType)} with a <code>returnType</code> of * {@link XPathConstants#STRING}.</p> * * <p>See "Evaluation of XPath Expressions" of JAXP 1.3 spec * for context item evaluation, * variable, function and QName resolution and return type conversion.</p> * * <p>If a <code>null</code> value is provided for * <code>item</code>, an empty document will be used for the * context. * If <code>expression</code> is <code>null</code>, then a <code>NullPointerException</code> is thrown.</p> * * @param expression The XPath expression. * @param item The starting context (node or node list, for example). * * @return The <code>String</code> that is the result of evaluating the expression and * converting the result to a <code>String</code>. * * @throws XPathExpressionException If <code>expression</code> cannot be evaluated. * @throws NullPointerException If <code>expression</code> is <code>null</code>. */	TokenNameCOMMENT_JAVADOC	 <p>Evaluate an XPath expression in the specified context and return the result as a <code>String</code>.</p> * <p>This method calls {@link #evaluate(String expression, Object item, QName returnType)} with a <code>returnType</code> of {@link XPathConstants#STRING}.</p> * <p>See "Evaluation of XPath Expressions" of JAXP 1.3 spec for context item evaluation, variable, function and QName resolution and return type conversion.</p> * <p>If a <code>null</code> value is provided for <code>item</code>, an empty document will be used for the context. If <code>expression</code> is <code>null</code>, then a <code>NullPointerException</code> is thrown.</p> * @param expression The XPath expression. @param item The starting context (node or node list, for example). * @return The <code>String</code> that is the result of evaluating the expression and converting the result to a <code>String</code>. * @throws XPathExpressionException If <code>expression</code> cannot be evaluated. @throws NullPointerException If <code>expression</code> is <code>null</code>. 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
evaluate	TokenNameIdentifier	 evaluate
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
expression	TokenNameIdentifier	 expression
,	TokenNameCOMMA	
Object	TokenNameIdentifier	 Object
item	TokenNameIdentifier	 item
)	TokenNameRPAREN	
throws	TokenNamethrows	
XPathExpressionException	TokenNameIdentifier	 X Path Expression Exception
{	TokenNameLBRACE	
return	TokenNamereturn	
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
this	TokenNamethis	
.	TokenNameDOT	
evaluate	TokenNameIdentifier	 evaluate
(	TokenNameLPAREN	
expression	TokenNameIdentifier	 expression
,	TokenNameCOMMA	
item	TokenNameIdentifier	 item
,	TokenNameCOMMA	
XPathConstants	TokenNameIdentifier	 X Path Constants
.	TokenNameDOT	
STRING	TokenNameIdentifier	 STRING
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * <p>Compile an XPath expression for later evaluation.</p> * * <p>If <code>expression</code> contains any {@link XPathFunction}s, * they must be available via the {@link XPathFunctionResolver}. * An {@link XPathExpressionException} will be thrown if the <code>XPathFunction</code> * cannot be resovled with the <code>XPathFunctionResolver</code>.</p> * * <p>If <code>expression</code> is <code>null</code>, a <code>NullPointerException</code> is thrown.</p> * * @param expression The XPath expression. * * @return Compiled XPath expression. * @throws XPathExpressionException If <code>expression</code> cannot be compiled. * @throws NullPointerException If <code>expression</code> is <code>null</code>. */	TokenNameCOMMENT_JAVADOC	 <p>Compile an XPath expression for later evaluation.</p> * <p>If <code>expression</code> contains any {@link XPathFunction}s, they must be available via the {@link XPathFunctionResolver}. An {@link XPathExpressionException} will be thrown if the <code>XPathFunction</code> cannot be resovled with the <code>XPathFunctionResolver</code>.</p> * <p>If <code>expression</code> is <code>null</code>, a <code>NullPointerException</code> is thrown.</p> * @param expression The XPath expression. * @return Compiled XPath expression. @throws XPathExpressionException If <code>expression</code> cannot be compiled. @throws NullPointerException If <code>expression</code> is <code>null</code>. 
public	TokenNamepublic	
XPathExpression	TokenNameIdentifier	 X Path Expression
compile	TokenNameIdentifier	 compile
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
expression	TokenNameIdentifier	 expression
)	TokenNameRPAREN	
throws	TokenNamethrows	
XPathExpressionException	TokenNameIdentifier	 X Path Expression Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
expression	TokenNameIdentifier	 expression
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
fmsg	TokenNameIdentifier	 fmsg
=	TokenNameEQUAL	
XSLMessages	TokenNameIdentifier	 XSL Messages
.	TokenNameDOT	
createXPATHMessage	TokenNameIdentifier	 create XPATH Message
(	TokenNameLPAREN	
XPATHErrorResources	TokenNameIdentifier	 XPATH Error Resources
.	TokenNameDOT	
ER_ARG_CANNOT_BE_NULL	TokenNameIdentifier	 ER  ARG  CANNOT  BE  NULL
,	TokenNameCOMMA	
new	TokenNamenew	
Object	TokenNameIdentifier	 Object
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
"XPath expression"	TokenNameStringLiteral	XPath expression
}	TokenNameRBRACE	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
NullPointerException	TokenNameIdentifier	 Null Pointer Exception
(	TokenNameLPAREN	
fmsg	TokenNameIdentifier	 fmsg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPath	TokenNameIdentifier	 X Path
xpath	TokenNameIdentifier	 xpath
=	TokenNameEQUAL	
new	TokenNamenew	
XPath	TokenNameIdentifier	 X Path
(	TokenNameLPAREN	
expression	TokenNameIdentifier	 expression
,	TokenNameCOMMA	
null	TokenNamenull	
,	TokenNameCOMMA	
prefixResolver	TokenNameIdentifier	 prefix Resolver
,	TokenNameCOMMA	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPath	TokenNameIdentifier	 X Path
.	TokenNameDOT	
SELECT	TokenNameIdentifier	 SELECT
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Can have errorListener 	TokenNameCOMMENT_LINE	Can have errorListener 
XPathExpressionImpl	TokenNameIdentifier	 X Path Expression Impl
ximpl	TokenNameIdentifier	 ximpl
=	TokenNameEQUAL	
new	TokenNamenew	
XPathExpressionImpl	TokenNameIdentifier	 X Path Expression Impl
(	TokenNameLPAREN	
xpath	TokenNameIdentifier	 xpath
,	TokenNameCOMMA	
prefixResolver	TokenNameIdentifier	 prefix Resolver
,	TokenNameCOMMA	
functionResolver	TokenNameIdentifier	 function Resolver
,	TokenNameCOMMA	
variableResolver	TokenNameIdentifier	 variable Resolver
,	TokenNameCOMMA	
featureSecureProcessing	TokenNameIdentifier	 feature Secure Processing
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
ximpl	TokenNameIdentifier	 ximpl
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
transform	TokenNameIdentifier	 transform
.	TokenNameDOT	
TransformerException	TokenNameIdentifier	 Transformer Exception
te	TokenNameIdentifier	 te
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
XPathExpressionException	TokenNameIdentifier	 X Path Expression Exception
(	TokenNameLPAREN	
te	TokenNameIdentifier	 te
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * <p>Evaluate an XPath expression in the context of the specified <code>InputSource</code> * and return the result as the specified type.</p> * * <p>This method builds a data model for the {@link InputSource} and calls * {@link #evaluate(String expression, Object item, QName returnType)} on the resulting document object.</p> * * <p>See "Evaluation of XPath Expressions" section of JAXP 1.3 spec * for context item evaluation, * variable, function and QName resolution and return type conversion.</p> * * <p>If <code>returnType</code> is not one of the types defined in {@link XPathConstants}, * then an <code>IllegalArgumentException</code> is thrown.</p> * * <p>If <code>expression</code>, <code>source</code> or <code>returnType</code> is <code>null</code>, * then a <code>NullPointerException</code> is thrown.</p> * * @param expression The XPath expression. * @param source The input source of the document to evaluate over. * @param returnType The desired return type. * * @return The <code>Object</code> that encapsulates the result of evaluating the expression. * * @throws XPathExpressionException If expression cannot be evaluated. * @throws IllegalArgumentException If <code>returnType</code> is not one of the types defined in {@link XPathConstants}. * @throws NullPointerException If <code>expression</code>, <code>source</code> or <code>returnType</code> * is <code>null</code>. */	TokenNameCOMMENT_JAVADOC	 <p>Evaluate an XPath expression in the context of the specified <code>InputSource</code> and return the result as the specified type.</p> * <p>This method builds a data model for the {@link InputSource} and calls {@link #evaluate(String expression, Object item, QName returnType)} on the resulting document object.</p> * <p>See "Evaluation of XPath Expressions" section of JAXP 1.3 spec for context item evaluation, variable, function and QName resolution and return type conversion.</p> * <p>If <code>returnType</code> is not one of the types defined in {@link XPathConstants}, then an <code>IllegalArgumentException</code> is thrown.</p> * <p>If <code>expression</code>, <code>source</code> or <code>returnType</code> is <code>null</code>, then a <code>NullPointerException</code> is thrown.</p> * @param expression The XPath expression. @param source The input source of the document to evaluate over. @param returnType The desired return type. * @return The <code>Object</code> that encapsulates the result of evaluating the expression. * @throws XPathExpressionException If expression cannot be evaluated. @throws IllegalArgumentException If <code>returnType</code> is not one of the types defined in {@link XPathConstants}. @throws NullPointerException If <code>expression</code>, <code>source</code> or <code>returnType</code> is <code>null</code>. 
public	TokenNamepublic	
Object	TokenNameIdentifier	 Object
evaluate	TokenNameIdentifier	 evaluate
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
expression	TokenNameIdentifier	 expression
,	TokenNameCOMMA	
InputSource	TokenNameIdentifier	 Input Source
source	TokenNameIdentifier	 source
,	TokenNameCOMMA	
QName	TokenNameIdentifier	 Q Name
returnType	TokenNameIdentifier	 return Type
)	TokenNameRPAREN	
throws	TokenNamethrows	
XPathExpressionException	TokenNameIdentifier	 X Path Expression Exception
{	TokenNameLBRACE	
// Checking validity of different parameters 	TokenNameCOMMENT_LINE	Checking validity of different parameters 
if	TokenNameif	
(	TokenNameLPAREN	
source	TokenNameIdentifier	 source
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
fmsg	TokenNameIdentifier	 fmsg
=	TokenNameEQUAL	
XSLMessages	TokenNameIdentifier	 XSL Messages
.	TokenNameDOT	
createXPATHMessage	TokenNameIdentifier	 create XPATH Message
(	TokenNameLPAREN	
XPATHErrorResources	TokenNameIdentifier	 XPATH Error Resources
.	TokenNameDOT	
ER_ARG_CANNOT_BE_NULL	TokenNameIdentifier	 ER  ARG  CANNOT  BE  NULL
,	TokenNameCOMMA	
new	TokenNamenew	
Object	TokenNameIdentifier	 Object
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
"source"	TokenNameStringLiteral	source
}	TokenNameRBRACE	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
NullPointerException	TokenNameIdentifier	 Null Pointer Exception
(	TokenNameLPAREN	
fmsg	TokenNameIdentifier	 fmsg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
expression	TokenNameIdentifier	 expression
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
fmsg	TokenNameIdentifier	 fmsg
=	TokenNameEQUAL	
XSLMessages	TokenNameIdentifier	 XSL Messages
.	TokenNameDOT	
createXPATHMessage	TokenNameIdentifier	 create XPATH Message
(	TokenNameLPAREN	
XPATHErrorResources	TokenNameIdentifier	 XPATH Error Resources
.	TokenNameDOT	
ER_ARG_CANNOT_BE_NULL	TokenNameIdentifier	 ER  ARG  CANNOT  BE  NULL
,	TokenNameCOMMA	
new	TokenNamenew	
Object	TokenNameIdentifier	 Object
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
"XPath expression"	TokenNameStringLiteral	XPath expression
}	TokenNameRBRACE	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
NullPointerException	TokenNameIdentifier	 Null Pointer Exception
(	TokenNameLPAREN	
fmsg	TokenNameIdentifier	 fmsg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
returnType	TokenNameIdentifier	 return Type
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
fmsg	TokenNameIdentifier	 fmsg
=	TokenNameEQUAL	
XSLMessages	TokenNameIdentifier	 XSL Messages
.	TokenNameDOT	
createXPATHMessage	TokenNameIdentifier	 create XPATH Message
(	TokenNameLPAREN	
XPATHErrorResources	TokenNameIdentifier	 XPATH Error Resources
.	TokenNameDOT	
ER_ARG_CANNOT_BE_NULL	TokenNameIdentifier	 ER  ARG  CANNOT  BE  NULL
,	TokenNameCOMMA	
new	TokenNamenew	
Object	TokenNameIdentifier	 Object
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
"returnType"	TokenNameStringLiteral	returnType
}	TokenNameRBRACE	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
NullPointerException	TokenNameIdentifier	 Null Pointer Exception
(	TokenNameLPAREN	
fmsg	TokenNameIdentifier	 fmsg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
//Checking if requested returnType is supported. 	TokenNameCOMMENT_LINE	Checking if requested returnType is supported. 
//returnType need to be defined in XPathConstants 	TokenNameCOMMENT_LINE	returnType need to be defined in XPathConstants 
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
isSupported	TokenNameIdentifier	 is Supported
(	TokenNameLPAREN	
returnType	TokenNameIdentifier	 return Type
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
fmsg	TokenNameIdentifier	 fmsg
=	TokenNameEQUAL	
XSLMessages	TokenNameIdentifier	 XSL Messages
.	TokenNameDOT	
createXPATHMessage	TokenNameIdentifier	 create XPATH Message
(	TokenNameLPAREN	
XPATHErrorResources	TokenNameIdentifier	 XPATH Error Resources
.	TokenNameDOT	
ER_UNSUPPORTED_RETURN_TYPE	TokenNameIdentifier	 ER  UNSUPPORTED  RETURN  TYPE
,	TokenNameCOMMA	
new	TokenNamenew	
Object	TokenNameIdentifier	 Object
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
returnType	TokenNameIdentifier	 return Type
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
}	TokenNameRBRACE	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
fmsg	TokenNameIdentifier	 fmsg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
Document	TokenNameIdentifier	 Document
document	TokenNameIdentifier	 document
=	TokenNameEQUAL	
getParser	TokenNameIdentifier	 get Parser
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
parse	TokenNameIdentifier	 parse
(	TokenNameLPAREN	
source	TokenNameIdentifier	 source
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
XObject	TokenNameIdentifier	 X Object
resultObject	TokenNameIdentifier	 result Object
=	TokenNameEQUAL	
eval	TokenNameIdentifier	 eval
(	TokenNameLPAREN	
expression	TokenNameIdentifier	 expression
,	TokenNameCOMMA	
document	TokenNameIdentifier	 document
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
getResultAsType	TokenNameIdentifier	 get Result As Type
(	TokenNameLPAREN	
resultObject	TokenNameIdentifier	 result Object
,	TokenNameCOMMA	
returnType	TokenNameIdentifier	 return Type
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
SAXException	TokenNameIdentifier	 SAX Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
XPathExpressionException	TokenNameIdentifier	 X Path Expression Exception
(	TokenNameLPAREN	
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
XPathExpressionException	TokenNameIdentifier	 X Path Expression Exception
(	TokenNameLPAREN	
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
transform	TokenNameIdentifier	 transform
.	TokenNameDOT	
TransformerException	TokenNameIdentifier	 Transformer Exception
te	TokenNameIdentifier	 te
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Throwable	TokenNameIdentifier	 Throwable
nestedException	TokenNameIdentifier	 nested Exception
=	TokenNameEQUAL	
te	TokenNameIdentifier	 te
.	TokenNameDOT	
getException	TokenNameIdentifier	 get Exception
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
nestedException	TokenNameIdentifier	 nested Exception
instanceof	TokenNameinstanceof	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPathFunctionException	TokenNameIdentifier	 X Path Function Exception
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
(	TokenNameLPAREN	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
xpath	TokenNameIdentifier	 xpath
.	TokenNameDOT	
XPathFunctionException	TokenNameIdentifier	 X Path Function Exception
)	TokenNameRPAREN	
nestedException	TokenNameIdentifier	 nested Exception
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
XPathExpressionException	TokenNameIdentifier	 X Path Expression Exception
(	TokenNameLPAREN	
te	TokenNameIdentifier	 te
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * <p>Evaluate an XPath expression in the context of the specified <code>InputSource</code> * and return the result as a <code>String</code>.</p> * * <p>This method calls {@link #evaluate(String expression, InputSource source, QName returnType)} with a * <code>returnType</code> of {@link XPathConstants#STRING}.</p> * * <p>See "Evaluation of XPath Expressions" section of JAXP 1.3 spec * for context item evaluation, * variable, function and QName resolution and return type conversion.</p> * * <p>If <code>expression</code> or <code>source</code> is <code>null</code>, * then a <code>NullPointerException</code> is thrown.</p> * * @param expression The XPath expression. * @param source The <code>InputSource</code> of the document to evaluate over. * * @return The <code>String</code> that is the result of evaluating the expression and * converting the result to a <code>String</code>. * * @throws XPathExpressionException If expression cannot be evaluated. * @throws NullPointerException If <code>expression</code> or <code>source</code> is <code>null</code>. */	TokenNameCOMMENT_JAVADOC	 <p>Evaluate an XPath expression in the context of the specified <code>InputSource</code> and return the result as a <code>String</code>.</p> * <p>This method calls {@link #evaluate(String expression, InputSource source, QName returnType)} with a <code>returnType</code> of {@link XPathConstants#STRING}.</p> * <p>See "Evaluation of XPath Expressions" section of JAXP 1.3 spec for context item evaluation, variable, function and QName resolution and return type conversion.</p> * <p>If <code>expression</code> or <code>source</code> is <code>null</code>, then a <code>NullPointerException</code> is thrown.</p> * @param expression The XPath expression. @param source The <code>InputSource</code> of the document to evaluate over. * @return The <code>String</code> that is the result of evaluating the expression and converting the result to a <code>String</code>. * @throws XPathExpressionException If expression cannot be evaluated. @throws NullPointerException If <code>expression</code> or <code>source</code> is <code>null</code>. 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
evaluate	TokenNameIdentifier	 evaluate
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
expression	TokenNameIdentifier	 expression
,	TokenNameCOMMA	
InputSource	TokenNameIdentifier	 Input Source
source	TokenNameIdentifier	 source
)	TokenNameRPAREN	
throws	TokenNamethrows	
XPathExpressionException	TokenNameIdentifier	 X Path Expression Exception
{	TokenNameLBRACE	
return	TokenNamereturn	
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
this	TokenNamethis	
.	TokenNameDOT	
evaluate	TokenNameIdentifier	 evaluate
(	TokenNameLPAREN	
expression	TokenNameIdentifier	 expression
,	TokenNameCOMMA	
source	TokenNameIdentifier	 source
,	TokenNameCOMMA	
XPathConstants	TokenNameIdentifier	 X Path Constants
.	TokenNameDOT	
STRING	TokenNameIdentifier	 STRING
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * <p>Reset this <code>XPath</code> to its original configuration.</p> * * <p><code>XPath</code> is reset to the same state as when it was created with * {@link XPathFactory#newXPath()}. * <code>reset()</code> is designed to allow the reuse of existing <code>XPath</code>s * thus saving resources associated with the creation of new <code>XPath</code>s.</p> * * <p>The reset <code>XPath</code> is not guaranteed to have the same * {@link XPathFunctionResolver}, {@link XPathVariableResolver} * or {@link NamespaceContext} <code>Object</code>s, e.g. {@link Object#equals(Object obj)}. * It is guaranteed to have a functionally equal <code>XPathFunctionResolver</code>, * <code>XPathVariableResolver</code> * and <code>NamespaceContext</code>.</p> */	TokenNameCOMMENT_JAVADOC	 <p>Reset this <code>XPath</code> to its original configuration.</p> * <p><code>XPath</code> is reset to the same state as when it was created with {@link XPathFactory#newXPath()}. <code>reset()</code> is designed to allow the reuse of existing <code>XPath</code>s thus saving resources associated with the creation of new <code>XPath</code>s.</p> * <p>The reset <code>XPath</code> is not guaranteed to have the same {@link XPathFunctionResolver}, {@link XPathVariableResolver} or {@link NamespaceContext} <code>Object</code>s, e.g. {@link Object#equals(Object obj)}. It is guaranteed to have a functionally equal <code>XPathFunctionResolver</code>, <code>XPathVariableResolver</code> and <code>NamespaceContext</code>.</p> 
public	TokenNamepublic	
void	TokenNamevoid	
reset	TokenNameIdentifier	 reset
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
variableResolver	TokenNameIdentifier	 variable Resolver
=	TokenNameEQUAL	
this	TokenNamethis	
.	TokenNameDOT	
origVariableResolver	TokenNameIdentifier	 orig Variable Resolver
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
functionResolver	TokenNameIdentifier	 function Resolver
=	TokenNameEQUAL	
this	TokenNamethis	
.	TokenNameDOT	
origFunctionResolver	TokenNameIdentifier	 orig Function Resolver
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
namespaceContext	TokenNameIdentifier	 namespace Context
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
