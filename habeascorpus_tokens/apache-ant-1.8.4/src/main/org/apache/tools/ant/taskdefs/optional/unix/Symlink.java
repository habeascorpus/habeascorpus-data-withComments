/* * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the "License"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. * */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
/* * Since the initial version of this file was developed on the clock on * an NSF grant I should say the following boilerplate: * * This material is based upon work supported by the National Science * Foundaton under Grant No. EIA-0196404. Any opinions, findings, and * conclusions or recommendations expressed in this material are those * of the author and do not necessarily reflect the views of the * National Science Foundation. */	TokenNameCOMMENT_BLOCK	 Since the initial version of this file was developed on the clock on an NSF grant I should say the following boilerplate: * This material is based upon work supported by the National Science Foundaton under Grant No. EIA-0196404. Any opinions, findings, and conclusions or recommendations expressed in this material are those of the author and do not necessarily reflect the views of the National Science Foundation. 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
taskdefs	TokenNameIdentifier	 taskdefs
.	TokenNameDOT	
optional	TokenNameIdentifier	 optional
.	TokenNameDOT	
unix	TokenNameIdentifier	 unix
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
BufferedInputStream	TokenNameIdentifier	 Buffered Input Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
BufferedOutputStream	TokenNameIdentifier	 Buffered Output Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
File	TokenNameIdentifier	 File
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
FileInputStream	TokenNameIdentifier	 File Input Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
FileNotFoundException	TokenNameIdentifier	 File Not Found Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
FileOutputStream	TokenNameIdentifier	 File Output Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
IOException	TokenNameIdentifier	 IO Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
InputStream	TokenNameIdentifier	 Input Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
PrintStream	TokenNameIdentifier	 Print Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
HashSet	TokenNameIdentifier	 Hash Set
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Hashtable	TokenNameIdentifier	 Hashtable
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Iterator	TokenNameIdentifier	 Iterator
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Properties	TokenNameIdentifier	 Properties
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Vector	TokenNameIdentifier	 Vector
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
BuildException	TokenNameIdentifier	 Build Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
DirectoryScanner	TokenNameIdentifier	 Directory Scanner
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
Project	TokenNameIdentifier	 Project
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
dispatch	TokenNameIdentifier	 dispatch
.	TokenNameDOT	
DispatchTask	TokenNameIdentifier	 Dispatch Task
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
dispatch	TokenNameIdentifier	 dispatch
.	TokenNameDOT	
DispatchUtils	TokenNameIdentifier	 Dispatch Utils
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
taskdefs	TokenNameIdentifier	 taskdefs
.	TokenNameDOT	
Execute	TokenNameIdentifier	 Execute
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
taskdefs	TokenNameIdentifier	 taskdefs
.	TokenNameDOT	
LogOutputStream	TokenNameIdentifier	 Log Output Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
FileSet	TokenNameIdentifier	 File Set
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
FileUtils	TokenNameIdentifier	 File Utils
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
SymbolicLinkUtils	TokenNameIdentifier	 Symbolic Link Utils
;	TokenNameSEMICOLON	
/** * Creates, Deletes, Records and Restores Symlinks. * * <p> This task performs several related operations. In the most trivial * and default usage, it creates a link specified in the link attribute to * a resource specified in the resource attribute. The second usage of this * task is to traverse a directory structure specified by a fileset, * and write a properties file in each included directory describing the * links found in that directory. The third usage is to traverse a * directory structure specified by a fileset, looking for properties files * (also specified as included in the fileset) and recreate the links * that have been previously recorded for each directory. Finally, it can be * used to remove a symlink without deleting the associated resource. * * <p> Usage examples: * * <p> Make a link named &quot;foo&quot; to a resource named * &quot;bar.foo&quot; in subdir: * <pre> * &lt;symlink link=&quot;${dir.top}/foo&quot; resource=&quot;${dir.top}/subdir/bar.foo&quot;/&gt; * </pre> * * <p> Record all links in subdir and its descendants in files named * &quot;dir.links&quot;: * <pre> * &lt;symlink action=&quot;record&quot; linkfilename=&quot;dir.links&quot;&gt; * &lt;fileset dir=&quot;${dir.top}&quot; includes=&quot;subdir&#47;**&quot; /&gt; * &lt;/symlink&gt; * </pre> * * <p> Recreate the links recorded in the previous example: * <pre> * &lt;symlink action=&quot;recreate&quot;&gt; * &lt;fileset dir=&quot;${dir.top}&quot; includes=&quot;subdir&#47;**&#47;dir.links&quot; /&gt; * &lt;/symlink&gt; * </pre> * * <p> Delete a link named &quot;foo&quot; to a resource named * &quot;bar.foo&quot; in subdir: * <pre> * &lt;symlink action=&quot;delete&quot; link=&quot;${dir.top}/foo&quot;/&gt; * </pre> * * <p><strong>LIMITATIONS:</strong> Because Java has no direct support for * handling symlinks this task divines them by comparing canonical and * absolute paths. On non-unix systems this may cause false positives. * Furthermore, any operating system on which the command * <code>ln -s link resource</code> is not a valid command on the command line * will not be able to use action=&quot;delete&quot;, action=&quot;single&quot; * or action=&quot;recreate&quot;, but action=&quot;record&quot; should still * work. Finally, the lack of support for symlinks in Java means that all links * are recorded as links to the <strong>canonical</strong> resource name. * Therefore the link: <code>link --> subdir/dir/../foo.bar</code> will be * recorded as <code>link=subdir/foo.bar</code> and restored as * <code>link --> subdir/foo.bar</code>. * */	TokenNameCOMMENT_JAVADOC	 Creates, Deletes, Records and Restores Symlinks. * <p> This task performs several related operations. In the most trivial and default usage, it creates a link specified in the link attribute to a resource specified in the resource attribute. The second usage of this task is to traverse a directory structure specified by a fileset, and write a properties file in each included directory describing the links found in that directory. The third usage is to traverse a directory structure specified by a fileset, looking for properties files (also specified as included in the fileset) and recreate the links that have been previously recorded for each directory. Finally, it can be used to remove a symlink without deleting the associated resource. * <p> Usage examples: * <p> Make a link named &quot;foo&quot; to a resource named &quot;bar.foo&quot; in subdir: <pre> &lt;symlink link=&quot;${dir.top}/foo&quot; resource=&quot;${dir.top}/subdir/bar.foo&quot;/&gt; </pre> * <p> Record all links in subdir and its descendants in files named &quot;dir.links&quot;: <pre> &lt;symlink action=&quot;record&quot; linkfilename=&quot;dir.links&quot;&gt; &lt;fileset dir=&quot;${dir.top}&quot; includes=&quot;subdir&#47;**&quot; /&gt; &lt;/symlink&gt; </pre> * <p> Recreate the links recorded in the previous example: <pre> &lt;symlink action=&quot;recreate&quot;&gt; &lt;fileset dir=&quot;${dir.top}&quot; includes=&quot;subdir&#47;**&#47;dir.links&quot; /&gt; &lt;/symlink&gt; </pre> * <p> Delete a link named &quot;foo&quot; to a resource named &quot;bar.foo&quot; in subdir: <pre> &lt;symlink action=&quot;delete&quot; link=&quot;${dir.top}/foo&quot;/&gt; </pre> * <p><strong>LIMITATIONS:</strong> Because Java has no direct support for handling symlinks this task divines them by comparing canonical and absolute paths. On non-unix systems this may cause false positives. Furthermore, any operating system on which the command <code>ln -s link resource</code> is not a valid command on the command line will not be able to use action=&quot;delete&quot;, action=&quot;single&quot; or action=&quot;recreate&quot;, but action=&quot;record&quot; should still work. Finally, the lack of support for symlinks in Java means that all links are recorded as links to the <strong>canonical</strong> resource name. Therefore the link: <code>link --> subdir/dir/../foo.bar</code> will be recorded as <code>link=subdir/foo.bar</code> and restored as <code>link --> subdir/foo.bar</code>. 
public	TokenNamepublic	
class	TokenNameclass	
Symlink	TokenNameIdentifier	 Symlink
extends	TokenNameextends	
DispatchTask	TokenNameIdentifier	 Dispatch Task
{	TokenNameLBRACE	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
FileUtils	TokenNameIdentifier	 File Utils
FILE_UTILS	TokenNameIdentifier	 FILE  UTILS
=	TokenNameEQUAL	
FileUtils	TokenNameIdentifier	 File Utils
.	TokenNameDOT	
getFileUtils	TokenNameIdentifier	 get File Utils
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
SymbolicLinkUtils	TokenNameIdentifier	 Symbolic Link Utils
SYMLINK_UTILS	TokenNameIdentifier	 SYMLINK  UTILS
=	TokenNameEQUAL	
SymbolicLinkUtils	TokenNameIdentifier	 Symbolic Link Utils
.	TokenNameDOT	
getSymbolicLinkUtils	TokenNameIdentifier	 get Symbolic Link Utils
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
String	TokenNameIdentifier	 String
resource	TokenNameIdentifier	 resource
;	TokenNameSEMICOLON	
private	TokenNameprivate	
String	TokenNameIdentifier	 String
link	TokenNameIdentifier	 link
;	TokenNameSEMICOLON	
private	TokenNameprivate	
Vector	TokenNameIdentifier	 Vector
fileSets	TokenNameIdentifier	 file Sets
=	TokenNameEQUAL	
new	TokenNamenew	
Vector	TokenNameIdentifier	 Vector
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
String	TokenNameIdentifier	 String
linkFileName	TokenNameIdentifier	 link File Name
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
overwrite	TokenNameIdentifier	 overwrite
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
failonerror	TokenNameIdentifier	 failonerror
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
executing	TokenNameIdentifier	 executing
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
/** * Initialize the task. * @throws BuildException on error. */	TokenNameCOMMENT_JAVADOC	 Initialize the task. @throws BuildException on error. 
public	TokenNamepublic	
void	TokenNamevoid	
init	TokenNameIdentifier	 init
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
super	TokenNamesuper	
.	TokenNameDOT	
init	TokenNameIdentifier	 init
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
setDefaults	TokenNameIdentifier	 set Defaults
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * The standard method for executing any task. * @throws BuildException on error. */	TokenNameCOMMENT_JAVADOC	 The standard method for executing any task. @throws BuildException on error. 
public	TokenNamepublic	
synchronized	TokenNamesynchronized	
void	TokenNamevoid	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
executing	TokenNameIdentifier	 executing
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"Infinite recursion detected in Symlink.execute()"	TokenNameStringLiteral	Infinite recursion detected in Symlink.execute()
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
executing	TokenNameIdentifier	 executing
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
DispatchUtils	TokenNameIdentifier	 Dispatch Utils
.	TokenNameDOT	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
this	TokenNamethis	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
executing	TokenNameIdentifier	 executing
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Create a symlink. * @throws BuildException on error. * @since Ant 1.7 */	TokenNameCOMMENT_JAVADOC	 Create a symlink. @throws BuildException on error. @since Ant 1.7 
public	TokenNamepublic	
void	TokenNamevoid	
single	TokenNameIdentifier	 single
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
resource	TokenNameIdentifier	 resource
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
handleError	TokenNameIdentifier	 handle Error
(	TokenNameLPAREN	
"Must define the resource to symlink to!"	TokenNameStringLiteral	Must define the resource to symlink to!
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
link	TokenNameIdentifier	 link
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
handleError	TokenNameIdentifier	 handle Error
(	TokenNameLPAREN	
"Must define the link name for symlink!"	TokenNameStringLiteral	Must define the link name for symlink!
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
doLink	TokenNameIdentifier	 do Link
(	TokenNameLPAREN	
resource	TokenNameIdentifier	 resource
,	TokenNameCOMMA	
link	TokenNameIdentifier	 link
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
setDefaults	TokenNameIdentifier	 set Defaults
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Delete a symlink. * @throws BuildException on error. * @since Ant 1.7 */	TokenNameCOMMENT_JAVADOC	 Delete a symlink. @throws BuildException on error. @since Ant 1.7 
public	TokenNamepublic	
void	TokenNamevoid	
delete	TokenNameIdentifier	 delete
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
link	TokenNameIdentifier	 link
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
handleError	TokenNameIdentifier	 handle Error
(	TokenNameLPAREN	
"Must define the link name for symlink!"	TokenNameStringLiteral	Must define the link name for symlink!
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Removing symlink: "	TokenNameStringLiteral	Removing symlink: 
+	TokenNamePLUS	
link	TokenNameIdentifier	 link
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
SYMLINK_UTILS	TokenNameIdentifier	 SYMLINK  UTILS
.	TokenNameDOT	
deleteSymbolicLink	TokenNameIdentifier	 delete Symbolic Link
(	TokenNameLPAREN	
FILE_UTILS	TokenNameIdentifier	 FILE  UTILS
.	TokenNameDOT	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
"."	TokenNameStringLiteral	.
)	TokenNameRPAREN	
,	TokenNameCOMMA	
link	TokenNameIdentifier	 link
)	TokenNameRPAREN	
,	TokenNameCOMMA	
this	TokenNamethis	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
FileNotFoundException	TokenNameIdentifier	 File Not Found Exception
fnfe	TokenNameIdentifier	 fnfe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
handleError	TokenNameIdentifier	 handle Error
(	TokenNameLPAREN	
fnfe	TokenNameIdentifier	 fnfe
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
handleError	TokenNameIdentifier	 handle Error
(	TokenNameLPAREN	
ioe	TokenNameIdentifier	 ioe
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
setDefaults	TokenNameIdentifier	 set Defaults
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Restore symlinks. * @throws BuildException on error. * @since Ant 1.7 */	TokenNameCOMMENT_JAVADOC	 Restore symlinks. @throws BuildException on error. @since Ant 1.7 
public	TokenNamepublic	
void	TokenNamevoid	
recreate	TokenNameIdentifier	 recreate
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
fileSets	TokenNameIdentifier	 file Sets
.	TokenNameDOT	
isEmpty	TokenNameIdentifier	 is Empty
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
handleError	TokenNameIdentifier	 handle Error
(	TokenNameLPAREN	
"File set identifying link file(s) "	TokenNameStringLiteral	File set identifying link file(s) 
+	TokenNamePLUS	
"required for action recreate"	TokenNameStringLiteral	required for action recreate
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
Properties	TokenNameIdentifier	 Properties
links	TokenNameIdentifier	 links
=	TokenNameEQUAL	
loadLinks	TokenNameIdentifier	 load Links
(	TokenNameLPAREN	
fileSets	TokenNameIdentifier	 file Sets
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
kitr	TokenNameIdentifier	 kitr
=	TokenNameEQUAL	
links	TokenNameIdentifier	 links
.	TokenNameDOT	
keySet	TokenNameIdentifier	 key Set
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
kitr	TokenNameIdentifier	 kitr
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
lnk	TokenNameIdentifier	 lnk
=	TokenNameEQUAL	
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
kitr	TokenNameIdentifier	 kitr
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
res	TokenNameIdentifier	 res
=	TokenNameEQUAL	
links	TokenNameIdentifier	 links
.	TokenNameDOT	
getProperty	TokenNameIdentifier	 get Property
(	TokenNameLPAREN	
lnk	TokenNameIdentifier	 lnk
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// handle the case where lnk points to a directory (bug 25181) 	TokenNameCOMMENT_LINE	handle the case where lnk points to a directory (bug 25181) 
try	TokenNametry	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
test	TokenNameIdentifier	 test
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
lnk	TokenNameIdentifier	 lnk
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
SYMLINK_UTILS	TokenNameIdentifier	 SYMLINK  UTILS
.	TokenNameDOT	
isSymbolicLink	TokenNameIdentifier	 is Symbolic Link
(	TokenNameLPAREN	
lnk	TokenNameIdentifier	 lnk
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
doLink	TokenNameIdentifier	 do Link
(	TokenNameLPAREN	
res	TokenNameIdentifier	 res
,	TokenNameCOMMA	
lnk	TokenNameIdentifier	 lnk
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
test	TokenNameIdentifier	 test
.	TokenNameDOT	
getCanonicalPath	TokenNameIdentifier	 get Canonical Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
res	TokenNameIdentifier	 res
)	TokenNameRPAREN	
.	TokenNameDOT	
getCanonicalPath	TokenNameIdentifier	 get Canonical Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
SYMLINK_UTILS	TokenNameIdentifier	 SYMLINK  UTILS
.	TokenNameDOT	
deleteSymbolicLink	TokenNameIdentifier	 delete Symbolic Link
(	TokenNameLPAREN	
test	TokenNameIdentifier	 test
,	TokenNameCOMMA	
this	TokenNamethis	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
doLink	TokenNameIdentifier	 do Link
(	TokenNameLPAREN	
res	TokenNameIdentifier	 res
,	TokenNameCOMMA	
lnk	TokenNameIdentifier	 lnk
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// else lnk exists, do nothing 	TokenNameCOMMENT_LINE	else lnk exists, do nothing 
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
handleError	TokenNameIdentifier	 handle Error
(	TokenNameLPAREN	
"IO exception while creating link"	TokenNameStringLiteral	IO exception while creating link
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
setDefaults	TokenNameIdentifier	 set Defaults
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Record symlinks. * @throws BuildException on error. * @since Ant 1.7 */	TokenNameCOMMENT_JAVADOC	 Record symlinks. @throws BuildException on error. @since Ant 1.7 
public	TokenNamepublic	
void	TokenNamevoid	
record	TokenNameIdentifier	 record
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
fileSets	TokenNameIdentifier	 file Sets
.	TokenNameDOT	
isEmpty	TokenNameIdentifier	 is Empty
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
handleError	TokenNameIdentifier	 handle Error
(	TokenNameLPAREN	
"Fileset identifying links to record required"	TokenNameStringLiteral	Fileset identifying links to record required
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
linkFileName	TokenNameIdentifier	 link File Name
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
handleError	TokenNameIdentifier	 handle Error
(	TokenNameLPAREN	
"Name of file to record links in required"	TokenNameStringLiteral	Name of file to record links in required
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// create a hashtable to group them by parent directory: 	TokenNameCOMMENT_LINE	create a hashtable to group them by parent directory: 
Hashtable	TokenNameIdentifier	 Hashtable
byDir	TokenNameIdentifier	 by Dir
=	TokenNameEQUAL	
new	TokenNamenew	
Hashtable	TokenNameIdentifier	 Hashtable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// get an Iterator of file objects representing links (canonical): 	TokenNameCOMMENT_LINE	get an Iterator of file objects representing links (canonical): 
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
litr	TokenNameIdentifier	 litr
=	TokenNameEQUAL	
findLinks	TokenNameIdentifier	 find Links
(	TokenNameLPAREN	
fileSets	TokenNameIdentifier	 file Sets
)	TokenNameRPAREN	
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
litr	TokenNameIdentifier	 litr
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
thisLink	TokenNameIdentifier	 this Link
=	TokenNameEQUAL	
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
)	TokenNameRPAREN	
litr	TokenNameIdentifier	 litr
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
File	TokenNameIdentifier	 File
parent	TokenNameIdentifier	 parent
=	TokenNameEQUAL	
thisLink	TokenNameIdentifier	 this Link
.	TokenNameDOT	
getParentFile	TokenNameIdentifier	 get Parent File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Vector	TokenNameIdentifier	 Vector
v	TokenNameIdentifier	 v
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Vector	TokenNameIdentifier	 Vector
)	TokenNameRPAREN	
byDir	TokenNameIdentifier	 by Dir
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
parent	TokenNameIdentifier	 parent
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
v	TokenNameIdentifier	 v
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
v	TokenNameIdentifier	 v
=	TokenNameEQUAL	
new	TokenNamenew	
Vector	TokenNameIdentifier	 Vector
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
byDir	TokenNameIdentifier	 by Dir
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
parent	TokenNameIdentifier	 parent
,	TokenNameCOMMA	
v	TokenNameIdentifier	 v
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
v	TokenNameIdentifier	 v
.	TokenNameDOT	
addElement	TokenNameIdentifier	 add Element
(	TokenNameLPAREN	
thisLink	TokenNameIdentifier	 this Link
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// write a Properties file in each directory: 	TokenNameCOMMENT_LINE	write a Properties file in each directory: 
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
dirs	TokenNameIdentifier	 dirs
=	TokenNameEQUAL	
byDir	TokenNameIdentifier	 by Dir
.	TokenNameDOT	
keySet	TokenNameIdentifier	 key Set
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dirs	TokenNameIdentifier	 dirs
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
dir	TokenNameIdentifier	 dir
=	TokenNameEQUAL	
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
)	TokenNameRPAREN	
dirs	TokenNameIdentifier	 dirs
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Vector	TokenNameIdentifier	 Vector
linksInDir	TokenNameIdentifier	 links In Dir
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Vector	TokenNameIdentifier	 Vector
)	TokenNameRPAREN	
byDir	TokenNameIdentifier	 by Dir
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Properties	TokenNameIdentifier	 Properties
linksToStore	TokenNameIdentifier	 links To Store
=	TokenNameEQUAL	
new	TokenNamenew	
Properties	TokenNameIdentifier	 Properties
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// fill up a Properties object with link and resource names: 	TokenNameCOMMENT_LINE	fill up a Properties object with link and resource names: 
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
dlnk	TokenNameIdentifier	 dlnk
=	TokenNameEQUAL	
linksInDir	TokenNameIdentifier	 links In Dir
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dlnk	TokenNameIdentifier	 dlnk
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
lnk	TokenNameIdentifier	 lnk
=	TokenNameEQUAL	
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
)	TokenNameRPAREN	
dlnk	TokenNameIdentifier	 dlnk
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
linksToStore	TokenNameIdentifier	 links To Store
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
lnk	TokenNameIdentifier	 lnk
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
lnk	TokenNameIdentifier	 lnk
.	TokenNameDOT	
getCanonicalPath	TokenNameIdentifier	 get Canonical Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
handleError	TokenNameIdentifier	 handle Error
(	TokenNameLPAREN	
"Couldn't get canonical name of parent link"	TokenNameStringLiteral	Couldn't get canonical name of parent link
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
writePropertyFile	TokenNameIdentifier	 write Property File
(	TokenNameLPAREN	
linksToStore	TokenNameIdentifier	 links To Store
,	TokenNameCOMMA	
dir	TokenNameIdentifier	 dir
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
setDefaults	TokenNameIdentifier	 set Defaults
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Return all variables to their default state for the next invocation. * @since Ant 1.7 */	TokenNameCOMMENT_JAVADOC	 Return all variables to their default state for the next invocation. @since Ant 1.7 
private	TokenNameprivate	
void	TokenNamevoid	
setDefaults	TokenNameIdentifier	 set Defaults
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
resource	TokenNameIdentifier	 resource
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
link	TokenNameIdentifier	 link
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
linkFileName	TokenNameIdentifier	 link File Name
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
failonerror	TokenNameIdentifier	 failonerror
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
// default behavior is to fail on an error 	TokenNameCOMMENT_LINE	default behavior is to fail on an error 
overwrite	TokenNameIdentifier	 overwrite
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
// default behavior is to not overwrite 	TokenNameCOMMENT_LINE	default behavior is to not overwrite 
setAction	TokenNameIdentifier	 set Action
(	TokenNameLPAREN	
"single"	TokenNameStringLiteral	single
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// default behavior is make a single link 	TokenNameCOMMENT_LINE	default behavior is make a single link 
fileSets	TokenNameIdentifier	 file Sets
.	TokenNameDOT	
clear	TokenNameIdentifier	 clear
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Set overwrite mode. If set to false (default) * the task will not overwrite existing links, and may stop the build * if a link already exists depending on the setting of failonerror. * * @param owrite If true overwrite existing links. */	TokenNameCOMMENT_JAVADOC	 Set overwrite mode. If set to false (default) the task will not overwrite existing links, and may stop the build if a link already exists depending on the setting of failonerror. * @param owrite If true overwrite existing links. 
public	TokenNamepublic	
void	TokenNamevoid	
setOverwrite	TokenNameIdentifier	 set Overwrite
(	TokenNameLPAREN	
boolean	TokenNameboolean	
owrite	TokenNameIdentifier	 owrite
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
overwrite	TokenNameIdentifier	 overwrite
=	TokenNameEQUAL	
owrite	TokenNameIdentifier	 owrite
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Set failonerror mode. If set to true (default) the entire build fails * upon error; otherwise the error is logged and the build will continue. * * @param foe If true throw BuildException on error, else log it. */	TokenNameCOMMENT_JAVADOC	 Set failonerror mode. If set to true (default) the entire build fails upon error; otherwise the error is logged and the build will continue. * @param foe If true throw BuildException on error, else log it. 
public	TokenNamepublic	
void	TokenNamevoid	
setFailOnError	TokenNameIdentifier	 set Fail On Error
(	TokenNameLPAREN	
boolean	TokenNameboolean	
foe	TokenNameIdentifier	 foe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
failonerror	TokenNameIdentifier	 failonerror
=	TokenNameEQUAL	
foe	TokenNameIdentifier	 foe
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Set the action to be performed. May be &quot;single&quot;, * &quot;delete&quot;, &quot;recreate&quot; or &quot;record&quot;. * * @param action The action to perform. */	TokenNameCOMMENT_JAVADOC	 Set the action to be performed. May be &quot;single&quot;, &quot;delete&quot;, &quot;recreate&quot; or &quot;record&quot;. * @param action The action to perform. 
public	TokenNamepublic	
void	TokenNamevoid	
setAction	TokenNameIdentifier	 set Action
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
action	TokenNameIdentifier	 action
)	TokenNameRPAREN	
{	TokenNameLBRACE	
super	TokenNamesuper	
.	TokenNameDOT	
setAction	TokenNameIdentifier	 set Action
(	TokenNameLPAREN	
action	TokenNameIdentifier	 action
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Set the name of the link. Used when action = &quot;single&quot;. * * @param lnk The name for the link. */	TokenNameCOMMENT_JAVADOC	 Set the name of the link. Used when action = &quot;single&quot;. * @param lnk The name for the link. 
public	TokenNamepublic	
void	TokenNamevoid	
setLink	TokenNameIdentifier	 set Link
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
lnk	TokenNameIdentifier	 lnk
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
link	TokenNameIdentifier	 link
=	TokenNameEQUAL	
lnk	TokenNameIdentifier	 lnk
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Set the name of the resource to which a link should be created. * Used when action = &quot;single&quot;. * * @param src The resource to be linked. */	TokenNameCOMMENT_JAVADOC	 Set the name of the resource to which a link should be created. Used when action = &quot;single&quot;. * @param src The resource to be linked. 
public	TokenNamepublic	
void	TokenNamevoid	
setResource	TokenNameIdentifier	 set Resource
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
src	TokenNameIdentifier	 src
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
resource	TokenNameIdentifier	 resource
=	TokenNameEQUAL	
src	TokenNameIdentifier	 src
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Set the name of the file to which links will be written. * Used when action = &quot;record&quot;. * * @param lf The name of the file to write links to. */	TokenNameCOMMENT_JAVADOC	 Set the name of the file to which links will be written. Used when action = &quot;record&quot;. * @param lf The name of the file to write links to. 
public	TokenNamepublic	
void	TokenNamevoid	
setLinkfilename	TokenNameIdentifier	 set Linkfilename
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
lf	TokenNameIdentifier	 lf
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
linkFileName	TokenNameIdentifier	 link File Name
=	TokenNameEQUAL	
lf	TokenNameIdentifier	 lf
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Add a fileset to this task. * * @param set The fileset to add. */	TokenNameCOMMENT_JAVADOC	 Add a fileset to this task. * @param set The fileset to add. 
public	TokenNamepublic	
void	TokenNamevoid	
addFileset	TokenNameIdentifier	 add Fileset
(	TokenNameLPAREN	
FileSet	TokenNameIdentifier	 File Set
set	TokenNameIdentifier	 set
)	TokenNameRPAREN	
{	TokenNameLBRACE	
fileSets	TokenNameIdentifier	 file Sets
.	TokenNameDOT	
addElement	TokenNameIdentifier	 add Element
(	TokenNameLPAREN	
set	TokenNameIdentifier	 set
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Delete a symlink (without deleting the associated resource). * * <p>This is a convenience method that simply invokes * <code>deleteSymlink(java.io.File)</code>. * * @param path A string containing the path of the symlink to delete. * * @throws FileNotFoundException When the path results in a * <code>File</code> that doesn't exist. * @throws IOException If calls to <code>File.rename</code> * or <code>File.delete</code> fail. * @deprecated use * org.apache.tools.ant.util.SymbolicLinkUtils#deleteSymbolicLink * instead */	TokenNameCOMMENT_JAVADOC	 Delete a symlink (without deleting the associated resource). * <p>This is a convenience method that simply invokes <code>deleteSymlink(java.io.File)</code>. * @param path A string containing the path of the symlink to delete. * @throws FileNotFoundException When the path results in a <code>File</code> that doesn't exist. @throws IOException If calls to <code>File.rename</code> or <code>File.delete</code> fail. @deprecated use org.apache.tools.ant.util.SymbolicLinkUtils#deleteSymbolicLink instead 
public	TokenNamepublic	
static	TokenNamestatic	
void	TokenNamevoid	
deleteSymlink	TokenNameIdentifier	 delete Symlink
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
path	TokenNameIdentifier	 path
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
FileNotFoundException	TokenNameIdentifier	 File Not Found Exception
{	TokenNameLBRACE	
SYMLINK_UTILS	TokenNameIdentifier	 SYMLINK  UTILS
.	TokenNameDOT	
deleteSymbolicLink	TokenNameIdentifier	 delete Symbolic Link
(	TokenNameLPAREN	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
path	TokenNameIdentifier	 path
)	TokenNameRPAREN	
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Delete a symlink (without deleting the associated resource). * * <p>This is a utility method that removes a unix symlink without removing * the resource that the symlink points to. If it is accidentally invoked * on a real file, the real file will not be harmed.</p> * * <p>This method works by * getting the canonical path of the link, using the canonical path to * rename the resource (breaking the link) and then deleting the link. * The resource is then returned to its original name inside a finally * block to ensure that the resource is unharmed even in the event of * an exception.</p> * * <p>Since Ant 1.8.0 this method will try to delete the File object if * it reports it wouldn't exist (as symlinks pointing nowhere usually do). * Prior version would throw a FileNotFoundException in that case.</p> * * @param linkfil A <code>File</code> object of the symlink to delete. * * @throws IOException If calls to <code>File.rename</code>, * <code>File.delete</code> or * <code>File.getCanonicalPath</code> * fail. * @deprecated use * org.apache.tools.ant.util.SymbolicLinkUtils#deleteSymbolicLink * instead */	TokenNameCOMMENT_JAVADOC	 Delete a symlink (without deleting the associated resource). * <p>This is a utility method that removes a unix symlink without removing the resource that the symlink points to. If it is accidentally invoked on a real file, the real file will not be harmed.</p> * <p>This method works by getting the canonical path of the link, using the canonical path to rename the resource (breaking the link) and then deleting the link. The resource is then returned to its original name inside a finally block to ensure that the resource is unharmed even in the event of an exception.</p> * <p>Since Ant 1.8.0 this method will try to delete the File object if it reports it wouldn't exist (as symlinks pointing nowhere usually do). Prior version would throw a FileNotFoundException in that case.</p> * @param linkfil A <code>File</code> object of the symlink to delete. * @throws IOException If calls to <code>File.rename</code>, <code>File.delete</code> or <code>File.getCanonicalPath</code> fail. @deprecated use org.apache.tools.ant.util.SymbolicLinkUtils#deleteSymbolicLink instead 
public	TokenNamepublic	
static	TokenNamestatic	
void	TokenNamevoid	
deleteSymlink	TokenNameIdentifier	 delete Symlink
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
linkfil	TokenNameIdentifier	 linkfil
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
SYMLINK_UTILS	TokenNameIdentifier	 SYMLINK  UTILS
.	TokenNameDOT	
deleteSymbolicLink	TokenNameIdentifier	 delete Symbolic Link
(	TokenNameLPAREN	
linkfil	TokenNameIdentifier	 linkfil
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Write a properties file. This method uses <code>Properties.store</code> * and thus may throw exceptions that occur while writing the file. * * @param properties The properties object to be written. * @param dir The directory for which we are writing the links. * @throws BuildException if the property file could not be written */	TokenNameCOMMENT_JAVADOC	 Write a properties file. This method uses <code>Properties.store</code> and thus may throw exceptions that occur while writing the file. * @param properties The properties object to be written. @param dir The directory for which we are writing the links. @throws BuildException if the property file could not be written 
private	TokenNameprivate	
void	TokenNamevoid	
writePropertyFile	TokenNameIdentifier	 write Property File
(	TokenNameLPAREN	
Properties	TokenNameIdentifier	 Properties
properties	TokenNameIdentifier	 properties
,	TokenNameCOMMA	
File	TokenNameIdentifier	 File
dir	TokenNameIdentifier	 dir
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
BufferedOutputStream	TokenNameIdentifier	 Buffered Output Stream
bos	TokenNameIdentifier	 bos
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
bos	TokenNameIdentifier	 bos
=	TokenNameEQUAL	
new	TokenNamenew	
BufferedOutputStream	TokenNameIdentifier	 Buffered Output Stream
(	TokenNameLPAREN	
new	TokenNamenew	
FileOutputStream	TokenNameIdentifier	 File Output Stream
(	TokenNameLPAREN	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
linkFileName	TokenNameIdentifier	 link File Name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
properties	TokenNameIdentifier	 properties
.	TokenNameDOT	
store	TokenNameIdentifier	 store
(	TokenNameLPAREN	
bos	TokenNameIdentifier	 bos
,	TokenNameCOMMA	
"Symlinks from "	TokenNameStringLiteral	Symlinks from 
+	TokenNamePLUS	
dir	TokenNameIdentifier	 dir
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ioe	TokenNameIdentifier	 ioe
,	TokenNameCOMMA	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
FileUtils	TokenNameIdentifier	 File Utils
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
bos	TokenNameIdentifier	 bos
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Handle errors based on the setting of failonerror. * * @param msg The message to log, or include in the * <code>BuildException</code>. * @throws BuildException with the message if failonerror=true */	TokenNameCOMMENT_JAVADOC	 Handle errors based on the setting of failonerror. * @param msg The message to log, or include in the <code>BuildException</code>. @throws BuildException with the message if failonerror=true 
private	TokenNameprivate	
void	TokenNamevoid	
handleError	TokenNameIdentifier	 handle Error
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
msg	TokenNameIdentifier	 msg
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
failonerror	TokenNameIdentifier	 failonerror
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
msg	TokenNameIdentifier	 msg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
msg	TokenNameIdentifier	 msg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Conduct the actual construction of a link. * * <p> The link is constructed by calling <code>Execute.runCommand</code>. * * @param res The path of the resource we are linking to. * @param lnk The name of the link we wish to make. * @throws BuildException when things go wrong */	TokenNameCOMMENT_JAVADOC	 Conduct the actual construction of a link. * <p> The link is constructed by calling <code>Execute.runCommand</code>. * @param res The path of the resource we are linking to. @param lnk The name of the link we wish to make. @throws BuildException when things go wrong 
private	TokenNameprivate	
void	TokenNamevoid	
doLink	TokenNameIdentifier	 do Link
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
res	TokenNameIdentifier	 res
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
lnk	TokenNameIdentifier	 lnk
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
linkfil	TokenNameIdentifier	 linkfil
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
lnk	TokenNameIdentifier	 lnk
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
options	TokenNameIdentifier	 options
=	TokenNameEQUAL	
"-s"	TokenNameStringLiteral	-s
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
overwrite	TokenNameIdentifier	 overwrite
)	TokenNameRPAREN	
{	TokenNameLBRACE	
options	TokenNameIdentifier	 options
+=	TokenNamePLUS_EQUAL	
"f"	TokenNameStringLiteral	f
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
linkfil	TokenNameIdentifier	 linkfil
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
SYMLINK_UTILS	TokenNameIdentifier	 SYMLINK  UTILS
.	TokenNameDOT	
deleteSymbolicLink	TokenNameIdentifier	 delete Symbolic Link
(	TokenNameLPAREN	
linkfil	TokenNameIdentifier	 linkfil
,	TokenNameCOMMA	
this	TokenNamethis	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
FileNotFoundException	TokenNameIdentifier	 File Not Found Exception
fnfe	TokenNameIdentifier	 fnfe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Symlink disappeared before it was deleted: "	TokenNameStringLiteral	Symlink disappeared before it was deleted: 
+	TokenNamePLUS	
lnk	TokenNameIdentifier	 lnk
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Unable to overwrite preexisting link or file: "	TokenNameStringLiteral	Unable to overwrite preexisting link or file: 
+	TokenNamePLUS	
lnk	TokenNameIdentifier	 lnk
,	TokenNameCOMMA	
ioe	TokenNameIdentifier	 ioe
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_INFO	TokenNameIdentifier	 MSG  INFO
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
cmd	TokenNameIdentifier	 cmd
=	TokenNameEQUAL	
new	TokenNamenew	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
"ln"	TokenNameStringLiteral	ln
,	TokenNameCOMMA	
options	TokenNameIdentifier	 options
,	TokenNameCOMMA	
res	TokenNameIdentifier	 res
,	TokenNameCOMMA	
lnk	TokenNameIdentifier	 lnk
}	TokenNameRBRACE	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
Execute	TokenNameIdentifier	 Execute
.	TokenNameDOT	
runCommand	TokenNameIdentifier	 run Command
(	TokenNameLPAREN	
this	TokenNamethis	
,	TokenNameCOMMA	
cmd	TokenNameIdentifier	 cmd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
BuildException	TokenNameIdentifier	 Build Exception
failedToExecute	TokenNameIdentifier	 failed To Execute
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
failonerror	TokenNameIdentifier	 failonerror
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
failedToExecute	TokenNameIdentifier	 failed To Execute
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
//log at the info level, and keep going. 	TokenNameCOMMENT_LINE	log at the info level, and keep going. 
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
failedToExecute	TokenNameIdentifier	 failed To Execute
.	TokenNameDOT	
getMessage	TokenNameIdentifier	 get Message
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
failedToExecute	TokenNameIdentifier	 failed To Execute
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_INFO	TokenNameIdentifier	 MSG  INFO
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Find all the links in all supplied filesets. * * <p> This method is invoked when the action attribute is * &quot;record&quot;. This means that filesets are interpreted * as the directories in which links may be found. * * @param v The filesets specified by the user. * @return A HashSet of <code>File</code> objects containing the * links (with canonical parent directories). */	TokenNameCOMMENT_JAVADOC	 Find all the links in all supplied filesets. * <p> This method is invoked when the action attribute is &quot;record&quot;. This means that filesets are interpreted as the directories in which links may be found. * @param v The filesets specified by the user. @return A HashSet of <code>File</code> objects containing the links (with canonical parent directories). 
private	TokenNameprivate	
HashSet	TokenNameIdentifier	 Hash Set
findLinks	TokenNameIdentifier	 find Links
(	TokenNameLPAREN	
Vector	TokenNameIdentifier	 Vector
v	TokenNameIdentifier	 v
)	TokenNameRPAREN	
{	TokenNameLBRACE	
HashSet	TokenNameIdentifier	 Hash Set
result	TokenNameIdentifier	 result
=	TokenNameEQUAL	
new	TokenNamenew	
HashSet	TokenNameIdentifier	 Hash Set
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
int	TokenNameint	
size	TokenNameIdentifier	 size
=	TokenNameEQUAL	
v	TokenNameIdentifier	 v
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
size	TokenNameIdentifier	 size
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
FileSet	TokenNameIdentifier	 File Set
fs	TokenNameIdentifier	 fs
=	TokenNameEQUAL	
(	TokenNameLPAREN	
FileSet	TokenNameIdentifier	 File Set
)	TokenNameRPAREN	
v	TokenNameIdentifier	 v
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
DirectoryScanner	TokenNameIdentifier	 Directory Scanner
ds	TokenNameIdentifier	 ds
=	TokenNameEQUAL	
fs	TokenNameIdentifier	 fs
.	TokenNameDOT	
getDirectoryScanner	TokenNameIdentifier	 get Directory Scanner
(	TokenNameLPAREN	
getProject	TokenNameIdentifier	 get Project
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
fnd	TokenNameIdentifier	 fnd
=	TokenNameEQUAL	
new	TokenNamenew	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
ds	TokenNameIdentifier	 ds
.	TokenNameDOT	
getIncludedFiles	TokenNameIdentifier	 get Included Files
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
ds	TokenNameIdentifier	 ds
.	TokenNameDOT	
getIncludedDirectories	TokenNameIdentifier	 get Included Directories
(	TokenNameLPAREN	
)	TokenNameRPAREN	
}	TokenNameRBRACE	
;	TokenNameSEMICOLON	
File	TokenNameIdentifier	 File
dir	TokenNameIdentifier	 dir
=	TokenNameEQUAL	
fs	TokenNameIdentifier	 fs
.	TokenNameDOT	
getDir	TokenNameIdentifier	 get Dir
(	TokenNameLPAREN	
getProject	TokenNameIdentifier	 get Project
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
j	TokenNameIdentifier	 j
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
j	TokenNameIdentifier	 j
<	TokenNameLESS	
fnd	TokenNameIdentifier	 fnd
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
j	TokenNameIdentifier	 j
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
k	TokenNameIdentifier	 k
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
k	TokenNameIdentifier	 k
<	TokenNameLESS	
fnd	TokenNameIdentifier	 fnd
[	TokenNameLBRACKET	
j	TokenNameIdentifier	 j
]	TokenNameRBRACKET	
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
k	TokenNameIdentifier	 k
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
f	TokenNameIdentifier	 f
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
fnd	TokenNameIdentifier	 fnd
[	TokenNameLBRACKET	
j	TokenNameIdentifier	 j
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
k	TokenNameIdentifier	 k
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
File	TokenNameIdentifier	 File
pf	TokenNameIdentifier	 pf
=	TokenNameEQUAL	
f	TokenNameIdentifier	 f
.	TokenNameDOT	
getParentFile	TokenNameIdentifier	 get Parent File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
name	TokenNameIdentifier	 name
=	TokenNameEQUAL	
f	TokenNameIdentifier	 f
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
SYMLINK_UTILS	TokenNameIdentifier	 SYMLINK  UTILS
.	TokenNameDOT	
isSymbolicLink	TokenNameIdentifier	 is Symbolic Link
(	TokenNameLPAREN	
pf	TokenNameIdentifier	 pf
,	TokenNameCOMMA	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
result	TokenNameIdentifier	 result
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
pf	TokenNameIdentifier	 pf
.	TokenNameDOT	
getCanonicalFile	TokenNameIdentifier	 get Canonical File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
handleError	TokenNameIdentifier	 handle Error
(	TokenNameLPAREN	
"IOException: "	TokenNameStringLiteral	IOException: 
+	TokenNamePLUS	
fnd	TokenNameIdentifier	 fnd
[	TokenNameLBRACKET	
j	TokenNameIdentifier	 j
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
k	TokenNameIdentifier	 k
]	TokenNameRBRACKET	
+	TokenNamePLUS	
" omitted"	TokenNameStringLiteral	 omitted
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
result	TokenNameIdentifier	 result
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Load links from properties files included in one or more FileSets. * * <p> This method is only invoked when the action attribute is set to * &quot;recreate&quot;. The filesets passed in are assumed to specify the * names of the property files with the link information and the * subdirectories in which to look for them. * * @param v The <code>FileSet</code>s for this task. * @return The links to be made. */	TokenNameCOMMENT_JAVADOC	 Load links from properties files included in one or more FileSets. * <p> This method is only invoked when the action attribute is set to &quot;recreate&quot;. The filesets passed in are assumed to specify the names of the property files with the link information and the subdirectories in which to look for them. * @param v The <code>FileSet</code>s for this task. @return The links to be made. 
private	TokenNameprivate	
Properties	TokenNameIdentifier	 Properties
loadLinks	TokenNameIdentifier	 load Links
(	TokenNameLPAREN	
Vector	TokenNameIdentifier	 Vector
v	TokenNameIdentifier	 v
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Properties	TokenNameIdentifier	 Properties
finalList	TokenNameIdentifier	 final List
=	TokenNameEQUAL	
new	TokenNamenew	
Properties	TokenNameIdentifier	 Properties
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// loop through the supplied file sets: 	TokenNameCOMMENT_LINE	loop through the supplied file sets: 
final	TokenNamefinal	
int	TokenNameint	
size	TokenNameIdentifier	 size
=	TokenNameEQUAL	
v	TokenNameIdentifier	 v
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
size	TokenNameIdentifier	 size
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
FileSet	TokenNameIdentifier	 File Set
fs	TokenNameIdentifier	 fs
=	TokenNameEQUAL	
(	TokenNameLPAREN	
FileSet	TokenNameIdentifier	 File Set
)	TokenNameRPAREN	
v	TokenNameIdentifier	 v
.	TokenNameDOT	
elementAt	TokenNameIdentifier	 element At
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
DirectoryScanner	TokenNameIdentifier	 Directory Scanner
ds	TokenNameIdentifier	 ds
=	TokenNameEQUAL	
new	TokenNamenew	
DirectoryScanner	TokenNameIdentifier	 Directory Scanner
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
fs	TokenNameIdentifier	 fs
.	TokenNameDOT	
setupDirectoryScanner	TokenNameIdentifier	 setup Directory Scanner
(	TokenNameLPAREN	
ds	TokenNameIdentifier	 ds
,	TokenNameCOMMA	
getProject	TokenNameIdentifier	 get Project
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ds	TokenNameIdentifier	 ds
.	TokenNameDOT	
setFollowSymlinks	TokenNameIdentifier	 set Follow Symlinks
(	TokenNameLPAREN	
false	TokenNamefalse	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ds	TokenNameIdentifier	 ds
.	TokenNameDOT	
scan	TokenNameIdentifier	 scan
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
incs	TokenNameIdentifier	 incs
=	TokenNameEQUAL	
ds	TokenNameIdentifier	 ds
.	TokenNameDOT	
getIncludedFiles	TokenNameIdentifier	 get Included Files
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
File	TokenNameIdentifier	 File
dir	TokenNameIdentifier	 dir
=	TokenNameEQUAL	
fs	TokenNameIdentifier	 fs
.	TokenNameDOT	
getDir	TokenNameIdentifier	 get Dir
(	TokenNameLPAREN	
getProject	TokenNameIdentifier	 get Project
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// load included files as properties files: 	TokenNameCOMMENT_LINE	load included files as properties files: 
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
j	TokenNameIdentifier	 j
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
j	TokenNameIdentifier	 j
<	TokenNameLESS	
incs	TokenNameIdentifier	 incs
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
j	TokenNameIdentifier	 j
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
inc	TokenNameIdentifier	 inc
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
incs	TokenNameIdentifier	 incs
[	TokenNameLBRACKET	
j	TokenNameIdentifier	 j
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
File	TokenNameIdentifier	 File
pf	TokenNameIdentifier	 pf
=	TokenNameEQUAL	
inc	TokenNameIdentifier	 inc
.	TokenNameDOT	
getParentFile	TokenNameIdentifier	 get Parent File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Properties	TokenNameIdentifier	 Properties
lnks	TokenNameIdentifier	 lnks
=	TokenNameEQUAL	
new	TokenNamenew	
Properties	TokenNameIdentifier	 Properties
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
InputStream	TokenNameIdentifier	 Input Stream
is	TokenNameIdentifier	 is
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
is	TokenNameIdentifier	 is
=	TokenNameEQUAL	
new	TokenNamenew	
BufferedInputStream	TokenNameIdentifier	 Buffered Input Stream
(	TokenNameLPAREN	
new	TokenNamenew	
FileInputStream	TokenNameIdentifier	 File Input Stream
(	TokenNameLPAREN	
inc	TokenNameIdentifier	 inc
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
lnks	TokenNameIdentifier	 lnks
.	TokenNameDOT	
load	TokenNameIdentifier	 load
(	TokenNameLPAREN	
is	TokenNameIdentifier	 is
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
pf	TokenNameIdentifier	 pf
=	TokenNameEQUAL	
pf	TokenNameIdentifier	 pf
.	TokenNameDOT	
getCanonicalFile	TokenNameIdentifier	 get Canonical File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
FileNotFoundException	TokenNameIdentifier	 File Not Found Exception
fnfe	TokenNameIdentifier	 fnfe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
handleError	TokenNameIdentifier	 handle Error
(	TokenNameLPAREN	
"Unable to find "	TokenNameStringLiteral	Unable to find 
+	TokenNamePLUS	
incs	TokenNameIdentifier	 incs
[	TokenNameLBRACKET	
j	TokenNameIdentifier	 j
]	TokenNameRBRACKET	
+	TokenNamePLUS	
"; skipping it."	TokenNameStringLiteral	; skipping it.
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
continue	TokenNamecontinue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
handleError	TokenNameIdentifier	 handle Error
(	TokenNameLPAREN	
"Unable to open "	TokenNameStringLiteral	Unable to open 
+	TokenNamePLUS	
incs	TokenNameIdentifier	 incs
[	TokenNameLBRACKET	
j	TokenNameIdentifier	 j
]	TokenNameRBRACKET	
+	TokenNamePLUS	
" or its parent dir; skipping it."	TokenNameStringLiteral	 or its parent dir; skipping it.
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
continue	TokenNamecontinue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
FileUtils	TokenNameIdentifier	 File Utils
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
is	TokenNameIdentifier	 is
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
lnks	TokenNameIdentifier	 lnks
.	TokenNameDOT	
list	TokenNameIdentifier	 list
(	TokenNameLPAREN	
new	TokenNamenew	
PrintStream	TokenNameIdentifier	 Print Stream
(	TokenNameLPAREN	
new	TokenNamenew	
LogOutputStream	TokenNameIdentifier	 Log Output Stream
(	TokenNameLPAREN	
this	TokenNamethis	
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_INFO	TokenNameIdentifier	 MSG  INFO
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Write the contents to our master list of links 	TokenNameCOMMENT_LINE	Write the contents to our master list of links 
// This method assumes that all links are defined in 	TokenNameCOMMENT_LINE	This method assumes that all links are defined in 
// terms of absolute paths, or paths relative to the 	TokenNameCOMMENT_LINE	terms of absolute paths, or paths relative to the 
// working directory: 	TokenNameCOMMENT_LINE	working directory: 
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
kitr	TokenNameIdentifier	 kitr
=	TokenNameEQUAL	
lnks	TokenNameIdentifier	 lnks
.	TokenNameDOT	
keySet	TokenNameIdentifier	 key Set
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
kitr	TokenNameIdentifier	 kitr
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
key	TokenNameIdentifier	 key
=	TokenNameEQUAL	
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
kitr	TokenNameIdentifier	 kitr
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
finalList	TokenNameIdentifier	 final List
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
pf	TokenNameIdentifier	 pf
,	TokenNameCOMMA	
key	TokenNameIdentifier	 key
)	TokenNameRPAREN	
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
lnks	TokenNameIdentifier	 lnks
.	TokenNameDOT	
getProperty	TokenNameIdentifier	 get Property
(	TokenNameLPAREN	
key	TokenNameIdentifier	 key
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
finalList	TokenNameIdentifier	 final List
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
