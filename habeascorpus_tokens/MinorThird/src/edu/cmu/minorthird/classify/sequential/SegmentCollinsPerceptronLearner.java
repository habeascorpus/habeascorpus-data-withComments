/* Copyright 2003-2004, Carnegie Mellon, All Rights Reserved */	TokenNameCOMMENT_BLOCK	 Copyright 2003-2004, Carnegie Mellon, All Rights Reserved 
package	TokenNamepackage	
edu	TokenNameIdentifier	 edu
.	TokenNameDOT	
cmu	TokenNameIdentifier	 cmu
.	TokenNameDOT	
minorthird	TokenNameIdentifier	 minorthird
.	TokenNameDOT	
classify	TokenNameIdentifier	 classify
.	TokenNameDOT	
sequential	TokenNameIdentifier	 sequential
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
BorderLayout	TokenNameIdentifier	 Border Layout
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
Serializable	TokenNameIdentifier	 Serializable
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Iterator	TokenNameIdentifier	 Iterator
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Map	TokenNameIdentifier	 Map
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
TreeMap	TokenNameIdentifier	 Tree Map
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
swing	TokenNameIdentifier	 swing
.	TokenNameDOT	
JComponent	TokenNameIdentifier	 J Component
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
swing	TokenNameIdentifier	 swing
.	TokenNameDOT	
JLabel	TokenNameIdentifier	 J Label
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
swing	TokenNameIdentifier	 swing
.	TokenNameDOT	
JPanel	TokenNameIdentifier	 J Panel
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
swing	TokenNameIdentifier	 swing
.	TokenNameDOT	
JScrollPane	TokenNameIdentifier	 J Scroll Pane
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
swing	TokenNameIdentifier	 swing
.	TokenNameDOT	
border	TokenNameIdentifier	 border
.	TokenNameDOT	
TitledBorder	TokenNameIdentifier	 Titled Border
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
log4j	TokenNameIdentifier	 log4j
.	TokenNameDOT	
Logger	TokenNameIdentifier	 Logger
;	TokenNameSEMICOLON	
import	TokenNameimport	
edu	TokenNameIdentifier	 edu
.	TokenNameDOT	
cmu	TokenNameIdentifier	 cmu
.	TokenNameDOT	
minorthird	TokenNameIdentifier	 minorthird
.	TokenNameDOT	
classify	TokenNameIdentifier	 classify
.	TokenNameDOT	
ClassLabel	TokenNameIdentifier	 Class Label
;	TokenNameSEMICOLON	
import	TokenNameimport	
edu	TokenNameIdentifier	 edu
.	TokenNameDOT	
cmu	TokenNameIdentifier	 cmu
.	TokenNameDOT	
minorthird	TokenNameIdentifier	 minorthird
.	TokenNameDOT	
classify	TokenNameIdentifier	 classify
.	TokenNameDOT	
Classifier	TokenNameIdentifier	 Classifier
;	TokenNameSEMICOLON	
import	TokenNameimport	
edu	TokenNameIdentifier	 edu
.	TokenNameDOT	
cmu	TokenNameIdentifier	 cmu
.	TokenNameDOT	
minorthird	TokenNameIdentifier	 minorthird
.	TokenNameDOT	
classify	TokenNameIdentifier	 classify
.	TokenNameDOT	
Example	TokenNameIdentifier	 Example
;	TokenNameSEMICOLON	
import	TokenNameimport	
edu	TokenNameIdentifier	 edu
.	TokenNameDOT	
cmu	TokenNameIdentifier	 cmu
.	TokenNameDOT	
minorthird	TokenNameIdentifier	 minorthird
.	TokenNameDOT	
classify	TokenNameIdentifier	 classify
.	TokenNameDOT	
ExampleSchema	TokenNameIdentifier	 Example Schema
;	TokenNameSEMICOLON	
import	TokenNameimport	
edu	TokenNameIdentifier	 edu
.	TokenNameDOT	
cmu	TokenNameIdentifier	 cmu
.	TokenNameDOT	
minorthird	TokenNameIdentifier	 minorthird
.	TokenNameDOT	
classify	TokenNameIdentifier	 classify
.	TokenNameDOT	
Instance	TokenNameIdentifier	 Instance
;	TokenNameSEMICOLON	
import	TokenNameimport	
edu	TokenNameIdentifier	 edu
.	TokenNameDOT	
cmu	TokenNameIdentifier	 cmu
.	TokenNameDOT	
minorthird	TokenNameIdentifier	 minorthird
.	TokenNameDOT	
classify	TokenNameIdentifier	 classify
.	TokenNameDOT	
MutableInstance	TokenNameIdentifier	 Mutable Instance
;	TokenNameSEMICOLON	
import	TokenNameimport	
edu	TokenNameIdentifier	 edu
.	TokenNameDOT	
cmu	TokenNameIdentifier	 cmu
.	TokenNameDOT	
minorthird	TokenNameIdentifier	 minorthird
.	TokenNameDOT	
classify	TokenNameIdentifier	 classify
.	TokenNameDOT	
sequential	TokenNameIdentifier	 sequential
.	TokenNameDOT	
Segmentation	TokenNameIdentifier	 Segmentation
.	TokenNameDOT	
Segment	TokenNameIdentifier	 Segment
;	TokenNameSEMICOLON	
import	TokenNameimport	
edu	TokenNameIdentifier	 edu
.	TokenNameDOT	
cmu	TokenNameIdentifier	 cmu
.	TokenNameDOT	
minorthird	TokenNameIdentifier	 minorthird
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ProgressCounter	TokenNameIdentifier	 Progress Counter
;	TokenNameSEMICOLON	
import	TokenNameimport	
edu	TokenNameIdentifier	 edu
.	TokenNameDOT	
cmu	TokenNameIdentifier	 cmu
.	TokenNameDOT	
minorthird	TokenNameIdentifier	 minorthird
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
gui	TokenNameIdentifier	 gui
.	TokenNameDOT	
ComponentViewer	TokenNameIdentifier	 Component Viewer
;	TokenNameSEMICOLON	
import	TokenNameimport	
edu	TokenNameIdentifier	 edu
.	TokenNameDOT	
cmu	TokenNameIdentifier	 cmu
.	TokenNameDOT	
minorthird	TokenNameIdentifier	 minorthird
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
gui	TokenNameIdentifier	 gui
.	TokenNameDOT	
SmartVanillaViewer	TokenNameIdentifier	 Smart Vanilla Viewer
;	TokenNameSEMICOLON	
import	TokenNameimport	
edu	TokenNameIdentifier	 edu
.	TokenNameDOT	
cmu	TokenNameIdentifier	 cmu
.	TokenNameDOT	
minorthird	TokenNameIdentifier	 minorthird
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
gui	TokenNameIdentifier	 gui
.	TokenNameDOT	
Viewer	TokenNameIdentifier	 Viewer
;	TokenNameSEMICOLON	
import	TokenNameimport	
edu	TokenNameIdentifier	 edu
.	TokenNameDOT	
cmu	TokenNameIdentifier	 cmu
.	TokenNameDOT	
minorthird	TokenNameIdentifier	 minorthird
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
gui	TokenNameIdentifier	 gui
.	TokenNameDOT	
Visible	TokenNameIdentifier	 Visible
;	TokenNameSEMICOLON	
/** * * @author William Cohen */	TokenNameCOMMENT_JAVADOC	 * @author William Cohen 
public	TokenNamepublic	
class	TokenNameclass	
SegmentCollinsPerceptronLearner	TokenNameIdentifier	 Segment Collins Perceptron Learner
implements	TokenNameimplements	
BatchSegmenterLearner	TokenNameIdentifier	 Batch Segmenter Learner
,	TokenNameCOMMA	
SequenceConstants	TokenNameIdentifier	 Sequence Constants
{	TokenNameLBRACE	
private	TokenNameprivate	
static	TokenNamestatic	
Logger	TokenNameIdentifier	 Logger
log	TokenNameIdentifier	 log
=	TokenNameEQUAL	
Logger	TokenNameIdentifier	 Logger
.	TokenNameDOT	
getLogger	TokenNameIdentifier	 get Logger
(	TokenNameLPAREN	
SegmentCollinsPerceptronLearner	TokenNameIdentifier	 Segment Collins Perceptron Learner
.	TokenNameDOT	
class	TokenNameclass	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
boolean	TokenNameboolean	
DEBUG	TokenNameIdentifier	 DEBUG
=	TokenNameEQUAL	
log	TokenNameIdentifier	 log
.	TokenNameDOT	
isDebugEnabled	TokenNameIdentifier	 is Debug Enabled
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
int	TokenNameint	
numberOfEpochs	TokenNameIdentifier	 number Of Epochs
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
updatedViterbi	TokenNameIdentifier	 updated Viterbi
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
public	TokenNamepublic	
SegmentCollinsPerceptronLearner	TokenNameIdentifier	 Segment Collins Perceptron Learner
(	TokenNameLPAREN	
int	TokenNameint	
epochs	TokenNameIdentifier	 epochs
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
numberOfEpochs	TokenNameIdentifier	 number Of Epochs
=	TokenNameEQUAL	
epochs	TokenNameIdentifier	 epochs
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
SegmentCollinsPerceptronLearner	TokenNameIdentifier	 Segment Collins Perceptron Learner
(	TokenNameLPAREN	
int	TokenNameint	
epochs	TokenNameIdentifier	 epochs
,	TokenNameCOMMA	
boolean	TokenNameboolean	
updatedViterbi	TokenNameIdentifier	 updated Viterbi
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
(	TokenNameLPAREN	
epochs	TokenNameIdentifier	 epochs
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
updatedViterbi	TokenNameIdentifier	 updated Viterbi
=	TokenNameEQUAL	
updatedViterbi	TokenNameIdentifier	 updated Viterbi
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
SegmentCollinsPerceptronLearner	TokenNameIdentifier	 Segment Collins Perceptron Learner
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
numberOfEpochs	TokenNameIdentifier	 number Of Epochs
=	TokenNameEQUAL	
5	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
void	TokenNamevoid	
setSchema	TokenNameIdentifier	 set Schema
(	TokenNameLPAREN	
ExampleSchema	TokenNameIdentifier	 Example Schema
schema	TokenNameIdentifier	 schema
)	TokenNameRPAREN	
{	TokenNameLBRACE	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// 	TokenNameCOMMENT_LINE	 
// accessors 	TokenNameCOMMENT_LINE	accessors 
// 	TokenNameCOMMENT_LINE	 
public	TokenNamepublic	
int	TokenNameint	
getNumberOfEpochs	TokenNameIdentifier	 get Number Of Epochs
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
numberOfEpochs	TokenNameIdentifier	 number Of Epochs
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
void	TokenNamevoid	
setNumberOfEpochs	TokenNameIdentifier	 set Number Of Epochs
(	TokenNameLPAREN	
int	TokenNameint	
newNumberOfEpochs	TokenNameIdentifier	 new Number Of Epochs
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
numberOfEpochs	TokenNameIdentifier	 number Of Epochs
=	TokenNameEQUAL	
newNumberOfEpochs	TokenNameIdentifier	 new Number Of Epochs
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
int	TokenNameint	
getHistorySize	TokenNameIdentifier	 get History Size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// 	TokenNameCOMMENT_LINE	 
// training scheme 	TokenNameCOMMENT_LINE	training scheme 
// 	TokenNameCOMMENT_LINE	 
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
Segmenter	TokenNameIdentifier	 Segmenter
batchTrain	TokenNameIdentifier	 batch Train
(	TokenNameLPAREN	
SegmentDataset	TokenNameIdentifier	 Segment Dataset
dataset	TokenNameIdentifier	 dataset
)	TokenNameRPAREN	
{	TokenNameLBRACE	
int	TokenNameint	
maxSegmentSize	TokenNameIdentifier	 max Segment Size
=	TokenNameEQUAL	
dataset	TokenNameIdentifier	 dataset
.	TokenNameDOT	
getMaxWindowSize	TokenNameIdentifier	 get Max Window Size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ExampleSchema	TokenNameIdentifier	 Example Schema
schema	TokenNameIdentifier	 schema
=	TokenNameEQUAL	
dataset	TokenNameIdentifier	 dataset
.	TokenNameDOT	
getSchema	TokenNameIdentifier	 get Schema
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
DEBUG	TokenNameIdentifier	 DEBUG
)	TokenNameRPAREN	
log	TokenNameIdentifier	 log
.	TokenNameDOT	
debug	TokenNameIdentifier	 debug
(	TokenNameLPAREN	
"schema: "	TokenNameStringLiteral	schema: 
+	TokenNamePLUS	
schema	TokenNameIdentifier	 schema
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
CollinsPerceptronLearner	TokenNameIdentifier	 Collins Perceptron Learner
.	TokenNameDOT	
MultiClassVPClassifier	TokenNameIdentifier	 Multi Class VP Classifier
c	TokenNameIdentifier	 c
=	TokenNameEQUAL	
new	TokenNamenew	
CollinsPerceptronLearner	TokenNameIdentifier	 Collins Perceptron Learner
.	TokenNameDOT	
MultiClassVPClassifier	TokenNameIdentifier	 Multi Class VP Classifier
(	TokenNameLPAREN	
schema	TokenNameIdentifier	 schema
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
//if (DEBUG) log.debug("dataset:\n"+dataset); 	TokenNameCOMMENT_LINE	if (DEBUG) log.debug("dataset:\n"+dataset); 
ProgressCounter	TokenNameIdentifier	 Progress Counter
pc	TokenNameIdentifier	 pc
=	TokenNameEQUAL	
new	TokenNamenew	
ProgressCounter	TokenNameIdentifier	 Progress Counter
(	TokenNameLPAREN	
"training semi-markov voted-perceptron"	TokenNameStringLiteral	training semi-markov voted-perceptron
,	TokenNameCOMMA	
"sequence"	TokenNameStringLiteral	sequence
,	TokenNameCOMMA	
numberOfEpochs	TokenNameIdentifier	 number Of Epochs
*	TokenNameMULTIPLY	
dataset	TokenNameIdentifier	 dataset
.	TokenNameDOT	
getNumberOfSegmentGroups	TokenNameIdentifier	 get Number Of Segment Groups
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
updatedViterbi	TokenNameIdentifier	 updated Viterbi
)	TokenNameRPAREN	
c	TokenNameIdentifier	 c
.	TokenNameDOT	
setVoteMode	TokenNameIdentifier	 set Vote Mode
(	TokenNameLPAREN	
true	TokenNametrue	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
epoch	TokenNameIdentifier	 epoch
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
epoch	TokenNameIdentifier	 epoch
<	TokenNameLESS	
numberOfEpochs	TokenNameIdentifier	 number Of Epochs
;	TokenNameSEMICOLON	
epoch	TokenNameIdentifier	 epoch
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// shuffling seems to lower performance by a lot - why? 	TokenNameCOMMENT_LINE	shuffling seems to lower performance by a lot - why? 
//dataset.shuffle(); 	TokenNameCOMMENT_LINE	dataset.shuffle(); 
// statistics for curious researchers 	TokenNameCOMMENT_LINE	statistics for curious researchers 
int	TokenNameint	
sequenceErrors	TokenNameIdentifier	 sequence Errors
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
int	TokenNameint	
transitionErrors	TokenNameIdentifier	 transition Errors
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
int	TokenNameint	
transitions	TokenNameIdentifier	 transitions
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
<	TokenNameLESS	
CandidateSegmentGroup	TokenNameIdentifier	 Candidate Segment Group
>	TokenNameGREATER	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
dataset	TokenNameIdentifier	 dataset
.	TokenNameDOT	
candidateSegmentGroupIterator	TokenNameIdentifier	 candidate Segment Group Iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
CandidateSegmentGroup	TokenNameIdentifier	 Candidate Segment Group
g	TokenNameIdentifier	 g
=	TokenNameEQUAL	
i	TokenNameIdentifier	 i
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
DEBUG	TokenNameIdentifier	 DEBUG
)	TokenNameRPAREN	
log	TokenNameIdentifier	 log
.	TokenNameDOT	
debug	TokenNameIdentifier	 debug
(	TokenNameLPAREN	
"classifier is: "	TokenNameStringLiteral	classifier is: 
+	TokenNamePLUS	
c	TokenNameIdentifier	 c
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Segmentation	TokenNameIdentifier	 Segmentation
viterbi	TokenNameIdentifier	 viterbi
=	TokenNameEQUAL	
new	TokenNamenew	
ViterbiSearcher	TokenNameIdentifier	 Viterbi Searcher
(	TokenNameLPAREN	
c	TokenNameIdentifier	 c
,	TokenNameCOMMA	
schema	TokenNameIdentifier	 schema
,	TokenNameCOMMA	
maxSegmentSize	TokenNameIdentifier	 max Segment Size
)	TokenNameRPAREN	
.	TokenNameDOT	
bestSegments	TokenNameIdentifier	 best Segments
(	TokenNameLPAREN	
g	TokenNameIdentifier	 g
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
DEBUG	TokenNameIdentifier	 DEBUG
)	TokenNameRPAREN	
log	TokenNameIdentifier	 log
.	TokenNameDOT	
debug	TokenNameIdentifier	 debug
(	TokenNameLPAREN	
"viterbi: "	TokenNameStringLiteral	viterbi: 
+	TokenNamePLUS	
viterbi	TokenNameIdentifier	 viterbi
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Segmentation	TokenNameIdentifier	 Segmentation
correct	TokenNameIdentifier	 correct
=	TokenNameEQUAL	
correctSegments	TokenNameIdentifier	 correct Segments
(	TokenNameLPAREN	
g	TokenNameIdentifier	 g
,	TokenNameCOMMA	
schema	TokenNameIdentifier	 schema
,	TokenNameCOMMA	
maxSegmentSize	TokenNameIdentifier	 max Segment Size
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
DEBUG	TokenNameIdentifier	 DEBUG
)	TokenNameRPAREN	
log	TokenNameIdentifier	 log
.	TokenNameDOT	
debug	TokenNameIdentifier	 debug
(	TokenNameLPAREN	
"correct segments: "	TokenNameStringLiteral	correct segments: 
+	TokenNamePLUS	
correct	TokenNameIdentifier	 correct
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
errorOnThisSequence	TokenNameIdentifier	 error On This Sequence
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
// Segmentation.Segment previousViterbiSeg = null; 	TokenNameCOMMENT_LINE	Segmentation.Segment previousViterbiSeg = null; 
int	TokenNameint	
fp	TokenNameIdentifier	 fp
=	TokenNameEQUAL	
compareSegmentsAndRevise	TokenNameIdentifier	 compare Segments And Revise
(	TokenNameLPAREN	
c	TokenNameIdentifier	 c
,	TokenNameCOMMA	
schema	TokenNameIdentifier	 schema
,	TokenNameCOMMA	
viterbi	TokenNameIdentifier	 viterbi
,	TokenNameCOMMA	
correct	TokenNameIdentifier	 correct
,	TokenNameCOMMA	
-	TokenNameMINUS	
1.0	TokenNameDoubleLiteral	
,	TokenNameCOMMA	
g	TokenNameIdentifier	 g
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
fp	TokenNameIdentifier	 fp
>	TokenNameGREATER	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
errorOnThisSequence	TokenNameIdentifier	 error On This Sequence
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
int	TokenNameint	
fn	TokenNameIdentifier	 fn
=	TokenNameEQUAL	
compareSegmentsAndRevise	TokenNameIdentifier	 compare Segments And Revise
(	TokenNameLPAREN	
c	TokenNameIdentifier	 c
,	TokenNameCOMMA	
schema	TokenNameIdentifier	 schema
,	TokenNameCOMMA	
correct	TokenNameIdentifier	 correct
,	TokenNameCOMMA	
viterbi	TokenNameIdentifier	 viterbi
,	TokenNameCOMMA	
+	TokenNamePLUS	
1.0	TokenNameDoubleLiteral	
,	TokenNameCOMMA	
g	TokenNameIdentifier	 g
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
fn	TokenNameIdentifier	 fn
>	TokenNameGREATER	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
errorOnThisSequence	TokenNameIdentifier	 error On This Sequence
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
errorOnThisSequence	TokenNameIdentifier	 error On This Sequence
)	TokenNameRPAREN	
sequenceErrors	TokenNameIdentifier	 sequence Errors
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
transitionErrors	TokenNameIdentifier	 transition Errors
+=	TokenNamePLUS_EQUAL	
fp	TokenNameIdentifier	 fp
+	TokenNamePLUS	
fn	TokenNameIdentifier	 fn
;	TokenNameSEMICOLON	
transitions	TokenNameIdentifier	 transitions
+=	TokenNamePLUS_EQUAL	
correct	TokenNameIdentifier	 correct
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
c	TokenNameIdentifier	 c
.	TokenNameDOT	
completeUpdate	TokenNameIdentifier	 complete Update
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
pc	TokenNameIdentifier	 pc
.	TokenNameDOT	
progress	TokenNameIdentifier	 progress
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// sequence i 	TokenNameCOMMENT_LINE	sequence i 
System	TokenNameIdentifier	 System
.	TokenNameDOT	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
println	TokenNameIdentifier	 println
(	TokenNameLPAREN	
"Epoch "	TokenNameStringLiteral	Epoch 
+	TokenNamePLUS	
epoch	TokenNameIdentifier	 epoch
+	TokenNamePLUS	
": sequenceErr="	TokenNameStringLiteral	: sequenceErr=
+	TokenNamePLUS	
sequenceErrors	TokenNameIdentifier	 sequence Errors
+	TokenNamePLUS	
" transitionErrors="	TokenNameStringLiteral	 transitionErrors=
+	TokenNamePLUS	
transitionErrors	TokenNameIdentifier	 transition Errors
+	TokenNamePLUS	
"/"	TokenNameStringLiteral	/
+	TokenNamePLUS	
transitions	TokenNameIdentifier	 transitions
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
transitionErrors	TokenNameIdentifier	 transition Errors
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// epoch 	TokenNameCOMMENT_LINE	epoch 
pc	TokenNameIdentifier	 pc
.	TokenNameDOT	
finished	TokenNameIdentifier	 finished
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
c	TokenNameIdentifier	 c
.	TokenNameDOT	
setVoteMode	TokenNameIdentifier	 set Vote Mode
(	TokenNameLPAREN	
true	TokenNametrue	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// construct the classifier 	TokenNameCOMMENT_LINE	construct the classifier 
return	TokenNamereturn	
new	TokenNamenew	
ViterbiSegmenter	TokenNameIdentifier	 Viterbi Segmenter
(	TokenNameLPAREN	
c	TokenNameIdentifier	 c
,	TokenNameCOMMA	
schema	TokenNameIdentifier	 schema
,	TokenNameCOMMA	
maxSegmentSize	TokenNameIdentifier	 max Segment Size
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** Compare the target segments to the 'otherSegments', and update * the classifier by sum_x [delta*x], for each example x * corresponding to a target segment that's not in otherSegments. */	TokenNameCOMMENT_JAVADOC	 Compare the target segments to the 'otherSegments', and update the classifier by sum_x [delta*x], for each example x corresponding to a target segment that's not in otherSegments. 
private	TokenNameprivate	
int	TokenNameint	
compareSegmentsAndRevise	TokenNameIdentifier	 compare Segments And Revise
(	TokenNameLPAREN	
CollinsPerceptronLearner	TokenNameIdentifier	 Collins Perceptron Learner
.	TokenNameDOT	
MultiClassVPClassifier	TokenNameIdentifier	 Multi Class VP Classifier
classifier	TokenNameIdentifier	 classifier
,	TokenNameCOMMA	
ExampleSchema	TokenNameIdentifier	 Example Schema
schema	TokenNameIdentifier	 schema
,	TokenNameCOMMA	
Segmentation	TokenNameIdentifier	 Segmentation
segments	TokenNameIdentifier	 segments
,	TokenNameCOMMA	
Segmentation	TokenNameIdentifier	 Segmentation
otherSegments	TokenNameIdentifier	 other Segments
,	TokenNameCOMMA	
double	TokenNamedouble	
delta	TokenNameIdentifier	 delta
,	TokenNameCOMMA	
CandidateSegmentGroup	TokenNameIdentifier	 Candidate Segment Group
g	TokenNameIdentifier	 g
)	TokenNameRPAREN	
{	TokenNameLBRACE	
int	TokenNameint	
errors	TokenNameIdentifier	 errors
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
// first, work out the name of the previous class for each segment 	TokenNameCOMMENT_LINE	first, work out the name of the previous class for each segment 
Map	TokenNameIdentifier	 Map
<	TokenNameLESS	
Segment	TokenNameIdentifier	 Segment
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
>	TokenNameGREATER	
map	TokenNameIdentifier	 map
=	TokenNameEQUAL	
previousClassMap	TokenNameIdentifier	 previous Class Map
(	TokenNameLPAREN	
segments	TokenNameIdentifier	 segments
,	TokenNameCOMMA	
schema	TokenNameIdentifier	 schema
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Map	TokenNameIdentifier	 Map
<	TokenNameLESS	
Segment	TokenNameIdentifier	 Segment
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
>	TokenNameGREATER	
otherMap	TokenNameIdentifier	 other Map
=	TokenNameEQUAL	
previousClassMap	TokenNameIdentifier	 previous Class Map
(	TokenNameLPAREN	
otherSegments	TokenNameIdentifier	 other Segments
,	TokenNameCOMMA	
schema	TokenNameIdentifier	 schema
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
history	TokenNameIdentifier	 history
=	TokenNameEQUAL	
new	TokenNamenew	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
1	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
<	TokenNameLESS	
Segment	TokenNameIdentifier	 Segment
>	TokenNameGREATER	
j	TokenNameIdentifier	 j
=	TokenNameEQUAL	
segments	TokenNameIdentifier	 segments
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
j	TokenNameIdentifier	 j
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Segmentation	TokenNameIdentifier	 Segmentation
.	TokenNameDOT	
Segment	TokenNameIdentifier	 Segment
seg	TokenNameIdentifier	 seg
=	TokenNameEQUAL	
j	TokenNameIdentifier	 j
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
previousClass	TokenNameIdentifier	 previous Class
=	TokenNameEQUAL	
map	TokenNameIdentifier	 map
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
seg	TokenNameIdentifier	 seg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
seg	TokenNameIdentifier	 seg
.	TokenNameDOT	
lo	TokenNameIdentifier	 lo
>=	TokenNameGREATER_EQUAL	
0	TokenNameIntegerLiteral	
&&	TokenNameAND_AND	
(	TokenNameLPAREN	
!	TokenNameNOT	
otherSegments	TokenNameIdentifier	 other Segments
.	TokenNameDOT	
contains	TokenNameIdentifier	 contains
(	TokenNameLPAREN	
seg	TokenNameIdentifier	 seg
)	TokenNameRPAREN	
||	TokenNameOR_OR	
!	TokenNameNOT	
otherMap	TokenNameIdentifier	 other Map
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
seg	TokenNameIdentifier	 seg
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
previousClass	TokenNameIdentifier	 previous Class
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
errors	TokenNameIdentifier	 errors
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
history	TokenNameIdentifier	 history
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
=	TokenNameEQUAL	
previousClass	TokenNameIdentifier	 previous Class
;	TokenNameSEMICOLON	
Instance	TokenNameIdentifier	 Instance
instance	TokenNameIdentifier	 instance
=	TokenNameEQUAL	
new	TokenNamenew	
InstanceFromSequence	TokenNameIdentifier	 Instance From Sequence
(	TokenNameLPAREN	
g	TokenNameIdentifier	 g
.	TokenNameDOT	
getSubsequenceExample	TokenNameIdentifier	 get Subsequence Example
(	TokenNameLPAREN	
seg	TokenNameIdentifier	 seg
.	TokenNameDOT	
lo	TokenNameIdentifier	 lo
,	TokenNameCOMMA	
seg	TokenNameIdentifier	 seg
.	TokenNameDOT	
hi	TokenNameIdentifier	 hi
)	TokenNameRPAREN	
,	TokenNameCOMMA	
history	TokenNameIdentifier	 history
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
DEBUG	TokenNameIdentifier	 DEBUG
)	TokenNameRPAREN	
log	TokenNameIdentifier	 log
.	TokenNameDOT	
debug	TokenNameIdentifier	 debug
(	TokenNameLPAREN	
"update "	TokenNameStringLiteral	update 
+	TokenNamePLUS	
delta	TokenNameIdentifier	 delta
+	TokenNamePLUS	
" for: "	TokenNameStringLiteral	 for: 
+	TokenNamePLUS	
instance	TokenNameIdentifier	 instance
.	TokenNameDOT	
getSource	TokenNameIdentifier	 get Source
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
classifier	TokenNameIdentifier	 classifier
.	TokenNameDOT	
update	TokenNameIdentifier	 update
(	TokenNameLPAREN	
schema	TokenNameIdentifier	 schema
.	TokenNameDOT	
getClassName	TokenNameIdentifier	 get Class Name
(	TokenNameLPAREN	
seg	TokenNameIdentifier	 seg
.	TokenNameDOT	
y	TokenNameIdentifier	 y
)	TokenNameRPAREN	
,	TokenNameCOMMA	
instance	TokenNameIdentifier	 instance
,	TokenNameCOMMA	
delta	TokenNameIdentifier	 delta
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
errors	TokenNameIdentifier	 errors
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** Build a mapping from segment to string name of previous segment. * This should let you look up segments which are logically * equivalent, as well as ones which are pointer-equivalent (==) */	TokenNameCOMMENT_JAVADOC	 Build a mapping from segment to string name of previous segment. This should let you look up segments which are logically equivalent, as well as ones which are pointer-equivalent (==) 
private	TokenNameprivate	
Map	TokenNameIdentifier	 Map
<	TokenNameLESS	
Segment	TokenNameIdentifier	 Segment
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
>	TokenNameGREATER	
previousClassMap	TokenNameIdentifier	 previous Class Map
(	TokenNameLPAREN	
Segmentation	TokenNameIdentifier	 Segmentation
segments	TokenNameIdentifier	 segments
,	TokenNameCOMMA	
ExampleSchema	TokenNameIdentifier	 Example Schema
schema	TokenNameIdentifier	 schema
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// use a treemap so that logically equivalent segments be mapped to same previousClass 	TokenNameCOMMENT_LINE	use a treemap so that logically equivalent segments be mapped to same previousClass 
Map	TokenNameIdentifier	 Map
<	TokenNameLESS	
Segment	TokenNameIdentifier	 Segment
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
>	TokenNameGREATER	
map	TokenNameIdentifier	 map
=	TokenNameEQUAL	
new	TokenNamenew	
TreeMap	TokenNameIdentifier	 Tree Map
<	TokenNameLESS	
Segment	TokenNameIdentifier	 Segment
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
>	TokenNameGREATER	
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Segmentation	TokenNameIdentifier	 Segmentation
.	TokenNameDOT	
Segment	TokenNameIdentifier	 Segment
previousSeg	TokenNameIdentifier	 previous Seg
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
<	TokenNameLESS	
Segment	TokenNameIdentifier	 Segment
>	TokenNameGREATER	
j	TokenNameIdentifier	 j
=	TokenNameEQUAL	
segments	TokenNameIdentifier	 segments
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
j	TokenNameIdentifier	 j
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Segmentation	TokenNameIdentifier	 Segmentation
.	TokenNameDOT	
Segment	TokenNameIdentifier	 Segment
seg	TokenNameIdentifier	 seg
=	TokenNameEQUAL	
j	TokenNameIdentifier	 j
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
previousClassName	TokenNameIdentifier	 previous Class Name
=	TokenNameEQUAL	
previousSeg	TokenNameIdentifier	 previous Seg
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
?	TokenNameQUESTION	
NULL_CLASS_NAME	TokenNameIdentifier	 NULL  CLASS  NAME
:	TokenNameCOLON	
schema	TokenNameIdentifier	 schema
.	TokenNameDOT	
getClassName	TokenNameIdentifier	 get Class Name
(	TokenNameLPAREN	
previousSeg	TokenNameIdentifier	 previous Seg
.	TokenNameDOT	
y	TokenNameIdentifier	 y
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
map	TokenNameIdentifier	 map
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
seg	TokenNameIdentifier	 seg
,	TokenNameCOMMA	
previousClassName	TokenNameIdentifier	 previous Class Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
previousSeg	TokenNameIdentifier	 previous Seg
=	TokenNameEQUAL	
seg	TokenNameIdentifier	 seg
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
map	TokenNameIdentifier	 map
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** Collect the correct segments for this example. These are defined as * all segments with non-NEGATIVE labels, and all unit-length negative labels * not inside a positives label. */	TokenNameCOMMENT_JAVADOC	 Collect the correct segments for this example. These are defined as all segments with non-NEGATIVE labels, and all unit-length negative labels not inside a positives label. 
private	TokenNameprivate	
Segmentation	TokenNameIdentifier	 Segmentation
correctSegments	TokenNameIdentifier	 correct Segments
(	TokenNameLPAREN	
CandidateSegmentGroup	TokenNameIdentifier	 Candidate Segment Group
g	TokenNameIdentifier	 g
,	TokenNameCOMMA	
ExampleSchema	TokenNameIdentifier	 Example Schema
schema	TokenNameIdentifier	 schema
,	TokenNameCOMMA	
int	TokenNameint	
maxSegmentSize	TokenNameIdentifier	 max Segment Size
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Segmentation	TokenNameIdentifier	 Segmentation
result	TokenNameIdentifier	 result
=	TokenNameEQUAL	
new	TokenNamenew	
Segmentation	TokenNameIdentifier	 Segmentation
(	TokenNameLPAREN	
schema	TokenNameIdentifier	 schema
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
pos	TokenNameIdentifier	 pos
,	TokenNameCOMMA	
len	TokenNameIdentifier	 len
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
pos	TokenNameIdentifier	 pos
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
pos	TokenNameIdentifier	 pos
<	TokenNameLESS	
g	TokenNameIdentifier	 g
.	TokenNameDOT	
getSequenceLength	TokenNameIdentifier	 get Sequence Length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
boolean	TokenNameboolean	
addedASegmentStartingAtPos	TokenNameIdentifier	 added A Segment Starting At Pos
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
len	TokenNameIdentifier	 len
=	TokenNameEQUAL	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
!	TokenNameNOT	
addedASegmentStartingAtPos	TokenNameIdentifier	 added A Segment Starting At Pos
&&	TokenNameAND_AND	
len	TokenNameIdentifier	 len
<=	TokenNameLESS_EQUAL	
maxSegmentSize	TokenNameIdentifier	 max Segment Size
;	TokenNameSEMICOLON	
len	TokenNameIdentifier	 len
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Instance	TokenNameIdentifier	 Instance
inst	TokenNameIdentifier	 inst
=	TokenNameEQUAL	
g	TokenNameIdentifier	 g
.	TokenNameDOT	
getSubsequenceInstance	TokenNameIdentifier	 get Subsequence Instance
(	TokenNameLPAREN	
pos	TokenNameIdentifier	 pos
,	TokenNameCOMMA	
pos	TokenNameIdentifier	 pos
+	TokenNamePLUS	
len	TokenNameIdentifier	 len
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ClassLabel	TokenNameIdentifier	 Class Label
label	TokenNameIdentifier	 label
=	TokenNameEQUAL	
g	TokenNameIdentifier	 g
.	TokenNameDOT	
getSubsequenceLabel	TokenNameIdentifier	 get Subsequence Label
(	TokenNameLPAREN	
pos	TokenNameIdentifier	 pos
,	TokenNameCOMMA	
pos	TokenNameIdentifier	 pos
+	TokenNamePLUS	
len	TokenNameIdentifier	 len
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
inst	TokenNameIdentifier	 inst
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
!	TokenNameNOT	
label	TokenNameIdentifier	 label
.	TokenNameDOT	
isNegative	TokenNameIdentifier	 is Negative
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
result	TokenNameIdentifier	 result
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
new	TokenNamenew	
Segmentation	TokenNameIdentifier	 Segmentation
.	TokenNameDOT	
Segment	TokenNameIdentifier	 Segment
(	TokenNameLPAREN	
pos	TokenNameIdentifier	 pos
,	TokenNameCOMMA	
pos	TokenNameIdentifier	 pos
+	TokenNamePLUS	
len	TokenNameIdentifier	 len
,	TokenNameCOMMA	
schema	TokenNameIdentifier	 schema
.	TokenNameDOT	
getClassIndex	TokenNameIdentifier	 get Class Index
(	TokenNameLPAREN	
label	TokenNameIdentifier	 label
.	TokenNameDOT	
bestClassName	TokenNameIdentifier	 best Class Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
addedASegmentStartingAtPos	TokenNameIdentifier	 added A Segment Starting At Pos
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
pos	TokenNameIdentifier	 pos
+=	TokenNamePLUS_EQUAL	
len	TokenNameIdentifier	 len
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
addedASegmentStartingAtPos	TokenNameIdentifier	 added A Segment Starting At Pos
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Instance inst = g.getSubsequenceInstance(pos,pos+1); 	TokenNameCOMMENT_LINE	Instance inst = g.getSubsequenceInstance(pos,pos+1); 
// ClassLabel label = g.getSubsequenceLabel(pos,pos+1); 	TokenNameCOMMENT_LINE	ClassLabel label = g.getSubsequenceLabel(pos,pos+1); 
result	TokenNameIdentifier	 result
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
new	TokenNamenew	
Segmentation	TokenNameIdentifier	 Segmentation
.	TokenNameDOT	
Segment	TokenNameIdentifier	 Segment
(	TokenNameLPAREN	
pos	TokenNameIdentifier	 pos
,	TokenNameCOMMA	
pos	TokenNameIdentifier	 pos
+	TokenNamePLUS	
1	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
schema	TokenNameIdentifier	 schema
.	TokenNameDOT	
getClassIndex	TokenNameIdentifier	 get Class Index
(	TokenNameLPAREN	
ExampleSchema	TokenNameIdentifier	 Example Schema
.	TokenNameDOT	
NEG_CLASS_NAME	TokenNameIdentifier	 NEG  CLASS  NAME
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
pos	TokenNameIdentifier	 pos
+=	TokenNamePLUS_EQUAL	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
result	TokenNameIdentifier	 result
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
static	TokenNamestatic	
public	TokenNamepublic	
class	TokenNameclass	
ViterbiSearcher	TokenNameIdentifier	 Viterbi Searcher
{	TokenNameLBRACE	
private	TokenNameprivate	
Classifier	TokenNameIdentifier	 Classifier
classifier	TokenNameIdentifier	 classifier
;	TokenNameSEMICOLON	
private	TokenNameprivate	
ExampleSchema	TokenNameIdentifier	 Example Schema
schema	TokenNameIdentifier	 schema
;	TokenNameSEMICOLON	
private	TokenNameprivate	
int	TokenNameint	
maxSegmentSize	TokenNameIdentifier	 max Segment Size
;	TokenNameSEMICOLON	
public	TokenNamepublic	
ViterbiSearcher	TokenNameIdentifier	 Viterbi Searcher
(	TokenNameLPAREN	
Classifier	TokenNameIdentifier	 Classifier
classifier	TokenNameIdentifier	 classifier
,	TokenNameCOMMA	
ExampleSchema	TokenNameIdentifier	 Example Schema
schema	TokenNameIdentifier	 schema
,	TokenNameCOMMA	
int	TokenNameint	
maxSegmentSize	TokenNameIdentifier	 max Segment Size
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
classifier	TokenNameIdentifier	 classifier
=	TokenNameEQUAL	
classifier	TokenNameIdentifier	 classifier
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
schema	TokenNameIdentifier	 schema
=	TokenNameEQUAL	
schema	TokenNameIdentifier	 schema
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
maxSegmentSize	TokenNameIdentifier	 max Segment Size
=	TokenNameEQUAL	
maxSegmentSize	TokenNameIdentifier	 max Segment Size
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
Segmentation	TokenNameIdentifier	 Segmentation
bestSegments	TokenNameIdentifier	 best Segments
(	TokenNameLPAREN	
CandidateSegmentGroup	TokenNameIdentifier	 Candidate Segment Group
g	TokenNameIdentifier	 g
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// for t=0..size, y=0 or 1, fty[t][y] is the highest score that 	TokenNameCOMMENT_LINE	for t=0..size, y=0 or 1, fty[t][y] is the highest score that 
// can be obtained with a segmentation of the tokens from 0..t 	TokenNameCOMMENT_LINE	can be obtained with a segmentation of the tokens from 0..t 
// that ends with class y (where y=1 means "from dictionary", y=0 	TokenNameCOMMENT_LINE	that ends with class y (where y=1 means "from dictionary", y=0 
// means "from null model") 	TokenNameCOMMENT_LINE	means "from null model") 
// initialize 	TokenNameCOMMENT_LINE	initialize 
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
history	TokenNameIdentifier	 history
=	TokenNameEQUAL	
new	TokenNamenew	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
1	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
int	TokenNameint	
seqLen	TokenNameIdentifier	 seq Len
=	TokenNameEQUAL	
g	TokenNameIdentifier	 g
.	TokenNameDOT	
getSequenceLength	TokenNameIdentifier	 get Sequence Length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
ny	TokenNameIdentifier	 ny
=	TokenNameEQUAL	
schema	TokenNameIdentifier	 schema
.	TokenNameDOT	
getNumberOfClasses	TokenNameIdentifier	 get Number Of Classes
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
backgroundClass	TokenNameIdentifier	 background Class
=	TokenNameEQUAL	
schema	TokenNameIdentifier	 schema
.	TokenNameDOT	
getClassIndex	TokenNameIdentifier	 get Class Index
(	TokenNameLPAREN	
ExampleSchema	TokenNameIdentifier	 Example Schema
.	TokenNameDOT	
NEG_CLASS_NAME	TokenNameIdentifier	 NEG  CLASS  NAME
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
double	TokenNamedouble	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
fty	TokenNameIdentifier	 fty
=	TokenNameEQUAL	
new	TokenNamenew	
double	TokenNamedouble	
[	TokenNameLBRACKET	
seqLen	TokenNameIdentifier	 seq Len
+	TokenNamePLUS	
1	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
ny	TokenNameIdentifier	 ny
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
BackPointer	TokenNameIdentifier	 Back Pointer
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
trace	TokenNameIdentifier	 trace
=	TokenNameEQUAL	
new	TokenNamenew	
BackPointer	TokenNameIdentifier	 Back Pointer
[	TokenNameLBRACKET	
seqLen	TokenNameIdentifier	 seq Len
+	TokenNamePLUS	
1	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
ny	TokenNameIdentifier	 ny
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
t	TokenNameIdentifier	 t
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
t	TokenNameIdentifier	 t
<	TokenNameLESS	
seqLen	TokenNameIdentifier	 seq Len
+	TokenNamePLUS	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
t	TokenNameIdentifier	 t
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
y	TokenNameIdentifier	 y
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
y	TokenNameIdentifier	 y
<	TokenNameLESS	
ny	TokenNameIdentifier	 ny
;	TokenNameSEMICOLON	
y	TokenNameIdentifier	 y
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
fty	TokenNameIdentifier	 fty
[	TokenNameLBRACKET	
t	TokenNameIdentifier	 t
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
y	TokenNameIdentifier	 y
]	TokenNameRBRACKET	
=	TokenNameEQUAL	
-	TokenNameMINUS	
99999	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
//could be -Double.MAX_VALUE; 	TokenNameCOMMENT_LINE	could be -Double.MAX_VALUE; 
trace	TokenNameIdentifier	 trace
[	TokenNameLBRACKET	
t	TokenNameIdentifier	 t
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
y	TokenNameIdentifier	 y
]	TokenNameRBRACKET	
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
y	TokenNameIdentifier	 y
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
y	TokenNameIdentifier	 y
<	TokenNameLESS	
ny	TokenNameIdentifier	 ny
;	TokenNameSEMICOLON	
y	TokenNameIdentifier	 y
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
fty	TokenNameIdentifier	 fty
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
y	TokenNameIdentifier	 y
]	TokenNameRBRACKET	
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
// fill the matrix fty[t][y] = score of maximal segmentation 	TokenNameCOMMENT_LINE	fill the matrix fty[t][y] = score of maximal segmentation 
// from 0..t that ends in y 	TokenNameCOMMENT_LINE	from 0..t that ends in y 
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
t	TokenNameIdentifier	 t
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
t	TokenNameIdentifier	 t
<	TokenNameLESS	
seqLen	TokenNameIdentifier	 seq Len
+	TokenNamePLUS	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
t	TokenNameIdentifier	 t
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
y	TokenNameIdentifier	 y
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
y	TokenNameIdentifier	 y
<	TokenNameLESS	
ny	TokenNameIdentifier	 ny
;	TokenNameSEMICOLON	
y	TokenNameIdentifier	 y
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
lastY	TokenNameIdentifier	 last Y
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
lastY	TokenNameIdentifier	 last Y
<	TokenNameLESS	
ny	TokenNameIdentifier	 ny
;	TokenNameSEMICOLON	
lastY	TokenNameIdentifier	 last Y
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
int	TokenNameint	
maxSegSizeForY	TokenNameIdentifier	 max Seg Size For Y
=	TokenNameEQUAL	
y	TokenNameIdentifier	 y
==	TokenNameEQUAL_EQUAL	
backgroundClass	TokenNameIdentifier	 background Class
?	TokenNameQUESTION	
1	TokenNameIntegerLiteral	
:	TokenNameCOLON	
maxSegmentSize	TokenNameIdentifier	 max Segment Size
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
lastT	TokenNameIdentifier	 last T
=	TokenNameEQUAL	
Math	TokenNameIdentifier	 Math
.	TokenNameDOT	
max	TokenNameIdentifier	 max
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
t	TokenNameIdentifier	 t
-	TokenNameMINUS	
maxSegSizeForY	TokenNameIdentifier	 max Seg Size For Y
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
lastT	TokenNameIdentifier	 last T
<	TokenNameLESS	
t	TokenNameIdentifier	 t
;	TokenNameSEMICOLON	
lastT	TokenNameIdentifier	 last T
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// find the classifier's score for the subsequence from lastT to t 	TokenNameCOMMENT_LINE	find the classifier's score for the subsequence from lastT to t 
// with label y and previous label lastY 	TokenNameCOMMENT_LINE	with label y and previous label lastY 
Instance	TokenNameIdentifier	 Instance
segmentInstance	TokenNameIdentifier	 segment Instance
=	TokenNameEQUAL	
g	TokenNameIdentifier	 g
.	TokenNameDOT	
getSubsequenceInstance	TokenNameIdentifier	 get Subsequence Instance
(	TokenNameLPAREN	
lastT	TokenNameIdentifier	 last T
,	TokenNameCOMMA	
t	TokenNameIdentifier	 t
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
segmentInstance	TokenNameIdentifier	 segment Instance
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
history	TokenNameIdentifier	 history
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
=	TokenNameEQUAL	
schema	TokenNameIdentifier	 schema
.	TokenNameDOT	
getClassName	TokenNameIdentifier	 get Class Name
(	TokenNameLPAREN	
lastY	TokenNameIdentifier	 last Y
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
InstanceFromSequence	TokenNameIdentifier	 Instance From Sequence
seqSegmentInstance	TokenNameIdentifier	 seq Segment Instance
=	TokenNameEQUAL	
new	TokenNamenew	
InstanceFromSequence	TokenNameIdentifier	 Instance From Sequence
(	TokenNameLPAREN	
segmentInstance	TokenNameIdentifier	 segment Instance
,	TokenNameCOMMA	
history	TokenNameIdentifier	 history
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
double	TokenNamedouble	
segmentScore	TokenNameIdentifier	 segment Score
=	TokenNameEQUAL	
classifier	TokenNameIdentifier	 classifier
.	TokenNameDOT	
classification	TokenNameIdentifier	 classification
(	TokenNameLPAREN	
seqSegmentInstance	TokenNameIdentifier	 seq Segment Instance
)	TokenNameRPAREN	
.	TokenNameDOT	
getWeight	TokenNameIdentifier	 get Weight
(	TokenNameLPAREN	
schema	TokenNameIdentifier	 schema
.	TokenNameDOT	
getClassName	TokenNameIdentifier	 get Class Name
(	TokenNameLPAREN	
y	TokenNameIdentifier	 y
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// store the max score (over all lastT,lastY) in fty 	TokenNameCOMMENT_LINE	store the max score (over all lastT,lastY) in fty 
if	TokenNameif	
(	TokenNameLPAREN	
segmentScore	TokenNameIdentifier	 segment Score
+	TokenNamePLUS	
fty	TokenNameIdentifier	 fty
[	TokenNameLBRACKET	
lastT	TokenNameIdentifier	 last T
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
lastY	TokenNameIdentifier	 last Y
]	TokenNameRBRACKET	
>	TokenNameGREATER	
fty	TokenNameIdentifier	 fty
[	TokenNameLBRACKET	
t	TokenNameIdentifier	 t
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
y	TokenNameIdentifier	 y
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
fty	TokenNameIdentifier	 fty
[	TokenNameLBRACKET	
t	TokenNameIdentifier	 t
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
y	TokenNameIdentifier	 y
]	TokenNameRBRACKET	
=	TokenNameEQUAL	
segmentScore	TokenNameIdentifier	 segment Score
+	TokenNamePLUS	
fty	TokenNameIdentifier	 fty
[	TokenNameLBRACKET	
lastT	TokenNameIdentifier	 last T
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
lastY	TokenNameIdentifier	 last Y
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
trace	TokenNameIdentifier	 trace
[	TokenNameLBRACKET	
t	TokenNameIdentifier	 t
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
y	TokenNameIdentifier	 y
]	TokenNameRBRACKET	
=	TokenNameEQUAL	
new	TokenNamenew	
BackPointer	TokenNameIdentifier	 Back Pointer
(	TokenNameLPAREN	
lastT	TokenNameIdentifier	 last T
,	TokenNameCOMMA	
t	TokenNameIdentifier	 t
,	TokenNameCOMMA	
lastY	TokenNameIdentifier	 last Y
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// use the back pointers to find the best segmentation that ends at t==documentSize 	TokenNameCOMMENT_LINE	use the back pointers to find the best segmentation that ends at t==documentSize 
int	TokenNameint	
bestEndY	TokenNameIdentifier	 best End Y
=	TokenNameEQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
double	TokenNamedouble	
bestEndYScore	TokenNameIdentifier	 best End Y Score
=	TokenNameEQUAL	
-	TokenNameMINUS	
Double	TokenNameIdentifier	 Double
.	TokenNameDOT	
MAX_VALUE	TokenNameIdentifier	 MAX  VALUE
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
y	TokenNameIdentifier	 y
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
y	TokenNameIdentifier	 y
<	TokenNameLESS	
ny	TokenNameIdentifier	 ny
;	TokenNameSEMICOLON	
y	TokenNameIdentifier	 y
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
fty	TokenNameIdentifier	 fty
[	TokenNameLBRACKET	
seqLen	TokenNameIdentifier	 seq Len
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
y	TokenNameIdentifier	 y
]	TokenNameRBRACKET	
>	TokenNameGREATER	
bestEndYScore	TokenNameIdentifier	 best End Y Score
)	TokenNameRPAREN	
{	TokenNameLBRACE	
bestEndYScore	TokenNameIdentifier	 best End Y Score
=	TokenNameEQUAL	
fty	TokenNameIdentifier	 fty
[	TokenNameLBRACKET	
seqLen	TokenNameIdentifier	 seq Len
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
y	TokenNameIdentifier	 y
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
bestEndY	TokenNameIdentifier	 best End Y
=	TokenNameEQUAL	
y	TokenNameIdentifier	 y
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
Segmentation	TokenNameIdentifier	 Segmentation
result	TokenNameIdentifier	 result
=	TokenNameEQUAL	
new	TokenNamenew	
Segmentation	TokenNameIdentifier	 Segmentation
(	TokenNameLPAREN	
schema	TokenNameIdentifier	 schema
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
y	TokenNameIdentifier	 y
=	TokenNameEQUAL	
bestEndY	TokenNameIdentifier	 best End Y
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
BackPointer	TokenNameIdentifier	 Back Pointer
bp	TokenNameIdentifier	 bp
=	TokenNameEQUAL	
trace	TokenNameIdentifier	 trace
[	TokenNameLBRACKET	
seqLen	TokenNameIdentifier	 seq Len
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
y	TokenNameIdentifier	 y
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
bp	TokenNameIdentifier	 bp
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
bp	TokenNameIdentifier	 bp
=	TokenNameEQUAL	
trace	TokenNameIdentifier	 trace
[	TokenNameLBRACKET	
bp	TokenNameIdentifier	 bp
.	TokenNameDOT	
lastT	TokenNameIdentifier	 last T
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
bp	TokenNameIdentifier	 bp
.	TokenNameDOT	
lastY	TokenNameIdentifier	 last Y
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
bp	TokenNameIdentifier	 bp
.	TokenNameDOT	
onBestPath	TokenNameIdentifier	 on Best Path
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
result	TokenNameIdentifier	 result
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
new	TokenNamenew	
Segmentation	TokenNameIdentifier	 Segmentation
.	TokenNameDOT	
Segment	TokenNameIdentifier	 Segment
(	TokenNameLPAREN	
bp	TokenNameIdentifier	 bp
.	TokenNameDOT	
lastT	TokenNameIdentifier	 last T
,	TokenNameCOMMA	
bp	TokenNameIdentifier	 bp
.	TokenNameDOT	
t	TokenNameIdentifier	 t
,	TokenNameCOMMA	
y	TokenNameIdentifier	 y
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
y	TokenNameIdentifier	 y
=	TokenNameEQUAL	
bp	TokenNameIdentifier	 bp
.	TokenNameDOT	
lastY	TokenNameIdentifier	 last Y
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
DEBUG	TokenNameIdentifier	 DEBUG
)	TokenNameRPAREN	
dumpStuff	TokenNameIdentifier	 dump Stuff
(	TokenNameLPAREN	
g	TokenNameIdentifier	 g
,	TokenNameCOMMA	
fty	TokenNameIdentifier	 fty
,	TokenNameCOMMA	
trace	TokenNameIdentifier	 trace
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
result	TokenNameIdentifier	 result
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
private	TokenNameprivate	
static	TokenNamestatic	
class	TokenNameclass	
BackPointer	TokenNameIdentifier	 Back Pointer
{	TokenNameLBRACE	
public	TokenNamepublic	
int	TokenNameint	
lastT	TokenNameIdentifier	 last T
,	TokenNameCOMMA	
t	TokenNameIdentifier	 t
,	TokenNameCOMMA	
lastY	TokenNameIdentifier	 last Y
;	TokenNameSEMICOLON	
public	TokenNamepublic	
boolean	TokenNameboolean	
onBestPath	TokenNameIdentifier	 on Best Path
;	TokenNameSEMICOLON	
public	TokenNamepublic	
BackPointer	TokenNameIdentifier	 Back Pointer
(	TokenNameLPAREN	
int	TokenNameint	
lastT	TokenNameIdentifier	 last T
,	TokenNameCOMMA	
int	TokenNameint	
t	TokenNameIdentifier	 t
,	TokenNameCOMMA	
int	TokenNameint	
lastY	TokenNameIdentifier	 last Y
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
lastT	TokenNameIdentifier	 last T
=	TokenNameEQUAL	
lastT	TokenNameIdentifier	 last T
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
t	TokenNameIdentifier	 t
=	TokenNameEQUAL	
t	TokenNameIdentifier	 t
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
lastY	TokenNameIdentifier	 last Y
=	TokenNameEQUAL	
lastY	TokenNameIdentifier	 last Y
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
onBestPath	TokenNameIdentifier	 on Best Path
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
private	TokenNameprivate	
static	TokenNamestatic	
void	TokenNamevoid	
dumpStuff	TokenNameIdentifier	 dump Stuff
(	TokenNameLPAREN	
CandidateSegmentGroup	TokenNameIdentifier	 Candidate Segment Group
g	TokenNameIdentifier	 g
,	TokenNameCOMMA	
double	TokenNamedouble	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
fty	TokenNameIdentifier	 fty
,	TokenNameCOMMA	
BackPointer	TokenNameIdentifier	 Back Pointer
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
trace	TokenNameIdentifier	 trace
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Example	TokenNameIdentifier	 Example
nullExample	TokenNameIdentifier	 null Example
=	TokenNameEQUAL	
new	TokenNamenew	
Example	TokenNameIdentifier	 Example
(	TokenNameLPAREN	
new	TokenNamenew	
MutableInstance	TokenNameIdentifier	 Mutable Instance
(	TokenNameLPAREN	
"*NULL*"	TokenNameStringLiteral	*NULL*
)	TokenNameRPAREN	
,	TokenNameCOMMA	
new	TokenNamenew	
ClassLabel	TokenNameIdentifier	 Class Label
(	TokenNameLPAREN	
"*NULL*"	TokenNameStringLiteral	*NULL*
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
text	TokenNameIdentifier	 text
.	TokenNameDOT	
DecimalFormat	TokenNameIdentifier	 Decimal Format
format	TokenNameIdentifier	 format
=	TokenNameEQUAL	
new	TokenNamenew	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
text	TokenNameIdentifier	 text
.	TokenNameDOT	
DecimalFormat	TokenNameIdentifier	 Decimal Format
(	TokenNameLPAREN	
"####.###"	TokenNameStringLiteral	####.###
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
println	TokenNameIdentifier	 println
(	TokenNameLPAREN	
"t.y f(t,y) t'.y' span"	TokenNameStringLiteral	t.y f(t,y) t'.y' span
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
t	TokenNameIdentifier	 t
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
t	TokenNameIdentifier	 t
<	TokenNameLESS	
fty	TokenNameIdentifier	 fty
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
t	TokenNameIdentifier	 t
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
y	TokenNameIdentifier	 y
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
y	TokenNameIdentifier	 y
<	TokenNameLESS	
fty	TokenNameIdentifier	 fty
[	TokenNameLBRACKET	
t	TokenNameIdentifier	 t
]	TokenNameRBRACKET	
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
y	TokenNameIdentifier	 y
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
BackPointer	TokenNameIdentifier	 Back Pointer
bp	TokenNameIdentifier	 bp
=	TokenNameEQUAL	
trace	TokenNameIdentifier	 trace
[	TokenNameLBRACKET	
t	TokenNameIdentifier	 t
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
y	TokenNameIdentifier	 y
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
Example	TokenNameIdentifier	 Example
ex	TokenNameIdentifier	 ex
=	TokenNameEQUAL	
bp	TokenNameIdentifier	 bp
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
?	TokenNameQUESTION	
nullExample	TokenNameIdentifier	 null Example
:	TokenNameCOLON	
g	TokenNameIdentifier	 g
.	TokenNameDOT	
getSubsequenceExample	TokenNameIdentifier	 get Subsequence Example
(	TokenNameLPAREN	
bp	TokenNameIdentifier	 bp
.	TokenNameDOT	
lastT	TokenNameIdentifier	 last T
,	TokenNameCOMMA	
bp	TokenNameIdentifier	 bp
.	TokenNameDOT	
t	TokenNameIdentifier	 t
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
bp	TokenNameIdentifier	 bp
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
bp	TokenNameIdentifier	 bp
=	TokenNameEQUAL	
new	TokenNamenew	
BackPointer	TokenNameIdentifier	 Back Pointer
(	TokenNameLPAREN	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
marker	TokenNameIdentifier	 marker
=	TokenNameEQUAL	
bp	TokenNameIdentifier	 bp
.	TokenNameDOT	
onBestPath	TokenNameIdentifier	 on Best Path
?	TokenNameQUESTION	
"<=="	TokenNameStringLiteral	<==
:	TokenNameCOLON	
""	TokenNameStringLiteral	 
;	TokenNameSEMICOLON	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
println	TokenNameIdentifier	 println
(	TokenNameLPAREN	
t	TokenNameIdentifier	 t
+	TokenNamePLUS	
"."	TokenNameStringLiteral	.
+	TokenNamePLUS	
y	TokenNameIdentifier	 y
+	TokenNamePLUS	
" "	TokenNameStringLiteral	 
+	TokenNamePLUS	
format	TokenNameIdentifier	 format
.	TokenNameDOT	
format	TokenNameIdentifier	 format
(	TokenNameLPAREN	
fty	TokenNameIdentifier	 fty
[	TokenNameLBRACKET	
t	TokenNameIdentifier	 t
]	TokenNameRBRACKET	
[	TokenNameLBRACKET	
y	TokenNameIdentifier	 y
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" "	TokenNameStringLiteral	 
+	TokenNamePLUS	
bp	TokenNameIdentifier	 bp
.	TokenNameDOT	
lastT	TokenNameIdentifier	 last T
+	TokenNamePLUS	
"."	TokenNameStringLiteral	.
+	TokenNamePLUS	
bp	TokenNameIdentifier	 bp
.	TokenNameDOT	
lastY	TokenNameIdentifier	 last Y
+	TokenNamePLUS	
" '"	TokenNameStringLiteral	 '
+	TokenNamePLUS	
ex	TokenNameIdentifier	 ex
.	TokenNameDOT	
getSource	TokenNameIdentifier	 get Source
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
"' "	TokenNameStringLiteral	' 
+	TokenNamePLUS	
marker	TokenNameIdentifier	 marker
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
public	TokenNamepublic	
static	TokenNamestatic	
class	TokenNameclass	
ViterbiSegmenter	TokenNameIdentifier	 Viterbi Segmenter
implements	TokenNameimplements	
Segmenter	TokenNameIdentifier	 Segmenter
,	TokenNameCOMMA	
Visible	TokenNameIdentifier	 Visible
,	TokenNameCOMMA	
Serializable	TokenNameIdentifier	 Serializable
{	TokenNameLBRACE	
static	TokenNamestatic	
private	TokenNameprivate	
final	TokenNamefinal	
long	TokenNamelong	
serialVersionUID	TokenNameIdentifier	 serial Version UID
=	TokenNameEQUAL	
20080207L	TokenNameLongLiteral	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
Classifier	TokenNameIdentifier	 Classifier
c	TokenNameIdentifier	 c
;	TokenNameSEMICOLON	
private	TokenNameprivate	
ExampleSchema	TokenNameIdentifier	 Example Schema
schema	TokenNameIdentifier	 schema
;	TokenNameSEMICOLON	
private	TokenNameprivate	
int	TokenNameint	
maxSegSize	TokenNameIdentifier	 max Seg Size
;	TokenNameSEMICOLON	
public	TokenNamepublic	
ViterbiSegmenter	TokenNameIdentifier	 Viterbi Segmenter
(	TokenNameLPAREN	
Classifier	TokenNameIdentifier	 Classifier
c	TokenNameIdentifier	 c
,	TokenNameCOMMA	
ExampleSchema	TokenNameIdentifier	 Example Schema
schema	TokenNameIdentifier	 schema
,	TokenNameCOMMA	
int	TokenNameint	
maxSegSize	TokenNameIdentifier	 max Seg Size
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
c	TokenNameIdentifier	 c
=	TokenNameEQUAL	
c	TokenNameIdentifier	 c
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
schema	TokenNameIdentifier	 schema
=	TokenNameEQUAL	
schema	TokenNameIdentifier	 schema
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
maxSegSize	TokenNameIdentifier	 max Seg Size
=	TokenNameEQUAL	
maxSegSize	TokenNameIdentifier	 max Seg Size
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
Segmentation	TokenNameIdentifier	 Segmentation
segmentation	TokenNameIdentifier	 segmentation
(	TokenNameLPAREN	
CandidateSegmentGroup	TokenNameIdentifier	 Candidate Segment Group
g	TokenNameIdentifier	 g
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
new	TokenNamenew	
ViterbiSearcher	TokenNameIdentifier	 Viterbi Searcher
(	TokenNameLPAREN	
c	TokenNameIdentifier	 c
,	TokenNameCOMMA	
schema	TokenNameIdentifier	 schema
,	TokenNameCOMMA	
maxSegSize	TokenNameIdentifier	 max Seg Size
)	TokenNameRPAREN	
.	TokenNameDOT	
bestSegments	TokenNameIdentifier	 best Segments
(	TokenNameLPAREN	
g	TokenNameIdentifier	 g
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
String	TokenNameIdentifier	 String
explain	TokenNameIdentifier	 explain
(	TokenNameLPAREN	
CandidateSegmentGroup	TokenNameIdentifier	 Candidate Segment Group
g	TokenNameIdentifier	 g
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
"not implemented yet"	TokenNameStringLiteral	not implemented yet
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
Viewer	TokenNameIdentifier	 Viewer
toGUI	TokenNameIdentifier	 to GUI
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Viewer	TokenNameIdentifier	 Viewer
v	TokenNameIdentifier	 v
=	TokenNameEQUAL	
new	TokenNamenew	
ComponentViewer	TokenNameIdentifier	 Component Viewer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
static	TokenNamestatic	
final	TokenNamefinal	
long	TokenNamelong	
serialVersionUID	TokenNameIdentifier	 serial Version UID
=	TokenNameEQUAL	
20080207L	TokenNameLongLiteral	
;	TokenNameSEMICOLON	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
JComponent	TokenNameIdentifier	 J Component
componentFor	TokenNameIdentifier	 component For
(	TokenNameLPAREN	
Object	TokenNameIdentifier	 Object
o	TokenNameIdentifier	 o
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ViterbiSegmenter	TokenNameIdentifier	 Viterbi Segmenter
vs	TokenNameIdentifier	 vs
=	TokenNameEQUAL	
(	TokenNameLPAREN	
ViterbiSegmenter	TokenNameIdentifier	 Viterbi Segmenter
)	TokenNameRPAREN	
o	TokenNameIdentifier	 o
;	TokenNameSEMICOLON	
JPanel	TokenNameIdentifier	 J Panel
mainPanel	TokenNameIdentifier	 main Panel
=	TokenNameEQUAL	
new	TokenNamenew	
JPanel	TokenNameIdentifier	 J Panel
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
mainPanel	TokenNameIdentifier	 main Panel
.	TokenNameDOT	
setLayout	TokenNameIdentifier	 set Layout
(	TokenNameLPAREN	
new	TokenNamenew	
BorderLayout	TokenNameIdentifier	 Border Layout
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
mainPanel	TokenNameIdentifier	 main Panel
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
new	TokenNamenew	
JLabel	TokenNameIdentifier	 J Label
(	TokenNameLPAREN	
"ViterbiSegmenter: maxSegSize="	TokenNameStringLiteral	ViterbiSegmenter: maxSegSize=
+	TokenNamePLUS	
vs	TokenNameIdentifier	 vs
.	TokenNameDOT	
maxSegSize	TokenNameIdentifier	 max Seg Size
)	TokenNameRPAREN	
,	TokenNameCOMMA	
BorderLayout	TokenNameIdentifier	 Border Layout
.	TokenNameDOT	
NORTH	TokenNameIdentifier	 NORTH
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Viewer	TokenNameIdentifier	 Viewer
subView	TokenNameIdentifier	 sub View
=	TokenNameEQUAL	
new	TokenNamenew	
SmartVanillaViewer	TokenNameIdentifier	 Smart Vanilla Viewer
(	TokenNameLPAREN	
vs	TokenNameIdentifier	 vs
.	TokenNameDOT	
c	TokenNameIdentifier	 c
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
subView	TokenNameIdentifier	 sub View
.	TokenNameDOT	
setSuperView	TokenNameIdentifier	 set Super View
(	TokenNameLPAREN	
this	TokenNamethis	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
mainPanel	TokenNameIdentifier	 main Panel
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
subView	TokenNameIdentifier	 sub View
,	TokenNameCOMMA	
BorderLayout	TokenNameIdentifier	 Border Layout
.	TokenNameDOT	
SOUTH	TokenNameIdentifier	 SOUTH
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
mainPanel	TokenNameIdentifier	 main Panel
.	TokenNameDOT	
setBorder	TokenNameIdentifier	 set Border
(	TokenNameLPAREN	
new	TokenNamenew	
TitledBorder	TokenNameIdentifier	 Titled Border
(	TokenNameLPAREN	
"ViterbiSegmenter"	TokenNameStringLiteral	ViterbiSegmenter
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
new	TokenNamenew	
JScrollPane	TokenNameIdentifier	 J Scroll Pane
(	TokenNameLPAREN	
mainPanel	TokenNameIdentifier	 main Panel
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
;	TokenNameSEMICOLON	
v	TokenNameIdentifier	 v
.	TokenNameDOT	
setContent	TokenNameIdentifier	 set Content
(	TokenNameLPAREN	
this	TokenNamethis	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
v	TokenNameIdentifier	 v
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
