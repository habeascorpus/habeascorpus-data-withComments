/* Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
renderable	TokenNameIdentifier	 renderable
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
Composite	TokenNameIdentifier	 Composite
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
Graphics2D	TokenNameIdentifier	 Graphics2 D
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
Rectangle	TokenNameIdentifier	 Rectangle
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
RenderingHints	TokenNameIdentifier	 Rendering Hints
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
Shape	TokenNameIdentifier	 Shape
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
color	TokenNameIdentifier	 color
.	TokenNameDOT	
ColorSpace	TokenNameIdentifier	 Color Space
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
geom	TokenNameIdentifier	 geom
.	TokenNameDOT	
AffineTransform	TokenNameIdentifier	 Affine Transform
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
geom	TokenNameIdentifier	 geom
.	TokenNameDOT	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
RenderedImage	TokenNameIdentifier	 Rendered Image
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
renderable	TokenNameIdentifier	 renderable
.	TokenNameDOT	
RenderContext	TokenNameIdentifier	 Render Context
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
renderable	TokenNameIdentifier	 renderable
.	TokenNameDOT	
RenderableImage	TokenNameIdentifier	 Renderable Image
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
lang	TokenNameIdentifier	 lang
.	TokenNameDOT	
ref	TokenNameIdentifier	 ref
.	TokenNameDOT	
Reference	TokenNameIdentifier	 Reference
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
lang	TokenNameIdentifier	 lang
.	TokenNameDOT	
ref	TokenNameIdentifier	 ref
.	TokenNameDOT	
SoftReference	TokenNameIdentifier	 Soft Reference
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Iterator	TokenNameIdentifier	 Iterator
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ListIterator	TokenNameIdentifier	 List Iterator
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
List	TokenNameIdentifier	 List
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
CompositeRule	TokenNameIdentifier	 Composite Rule
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
GraphicsUtil	TokenNameIdentifier	 Graphics Util
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
SVGComposite	TokenNameIdentifier	 SVG Composite
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
rendered	TokenNameIdentifier	 rendered
.	TokenNameDOT	
AffineRed	TokenNameIdentifier	 Affine Red
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
rendered	TokenNameIdentifier	 rendered
.	TokenNameDOT	
TileCacheRed	TokenNameIdentifier	 Tile Cache Red
;	TokenNameSEMICOLON	
/** * Interface for implementing filter resolution. * * @author <a href="mailto:vincent.hardy@eng.sun.com">Vincent Hardy</a> * @version $Id: FilterResRable8Bit.java 501844 2007-01-31 13:54:05Z dvholten $ */	TokenNameCOMMENT_JAVADOC	 Interface for implementing filter resolution. * @author <a href="mailto:vincent.hardy@eng.sun.com">Vincent Hardy</a> @version $Id: FilterResRable8Bit.java 501844 2007-01-31 13:54:05Z dvholten $ 
public	TokenNamepublic	
class	TokenNameclass	
FilterResRable8Bit	TokenNameIdentifier	 Filter Res Rable8 Bit
extends	TokenNameextends	
AbstractRable	TokenNameIdentifier	 Abstract Rable
implements	TokenNameimplements	
FilterResRable	TokenNameIdentifier	 Filter Res Rable
,	TokenNameCOMMA	
PaintRable	TokenNameIdentifier	 Paint Rable
{	TokenNameLBRACE	
/** * Filter resolution along the x-axis */	TokenNameCOMMENT_JAVADOC	 Filter resolution along the x-axis 
private	TokenNameprivate	
int	TokenNameint	
filterResolutionX	TokenNameIdentifier	 filter Resolution X
=	TokenNameEQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
/** * Filter resolution along the y-axis */	TokenNameCOMMENT_JAVADOC	 Filter resolution along the y-axis 
private	TokenNameprivate	
int	TokenNameint	
filterResolutionY	TokenNameIdentifier	 filter Resolution Y
=	TokenNameEQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
public	TokenNamepublic	
FilterResRable8Bit	TokenNameIdentifier	 Filter Res Rable8 Bit
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// System.out.println("Using FilterResRable8bit..."); 	TokenNameCOMMENT_LINE	System.out.println("Using FilterResRable8bit..."); 
}	TokenNameRBRACE	
public	TokenNamepublic	
FilterResRable8Bit	TokenNameIdentifier	 Filter Res Rable8 Bit
(	TokenNameLPAREN	
Filter	TokenNameIdentifier	 Filter
src	TokenNameIdentifier	 src
,	TokenNameCOMMA	
int	TokenNameint	
filterResX	TokenNameIdentifier	 filter Res X
,	TokenNameCOMMA	
int	TokenNameint	
filterResY	TokenNameIdentifier	 filter Res Y
)	TokenNameRPAREN	
{	TokenNameLBRACE	
init	TokenNameIdentifier	 init
(	TokenNameLPAREN	
src	TokenNameIdentifier	 src
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
setFilterResolutionX	TokenNameIdentifier	 set Filter Resolution X
(	TokenNameLPAREN	
filterResX	TokenNameIdentifier	 filter Res X
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
setFilterResolutionY	TokenNameIdentifier	 set Filter Resolution Y
(	TokenNameLPAREN	
filterResY	TokenNameIdentifier	 filter Res Y
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the source to be cropped. */	TokenNameCOMMENT_JAVADOC	 Returns the source to be cropped. 
public	TokenNamepublic	
Filter	TokenNameIdentifier	 Filter
getSource	TokenNameIdentifier	 get Source
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
(	TokenNameLPAREN	
Filter	TokenNameIdentifier	 Filter
)	TokenNameRPAREN	
srcs	TokenNameIdentifier	 srcs
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Sets the source to be cropped * @param src image to offset. */	TokenNameCOMMENT_JAVADOC	 Sets the source to be cropped @param src image to offset. 
public	TokenNamepublic	
void	TokenNamevoid	
setSource	TokenNameIdentifier	 set Source
(	TokenNameLPAREN	
Filter	TokenNameIdentifier	 Filter
src	TokenNameIdentifier	 src
)	TokenNameRPAREN	
{	TokenNameLBRACE	
init	TokenNameIdentifier	 init
(	TokenNameLPAREN	
src	TokenNameIdentifier	 src
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the resolution along the X axis. */	TokenNameCOMMENT_JAVADOC	 Returns the resolution along the X axis. 
public	TokenNamepublic	
int	TokenNameint	
getFilterResolutionX	TokenNameIdentifier	 get Filter Resolution X
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
filterResolutionX	TokenNameIdentifier	 filter Resolution X
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Sets the resolution along the X axis, i.e., the maximum * size for intermediate images along that axis. * The value should be greater than zero to have an effect. * Negative values are illegal. */	TokenNameCOMMENT_JAVADOC	 Sets the resolution along the X axis, i.e., the maximum size for intermediate images along that axis. The value should be greater than zero to have an effect. Negative values are illegal. 
public	TokenNamepublic	
void	TokenNamevoid	
setFilterResolutionX	TokenNameIdentifier	 set Filter Resolution X
(	TokenNameLPAREN	
int	TokenNameint	
filterResolutionX	TokenNameIdentifier	 filter Resolution X
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
filterResolutionX	TokenNameIdentifier	 filter Resolution X
<	TokenNameLESS	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
touch	TokenNameIdentifier	 touch
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
filterResolutionX	TokenNameIdentifier	 filter Resolution X
=	TokenNameEQUAL	
filterResolutionX	TokenNameIdentifier	 filter Resolution X
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the resolution along the Y axis. */	TokenNameCOMMENT_JAVADOC	 Returns the resolution along the Y axis. 
public	TokenNamepublic	
int	TokenNameint	
getFilterResolutionY	TokenNameIdentifier	 get Filter Resolution Y
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
filterResolutionY	TokenNameIdentifier	 filter Resolution Y
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Sets the resolution along the Y axis, i.e., the maximum * size for intermediate images along that axis. * If the Y-value is less than zero, the scale applied to * the rendered images is computed to preserve the image's aspect ratio */	TokenNameCOMMENT_JAVADOC	 Sets the resolution along the Y axis, i.e., the maximum size for intermediate images along that axis. If the Y-value is less than zero, the scale applied to the rendered images is computed to preserve the image's aspect ratio 
public	TokenNamepublic	
void	TokenNamevoid	
setFilterResolutionY	TokenNameIdentifier	 set Filter Resolution Y
(	TokenNameLPAREN	
int	TokenNameint	
filterResolutionY	TokenNameIdentifier	 filter Resolution Y
)	TokenNameRPAREN	
{	TokenNameLBRACE	
touch	TokenNameIdentifier	 touch
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
filterResolutionY	TokenNameIdentifier	 filter Resolution Y
=	TokenNameEQUAL	
filterResolutionY	TokenNameIdentifier	 filter Resolution Y
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * This returns true if <tt>ri</tt> and all of <tt>ri</tt>'s * sources implement the PaintRable interface. This is used to * indicate that the chain has a good potential for bypassing the * filterRes operation entirely. * * Ideally there would be a checkPaintRable method in PaintRable * that could be used to get a definate answer about a filters * ability to draw directly to a Graphics2D (this can sometimes * 'fail' because of the way the Graphics2D is currently * configured). */	TokenNameCOMMENT_JAVADOC	 This returns true if <tt>ri</tt> and all of <tt>ri</tt>'s sources implement the PaintRable interface. This is used to indicate that the chain has a good potential for bypassing the filterRes operation entirely. * Ideally there would be a checkPaintRable method in PaintRable that could be used to get a definate answer about a filters ability to draw directly to a Graphics2D (this can sometimes 'fail' because of the way the Graphics2D is currently configured). 
public	TokenNamepublic	
boolean	TokenNameboolean	
allPaintRable	TokenNameIdentifier	 all Paint Rable
(	TokenNameLPAREN	
RenderableImage	TokenNameIdentifier	 Renderable Image
ri	TokenNameIdentifier	 ri
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
(	TokenNameLPAREN	
ri	TokenNameIdentifier	 ri
instanceof	TokenNameinstanceof	
PaintRable	TokenNameIdentifier	 Paint Rable
)	TokenNameRPAREN	
)	TokenNameRPAREN	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
List	TokenNameIdentifier	 List
v	TokenNameIdentifier	 v
=	TokenNameEQUAL	
ri	TokenNameIdentifier	 ri
.	TokenNameDOT	
getSources	TokenNameIdentifier	 get Sources
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// No sources and we are PaintRable so the chain is PaintRable. 	TokenNameCOMMENT_LINE	No sources and we are PaintRable so the chain is PaintRable. 
if	TokenNameif	
(	TokenNameLPAREN	
v	TokenNameIdentifier	 v
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
Iterator	TokenNameIdentifier	 Iterator
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
v	TokenNameIdentifier	 v
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
RenderableImage	TokenNameIdentifier	 Renderable Image
nri	TokenNameIdentifier	 nri
=	TokenNameEQUAL	
(	TokenNameLPAREN	
RenderableImage	TokenNameIdentifier	 Renderable Image
)	TokenNameRPAREN	
i	TokenNameIdentifier	 i
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// A source is not paintRable so we are not 100% paintRable. 	TokenNameCOMMENT_LINE	A source is not paintRable so we are not 100% paintRable. 
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
allPaintRable	TokenNameIdentifier	 all Paint Rable
(	TokenNameLPAREN	
nri	TokenNameIdentifier	 nri
)	TokenNameRPAREN	
)	TokenNameRPAREN	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * This function attempts to distribute the filterRes operation * across src. Right now it knows about two operations, pad and * composite. It's main target is the composite but often pad * operations are sprinked in the chain so it needs to know about * them. This list could be extended however if it gets much * longer it should probably be rolled into a new 'helper interface' * like PaintRable. * * NOTE: This is essentially a bad hack, but it is a hack that is * recomended by the SVG specification so I do it. */	TokenNameCOMMENT_JAVADOC	 This function attempts to distribute the filterRes operation across src. Right now it knows about two operations, pad and composite. It's main target is the composite but often pad operations are sprinked in the chain so it needs to know about them. This list could be extended however if it gets much longer it should probably be rolled into a new 'helper interface' like PaintRable. * NOTE: This is essentially a bad hack, but it is a hack that is recomended by the SVG specification so I do it. 
public	TokenNamepublic	
boolean	TokenNameboolean	
distributeAcross	TokenNameIdentifier	 distribute Across
(	TokenNameLPAREN	
RenderableImage	TokenNameIdentifier	 Renderable Image
src	TokenNameIdentifier	 src
,	TokenNameCOMMA	
Graphics2D	TokenNameIdentifier	 Graphics2 D
g2d	TokenNameIdentifier	 g2d
)	TokenNameRPAREN	
{	TokenNameLBRACE	
boolean	TokenNameboolean	
ret	TokenNameIdentifier	 ret
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
src	TokenNameIdentifier	 src
instanceof	TokenNameinstanceof	
PadRable	TokenNameIdentifier	 Pad Rable
)	TokenNameRPAREN	
{	TokenNameLBRACE	
PadRable	TokenNameIdentifier	 Pad Rable
pad	TokenNameIdentifier	 pad
=	TokenNameEQUAL	
(	TokenNameLPAREN	
PadRable	TokenNameIdentifier	 Pad Rable
)	TokenNameRPAREN	
src	TokenNameIdentifier	 src
;	TokenNameSEMICOLON	
Shape	TokenNameIdentifier	 Shape
clip	TokenNameIdentifier	 clip
=	TokenNameEQUAL	
g2d	TokenNameIdentifier	 g2d
.	TokenNameDOT	
getClip	TokenNameIdentifier	 get Clip
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
g2d	TokenNameIdentifier	 g2d
.	TokenNameDOT	
clip	TokenNameIdentifier	 clip
(	TokenNameLPAREN	
pad	TokenNameIdentifier	 pad
.	TokenNameDOT	
getPadRect	TokenNameIdentifier	 get Pad Rect
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ret	TokenNameIdentifier	 ret
=	TokenNameEQUAL	
distributeAcross	TokenNameIdentifier	 distribute Across
(	TokenNameLPAREN	
pad	TokenNameIdentifier	 pad
.	TokenNameDOT	
getSource	TokenNameIdentifier	 get Source
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
g2d	TokenNameIdentifier	 g2d
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
g2d	TokenNameIdentifier	 g2d
.	TokenNameDOT	
setClip	TokenNameIdentifier	 set Clip
(	TokenNameLPAREN	
clip	TokenNameIdentifier	 clip
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
ret	TokenNameIdentifier	 ret
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
src	TokenNameIdentifier	 src
instanceof	TokenNameinstanceof	
CompositeRable	TokenNameIdentifier	 Composite Rable
)	TokenNameRPAREN	
{	TokenNameLBRACE	
CompositeRable	TokenNameIdentifier	 Composite Rable
comp	TokenNameIdentifier	 comp
=	TokenNameEQUAL	
(	TokenNameLPAREN	
CompositeRable	TokenNameIdentifier	 Composite Rable
)	TokenNameRPAREN	
src	TokenNameIdentifier	 src
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
comp	TokenNameIdentifier	 comp
.	TokenNameDOT	
getCompositeRule	TokenNameIdentifier	 get Composite Rule
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
CompositeRule	TokenNameIdentifier	 Composite Rule
.	TokenNameDOT	
OVER	TokenNameIdentifier	 OVER
)	TokenNameRPAREN	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
false	TokenNamefalse	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// To check colorspaces or to not check colorspaces 	TokenNameCOMMENT_LINE	To check colorspaces or to not check colorspaces 
// _that_ is the question... 	TokenNameCOMMENT_LINE	_that_ is the question... 
ColorSpace	TokenNameIdentifier	 Color Space
crCS	TokenNameIdentifier	 cr CS
=	TokenNameEQUAL	
comp	TokenNameIdentifier	 comp
.	TokenNameDOT	
getOperationColorSpace	TokenNameIdentifier	 get Operation Color Space
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ColorSpace	TokenNameIdentifier	 Color Space
g2dCS	TokenNameIdentifier	 g2d CS
=	TokenNameEQUAL	
GraphicsUtil	TokenNameIdentifier	 Graphics Util
.	TokenNameDOT	
getDestinationColorSpace	TokenNameIdentifier	 get Destination Color Space
(	TokenNameLPAREN	
g2d	TokenNameIdentifier	 g2d
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
g2dCS	TokenNameIdentifier	 g2d CS
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
||	TokenNameOR_OR	
(	TokenNameLPAREN	
g2dCS	TokenNameIdentifier	 g2d CS
!=	TokenNameNOT_EQUAL	
crCS	TokenNameIdentifier	 cr CS
)	TokenNameRPAREN	
)	TokenNameRPAREN	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
List	TokenNameIdentifier	 List
v	TokenNameIdentifier	 v
=	TokenNameEQUAL	
comp	TokenNameIdentifier	 comp
.	TokenNameDOT	
getSources	TokenNameIdentifier	 get Sources
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
v	TokenNameIdentifier	 v
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
ListIterator	TokenNameIdentifier	 List Iterator
li	TokenNameIdentifier	 li
=	TokenNameEQUAL	
v	TokenNameIdentifier	 v
.	TokenNameDOT	
listIterator	TokenNameIdentifier	 list Iterator
(	TokenNameLPAREN	
v	TokenNameIdentifier	 v
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
li	TokenNameIdentifier	 li
.	TokenNameDOT	
hasPrevious	TokenNameIdentifier	 has Previous
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
RenderableImage	TokenNameIdentifier	 Renderable Image
csrc	TokenNameIdentifier	 csrc
=	TokenNameEQUAL	
(	TokenNameLPAREN	
RenderableImage	TokenNameIdentifier	 Renderable Image
)	TokenNameRPAREN	
li	TokenNameIdentifier	 li
.	TokenNameDOT	
previous	TokenNameIdentifier	 previous
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
allPaintRable	TokenNameIdentifier	 all Paint Rable
(	TokenNameLPAREN	
csrc	TokenNameIdentifier	 csrc
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
li	TokenNameIdentifier	 li
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
li	TokenNameIdentifier	 li
.	TokenNameDOT	
hasPrevious	TokenNameIdentifier	 has Previous
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// All inputs are PaintRable so just draw directly to 	TokenNameCOMMENT_LINE	All inputs are PaintRable so just draw directly to 
// the graphics ignore filter res all togeather... 	TokenNameCOMMENT_LINE	the graphics ignore filter res all togeather... 
GraphicsUtil	TokenNameIdentifier	 Graphics Util
.	TokenNameDOT	
drawImage	TokenNameIdentifier	 draw Image
(	TokenNameLPAREN	
g2d	TokenNameIdentifier	 g2d
,	TokenNameCOMMA	
comp	TokenNameIdentifier	 comp
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
li	TokenNameIdentifier	 li
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
// None of the trailing inputs are PaintRable so we don't 	TokenNameCOMMENT_LINE	None of the trailing inputs are PaintRable so we don't 
// distribute across this at all. 	TokenNameCOMMENT_LINE	distribute across this at all. 
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
// Now we are in the case where some are paintRable and 	TokenNameCOMMENT_LINE	Now we are in the case where some are paintRable and 
// some aren't. In this case we create a new 	TokenNameCOMMENT_LINE	some aren't. In this case we create a new 
// CompositeRable with the first ones, to which we apply 	TokenNameCOMMENT_LINE	CompositeRable with the first ones, to which we apply 
// ourselves (limiting the resolution), and after that 	TokenNameCOMMENT_LINE	ourselves (limiting the resolution), and after that 
// we simply draw the remainder... 	TokenNameCOMMENT_LINE	we simply draw the remainder... 
int	TokenNameint	
idx	TokenNameIdentifier	 idx
=	TokenNameEQUAL	
li	TokenNameIdentifier	 li
.	TokenNameDOT	
nextIndex	TokenNameIdentifier	 next Index
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// index of first PaintRable... 	TokenNameCOMMENT_LINE	index of first PaintRable... 
Filter	TokenNameIdentifier	 Filter
f	TokenNameIdentifier	 f
=	TokenNameEQUAL	
new	TokenNamenew	
CompositeRable8Bit	TokenNameIdentifier	 Composite Rable8 Bit
(	TokenNameLPAREN	
v	TokenNameIdentifier	 v
.	TokenNameDOT	
subList	TokenNameIdentifier	 sub List
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
idx	TokenNameIdentifier	 idx
)	TokenNameRPAREN	
,	TokenNameCOMMA	
comp	TokenNameIdentifier	 comp
.	TokenNameDOT	
getCompositeRule	TokenNameIdentifier	 get Composite Rule
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
comp	TokenNameIdentifier	 comp
.	TokenNameDOT	
isColorSpaceLinear	TokenNameIdentifier	 is Color Space Linear
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
f	TokenNameIdentifier	 f
=	TokenNameEQUAL	
new	TokenNamenew	
FilterResRable8Bit	TokenNameIdentifier	 Filter Res Rable8 Bit
(	TokenNameLPAREN	
f	TokenNameIdentifier	 f
,	TokenNameCOMMA	
getFilterResolutionX	TokenNameIdentifier	 get Filter Resolution X
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
getFilterResolutionY	TokenNameIdentifier	 get Filter Resolution Y
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
GraphicsUtil	TokenNameIdentifier	 Graphics Util
.	TokenNameDOT	
drawImage	TokenNameIdentifier	 draw Image
(	TokenNameLPAREN	
g2d	TokenNameIdentifier	 g2d
,	TokenNameCOMMA	
f	TokenNameIdentifier	 f
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
li	TokenNameIdentifier	 li
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
PaintRable	TokenNameIdentifier	 Paint Rable
pr	TokenNameIdentifier	 pr
=	TokenNameEQUAL	
(	TokenNameLPAREN	
PaintRable	TokenNameIdentifier	 Paint Rable
)	TokenNameRPAREN	
li	TokenNameIdentifier	 li
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
pr	TokenNameIdentifier	 pr
.	TokenNameDOT	
paintRable	TokenNameIdentifier	 paint Rable
(	TokenNameLPAREN	
g2d	TokenNameIdentifier	 g2d
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Ugg it failed to paint so we need to filterRes it... 	TokenNameCOMMENT_LINE	Ugg it failed to paint so we need to filterRes it... 
Filter	TokenNameIdentifier	 Filter
prf	TokenNameIdentifier	 prf
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Filter	TokenNameIdentifier	 Filter
)	TokenNameRPAREN	
pr	TokenNameIdentifier	 pr
;	TokenNameSEMICOLON	
prf	TokenNameIdentifier	 prf
=	TokenNameEQUAL	
new	TokenNamenew	
FilterResRable8Bit	TokenNameIdentifier	 Filter Res Rable8 Bit
(	TokenNameLPAREN	
prf	TokenNameIdentifier	 prf
,	TokenNameCOMMA	
getFilterResolutionX	TokenNameIdentifier	 get Filter Resolution X
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
getFilterResolutionY	TokenNameIdentifier	 get Filter Resolution Y
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
GraphicsUtil	TokenNameIdentifier	 Graphics Util
.	TokenNameDOT	
drawImage	TokenNameIdentifier	 draw Image
(	TokenNameLPAREN	
g2d	TokenNameIdentifier	 g2d
,	TokenNameCOMMA	
prf	TokenNameIdentifier	 prf
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Should perform the equivilent action as * createRendering followed by drawing the RenderedImage. * * @param g2d The Graphics2D to draw to. * @return true if the paint call succeeded, false if * for some reason the paint failed (in which * case a createRendering should be used). */	TokenNameCOMMENT_JAVADOC	 Should perform the equivilent action as createRendering followed by drawing the RenderedImage. * @param g2d The Graphics2D to draw to. @return true if the paint call succeeded, false if for some reason the paint failed (in which case a createRendering should be used). 
public	TokenNamepublic	
boolean	TokenNameboolean	
paintRable	TokenNameIdentifier	 paint Rable
(	TokenNameLPAREN	
Graphics2D	TokenNameIdentifier	 Graphics2 D
g2d	TokenNameIdentifier	 g2d
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// This is a bit of a hack to implement the suggestion of SVG 	TokenNameCOMMENT_LINE	This is a bit of a hack to implement the suggestion of SVG 
// specification that if the last operation in a filter chain 	TokenNameCOMMENT_LINE	specification that if the last operation in a filter chain 
// is a SRC_OVER composite and the source is SourceGraphic it 	TokenNameCOMMENT_LINE	is a SRC_OVER composite and the source is SourceGraphic it 
// should be rendered directly to the canvas (by passing 	TokenNameCOMMENT_LINE	should be rendered directly to the canvas (by passing 
// filterRes). We are actually much more aggressive in 	TokenNameCOMMENT_LINE	filterRes). We are actually much more aggressive in 
// implementing this suggestion since we will bypass filterRes 	TokenNameCOMMENT_LINE	implementing this suggestion since we will bypass filterRes 
// for all the trailing elements in a SRC_OVER composite that 	TokenNameCOMMENT_LINE	for all the trailing elements in a SRC_OVER composite that 
// can be drawn directly to the canvas. 	TokenNameCOMMENT_LINE	can be drawn directly to the canvas. 
// System.out.println("Calling FilterResRable paintRable"); 	TokenNameCOMMENT_LINE	System.out.println("Calling FilterResRable paintRable"); 
// This optimization only apply if we are using 	TokenNameCOMMENT_LINE	This optimization only apply if we are using 
// SrcOver. Otherwise things break... 	TokenNameCOMMENT_LINE	SrcOver. Otherwise things break... 
Composite	TokenNameIdentifier	 Composite
c	TokenNameIdentifier	 c
=	TokenNameEQUAL	
g2d	TokenNameIdentifier	 g2d
.	TokenNameDOT	
getComposite	TokenNameIdentifier	 get Composite
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
SVGComposite	TokenNameIdentifier	 SVG Composite
.	TokenNameDOT	
OVER	TokenNameIdentifier	 OVER
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
c	TokenNameIdentifier	 c
)	TokenNameRPAREN	
)	TokenNameRPAREN	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
Filter	TokenNameIdentifier	 Filter
src	TokenNameIdentifier	 src
=	TokenNameEQUAL	
getSource	TokenNameIdentifier	 get Source
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
distributeAcross	TokenNameIdentifier	 distribute Across
(	TokenNameLPAREN	
src	TokenNameIdentifier	 src
,	TokenNameCOMMA	
g2d	TokenNameIdentifier	 g2d
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Cached Rendered image at filterRes. */	TokenNameCOMMENT_JAVADOC	 Cached Rendered image at filterRes. 
Reference	TokenNameIdentifier	 Reference
resRed	TokenNameIdentifier	 res Red
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
float	TokenNamefloat	
resScale	TokenNameIdentifier	 res Scale
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
float	TokenNamefloat	
getResScale	TokenNameIdentifier	 get Res Scale
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
resScale	TokenNameIdentifier	 res Scale
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
RenderedImage	TokenNameIdentifier	 Rendered Image
getResRed	TokenNameIdentifier	 get Res Red
(	TokenNameLPAREN	
RenderingHints	TokenNameIdentifier	 Rendering Hints
hints	TokenNameIdentifier	 hints
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
imageRect	TokenNameIdentifier	 image Rect
=	TokenNameEQUAL	
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
double	TokenNamedouble	
resScaleX	TokenNameIdentifier	 res Scale X
=	TokenNameEQUAL	
getFilterResolutionX	TokenNameIdentifier	 get Filter Resolution X
(	TokenNameLPAREN	
)	TokenNameRPAREN	
/	TokenNameDIVIDE	
imageRect	TokenNameIdentifier	 image Rect
.	TokenNameDOT	
getWidth	TokenNameIdentifier	 get Width
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
double	TokenNamedouble	
resScaleY	TokenNameIdentifier	 res Scale Y
=	TokenNameEQUAL	
getFilterResolutionY	TokenNameIdentifier	 get Filter Resolution Y
(	TokenNameLPAREN	
)	TokenNameRPAREN	
/	TokenNameDIVIDE	
imageRect	TokenNameIdentifier	 image Rect
.	TokenNameDOT	
getHeight	TokenNameIdentifier	 get Height
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// System.out.println("filterRes X " + filterResolutionX + 	TokenNameCOMMENT_LINE	System.out.println("filterRes X " + filterResolutionX + 
// " Y : " + filterResolutionY); 	TokenNameCOMMENT_LINE	" Y : " + filterResolutionY); 
float	TokenNamefloat	
resScale	TokenNameIdentifier	 res Scale
=	TokenNameEQUAL	
(	TokenNameLPAREN	
float	TokenNamefloat	
)	TokenNameRPAREN	
Math	TokenNameIdentifier	 Math
.	TokenNameDOT	
min	TokenNameIdentifier	 min
(	TokenNameLPAREN	
resScaleX	TokenNameIdentifier	 res Scale X
,	TokenNameCOMMA	
resScaleY	TokenNameIdentifier	 res Scale Y
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
RenderedImage	TokenNameIdentifier	 Rendered Image
ret	TokenNameIdentifier	 ret
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
resScale	TokenNameIdentifier	 res Scale
==	TokenNameEQUAL_EQUAL	
this	TokenNamethis	
.	TokenNameDOT	
resScale	TokenNameIdentifier	 res Scale
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// System.out.println("Matched"); 	TokenNameCOMMENT_LINE	System.out.println("Matched"); 
ret	TokenNameIdentifier	 ret
=	TokenNameEQUAL	
(	TokenNameLPAREN	
RenderedImage	TokenNameIdentifier	 Rendered Image
)	TokenNameRPAREN	
resRed	TokenNameIdentifier	 res Red
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
ret	TokenNameIdentifier	 ret
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
ret	TokenNameIdentifier	 ret
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
AffineTransform	TokenNameIdentifier	 Affine Transform
resUsr2Dev	TokenNameIdentifier	 res Usr2 Dev
;	TokenNameSEMICOLON	
resUsr2Dev	TokenNameIdentifier	 res Usr2 Dev
=	TokenNameEQUAL	
AffineTransform	TokenNameIdentifier	 Affine Transform
.	TokenNameDOT	
getScaleInstance	TokenNameIdentifier	 get Scale Instance
(	TokenNameLPAREN	
resScale	TokenNameIdentifier	 res Scale
,	TokenNameCOMMA	
resScale	TokenNameIdentifier	 res Scale
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// 	TokenNameCOMMENT_LINE	 
// Create a new RenderingContext 	TokenNameCOMMENT_LINE	Create a new RenderingContext 
// 	TokenNameCOMMENT_LINE	 
RenderContext	TokenNameIdentifier	 Render Context
newRC	TokenNameIdentifier	 new RC
=	TokenNameEQUAL	
new	TokenNamenew	
RenderContext	TokenNameIdentifier	 Render Context
(	TokenNameLPAREN	
resUsr2Dev	TokenNameIdentifier	 res Usr2 Dev
,	TokenNameCOMMA	
null	TokenNamenull	
,	TokenNameCOMMA	
hints	TokenNameIdentifier	 hints
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ret	TokenNameIdentifier	 ret
=	TokenNameEQUAL	
getSource	TokenNameIdentifier	 get Source
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
createRendering	TokenNameIdentifier	 create Rendering
(	TokenNameLPAREN	
newRC	TokenNameIdentifier	 new RC
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// This is probably justified since the whole reason to use 	TokenNameCOMMENT_LINE	This is probably justified since the whole reason to use 
// The filterRes attribute is because the filter chain is 	TokenNameCOMMENT_LINE	The filterRes attribute is because the filter chain is 
// expensive, otherwise you should let it evaluate at 	TokenNameCOMMENT_LINE	expensive, otherwise you should let it evaluate at 
// screen resolution always - right? 	TokenNameCOMMENT_LINE	screen resolution always - right? 
ret	TokenNameIdentifier	 ret
=	TokenNameEQUAL	
new	TokenNamenew	
TileCacheRed	TokenNameIdentifier	 Tile Cache Red
(	TokenNameLPAREN	
GraphicsUtil	TokenNameIdentifier	 Graphics Util
.	TokenNameDOT	
wrap	TokenNameIdentifier	 wrap
(	TokenNameLPAREN	
ret	TokenNameIdentifier	 ret
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
resScale	TokenNameIdentifier	 res Scale
=	TokenNameEQUAL	
resScale	TokenNameIdentifier	 res Scale
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
resRed	TokenNameIdentifier	 res Red
=	TokenNameEQUAL	
new	TokenNamenew	
SoftReference	TokenNameIdentifier	 Soft Reference
(	TokenNameLPAREN	
ret	TokenNameIdentifier	 ret
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
ret	TokenNameIdentifier	 ret
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * */	TokenNameCOMMENT_JAVADOC	 
public	TokenNamepublic	
RenderedImage	TokenNameIdentifier	 Rendered Image
createRendering	TokenNameIdentifier	 create Rendering
(	TokenNameLPAREN	
RenderContext	TokenNameIdentifier	 Render Context
renderContext	TokenNameIdentifier	 render Context
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Get user space to device space transform 	TokenNameCOMMENT_LINE	Get user space to device space transform 
AffineTransform	TokenNameIdentifier	 Affine Transform
usr2dev	TokenNameIdentifier	 usr2dev
=	TokenNameEQUAL	
renderContext	TokenNameIdentifier	 render Context
.	TokenNameDOT	
getTransform	TokenNameIdentifier	 get Transform
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
usr2dev	TokenNameIdentifier	 usr2dev
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
usr2dev	TokenNameIdentifier	 usr2dev
=	TokenNameEQUAL	
new	TokenNamenew	
AffineTransform	TokenNameIdentifier	 Affine Transform
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
RenderingHints	TokenNameIdentifier	 Rendering Hints
hints	TokenNameIdentifier	 hints
=	TokenNameEQUAL	
renderContext	TokenNameIdentifier	 render Context
.	TokenNameDOT	
getRenderingHints	TokenNameIdentifier	 get Rendering Hints
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// As per specification, a value of zero for the 	TokenNameCOMMENT_LINE	As per specification, a value of zero for the 
// x-axis or y-axis causes the filter to produce 	TokenNameCOMMENT_LINE	x-axis or y-axis causes the filter to produce 
// nothing. 	TokenNameCOMMENT_LINE	nothing. 
// The processing is done as follows: 	TokenNameCOMMENT_LINE	The processing is done as follows: 
// + if the x resolution is zero, this is a no-op 	TokenNameCOMMENT_LINE	+ if the x resolution is zero, this is a no-op 
// else compute the x scale. 	TokenNameCOMMENT_LINE	else compute the x scale. 
// + if the y resolution is zero, this is a no-op 	TokenNameCOMMENT_LINE	+ if the y resolution is zero, this is a no-op 
// else compute the y resolution from the x scale 	TokenNameCOMMENT_LINE	else compute the y resolution from the x scale 
// and compute the corresponding y scale. 	TokenNameCOMMENT_LINE	and compute the corresponding y scale. 
// + if the y or x scale is less than one, insert 	TokenNameCOMMENT_LINE	+ if the y or x scale is less than one, insert 
// an AffineRable. 	TokenNameCOMMENT_LINE	an AffineRable. 
// Else, return the source as is. 	TokenNameCOMMENT_LINE	Else, return the source as is. 
int	TokenNameint	
filterResolutionX	TokenNameIdentifier	 filter Resolution X
=	TokenNameEQUAL	
getFilterResolutionX	TokenNameIdentifier	 get Filter Resolution X
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
filterResolutionY	TokenNameIdentifier	 filter Resolution Y
=	TokenNameEQUAL	
getFilterResolutionY	TokenNameIdentifier	 get Filter Resolution Y
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// System.out.println("FilterResRable: " + filterResolutionX + "x" + 	TokenNameCOMMENT_LINE	System.out.println("FilterResRable: " + filterResolutionX + "x" + 
// filterResolutionY); 	TokenNameCOMMENT_LINE	filterResolutionY); 
if	TokenNameif	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
filterResolutionX	TokenNameIdentifier	 filter Resolution X
<=	TokenNameLESS_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
||	TokenNameOR_OR	
(	TokenNameLPAREN	
filterResolutionY	TokenNameIdentifier	 filter Resolution Y
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
// Find out the renderable area 	TokenNameCOMMENT_LINE	Find out the renderable area 
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
imageRect	TokenNameIdentifier	 image Rect
=	TokenNameEQUAL	
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Rectangle	TokenNameIdentifier	 Rectangle
devRect	TokenNameIdentifier	 dev Rect
;	TokenNameSEMICOLON	
devRect	TokenNameIdentifier	 dev Rect
=	TokenNameEQUAL	
usr2dev	TokenNameIdentifier	 usr2dev
.	TokenNameDOT	
createTransformedShape	TokenNameIdentifier	 create Transformed Shape
(	TokenNameLPAREN	
imageRect	TokenNameIdentifier	 image Rect
)	TokenNameRPAREN	
.	TokenNameDOT	
getBounds	TokenNameIdentifier	 get Bounds
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Now, compare the devRect with the filter 	TokenNameCOMMENT_LINE	Now, compare the devRect with the filter 
// resolution hints 	TokenNameCOMMENT_LINE	resolution hints 
float	TokenNamefloat	
scaleX	TokenNameIdentifier	 scale X
=	TokenNameEQUAL	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
filterResolutionX	TokenNameIdentifier	 filter Resolution X
<	TokenNameLESS	
devRect	TokenNameIdentifier	 dev Rect
.	TokenNameDOT	
width	TokenNameIdentifier	 width
)	TokenNameRPAREN	
scaleX	TokenNameIdentifier	 scale X
=	TokenNameEQUAL	
filterResolutionX	TokenNameIdentifier	 filter Resolution X
/	TokenNameDIVIDE	
(	TokenNameLPAREN	
float	TokenNamefloat	
)	TokenNameRPAREN	
devRect	TokenNameIdentifier	 dev Rect
.	TokenNameDOT	
width	TokenNameIdentifier	 width
;	TokenNameSEMICOLON	
float	TokenNamefloat	
scaleY	TokenNameIdentifier	 scale Y
=	TokenNameEQUAL	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
filterResolutionY	TokenNameIdentifier	 filter Resolution Y
<	TokenNameLESS	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
scaleY	TokenNameIdentifier	 scale Y
=	TokenNameEQUAL	
scaleX	TokenNameIdentifier	 scale X
;	TokenNameSEMICOLON	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
filterResolutionY	TokenNameIdentifier	 filter Resolution Y
<	TokenNameLESS	
devRect	TokenNameIdentifier	 dev Rect
.	TokenNameDOT	
height	TokenNameIdentifier	 height
)	TokenNameRPAREN	
scaleY	TokenNameIdentifier	 scale Y
=	TokenNameEQUAL	
filterResolutionY	TokenNameIdentifier	 filter Resolution Y
/	TokenNameDIVIDE	
(	TokenNameLPAREN	
float	TokenNamefloat	
)	TokenNameRPAREN	
devRect	TokenNameIdentifier	 dev Rect
.	TokenNameDOT	
height	TokenNameIdentifier	 height
;	TokenNameSEMICOLON	
// Only resample if either scaleX or scaleY is 	TokenNameCOMMENT_LINE	Only resample if either scaleX or scaleY is 
// smaller than 1 	TokenNameCOMMENT_LINE	smaller than 1 
if	TokenNameif	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
scaleX	TokenNameIdentifier	 scale X
>=	TokenNameGREATER_EQUAL	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
(	TokenNameLPAREN	
scaleY	TokenNameIdentifier	 scale Y
>=	TokenNameGREATER_EQUAL	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
return	TokenNamereturn	
getSource	TokenNameIdentifier	 get Source
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
createRendering	TokenNameIdentifier	 create Rendering
(	TokenNameLPAREN	
renderContext	TokenNameIdentifier	 render Context
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// System.out.println("Using Fixed Resolution..."); 	TokenNameCOMMENT_LINE	System.out.println("Using Fixed Resolution..."); 
// Using fixed resolution image since we need an image larger 	TokenNameCOMMENT_LINE	Using fixed resolution image since we need an image larger 
// than this. 	TokenNameCOMMENT_LINE	than this. 
RenderedImage	TokenNameIdentifier	 Rendered Image
resRed	TokenNameIdentifier	 res Red
=	TokenNameEQUAL	
getResRed	TokenNameIdentifier	 get Res Red
(	TokenNameLPAREN	
hints	TokenNameIdentifier	 hints
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
float	TokenNamefloat	
resScale	TokenNameIdentifier	 res Scale
=	TokenNameEQUAL	
getResScale	TokenNameIdentifier	 get Res Scale
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
AffineTransform	TokenNameIdentifier	 Affine Transform
residualAT	TokenNameIdentifier	 residual AT
;	TokenNameSEMICOLON	
residualAT	TokenNameIdentifier	 residual AT
=	TokenNameEQUAL	
new	TokenNamenew	
AffineTransform	TokenNameIdentifier	 Affine Transform
(	TokenNameLPAREN	
usr2dev	TokenNameIdentifier	 usr2dev
.	TokenNameDOT	
getScaleX	TokenNameIdentifier	 get Scale X
(	TokenNameLPAREN	
)	TokenNameRPAREN	
/	TokenNameDIVIDE	
resScale	TokenNameIdentifier	 res Scale
,	TokenNameCOMMA	
usr2dev	TokenNameIdentifier	 usr2dev
.	TokenNameDOT	
getShearY	TokenNameIdentifier	 get Shear Y
(	TokenNameLPAREN	
)	TokenNameRPAREN	
/	TokenNameDIVIDE	
resScale	TokenNameIdentifier	 res Scale
,	TokenNameCOMMA	
usr2dev	TokenNameIdentifier	 usr2dev
.	TokenNameDOT	
getShearX	TokenNameIdentifier	 get Shear X
(	TokenNameLPAREN	
)	TokenNameRPAREN	
/	TokenNameDIVIDE	
resScale	TokenNameIdentifier	 res Scale
,	TokenNameCOMMA	
usr2dev	TokenNameIdentifier	 usr2dev
.	TokenNameDOT	
getScaleY	TokenNameIdentifier	 get Scale Y
(	TokenNameLPAREN	
)	TokenNameRPAREN	
/	TokenNameDIVIDE	
resScale	TokenNameIdentifier	 res Scale
,	TokenNameCOMMA	
usr2dev	TokenNameIdentifier	 usr2dev
.	TokenNameDOT	
getTranslateX	TokenNameIdentifier	 get Translate X
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
usr2dev	TokenNameIdentifier	 usr2dev
.	TokenNameDOT	
getTranslateY	TokenNameIdentifier	 get Translate Y
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// org.ImageDisplay.showImage("AT: " + newUsr2Dev, result); 	TokenNameCOMMENT_LINE	org.ImageDisplay.showImage("AT: " + newUsr2Dev, result); 
return	TokenNamereturn	
new	TokenNamenew	
AffineRed	TokenNameIdentifier	 Affine Red
(	TokenNameLPAREN	
GraphicsUtil	TokenNameIdentifier	 Graphics Util
.	TokenNameDOT	
wrap	TokenNameIdentifier	 wrap
(	TokenNameLPAREN	
resRed	TokenNameIdentifier	 res Red
)	TokenNameRPAREN	
,	TokenNameCOMMA	
residualAT	TokenNameIdentifier	 residual AT
,	TokenNameCOMMA	
hints	TokenNameIdentifier	 hints
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
