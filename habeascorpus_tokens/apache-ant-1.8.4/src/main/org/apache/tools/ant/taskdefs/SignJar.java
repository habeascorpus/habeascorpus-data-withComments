/* * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the "License"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. * */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
taskdefs	TokenNameIdentifier	 taskdefs
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
File	TokenNameIdentifier	 File
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
IOException	TokenNameIdentifier	 IO Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Iterator	TokenNameIdentifier	 Iterator
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
BuildException	TokenNameIdentifier	 Build Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
Project	TokenNameIdentifier	 Project
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
taskdefs	TokenNameIdentifier	 taskdefs
.	TokenNameDOT	
condition	TokenNameIdentifier	 condition
.	TokenNameDOT	
IsSigned	TokenNameIdentifier	 Is Signed
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
Path	TokenNameIdentifier	 Path
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
Resource	TokenNameIdentifier	 Resource
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
resources	TokenNameIdentifier	 resources
.	TokenNameDOT	
FileProvider	TokenNameIdentifier	 File Provider
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
resources	TokenNameIdentifier	 resources
.	TokenNameDOT	
FileResource	TokenNameIdentifier	 File Resource
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
FileUtils	TokenNameIdentifier	 File Utils
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
IdentityMapper	TokenNameIdentifier	 Identity Mapper
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
FileNameMapper	TokenNameIdentifier	 File Name Mapper
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ResourceUtils	TokenNameIdentifier	 Resource Utils
;	TokenNameSEMICOLON	
/** * Signs JAR or ZIP files with the javasign command line tool. The tool detailed * dependency checking: files are only signed if they are not signed. The * <tt>signjar</tt> attribute can point to the file to generate; if this file * exists then its modification date is used as a cue as to whether to resign * any JAR file. * * Timestamp driven signing is based on the unstable and inadequately documented * information in the Java1.5 docs * @see <a href="http://java.sun.com/j2se/1.5.0/docs/guide/security/time-of-signing-beta1.html"> * beta documentation</a> * @ant.task category="java" * @since Ant 1.1 */	TokenNameCOMMENT_JAVADOC	 Signs JAR or ZIP files with the javasign command line tool. The tool detailed dependency checking: files are only signed if they are not signed. The <tt>signjar</tt> attribute can point to the file to generate; if this file exists then its modification date is used as a cue as to whether to resign any JAR file. * Timestamp driven signing is based on the unstable and inadequately documented information in the Java1.5 docs @see <a href="http://java.sun.com/j2se/1.5.0/docs/guide/security/time-of-signing-beta1.html"> beta documentation</a> @ant.task category="java" @since Ant 1.1 
public	TokenNamepublic	
class	TokenNameclass	
SignJar	TokenNameIdentifier	 Sign Jar
extends	TokenNameextends	
AbstractJarSignerTask	TokenNameIdentifier	 Abstract Jar Signer Task
{	TokenNameLBRACE	
// CheckStyle:VisibilityModifier OFF - bc 	TokenNameCOMMENT_LINE	CheckStyle:VisibilityModifier OFF - bc 
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
FileUtils	TokenNameIdentifier	 File Utils
FILE_UTILS	TokenNameIdentifier	 FILE  UTILS
=	TokenNameEQUAL	
FileUtils	TokenNameIdentifier	 File Utils
.	TokenNameDOT	
getFileUtils	TokenNameIdentifier	 get File Utils
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
/** * name to a signature file */	TokenNameCOMMENT_JAVADOC	 name to a signature file 
protected	TokenNameprotected	
String	TokenNameIdentifier	 String
sigfile	TokenNameIdentifier	 sigfile
;	TokenNameSEMICOLON	
/** * name of a single jar */	TokenNameCOMMENT_JAVADOC	 name of a single jar 
protected	TokenNameprotected	
File	TokenNameIdentifier	 File
signedjar	TokenNameIdentifier	 signedjar
;	TokenNameSEMICOLON	
/** * flag for internal sf signing */	TokenNameCOMMENT_JAVADOC	 flag for internal sf signing 
protected	TokenNameprotected	
boolean	TokenNameboolean	
internalsf	TokenNameIdentifier	 internalsf
;	TokenNameSEMICOLON	
/** * sign sections only? */	TokenNameCOMMENT_JAVADOC	 sign sections only? 
protected	TokenNameprotected	
boolean	TokenNameboolean	
sectionsonly	TokenNameIdentifier	 sectionsonly
;	TokenNameSEMICOLON	
/** * flag to preserve timestamp on modified files */	TokenNameCOMMENT_JAVADOC	 flag to preserve timestamp on modified files 
private	TokenNameprivate	
boolean	TokenNameboolean	
preserveLastModified	TokenNameIdentifier	 preserve Last Modified
;	TokenNameSEMICOLON	
/** * Whether to assume a jar which has an appropriate .SF file in is already * signed. */	TokenNameCOMMENT_JAVADOC	 Whether to assume a jar which has an appropriate .SF file in is already signed. 
protected	TokenNameprotected	
boolean	TokenNameboolean	
lazy	TokenNameIdentifier	 lazy
;	TokenNameSEMICOLON	
/** * the output directory when using paths. */	TokenNameCOMMENT_JAVADOC	 the output directory when using paths. 
protected	TokenNameprotected	
File	TokenNameIdentifier	 File
destDir	TokenNameIdentifier	 dest Dir
;	TokenNameSEMICOLON	
/** * mapper for todir work */	TokenNameCOMMENT_JAVADOC	 mapper for todir work 
private	TokenNameprivate	
FileNameMapper	TokenNameIdentifier	 File Name Mapper
mapper	TokenNameIdentifier	 mapper
;	TokenNameSEMICOLON	
/** * URL for a tsa; null implies no tsa support */	TokenNameCOMMENT_JAVADOC	 URL for a tsa; null implies no tsa support 
protected	TokenNameprotected	
String	TokenNameIdentifier	 String
tsaurl	TokenNameIdentifier	 tsaurl
;	TokenNameSEMICOLON	
/** * alias for the TSA in the keystore */	TokenNameCOMMENT_JAVADOC	 alias for the TSA in the keystore 
protected	TokenNameprotected	
String	TokenNameIdentifier	 String
tsacert	TokenNameIdentifier	 tsacert
;	TokenNameSEMICOLON	
/** * force signing even if the jar is already signed. */	TokenNameCOMMENT_JAVADOC	 force signing even if the jar is already signed. 
private	TokenNameprivate	
boolean	TokenNameboolean	
force	TokenNameIdentifier	 force
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
/** * signature algorithm */	TokenNameCOMMENT_JAVADOC	 signature algorithm 
private	TokenNameprivate	
String	TokenNameIdentifier	 String
sigAlg	TokenNameIdentifier	 sig Alg
;	TokenNameSEMICOLON	
/** * digest algorithm */	TokenNameCOMMENT_JAVADOC	 digest algorithm 
private	TokenNameprivate	
String	TokenNameIdentifier	 String
digestAlg	TokenNameIdentifier	 digest Alg
;	TokenNameSEMICOLON	
/** * error string for unit test verification: {@value} */	TokenNameCOMMENT_JAVADOC	 error string for unit test verification: {@value} 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
ERROR_TODIR_AND_SIGNEDJAR	TokenNameIdentifier	 ERROR  TODIR  AND  SIGNEDJAR
=	TokenNameEQUAL	
"'destdir' and 'signedjar' cannot both be set"	TokenNameStringLiteral	'destdir' and 'signedjar' cannot both be set
;	TokenNameSEMICOLON	
/** * error string for unit test verification: {@value} */	TokenNameCOMMENT_JAVADOC	 error string for unit test verification: {@value} 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
ERROR_TOO_MANY_MAPPERS	TokenNameIdentifier	 ERROR  TOO  MANY  MAPPERS
=	TokenNameEQUAL	
"Too many mappers"	TokenNameStringLiteral	Too many mappers
;	TokenNameSEMICOLON	
/** * error string for unit test verification {@value} */	TokenNameCOMMENT_JAVADOC	 error string for unit test verification {@value} 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
ERROR_SIGNEDJAR_AND_PATHS	TokenNameIdentifier	 ERROR  SIGNEDJAR  AND  PATHS
=	TokenNameEQUAL	
"You cannot specify the signed JAR when using paths or filesets"	TokenNameStringLiteral	You cannot specify the signed JAR when using paths or filesets
;	TokenNameSEMICOLON	
/** * error string for unit test verification: {@value} */	TokenNameCOMMENT_JAVADOC	 error string for unit test verification: {@value} 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
ERROR_BAD_MAP	TokenNameIdentifier	 ERROR  BAD  MAP
=	TokenNameEQUAL	
"Cannot map source file to anything sensible: "	TokenNameStringLiteral	Cannot map source file to anything sensible: 
;	TokenNameSEMICOLON	
/** * error string for unit test verification: {@value} */	TokenNameCOMMENT_JAVADOC	 error string for unit test verification: {@value} 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
ERROR_MAPPER_WITHOUT_DEST	TokenNameIdentifier	 ERROR  MAPPER  WITHOUT  DEST
=	TokenNameEQUAL	
"The destDir attribute is required if a mapper is set"	TokenNameStringLiteral	The destDir attribute is required if a mapper is set
;	TokenNameSEMICOLON	
/** * error string for unit test verification: {@value} */	TokenNameCOMMENT_JAVADOC	 error string for unit test verification: {@value} 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
ERROR_NO_ALIAS	TokenNameIdentifier	 ERROR  NO  ALIAS
=	TokenNameEQUAL	
"alias attribute must be set"	TokenNameStringLiteral	alias attribute must be set
;	TokenNameSEMICOLON	
/** * error string for unit test verification: {@value} */	TokenNameCOMMENT_JAVADOC	 error string for unit test verification: {@value} 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
ERROR_NO_STOREPASS	TokenNameIdentifier	 ERROR  NO  STOREPASS
=	TokenNameEQUAL	
"storepass attribute must be set"	TokenNameStringLiteral	storepass attribute must be set
;	TokenNameSEMICOLON	
// CheckStyle:VisibilityModifier ON 	TokenNameCOMMENT_LINE	CheckStyle:VisibilityModifier ON 
/** * name of .SF/.DSA file; optional * * @param sigfile the name of the .SF/.DSA file */	TokenNameCOMMENT_JAVADOC	 name of .SF/.DSA file; optional * @param sigfile the name of the .SF/.DSA file 
public	TokenNamepublic	
void	TokenNamevoid	
setSigfile	TokenNameIdentifier	 set Sigfile
(	TokenNameLPAREN	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
sigfile	TokenNameIdentifier	 sigfile
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
sigfile	TokenNameIdentifier	 sigfile
=	TokenNameEQUAL	
sigfile	TokenNameIdentifier	 sigfile
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * name of signed JAR file; optional * * @param signedjar the name of the signed jar file */	TokenNameCOMMENT_JAVADOC	 name of signed JAR file; optional * @param signedjar the name of the signed jar file 
public	TokenNamepublic	
void	TokenNamevoid	
setSignedjar	TokenNameIdentifier	 set Signedjar
(	TokenNameLPAREN	
final	TokenNamefinal	
File	TokenNameIdentifier	 File
signedjar	TokenNameIdentifier	 signedjar
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
signedjar	TokenNameIdentifier	 signedjar
=	TokenNameEQUAL	
signedjar	TokenNameIdentifier	 signedjar
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Flag to include the .SF file inside the signature; optional; default * false * * @param internalsf if true include the .SF file inside the signature */	TokenNameCOMMENT_JAVADOC	 Flag to include the .SF file inside the signature; optional; default false * @param internalsf if true include the .SF file inside the signature 
public	TokenNamepublic	
void	TokenNamevoid	
setInternalsf	TokenNameIdentifier	 set Internalsf
(	TokenNameLPAREN	
final	TokenNamefinal	
boolean	TokenNameboolean	
internalsf	TokenNameIdentifier	 internalsf
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
internalsf	TokenNameIdentifier	 internalsf
=	TokenNameEQUAL	
internalsf	TokenNameIdentifier	 internalsf
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * flag to compute hash of entire manifest; optional, default false * * @param sectionsonly flag to compute hash of entire manifest */	TokenNameCOMMENT_JAVADOC	 flag to compute hash of entire manifest; optional, default false * @param sectionsonly flag to compute hash of entire manifest 
public	TokenNamepublic	
void	TokenNamevoid	
setSectionsonly	TokenNameIdentifier	 set Sectionsonly
(	TokenNameLPAREN	
final	TokenNamefinal	
boolean	TokenNameboolean	
sectionsonly	TokenNameIdentifier	 sectionsonly
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
sectionsonly	TokenNameIdentifier	 sectionsonly
=	TokenNameEQUAL	
sectionsonly	TokenNameIdentifier	 sectionsonly
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * flag to control whether the presence of a signature file means a JAR is * signed; optional, default false * * @param lazy flag to control whether the presence of a signature */	TokenNameCOMMENT_JAVADOC	 flag to control whether the presence of a signature file means a JAR is signed; optional, default false * @param lazy flag to control whether the presence of a signature 
public	TokenNamepublic	
void	TokenNamevoid	
setLazy	TokenNameIdentifier	 set Lazy
(	TokenNameLPAREN	
final	TokenNamefinal	
boolean	TokenNameboolean	
lazy	TokenNameIdentifier	 lazy
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
lazy	TokenNameIdentifier	 lazy
=	TokenNameEQUAL	
lazy	TokenNameIdentifier	 lazy
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Optionally sets the output directory to be used. * * @param destDir the directory in which to place signed jars * @since Ant 1.7 */	TokenNameCOMMENT_JAVADOC	 Optionally sets the output directory to be used. * @param destDir the directory in which to place signed jars @since Ant 1.7 
public	TokenNamepublic	
void	TokenNamevoid	
setDestDir	TokenNameIdentifier	 set Dest Dir
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
destDir	TokenNameIdentifier	 dest Dir
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
destDir	TokenNameIdentifier	 dest Dir
=	TokenNameEQUAL	
destDir	TokenNameIdentifier	 dest Dir
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * add a mapper to determine file naming policy. Only used with toDir * processing. * * @param newMapper the mapper to add. * @since Ant 1.7 */	TokenNameCOMMENT_JAVADOC	 add a mapper to determine file naming policy. Only used with toDir processing. * @param newMapper the mapper to add. @since Ant 1.7 
public	TokenNamepublic	
void	TokenNamevoid	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
FileNameMapper	TokenNameIdentifier	 File Name Mapper
newMapper	TokenNameIdentifier	 new Mapper
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
mapper	TokenNameIdentifier	 mapper
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ERROR_TOO_MANY_MAPPERS	TokenNameIdentifier	 ERROR  TOO  MANY  MAPPERS
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
mapper	TokenNameIdentifier	 mapper
=	TokenNameEQUAL	
newMapper	TokenNameIdentifier	 new Mapper
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * get the active mapper; may be null * @return mapper or null * @since Ant 1.7 */	TokenNameCOMMENT_JAVADOC	 get the active mapper; may be null @return mapper or null @since Ant 1.7 
public	TokenNamepublic	
FileNameMapper	TokenNameIdentifier	 File Name Mapper
getMapper	TokenNameIdentifier	 get Mapper
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
mapper	TokenNameIdentifier	 mapper
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * get the -tsaurl url * @return url or null * @since Ant 1.7 */	TokenNameCOMMENT_JAVADOC	 get the -tsaurl url @return url or null @since Ant 1.7 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getTsaurl	TokenNameIdentifier	 get Tsaurl
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
tsaurl	TokenNameIdentifier	 tsaurl
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * * @param tsaurl the tsa url. * @since Ant 1.7 */	TokenNameCOMMENT_JAVADOC	 * @param tsaurl the tsa url. @since Ant 1.7 
public	TokenNamepublic	
void	TokenNamevoid	
setTsaurl	TokenNameIdentifier	 set Tsaurl
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
tsaurl	TokenNameIdentifier	 tsaurl
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
tsaurl	TokenNameIdentifier	 tsaurl
=	TokenNameEQUAL	
tsaurl	TokenNameIdentifier	 tsaurl
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * get the -tsacert option * @since Ant 1.7 * @return a certificate alias or null */	TokenNameCOMMENT_JAVADOC	 get the -tsacert option @since Ant 1.7 @return a certificate alias or null 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getTsacert	TokenNameIdentifier	 get Tsacert
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
tsacert	TokenNameIdentifier	 tsacert
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * set the alias in the keystore of the TSA to use; * @param tsacert the cert alias. */	TokenNameCOMMENT_JAVADOC	 set the alias in the keystore of the TSA to use; @param tsacert the cert alias. 
public	TokenNamepublic	
void	TokenNamevoid	
setTsacert	TokenNameIdentifier	 set Tsacert
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
tsacert	TokenNameIdentifier	 tsacert
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
tsacert	TokenNameIdentifier	 tsacert
=	TokenNameEQUAL	
tsacert	TokenNameIdentifier	 tsacert
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Whether to force signing of a jar even it is already signed. * @since Ant 1.8.0 */	TokenNameCOMMENT_JAVADOC	 Whether to force signing of a jar even it is already signed. @since Ant 1.8.0 
public	TokenNamepublic	
void	TokenNamevoid	
setForce	TokenNameIdentifier	 set Force
(	TokenNameLPAREN	
boolean	TokenNameboolean	
b	TokenNameIdentifier	 b
)	TokenNameRPAREN	
{	TokenNameLBRACE	
force	TokenNameIdentifier	 force
=	TokenNameEQUAL	
b	TokenNameIdentifier	 b
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Should the task force signing of a jar even it is already * signed? * @since Ant 1.8.0 */	TokenNameCOMMENT_JAVADOC	 Should the task force signing of a jar even it is already signed? @since Ant 1.8.0 
public	TokenNamepublic	
boolean	TokenNameboolean	
isForce	TokenNameIdentifier	 is Force
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
force	TokenNameIdentifier	 force
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Signature Algorithm; optional * * @param sigAlg the signature algorithm */	TokenNameCOMMENT_JAVADOC	 Signature Algorithm; optional * @param sigAlg the signature algorithm 
public	TokenNamepublic	
void	TokenNamevoid	
setSigAlg	TokenNameIdentifier	 set Sig Alg
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
sigAlg	TokenNameIdentifier	 sig Alg
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
sigAlg	TokenNameIdentifier	 sig Alg
=	TokenNameEQUAL	
sigAlg	TokenNameIdentifier	 sig Alg
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Signature Algorithm; optional */	TokenNameCOMMENT_JAVADOC	 Signature Algorithm; optional 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getSigAlg	TokenNameIdentifier	 get Sig Alg
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
sigAlg	TokenNameIdentifier	 sig Alg
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Digest Algorithm; optional * * @param digestAlg the digest algorithm */	TokenNameCOMMENT_JAVADOC	 Digest Algorithm; optional * @param digestAlg the digest algorithm 
public	TokenNamepublic	
void	TokenNamevoid	
setDigestAlg	TokenNameIdentifier	 set Digest Alg
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
digestAlg	TokenNameIdentifier	 digest Alg
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
digestAlg	TokenNameIdentifier	 digest Alg
=	TokenNameEQUAL	
digestAlg	TokenNameIdentifier	 digest Alg
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Digest Algorithm; optional */	TokenNameCOMMENT_JAVADOC	 Digest Algorithm; optional 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getDigestAlg	TokenNameIdentifier	 get Digest Alg
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
digestAlg	TokenNameIdentifier	 digest Alg
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * sign the jar(s) * * @throws BuildException on errors */	TokenNameCOMMENT_JAVADOC	 sign the jar(s) * @throws BuildException on errors 
public	TokenNamepublic	
void	TokenNamevoid	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
//validation logic 	TokenNameCOMMENT_LINE	validation logic 
final	TokenNamefinal	
boolean	TokenNameboolean	
hasJar	TokenNameIdentifier	 has Jar
=	TokenNameEQUAL	
jar	TokenNameIdentifier	 jar
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
boolean	TokenNameboolean	
hasSignedJar	TokenNameIdentifier	 has Signed Jar
=	TokenNameEQUAL	
signedjar	TokenNameIdentifier	 signedjar
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
boolean	TokenNameboolean	
hasDestDir	TokenNameIdentifier	 has Dest Dir
=	TokenNameEQUAL	
destDir	TokenNameIdentifier	 dest Dir
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
boolean	TokenNameboolean	
hasMapper	TokenNameIdentifier	 has Mapper
=	TokenNameEQUAL	
mapper	TokenNameIdentifier	 mapper
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
hasJar	TokenNameIdentifier	 has Jar
&&	TokenNameAND_AND	
!	TokenNameNOT	
hasResources	TokenNameIdentifier	 has Resources
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ERROR_NO_SOURCE	TokenNameIdentifier	 ERROR  NO  SOURCE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
null	TokenNamenull	
==	TokenNameEQUAL_EQUAL	
alias	TokenNameIdentifier	 alias
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ERROR_NO_ALIAS	TokenNameIdentifier	 ERROR  NO  ALIAS
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
null	TokenNamenull	
==	TokenNameEQUAL_EQUAL	
storepass	TokenNameIdentifier	 storepass
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ERROR_NO_STOREPASS	TokenNameIdentifier	 ERROR  NO  STOREPASS
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
hasDestDir	TokenNameIdentifier	 has Dest Dir
&&	TokenNameAND_AND	
hasSignedJar	TokenNameIdentifier	 has Signed Jar
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ERROR_TODIR_AND_SIGNEDJAR	TokenNameIdentifier	 ERROR  TODIR  AND  SIGNEDJAR
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
hasResources	TokenNameIdentifier	 has Resources
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
hasSignedJar	TokenNameIdentifier	 has Signed Jar
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ERROR_SIGNEDJAR_AND_PATHS	TokenNameIdentifier	 ERROR  SIGNEDJAR  AND  PATHS
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
//this isnt strictly needed, but by being fussy now, 	TokenNameCOMMENT_LINE	this isnt strictly needed, but by being fussy now, 
//we can change implementation details later 	TokenNameCOMMENT_LINE	we can change implementation details later 
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
hasDestDir	TokenNameIdentifier	 has Dest Dir
&&	TokenNameAND_AND	
hasMapper	TokenNameIdentifier	 has Mapper
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ERROR_MAPPER_WITHOUT_DEST	TokenNameIdentifier	 ERROR  MAPPER  WITHOUT  DEST
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
beginExecution	TokenNameIdentifier	 begin Execution
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
//special case single jar handling with signedjar attribute set 	TokenNameCOMMENT_LINE	special case single jar handling with signedjar attribute set 
if	TokenNameif	
(	TokenNameLPAREN	
hasJar	TokenNameIdentifier	 has Jar
&&	TokenNameAND_AND	
hasSignedJar	TokenNameIdentifier	 has Signed Jar
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// single jar processing 	TokenNameCOMMENT_LINE	single jar processing 
signOneJar	TokenNameIdentifier	 sign One Jar
(	TokenNameLPAREN	
jar	TokenNameIdentifier	 jar
,	TokenNameCOMMA	
signedjar	TokenNameIdentifier	 signedjar
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
//return here. 	TokenNameCOMMENT_LINE	return here. 
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
//the rest of the method treats single jar like 	TokenNameCOMMENT_LINE	the rest of the method treats single jar like 
//a nested path with one file 	TokenNameCOMMENT_LINE	a nested path with one file 
Path	TokenNameIdentifier	 Path
sources	TokenNameIdentifier	 sources
=	TokenNameEQUAL	
createUnifiedSourcePath	TokenNameIdentifier	 create Unified Source Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
//set up our mapping policy 	TokenNameCOMMENT_LINE	set up our mapping policy 
FileNameMapper	TokenNameIdentifier	 File Name Mapper
destMapper	TokenNameIdentifier	 dest Mapper
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
hasMapper	TokenNameIdentifier	 has Mapper
)	TokenNameRPAREN	
{	TokenNameLBRACE	
destMapper	TokenNameIdentifier	 dest Mapper
=	TokenNameEQUAL	
mapper	TokenNameIdentifier	 mapper
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
//no mapper? use the identity policy 	TokenNameCOMMENT_LINE	no mapper? use the identity policy 
destMapper	TokenNameIdentifier	 dest Mapper
=	TokenNameEQUAL	
new	TokenNamenew	
IdentityMapper	TokenNameIdentifier	 Identity Mapper
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
//at this point the paths are set up with lists of files, 	TokenNameCOMMENT_LINE	at this point the paths are set up with lists of files, 
//and the mapper is ready to map from source dirs to dest files 	TokenNameCOMMENT_LINE	and the mapper is ready to map from source dirs to dest files 
//now we iterate through every JAR giving source and dest names 	TokenNameCOMMENT_LINE	now we iterate through every JAR giving source and dest names 
// deal with the paths 	TokenNameCOMMENT_LINE	deal with the paths 
Iterator	TokenNameIdentifier	 Iterator
iter	TokenNameIdentifier	 iter
=	TokenNameEQUAL	
sources	TokenNameIdentifier	 sources
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Resource	TokenNameIdentifier	 Resource
r	TokenNameIdentifier	 r
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Resource	TokenNameIdentifier	 Resource
)	TokenNameRPAREN	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
FileResource	TokenNameIdentifier	 File Resource
fr	TokenNameIdentifier	 fr
=	TokenNameEQUAL	
ResourceUtils	TokenNameIdentifier	 Resource Utils
.	TokenNameDOT	
asFileResource	TokenNameIdentifier	 as File Resource
(	TokenNameLPAREN	
(	TokenNameLPAREN	
FileProvider	TokenNameIdentifier	 File Provider
)	TokenNameRPAREN	
r	TokenNameIdentifier	 r
.	TokenNameDOT	
as	TokenNameIdentifier	 as
(	TokenNameLPAREN	
FileProvider	TokenNameIdentifier	 File Provider
.	TokenNameDOT	
class	TokenNameclass	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
//calculate our destination directory; it is either the destDir 	TokenNameCOMMENT_LINE	calculate our destination directory; it is either the destDir 
//attribute, or the base dir of the fileset (for in situ updates) 	TokenNameCOMMENT_LINE	attribute, or the base dir of the fileset (for in situ updates) 
File	TokenNameIdentifier	 File
toDir	TokenNameIdentifier	 to Dir
=	TokenNameEQUAL	
hasDestDir	TokenNameIdentifier	 has Dest Dir
?	TokenNameQUESTION	
destDir	TokenNameIdentifier	 dest Dir
:	TokenNameCOLON	
fr	TokenNameIdentifier	 fr
.	TokenNameDOT	
getBaseDir	TokenNameIdentifier	 get Base Dir
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
//determine the destination filename via the mapper 	TokenNameCOMMENT_LINE	determine the destination filename via the mapper 
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
destFilenames	TokenNameIdentifier	 dest Filenames
=	TokenNameEQUAL	
destMapper	TokenNameIdentifier	 dest Mapper
.	TokenNameDOT	
mapFileName	TokenNameIdentifier	 map File Name
(	TokenNameLPAREN	
fr	TokenNameIdentifier	 fr
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
destFilenames	TokenNameIdentifier	 dest Filenames
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
||	TokenNameOR_OR	
destFilenames	TokenNameIdentifier	 dest Filenames
.	TokenNameDOT	
length	TokenNameIdentifier	 length
!=	TokenNameNOT_EQUAL	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
//we only like simple mappers. 	TokenNameCOMMENT_LINE	we only like simple mappers. 
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ERROR_BAD_MAP	TokenNameIdentifier	 ERROR  BAD  MAP
+	TokenNamePLUS	
fr	TokenNameIdentifier	 fr
.	TokenNameDOT	
getFile	TokenNameIdentifier	 get File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
File	TokenNameIdentifier	 File
destFile	TokenNameIdentifier	 dest File
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
toDir	TokenNameIdentifier	 to Dir
,	TokenNameCOMMA	
destFilenames	TokenNameIdentifier	 dest Filenames
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
signOneJar	TokenNameIdentifier	 sign One Jar
(	TokenNameLPAREN	
fr	TokenNameIdentifier	 fr
.	TokenNameDOT	
getFile	TokenNameIdentifier	 get File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
destFile	TokenNameIdentifier	 dest File
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
endExecution	TokenNameIdentifier	 end Execution
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Sign one jar. * <p/> * The signing only takes place if {@link #isUpToDate(File, File)} indicates * that it is needed. * * @param jarSource source to sign * @param jarTarget target; may be null * @throws BuildException */	TokenNameCOMMENT_JAVADOC	 Sign one jar. <p/> The signing only takes place if {@link #isUpToDate(File, File)} indicates that it is needed. * @param jarSource source to sign @param jarTarget target; may be null @throws BuildException 
private	TokenNameprivate	
void	TokenNamevoid	
signOneJar	TokenNameIdentifier	 sign One Jar
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
jarSource	TokenNameIdentifier	 jar Source
,	TokenNameCOMMA	
File	TokenNameIdentifier	 File
jarTarget	TokenNameIdentifier	 jar Target
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
targetFile	TokenNameIdentifier	 target File
=	TokenNameEQUAL	
jarTarget	TokenNameIdentifier	 jar Target
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
targetFile	TokenNameIdentifier	 target File
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
targetFile	TokenNameIdentifier	 target File
=	TokenNameEQUAL	
jarSource	TokenNameIdentifier	 jar Source
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
isUpToDate	TokenNameIdentifier	 is Up To Date
(	TokenNameLPAREN	
jarSource	TokenNameIdentifier	 jar Source
,	TokenNameCOMMA	
targetFile	TokenNameIdentifier	 target File
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
long	TokenNamelong	
lastModified	TokenNameIdentifier	 last Modified
=	TokenNameEQUAL	
jarSource	TokenNameIdentifier	 jar Source
.	TokenNameDOT	
lastModified	TokenNameIdentifier	 last Modified
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
ExecTask	TokenNameIdentifier	 Exec Task
cmd	TokenNameIdentifier	 cmd
=	TokenNameEQUAL	
createJarSigner	TokenNameIdentifier	 create Jar Signer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
setCommonOptions	TokenNameIdentifier	 set Common Options
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
bindToKeystore	TokenNameIdentifier	 bind To Keystore
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
null	TokenNamenull	
!=	TokenNameNOT_EQUAL	
sigfile	TokenNameIdentifier	 sigfile
)	TokenNameRPAREN	
{	TokenNameLBRACE	
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
"-sigfile"	TokenNameStringLiteral	-sigfile
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
value	TokenNameIdentifier	 value
=	TokenNameEQUAL	
this	TokenNamethis	
.	TokenNameDOT	
sigfile	TokenNameIdentifier	 sigfile
;	TokenNameSEMICOLON	
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
value	TokenNameIdentifier	 value
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
//DO NOT SET THE -signedjar OPTION if source==dest 	TokenNameCOMMENT_LINE	DO NOT SET THE -signedjar OPTION if source==dest 
//unless you like fielding hotspot crash reports 	TokenNameCOMMENT_LINE	unless you like fielding hotspot crash reports 
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
FILE_UTILS	TokenNameIdentifier	 FILE  UTILS
.	TokenNameDOT	
areSame	TokenNameIdentifier	 are Same
(	TokenNameLPAREN	
jarSource	TokenNameIdentifier	 jar Source
,	TokenNameCOMMA	
targetFile	TokenNameIdentifier	 target File
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
"-signedjar"	TokenNameStringLiteral	-signedjar
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
targetFile	TokenNameIdentifier	 target File
.	TokenNameDOT	
getPath	TokenNameIdentifier	 get Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioex	TokenNameIdentifier	 ioex
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ioex	TokenNameIdentifier	 ioex
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
internalsf	TokenNameIdentifier	 internalsf
)	TokenNameRPAREN	
{	TokenNameLBRACE	
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
"-internalsf"	TokenNameStringLiteral	-internalsf
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
sectionsonly	TokenNameIdentifier	 sectionsonly
)	TokenNameRPAREN	
{	TokenNameLBRACE	
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
"-sectionsonly"	TokenNameStringLiteral	-sectionsonly
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
sigAlg	TokenNameIdentifier	 sig Alg
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
"-sigalg"	TokenNameStringLiteral	-sigalg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
sigAlg	TokenNameIdentifier	 sig Alg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
digestAlg	TokenNameIdentifier	 digest Alg
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
"-digestalg"	TokenNameStringLiteral	-digestalg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
digestAlg	TokenNameIdentifier	 digest Alg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
//add -tsa operations if declared 	TokenNameCOMMENT_LINE	add -tsa operations if declared 
addTimestampAuthorityCommands	TokenNameIdentifier	 add Timestamp Authority Commands
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
//JAR source is required 	TokenNameCOMMENT_LINE	JAR source is required 
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
jarSource	TokenNameIdentifier	 jar Source
.	TokenNameDOT	
getPath	TokenNameIdentifier	 get Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
//alias is required for signing 	TokenNameCOMMENT_LINE	alias is required for signing 
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
alias	TokenNameIdentifier	 alias
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Signing JAR: "	TokenNameStringLiteral	Signing JAR: 
+	TokenNamePLUS	
jarSource	TokenNameIdentifier	 jar Source
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" to "	TokenNameStringLiteral	 to 
+	TokenNamePLUS	
targetFile	TokenNameIdentifier	 target File
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" as "	TokenNameStringLiteral	 as 
+	TokenNamePLUS	
alias	TokenNameIdentifier	 alias
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
cmd	TokenNameIdentifier	 cmd
.	TokenNameDOT	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// restore the lastModified attribute 	TokenNameCOMMENT_LINE	restore the lastModified attribute 
if	TokenNameif	
(	TokenNameLPAREN	
preserveLastModified	TokenNameIdentifier	 preserve Last Modified
)	TokenNameRPAREN	
{	TokenNameLBRACE	
FILE_UTILS	TokenNameIdentifier	 FILE  UTILS
.	TokenNameDOT	
setFileLastModified	TokenNameIdentifier	 set File Last Modified
(	TokenNameLPAREN	
targetFile	TokenNameIdentifier	 target File
,	TokenNameCOMMA	
lastModified	TokenNameIdentifier	 last Modified
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * If the tsa parameters are set, this passes them to the command. * There is no validation of java version, as third party JDKs * may implement this on earlier/later jarsigner implementations. * @param cmd the exec task. */	TokenNameCOMMENT_JAVADOC	 If the tsa parameters are set, this passes them to the command. There is no validation of java version, as third party JDKs may implement this on earlier/later jarsigner implementations. @param cmd the exec task. 
private	TokenNameprivate	
void	TokenNamevoid	
addTimestampAuthorityCommands	TokenNameIdentifier	 add Timestamp Authority Commands
(	TokenNameLPAREN	
final	TokenNamefinal	
ExecTask	TokenNameIdentifier	 Exec Task
cmd	TokenNameIdentifier	 cmd
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
tsaurl	TokenNameIdentifier	 tsaurl
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
"-tsa"	TokenNameStringLiteral	-tsa
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
tsaurl	TokenNameIdentifier	 tsaurl
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
tsacert	TokenNameIdentifier	 tsacert
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
"-tsacert"	TokenNameStringLiteral	-tsacert
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
addValue	TokenNameIdentifier	 add Value
(	TokenNameLPAREN	
cmd	TokenNameIdentifier	 cmd
,	TokenNameCOMMA	
tsacert	TokenNameIdentifier	 tsacert
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Compare a jar file with its corresponding signed jar. The logic for this * is complex, and best explained in the source itself. Essentially if * either file doesnt exist, or the destfile has an out of date timestamp, * then the return value is false. * <p/> * If we are signing ourself, the check {@link #isSigned(File)} is used to * trigger the process. * * @param jarFile the unsigned jar file * @param signedjarFile the result signed jar file * @return true if the signedjarFile is considered up to date */	TokenNameCOMMENT_JAVADOC	 Compare a jar file with its corresponding signed jar. The logic for this is complex, and best explained in the source itself. Essentially if either file doesnt exist, or the destfile has an out of date timestamp, then the return value is false. <p/> If we are signing ourself, the check {@link #isSigned(File)} is used to trigger the process. * @param jarFile the unsigned jar file @param signedjarFile the result signed jar file @return true if the signedjarFile is considered up to date 
protected	TokenNameprotected	
boolean	TokenNameboolean	
isUpToDate	TokenNameIdentifier	 is Up To Date
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
jarFile	TokenNameIdentifier	 jar File
,	TokenNameCOMMA	
File	TokenNameIdentifier	 File
signedjarFile	TokenNameIdentifier	 signedjar File
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
isForce	TokenNameIdentifier	 is Force
(	TokenNameLPAREN	
)	TokenNameRPAREN	
||	TokenNameOR_OR	
null	TokenNamenull	
==	TokenNameEQUAL_EQUAL	
jarFile	TokenNameIdentifier	 jar File
||	TokenNameOR_OR	
!	TokenNameNOT	
jarFile	TokenNameIdentifier	 jar File
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
//these are pathological cases, but retained in case somebody 	TokenNameCOMMENT_LINE	these are pathological cases, but retained in case somebody 
//subclassed us. 	TokenNameCOMMENT_LINE	subclassed us. 
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
//we normally compare destination with source 	TokenNameCOMMENT_LINE	we normally compare destination with source 
File	TokenNameIdentifier	 File
destFile	TokenNameIdentifier	 dest File
=	TokenNameEQUAL	
signedjarFile	TokenNameIdentifier	 signedjar File
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
destFile	TokenNameIdentifier	 dest File
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
//but if no dest is specified, compare source to source 	TokenNameCOMMENT_LINE	but if no dest is specified, compare source to source 
destFile	TokenNameIdentifier	 dest File
=	TokenNameEQUAL	
jarFile	TokenNameIdentifier	 jar File
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
//if, by any means, the destfile and source match, 	TokenNameCOMMENT_LINE	if, by any means, the destfile and source match, 
if	TokenNameif	
(	TokenNameLPAREN	
jarFile	TokenNameIdentifier	 jar File
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
destFile	TokenNameIdentifier	 dest File
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
lazy	TokenNameIdentifier	 lazy
)	TokenNameRPAREN	
{	TokenNameLBRACE	
//we check the presence of signatures on lazy signing 	TokenNameCOMMENT_LINE	we check the presence of signatures on lazy signing 
return	TokenNamereturn	
isSigned	TokenNameIdentifier	 is Signed
(	TokenNameLPAREN	
jarFile	TokenNameIdentifier	 jar File
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
//unsigned or non-lazy self signings are always false 	TokenNameCOMMENT_LINE	unsigned or non-lazy self signings are always false 
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
//if they are different, the timestamps are used 	TokenNameCOMMENT_LINE	if they are different, the timestamps are used 
return	TokenNamereturn	
FILE_UTILS	TokenNameIdentifier	 FILE  UTILS
.	TokenNameDOT	
isUpToDate	TokenNameIdentifier	 is Up To Date
(	TokenNameLPAREN	
jarFile	TokenNameIdentifier	 jar File
,	TokenNameCOMMA	
destFile	TokenNameIdentifier	 dest File
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * test for a file being signed, by looking for a signature in the META-INF * directory with our alias/sigfile. * * @param file the file to be checked * @return true if the file is signed * @see IsSigned#isSigned(File, String) */	TokenNameCOMMENT_JAVADOC	 test for a file being signed, by looking for a signature in the META-INF directory with our alias/sigfile. * @param file the file to be checked @return true if the file is signed @see IsSigned#isSigned(File, String) 
protected	TokenNameprotected	
boolean	TokenNameboolean	
isSigned	TokenNameIdentifier	 is Signed
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
file	TokenNameIdentifier	 file
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
return	TokenNamereturn	
IsSigned	TokenNameIdentifier	 Is Signed
.	TokenNameDOT	
isSigned	TokenNameIdentifier	 is Signed
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
,	TokenNameCOMMA	
sigfile	TokenNameIdentifier	 sigfile
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
?	TokenNameQUESTION	
alias	TokenNameIdentifier	 alias
:	TokenNameCOLON	
sigfile	TokenNameIdentifier	 sigfile
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
//just log this 	TokenNameCOMMENT_LINE	just log this 
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
e	TokenNameIdentifier	 e
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * true to indicate that the signed jar modification date remains the same * as the original. Defaults to false * * @param preserveLastModified if true preserve the last modified time */	TokenNameCOMMENT_JAVADOC	 true to indicate that the signed jar modification date remains the same as the original. Defaults to false * @param preserveLastModified if true preserve the last modified time 
public	TokenNamepublic	
void	TokenNamevoid	
setPreserveLastModified	TokenNameIdentifier	 set Preserve Last Modified
(	TokenNameLPAREN	
boolean	TokenNameboolean	
preserveLastModified	TokenNameIdentifier	 preserve Last Modified
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
preserveLastModified	TokenNameIdentifier	 preserve Last Modified
=	TokenNameEQUAL	
preserveLastModified	TokenNameIdentifier	 preserve Last Modified
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
