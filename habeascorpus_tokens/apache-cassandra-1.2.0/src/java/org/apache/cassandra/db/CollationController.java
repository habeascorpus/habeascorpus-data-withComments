/* * Licensed to the Apache Software Foundation (ASF) under one * or more contributor license agreements. See the NOTICE file * distributed with this work for additional information * regarding copyright ownership. The ASF licenses this file * to you under the Apache License, Version 2.0 (the * "License"); you may not use this file except in compliance * with the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to you under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
cassandra	TokenNameIdentifier	 cassandra
.	TokenNameDOT	
db	TokenNameIdentifier	 db
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
nio	TokenNameIdentifier	 nio
.	TokenNameDOT	
ByteBuffer	TokenNameIdentifier	 Byte Buffer
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
*	TokenNameMULTIPLY	
;	TokenNameSEMICOLON	
import	TokenNameimport	
com	TokenNameIdentifier	 com
.	TokenNameDOT	
google	TokenNameIdentifier	 google
.	TokenNameDOT	
common	TokenNameIdentifier	 common
.	TokenNameDOT	
collect	TokenNameIdentifier	 collect
.	TokenNameDOT	
Iterables	TokenNameIdentifier	 Iterables
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
slf4j	TokenNameIdentifier	 slf4j
.	TokenNameDOT	
Logger	TokenNameIdentifier	 Logger
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
slf4j	TokenNameIdentifier	 slf4j
.	TokenNameDOT	
LoggerFactory	TokenNameIdentifier	 Logger Factory
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
cassandra	TokenNameIdentifier	 cassandra
.	TokenNameDOT	
db	TokenNameIdentifier	 db
.	TokenNameDOT	
columniterator	TokenNameIdentifier	 columniterator
.	TokenNameDOT	
OnDiskAtomIterator	TokenNameIdentifier	 On Disk Atom Iterator
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
cassandra	TokenNameIdentifier	 cassandra
.	TokenNameDOT	
db	TokenNameIdentifier	 db
.	TokenNameDOT	
columniterator	TokenNameIdentifier	 columniterator
.	TokenNameDOT	
ISSTableColumnIterator	TokenNameIdentifier	 ISS Table Column Iterator
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
cassandra	TokenNameIdentifier	 cassandra
.	TokenNameDOT	
db	TokenNameIdentifier	 db
.	TokenNameDOT	
columniterator	TokenNameIdentifier	 columniterator
.	TokenNameDOT	
SimpleAbstractColumnIterator	TokenNameIdentifier	 Simple Abstract Column Iterator
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
cassandra	TokenNameIdentifier	 cassandra
.	TokenNameDOT	
db	TokenNameIdentifier	 db
.	TokenNameDOT	
compaction	TokenNameIdentifier	 compaction
.	TokenNameDOT	
SizeTieredCompactionStrategy	TokenNameIdentifier	 Size Tiered Compaction Strategy
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
cassandra	TokenNameIdentifier	 cassandra
.	TokenNameDOT	
db	TokenNameIdentifier	 db
.	TokenNameDOT	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
NamesQueryFilter	TokenNameIdentifier	 Names Query Filter
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
cassandra	TokenNameIdentifier	 cassandra
.	TokenNameDOT	
db	TokenNameIdentifier	 db
.	TokenNameDOT	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
QueryFilter	TokenNameIdentifier	 Query Filter
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
cassandra	TokenNameIdentifier	 cassandra
.	TokenNameDOT	
db	TokenNameIdentifier	 db
.	TokenNameDOT	
marshal	TokenNameIdentifier	 marshal
.	TokenNameDOT	
CounterColumnType	TokenNameIdentifier	 Counter Column Type
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
cassandra	TokenNameIdentifier	 cassandra
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
sstable	TokenNameIdentifier	 sstable
.	TokenNameDOT	
SSTable	TokenNameIdentifier	 SS Table
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
cassandra	TokenNameIdentifier	 cassandra
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
sstable	TokenNameIdentifier	 sstable
.	TokenNameDOT	
SSTableReader	TokenNameIdentifier	 SS Table Reader
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
cassandra	TokenNameIdentifier	 cassandra
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
FileUtils	TokenNameIdentifier	 File Utils
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
cassandra	TokenNameIdentifier	 cassandra
.	TokenNameDOT	
tracing	TokenNameIdentifier	 tracing
.	TokenNameDOT	
Tracing	TokenNameIdentifier	 Tracing
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
cassandra	TokenNameIdentifier	 cassandra
.	TokenNameDOT	
utils	TokenNameIdentifier	 utils
.	TokenNameDOT	
CloseableIterator	TokenNameIdentifier	 Closeable Iterator
;	TokenNameSEMICOLON	
public	TokenNamepublic	
class	TokenNameclass	
CollationController	TokenNameIdentifier	 Collation Controller
{	TokenNameLBRACE	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
Logger	TokenNameIdentifier	 Logger
logger	TokenNameIdentifier	 logger
=	TokenNameEQUAL	
LoggerFactory	TokenNameIdentifier	 Logger Factory
.	TokenNameDOT	
getLogger	TokenNameIdentifier	 get Logger
(	TokenNameLPAREN	
CollationController	TokenNameIdentifier	 Collation Controller
.	TokenNameDOT	
class	TokenNameclass	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
ColumnFamilyStore	TokenNameIdentifier	 Column Family Store
cfs	TokenNameIdentifier	 cfs
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
boolean	TokenNameboolean	
mutableColumns	TokenNameIdentifier	 mutable Columns
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
QueryFilter	TokenNameIdentifier	 Query Filter
filter	TokenNameIdentifier	 filter
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
int	TokenNameint	
gcBefore	TokenNameIdentifier	 gc Before
;	TokenNameSEMICOLON	
private	TokenNameprivate	
int	TokenNameint	
sstablesIterated	TokenNameIdentifier	 sstables Iterated
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
public	TokenNamepublic	
CollationController	TokenNameIdentifier	 Collation Controller
(	TokenNameLPAREN	
ColumnFamilyStore	TokenNameIdentifier	 Column Family Store
cfs	TokenNameIdentifier	 cfs
,	TokenNameCOMMA	
boolean	TokenNameboolean	
mutableColumns	TokenNameIdentifier	 mutable Columns
,	TokenNameCOMMA	
QueryFilter	TokenNameIdentifier	 Query Filter
filter	TokenNameIdentifier	 filter
,	TokenNameCOMMA	
int	TokenNameint	
gcBefore	TokenNameIdentifier	 gc Before
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
cfs	TokenNameIdentifier	 cfs
=	TokenNameEQUAL	
cfs	TokenNameIdentifier	 cfs
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
mutableColumns	TokenNameIdentifier	 mutable Columns
=	TokenNameEQUAL	
mutableColumns	TokenNameIdentifier	 mutable Columns
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
filter	TokenNameIdentifier	 filter
=	TokenNameEQUAL	
filter	TokenNameIdentifier	 filter
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
gcBefore	TokenNameIdentifier	 gc Before
=	TokenNameEQUAL	
gcBefore	TokenNameIdentifier	 gc Before
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
ColumnFamily	TokenNameIdentifier	 Column Family
getTopLevelColumns	TokenNameIdentifier	 get Top Level Columns
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
filter	TokenNameIdentifier	 filter
instanceof	TokenNameinstanceof	
NamesQueryFilter	TokenNameIdentifier	 Names Query Filter
&&	TokenNameAND_AND	
(	TokenNameLPAREN	
cfs	TokenNameIdentifier	 cfs
.	TokenNameDOT	
metadata	TokenNameIdentifier	 metadata
.	TokenNameDOT	
cfType	TokenNameIdentifier	 cf Type
==	TokenNameEQUAL_EQUAL	
ColumnFamilyType	TokenNameIdentifier	 Column Family Type
.	TokenNameDOT	
Standard	TokenNameIdentifier	 Standard
||	TokenNameOR_OR	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
path	TokenNameIdentifier	 path
.	TokenNameDOT	
superColumnName	TokenNameIdentifier	 super Column Name
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
cfs	TokenNameIdentifier	 cfs
.	TokenNameDOT	
metadata	TokenNameIdentifier	 metadata
.	TokenNameDOT	
getDefaultValidator	TokenNameIdentifier	 get Default Validator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
CounterColumnType	TokenNameIdentifier	 Counter Column Type
.	TokenNameDOT	
instance	TokenNameIdentifier	 instance
?	TokenNameQUESTION	
collectTimeOrderedData	TokenNameIdentifier	 collect Time Ordered Data
(	TokenNameLPAREN	
)	TokenNameRPAREN	
:	TokenNameCOLON	
collectAllData	TokenNameIdentifier	 collect All Data
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Collects data in order of recency, using the sstable maxtimestamp data. * Once we have data for all requests columns that is newer than the newest remaining maxtimestamp, * we stop. */	TokenNameCOMMENT_JAVADOC	 Collects data in order of recency, using the sstable maxtimestamp data. Once we have data for all requests columns that is newer than the newest remaining maxtimestamp, we stop. 
private	TokenNameprivate	
ColumnFamily	TokenNameIdentifier	 Column Family
collectTimeOrderedData	TokenNameIdentifier	 collect Time Ordered Data
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
logger	TokenNameIdentifier	 logger
.	TokenNameDOT	
trace	TokenNameIdentifier	 trace
(	TokenNameLPAREN	
"collectTimeOrderedData"	TokenNameStringLiteral	collectTimeOrderedData
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// AtomicSortedColumns doesn't work for super columi ns (see #3821) 	TokenNameCOMMENT_LINE	AtomicSortedColumns doesn't work for super columi ns (see #3821) 
ISortedColumns	TokenNameIdentifier	 I Sorted Columns
.	TokenNameDOT	
Factory	TokenNameIdentifier	 Factory
factory	TokenNameIdentifier	 factory
=	TokenNameEQUAL	
mutableColumns	TokenNameIdentifier	 mutable Columns
?	TokenNameQUESTION	
cfs	TokenNameIdentifier	 cfs
.	TokenNameDOT	
metadata	TokenNameIdentifier	 metadata
.	TokenNameDOT	
cfType	TokenNameIdentifier	 cf Type
==	TokenNameEQUAL_EQUAL	
ColumnFamilyType	TokenNameIdentifier	 Column Family Type
.	TokenNameDOT	
Super	TokenNameIdentifier	 Super
?	TokenNameQUESTION	
ThreadSafeSortedColumns	TokenNameIdentifier	 Thread Safe Sorted Columns
.	TokenNameDOT	
factory	TokenNameIdentifier	 factory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
:	TokenNameCOLON	
AtomicSortedColumns	TokenNameIdentifier	 Atomic Sorted Columns
.	TokenNameDOT	
factory	TokenNameIdentifier	 factory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
:	TokenNameCOLON	
TreeMapBackedSortedColumns	TokenNameIdentifier	 Tree Map Backed Sorted Columns
.	TokenNameDOT	
factory	TokenNameIdentifier	 factory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ColumnFamily	TokenNameIdentifier	 Column Family
container	TokenNameIdentifier	 container
=	TokenNameEQUAL	
ColumnFamily	TokenNameIdentifier	 Column Family
.	TokenNameDOT	
create	TokenNameIdentifier	 create
(	TokenNameLPAREN	
cfs	TokenNameIdentifier	 cfs
.	TokenNameDOT	
metadata	TokenNameIdentifier	 metadata
,	TokenNameCOMMA	
factory	TokenNameIdentifier	 factory
,	TokenNameCOMMA	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
isReversed	TokenNameIdentifier	 is Reversed
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
List	TokenNameIdentifier	 List
<	TokenNameLESS	
OnDiskAtomIterator	TokenNameIdentifier	 On Disk Atom Iterator
>	TokenNameGREATER	
iterators	TokenNameIdentifier	 iterators
=	TokenNameEQUAL	
new	TokenNamenew	
ArrayList	TokenNameIdentifier	 Array List
<	TokenNameLESS	
OnDiskAtomIterator	TokenNameIdentifier	 On Disk Atom Iterator
>	TokenNameGREATER	
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Tracing	TokenNameIdentifier	 Tracing
.	TokenNameDOT	
trace	TokenNameIdentifier	 trace
(	TokenNameLPAREN	
"Acquiring sstable references"	TokenNameStringLiteral	Acquiring sstable references
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ColumnFamilyStore	TokenNameIdentifier	 Column Family Store
.	TokenNameDOT	
ViewFragment	TokenNameIdentifier	 View Fragment
view	TokenNameIdentifier	 view
=	TokenNameEQUAL	
cfs	TokenNameIdentifier	 cfs
.	TokenNameDOT	
markReferenced	TokenNameIdentifier	 mark Referenced
(	TokenNameLPAREN	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
key	TokenNameIdentifier	 key
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
Tracing	TokenNameIdentifier	 Tracing
.	TokenNameDOT	
trace	TokenNameIdentifier	 trace
(	TokenNameLPAREN	
"Merging memtable contents"	TokenNameStringLiteral	Merging memtable contents
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
Memtable	TokenNameIdentifier	 Memtable
memtable	TokenNameIdentifier	 memtable
:	TokenNameCOLON	
view	TokenNameIdentifier	 view
.	TokenNameDOT	
memtables	TokenNameIdentifier	 memtables
)	TokenNameRPAREN	
{	TokenNameLBRACE	
OnDiskAtomIterator	TokenNameIdentifier	 On Disk Atom Iterator
iter	TokenNameIdentifier	 iter
=	TokenNameEQUAL	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
getMemtableColumnIterator	TokenNameIdentifier	 get Memtable Column Iterator
(	TokenNameLPAREN	
memtable	TokenNameIdentifier	 memtable
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
iterators	TokenNameIdentifier	 iterators
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
container	TokenNameIdentifier	 container
.	TokenNameDOT	
delete	TokenNameIdentifier	 delete
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
getColumnFamily	TokenNameIdentifier	 get Column Family
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
container	TokenNameIdentifier	 container
.	TokenNameDOT	
addAtom	TokenNameIdentifier	 add Atom
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// avoid changing the filter columns of the original filter 	TokenNameCOMMENT_LINE	avoid changing the filter columns of the original filter 
// (reduceNameFilter removes columns that are known to be irrelevant) 	TokenNameCOMMENT_LINE	(reduceNameFilter removes columns that are known to be irrelevant) 
NamesQueryFilter	TokenNameIdentifier	 Names Query Filter
namesFilter	TokenNameIdentifier	 names Filter
=	TokenNameEQUAL	
(	TokenNameLPAREN	
NamesQueryFilter	TokenNameIdentifier	 Names Query Filter
)	TokenNameRPAREN	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
filter	TokenNameIdentifier	 filter
;	TokenNameSEMICOLON	
TreeSet	TokenNameIdentifier	 Tree Set
<	TokenNameLESS	
ByteBuffer	TokenNameIdentifier	 Byte Buffer
>	TokenNameGREATER	
filterColumns	TokenNameIdentifier	 filter Columns
=	TokenNameEQUAL	
new	TokenNamenew	
TreeSet	TokenNameIdentifier	 Tree Set
<	TokenNameLESS	
ByteBuffer	TokenNameIdentifier	 Byte Buffer
>	TokenNameGREATER	
(	TokenNameLPAREN	
namesFilter	TokenNameIdentifier	 names Filter
.	TokenNameDOT	
columns	TokenNameIdentifier	 columns
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
QueryFilter	TokenNameIdentifier	 Query Filter
reducedFilter	TokenNameIdentifier	 reduced Filter
=	TokenNameEQUAL	
new	TokenNamenew	
QueryFilter	TokenNameIdentifier	 Query Filter
(	TokenNameLPAREN	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
key	TokenNameIdentifier	 key
,	TokenNameCOMMA	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
path	TokenNameIdentifier	 path
,	TokenNameCOMMA	
namesFilter	TokenNameIdentifier	 names Filter
.	TokenNameDOT	
withUpdatedColumns	TokenNameIdentifier	 with Updated Columns
(	TokenNameLPAREN	
filterColumns	TokenNameIdentifier	 filter Columns
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
/* add the SSTables on disk */	TokenNameCOMMENT_BLOCK	 add the SSTables on disk 
Collections	TokenNameIdentifier	 Collections
.	TokenNameDOT	
sort	TokenNameIdentifier	 sort
(	TokenNameLPAREN	
view	TokenNameIdentifier	 view
.	TokenNameDOT	
sstables	TokenNameIdentifier	 sstables
,	TokenNameCOMMA	
SSTable	TokenNameIdentifier	 SS Table
.	TokenNameDOT	
maxTimestampComparator	TokenNameIdentifier	 max Timestamp Comparator
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// read sorted sstables 	TokenNameCOMMENT_LINE	read sorted sstables 
long	TokenNamelong	
mostRecentRowTombstone	TokenNameIdentifier	 most Recent Row Tombstone
=	TokenNameEQUAL	
Long	TokenNameIdentifier	 Long
.	TokenNameDOT	
MIN_VALUE	TokenNameIdentifier	 MIN  VALUE
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
SSTableReader	TokenNameIdentifier	 SS Table Reader
sstable	TokenNameIdentifier	 sstable
:	TokenNameCOLON	
view	TokenNameIdentifier	 view
.	TokenNameDOT	
sstables	TokenNameIdentifier	 sstables
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// if we've already seen a row tombstone with a timestamp greater 	TokenNameCOMMENT_LINE	if we've already seen a row tombstone with a timestamp greater 
// than the most recent update to this sstable, we're done, since the rest of the sstables 	TokenNameCOMMENT_LINE	than the most recent update to this sstable, we're done, since the rest of the sstables 
// will also be older 	TokenNameCOMMENT_LINE	will also be older 
if	TokenNameif	
(	TokenNameLPAREN	
sstable	TokenNameIdentifier	 sstable
.	TokenNameDOT	
getMaxTimestamp	TokenNameIdentifier	 get Max Timestamp
(	TokenNameLPAREN	
)	TokenNameRPAREN	
<	TokenNameLESS	
mostRecentRowTombstone	TokenNameIdentifier	 most Recent Row Tombstone
)	TokenNameRPAREN	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
long	TokenNamelong	
currentMaxTs	TokenNameIdentifier	 current Max Ts
=	TokenNameEQUAL	
sstable	TokenNameIdentifier	 sstable
.	TokenNameDOT	
getMaxTimestamp	TokenNameIdentifier	 get Max Timestamp
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
reduceNameFilter	TokenNameIdentifier	 reduce Name Filter
(	TokenNameLPAREN	
reducedFilter	TokenNameIdentifier	 reduced Filter
,	TokenNameCOMMA	
container	TokenNameIdentifier	 container
,	TokenNameCOMMA	
currentMaxTs	TokenNameIdentifier	 current Max Ts
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
NamesQueryFilter	TokenNameIdentifier	 Names Query Filter
)	TokenNameRPAREN	
reducedFilter	TokenNameIdentifier	 reduced Filter
.	TokenNameDOT	
filter	TokenNameIdentifier	 filter
)	TokenNameRPAREN	
.	TokenNameDOT	
columns	TokenNameIdentifier	 columns
.	TokenNameDOT	
isEmpty	TokenNameIdentifier	 is Empty
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
OnDiskAtomIterator	TokenNameIdentifier	 On Disk Atom Iterator
iter	TokenNameIdentifier	 iter
=	TokenNameEQUAL	
reducedFilter	TokenNameIdentifier	 reduced Filter
.	TokenNameDOT	
getSSTableColumnIterator	TokenNameIdentifier	 get SS Table Column Iterator
(	TokenNameLPAREN	
sstable	TokenNameIdentifier	 sstable
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
iterators	TokenNameIdentifier	 iterators
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
getColumnFamily	TokenNameIdentifier	 get Column Family
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ColumnFamily	TokenNameIdentifier	 Column Family
cf	TokenNameIdentifier	 cf
=	TokenNameEQUAL	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
getColumnFamily	TokenNameIdentifier	 get Column Family
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
cf	TokenNameIdentifier	 cf
.	TokenNameDOT	
isMarkedForDelete	TokenNameIdentifier	 is Marked For Delete
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// track the most recent row level tombstone we encounter 	TokenNameCOMMENT_LINE	track the most recent row level tombstone we encounter 
mostRecentRowTombstone	TokenNameIdentifier	 most Recent Row Tombstone
=	TokenNameEQUAL	
cf	TokenNameIdentifier	 cf
.	TokenNameDOT	
deletionInfo	TokenNameIdentifier	 deletion Info
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getTopLevelDeletion	TokenNameIdentifier	 get Top Level Deletion
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
markedForDeleteAt	TokenNameIdentifier	 marked For Delete At
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
container	TokenNameIdentifier	 container
.	TokenNameDOT	
delete	TokenNameIdentifier	 delete
(	TokenNameLPAREN	
cf	TokenNameIdentifier	 cf
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
sstablesIterated	TokenNameIdentifier	 sstables Iterated
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
Tracing	TokenNameIdentifier	 Tracing
.	TokenNameDOT	
trace	TokenNameIdentifier	 trace
(	TokenNameLPAREN	
"Merging data from sstable {}"	TokenNameStringLiteral	Merging data from sstable {}
,	TokenNameCOMMA	
sstable	TokenNameIdentifier	 sstable
.	TokenNameDOT	
descriptor	TokenNameIdentifier	 descriptor
.	TokenNameDOT	
generation	TokenNameIdentifier	 generation
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
container	TokenNameIdentifier	 container
.	TokenNameDOT	
addAtom	TokenNameIdentifier	 add Atom
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// we need to distinguish between "there is no data at all for this row" (BF will let us rebuild that efficiently) 	TokenNameCOMMENT_LINE	we need to distinguish between "there is no data at all for this row" (BF will let us rebuild that efficiently) 
// and "there used to be data, but it's gone now" (we should cache the empty CF so we don't need to rebuild that slower) 	TokenNameCOMMENT_LINE	and "there used to be data, but it's gone now" (we should cache the empty CF so we don't need to rebuild that slower) 
if	TokenNameif	
(	TokenNameLPAREN	
iterators	TokenNameIdentifier	 iterators
.	TokenNameDOT	
isEmpty	TokenNameIdentifier	 is Empty
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
// do a final collate. toCollate is boilerplate required to provide a CloseableIterator 	TokenNameCOMMENT_LINE	do a final collate. toCollate is boilerplate required to provide a CloseableIterator 
final	TokenNamefinal	
ColumnFamily	TokenNameIdentifier	 Column Family
c2	TokenNameIdentifier	 c2
=	TokenNameEQUAL	
container	TokenNameIdentifier	 container
;	TokenNameSEMICOLON	
CloseableIterator	TokenNameIdentifier	 Closeable Iterator
<	TokenNameLESS	
OnDiskAtom	TokenNameIdentifier	 On Disk Atom
>	TokenNameGREATER	
toCollate	TokenNameIdentifier	 to Collate
=	TokenNameEQUAL	
new	TokenNamenew	
SimpleAbstractColumnIterator	TokenNameIdentifier	 Simple Abstract Column Iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
final	TokenNamefinal	
Iterator	TokenNameIdentifier	 Iterator
<	TokenNameLESS	
IColumn	TokenNameIdentifier	 I Column
>	TokenNameGREATER	
iter	TokenNameIdentifier	 iter
=	TokenNameEQUAL	
c2	TokenNameIdentifier	 c2
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
protected	TokenNameprotected	
OnDiskAtom	TokenNameIdentifier	 On Disk Atom
computeNext	TokenNameIdentifier	 compute Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
?	TokenNameQUESTION	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
:	TokenNameCOLON	
endOfData	TokenNameIdentifier	 end Of Data
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
ColumnFamily	TokenNameIdentifier	 Column Family
getColumnFamily	TokenNameIdentifier	 get Column Family
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
c2	TokenNameIdentifier	 c2
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
DecoratedKey	TokenNameIdentifier	 Decorated Key
getKey	TokenNameIdentifier	 get Key
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
key	TokenNameIdentifier	 key
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
;	TokenNameSEMICOLON	
ColumnFamily	TokenNameIdentifier	 Column Family
returnCF	TokenNameIdentifier	 return CF
=	TokenNameEQUAL	
container	TokenNameIdentifier	 container
.	TokenNameDOT	
cloneMeShallow	TokenNameIdentifier	 clone Me Shallow
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Tracing	TokenNameIdentifier	 Tracing
.	TokenNameDOT	
trace	TokenNameIdentifier	 trace
(	TokenNameLPAREN	
"Collating all results"	TokenNameStringLiteral	Collating all results
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
collateOnDiskAtom	TokenNameIdentifier	 collate On Disk Atom
(	TokenNameLPAREN	
returnCF	TokenNameIdentifier	 return CF
,	TokenNameCOMMA	
Collections	TokenNameIdentifier	 Collections
.	TokenNameDOT	
singletonList	TokenNameIdentifier	 singleton List
(	TokenNameLPAREN	
toCollate	TokenNameIdentifier	 to Collate
)	TokenNameRPAREN	
,	TokenNameCOMMA	
gcBefore	TokenNameIdentifier	 gc Before
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// "hoist up" the requested data into a more recent sstable 	TokenNameCOMMENT_LINE	"hoist up" the requested data into a more recent sstable 
if	TokenNameif	
(	TokenNameLPAREN	
sstablesIterated	TokenNameIdentifier	 sstables Iterated
>	TokenNameGREATER	
cfs	TokenNameIdentifier	 cfs
.	TokenNameDOT	
getMinimumCompactionThreshold	TokenNameIdentifier	 get Minimum Compaction Threshold
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
!	TokenNameNOT	
cfs	TokenNameIdentifier	 cfs
.	TokenNameDOT	
isCompactionDisabled	TokenNameIdentifier	 is Compaction Disabled
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
cfs	TokenNameIdentifier	 cfs
.	TokenNameDOT	
getCompactionStrategy	TokenNameIdentifier	 get Compaction Strategy
(	TokenNameLPAREN	
)	TokenNameRPAREN	
instanceof	TokenNameinstanceof	
SizeTieredCompactionStrategy	TokenNameIdentifier	 Size Tiered Compaction Strategy
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Tracing	TokenNameIdentifier	 Tracing
.	TokenNameDOT	
trace	TokenNameIdentifier	 trace
(	TokenNameLPAREN	
"Defragmenting requested data"	TokenNameStringLiteral	Defragmenting requested data
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
RowMutation	TokenNameIdentifier	 Row Mutation
rm	TokenNameIdentifier	 rm
=	TokenNameEQUAL	
new	TokenNamenew	
RowMutation	TokenNameIdentifier	 Row Mutation
(	TokenNameLPAREN	
cfs	TokenNameIdentifier	 cfs
.	TokenNameDOT	
table	TokenNameIdentifier	 table
.	TokenNameDOT	
name	TokenNameIdentifier	 name
,	TokenNameCOMMA	
new	TokenNamenew	
Row	TokenNameIdentifier	 Row
(	TokenNameLPAREN	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
key	TokenNameIdentifier	 key
,	TokenNameCOMMA	
returnCF	TokenNameIdentifier	 return CF
.	TokenNameDOT	
cloneMe	TokenNameIdentifier	 clone Me
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// skipping commitlog and index updates is fine since we're just de-fragmenting existing data 	TokenNameCOMMENT_LINE	skipping commitlog and index updates is fine since we're just de-fragmenting existing data 
Table	TokenNameIdentifier	 Table
.	TokenNameDOT	
open	TokenNameIdentifier	 open
(	TokenNameLPAREN	
rm	TokenNameIdentifier	 rm
.	TokenNameDOT	
getTable	TokenNameIdentifier	 get Table
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
apply	TokenNameIdentifier	 apply
(	TokenNameLPAREN	
rm	TokenNameIdentifier	 rm
,	TokenNameCOMMA	
false	TokenNamefalse	
,	TokenNameCOMMA	
false	TokenNamefalse	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Caller is responsible for final removeDeletedCF. This is important for cacheRow to work correctly: 	TokenNameCOMMENT_LINE	Caller is responsible for final removeDeletedCF. This is important for cacheRow to work correctly: 
return	TokenNamereturn	
returnCF	TokenNameIdentifier	 return CF
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
OnDiskAtomIterator	TokenNameIdentifier	 On Disk Atom Iterator
iter	TokenNameIdentifier	 iter
:	TokenNameCOLON	
iterators	TokenNameIdentifier	 iterators
)	TokenNameRPAREN	
FileUtils	TokenNameIdentifier	 File Utils
.	TokenNameDOT	
closeQuietly	TokenNameIdentifier	 close Quietly
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
SSTableReader	TokenNameIdentifier	 SS Table Reader
.	TokenNameDOT	
releaseReferences	TokenNameIdentifier	 release References
(	TokenNameLPAREN	
view	TokenNameIdentifier	 view
.	TokenNameDOT	
sstables	TokenNameIdentifier	 sstables
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * remove columns from @param filter where we already have data in @param returnCF newer than @param sstableTimestamp */	TokenNameCOMMENT_JAVADOC	 remove columns from @param filter where we already have data in @param returnCF newer than @param sstableTimestamp 
private	TokenNameprivate	
void	TokenNamevoid	
reduceNameFilter	TokenNameIdentifier	 reduce Name Filter
(	TokenNameLPAREN	
QueryFilter	TokenNameIdentifier	 Query Filter
filter	TokenNameIdentifier	 filter
,	TokenNameCOMMA	
ColumnFamily	TokenNameIdentifier	 Column Family
returnCF	TokenNameIdentifier	 return CF
,	TokenNameCOMMA	
long	TokenNamelong	
sstableTimestamp	TokenNameIdentifier	 sstable Timestamp
)	TokenNameRPAREN	
{	TokenNameLBRACE	
AbstractColumnContainer	TokenNameIdentifier	 Abstract Column Container
container	TokenNameIdentifier	 container
=	TokenNameEQUAL	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
path	TokenNameIdentifier	 path
.	TokenNameDOT	
superColumnName	TokenNameIdentifier	 super Column Name
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
?	TokenNameQUESTION	
returnCF	TokenNameIdentifier	 return CF
:	TokenNameCOLON	
(	TokenNameLPAREN	
SuperColumn	TokenNameIdentifier	 Super Column
)	TokenNameRPAREN	
returnCF	TokenNameIdentifier	 return CF
.	TokenNameDOT	
getColumn	TokenNameIdentifier	 get Column
(	TokenNameLPAREN	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
path	TokenNameIdentifier	 path
.	TokenNameDOT	
superColumnName	TokenNameIdentifier	 super Column Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// MIN_VALUE means we don't know any information 	TokenNameCOMMENT_LINE	MIN_VALUE means we don't know any information 
if	TokenNameif	
(	TokenNameLPAREN	
container	TokenNameIdentifier	 container
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
||	TokenNameOR_OR	
sstableTimestamp	TokenNameIdentifier	 sstable Timestamp
==	TokenNameEQUAL_EQUAL	
Long	TokenNameIdentifier	 Long
.	TokenNameDOT	
MIN_VALUE	TokenNameIdentifier	 MIN  VALUE
)	TokenNameRPAREN	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
<	TokenNameLESS	
ByteBuffer	TokenNameIdentifier	 Byte Buffer
>	TokenNameGREATER	
iterator	TokenNameIdentifier	 iterator
=	TokenNameEQUAL	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
NamesQueryFilter	TokenNameIdentifier	 Names Query Filter
)	TokenNameRPAREN	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
filter	TokenNameIdentifier	 filter
)	TokenNameRPAREN	
.	TokenNameDOT	
columns	TokenNameIdentifier	 columns
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
iterator	TokenNameIdentifier	 iterator
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ByteBuffer	TokenNameIdentifier	 Byte Buffer
filterColumn	TokenNameIdentifier	 filter Column
=	TokenNameEQUAL	
iterator	TokenNameIdentifier	 iterator
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
IColumn	TokenNameIdentifier	 I Column
column	TokenNameIdentifier	 column
=	TokenNameEQUAL	
container	TokenNameIdentifier	 container
.	TokenNameDOT	
getColumn	TokenNameIdentifier	 get Column
(	TokenNameLPAREN	
filterColumn	TokenNameIdentifier	 filter Column
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
column	TokenNameIdentifier	 column
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
column	TokenNameIdentifier	 column
.	TokenNameDOT	
timestamp	TokenNameIdentifier	 timestamp
(	TokenNameLPAREN	
)	TokenNameRPAREN	
>	TokenNameGREATER	
sstableTimestamp	TokenNameIdentifier	 sstable Timestamp
)	TokenNameRPAREN	
iterator	TokenNameIdentifier	 iterator
.	TokenNameDOT	
remove	TokenNameIdentifier	 remove
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Collects data the brute-force way: gets an iterator for the filter in question * from every memtable and sstable, then merges them together. */	TokenNameCOMMENT_JAVADOC	 Collects data the brute-force way: gets an iterator for the filter in question from every memtable and sstable, then merges them together. 
private	TokenNameprivate	
ColumnFamily	TokenNameIdentifier	 Column Family
collectAllData	TokenNameIdentifier	 collect All Data
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
logger	TokenNameIdentifier	 logger
.	TokenNameDOT	
trace	TokenNameIdentifier	 trace
(	TokenNameLPAREN	
"collectAllData"	TokenNameStringLiteral	collectAllData
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// AtomicSortedColumns doesn't work for super columns (see #3821) 	TokenNameCOMMENT_LINE	AtomicSortedColumns doesn't work for super columns (see #3821) 
ISortedColumns	TokenNameIdentifier	 I Sorted Columns
.	TokenNameDOT	
Factory	TokenNameIdentifier	 Factory
factory	TokenNameIdentifier	 factory
=	TokenNameEQUAL	
mutableColumns	TokenNameIdentifier	 mutable Columns
?	TokenNameQUESTION	
cfs	TokenNameIdentifier	 cfs
.	TokenNameDOT	
metadata	TokenNameIdentifier	 metadata
.	TokenNameDOT	
cfType	TokenNameIdentifier	 cf Type
==	TokenNameEQUAL_EQUAL	
ColumnFamilyType	TokenNameIdentifier	 Column Family Type
.	TokenNameDOT	
Super	TokenNameIdentifier	 Super
?	TokenNameQUESTION	
ThreadSafeSortedColumns	TokenNameIdentifier	 Thread Safe Sorted Columns
.	TokenNameDOT	
factory	TokenNameIdentifier	 factory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
:	TokenNameCOLON	
AtomicSortedColumns	TokenNameIdentifier	 Atomic Sorted Columns
.	TokenNameDOT	
factory	TokenNameIdentifier	 factory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
:	TokenNameCOLON	
ArrayBackedSortedColumns	TokenNameIdentifier	 Array Backed Sorted Columns
.	TokenNameDOT	
factory	TokenNameIdentifier	 factory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Tracing	TokenNameIdentifier	 Tracing
.	TokenNameDOT	
trace	TokenNameIdentifier	 trace
(	TokenNameLPAREN	
"Acquiring sstable references"	TokenNameStringLiteral	Acquiring sstable references
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ColumnFamilyStore	TokenNameIdentifier	 Column Family Store
.	TokenNameDOT	
ViewFragment	TokenNameIdentifier	 View Fragment
view	TokenNameIdentifier	 view
=	TokenNameEQUAL	
cfs	TokenNameIdentifier	 cfs
.	TokenNameDOT	
markReferenced	TokenNameIdentifier	 mark Referenced
(	TokenNameLPAREN	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
key	TokenNameIdentifier	 key
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
List	TokenNameIdentifier	 List
<	TokenNameLESS	
OnDiskAtomIterator	TokenNameIdentifier	 On Disk Atom Iterator
>	TokenNameGREATER	
iterators	TokenNameIdentifier	 iterators
=	TokenNameEQUAL	
new	TokenNamenew	
ArrayList	TokenNameIdentifier	 Array List
<	TokenNameLESS	
OnDiskAtomIterator	TokenNameIdentifier	 On Disk Atom Iterator
>	TokenNameGREATER	
(	TokenNameLPAREN	
Iterables	TokenNameIdentifier	 Iterables
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
view	TokenNameIdentifier	 view
.	TokenNameDOT	
memtables	TokenNameIdentifier	 memtables
)	TokenNameRPAREN	
+	TokenNamePLUS	
view	TokenNameIdentifier	 view
.	TokenNameDOT	
sstables	TokenNameIdentifier	 sstables
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ColumnFamily	TokenNameIdentifier	 Column Family
returnCF	TokenNameIdentifier	 return CF
=	TokenNameEQUAL	
ColumnFamily	TokenNameIdentifier	 Column Family
.	TokenNameDOT	
create	TokenNameIdentifier	 create
(	TokenNameLPAREN	
cfs	TokenNameIdentifier	 cfs
.	TokenNameDOT	
metadata	TokenNameIdentifier	 metadata
,	TokenNameCOMMA	
factory	TokenNameIdentifier	 factory
,	TokenNameCOMMA	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
isReversed	TokenNameIdentifier	 is Reversed
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
Tracing	TokenNameIdentifier	 Tracing
.	TokenNameDOT	
trace	TokenNameIdentifier	 trace
(	TokenNameLPAREN	
"Merging memtable contents"	TokenNameStringLiteral	Merging memtable contents
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
Memtable	TokenNameIdentifier	 Memtable
memtable	TokenNameIdentifier	 memtable
:	TokenNameCOLON	
view	TokenNameIdentifier	 view
.	TokenNameDOT	
memtables	TokenNameIdentifier	 memtables
)	TokenNameRPAREN	
{	TokenNameLBRACE	
OnDiskAtomIterator	TokenNameIdentifier	 On Disk Atom Iterator
iter	TokenNameIdentifier	 iter
=	TokenNameEQUAL	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
getMemtableColumnIterator	TokenNameIdentifier	 get Memtable Column Iterator
(	TokenNameLPAREN	
memtable	TokenNameIdentifier	 memtable
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
returnCF	TokenNameIdentifier	 return CF
.	TokenNameDOT	
delete	TokenNameIdentifier	 delete
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
getColumnFamily	TokenNameIdentifier	 get Column Family
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
iterators	TokenNameIdentifier	 iterators
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/* * We can't eliminate full sstables based on the timestamp of what we've already read like * in collectTimeOrderedData, but we still want to eliminate sstable whose maxTimestamp < mostRecentTombstone * we've read. We still rely on the sstable ordering by maxTimestamp since if * maxTimestamp_s1 > maxTimestamp_s0, * we're guaranteed that s1 cannot have a row tombstone such that * timestamp(tombstone) > maxTimestamp_s0 * since we necessarily have * timestamp(tombstone) <= maxTimestamp_s1 * In othere words, iterating in maxTimestamp order allow to do our mostRecentTombstone elimination * in one pass, and minimize the number of sstables for which we read a rowTombstone. */	TokenNameCOMMENT_BLOCK	 We can't eliminate full sstables based on the timestamp of what we've already read like in collectTimeOrderedData, but we still want to eliminate sstable whose maxTimestamp < mostRecentTombstone we've read. We still rely on the sstable ordering by maxTimestamp since if maxTimestamp_s1 > maxTimestamp_s0, we're guaranteed that s1 cannot have a row tombstone such that timestamp(tombstone) > maxTimestamp_s0 since we necessarily have timestamp(tombstone) <= maxTimestamp_s1 In othere words, iterating in maxTimestamp order allow to do our mostRecentTombstone elimination in one pass, and minimize the number of sstables for which we read a rowTombstone. 
Collections	TokenNameIdentifier	 Collections
.	TokenNameDOT	
sort	TokenNameIdentifier	 sort
(	TokenNameLPAREN	
view	TokenNameIdentifier	 view
.	TokenNameDOT	
sstables	TokenNameIdentifier	 sstables
,	TokenNameCOMMA	
SSTable	TokenNameIdentifier	 SS Table
.	TokenNameDOT	
maxTimestampComparator	TokenNameIdentifier	 max Timestamp Comparator
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
long	TokenNamelong	
mostRecentRowTombstone	TokenNameIdentifier	 most Recent Row Tombstone
=	TokenNameEQUAL	
Long	TokenNameIdentifier	 Long
.	TokenNameDOT	
MIN_VALUE	TokenNameIdentifier	 MIN  VALUE
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
SSTableReader	TokenNameIdentifier	 SS Table Reader
sstable	TokenNameIdentifier	 sstable
:	TokenNameCOLON	
view	TokenNameIdentifier	 view
.	TokenNameDOT	
sstables	TokenNameIdentifier	 sstables
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// if we've already seen a row tombstone with a timestamp greater 	TokenNameCOMMENT_LINE	if we've already seen a row tombstone with a timestamp greater 
// than the most recent update to this sstable, we can skip it 	TokenNameCOMMENT_LINE	than the most recent update to this sstable, we can skip it 
if	TokenNameif	
(	TokenNameLPAREN	
sstable	TokenNameIdentifier	 sstable
.	TokenNameDOT	
getMaxTimestamp	TokenNameIdentifier	 get Max Timestamp
(	TokenNameLPAREN	
)	TokenNameRPAREN	
<	TokenNameLESS	
mostRecentRowTombstone	TokenNameIdentifier	 most Recent Row Tombstone
)	TokenNameRPAREN	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
OnDiskAtomIterator	TokenNameIdentifier	 On Disk Atom Iterator
iter	TokenNameIdentifier	 iter
=	TokenNameEQUAL	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
getSSTableColumnIterator	TokenNameIdentifier	 get SS Table Column Iterator
(	TokenNameLPAREN	
sstable	TokenNameIdentifier	 sstable
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
iterators	TokenNameIdentifier	 iterators
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
getColumnFamily	TokenNameIdentifier	 get Column Family
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ColumnFamily	TokenNameIdentifier	 Column Family
cf	TokenNameIdentifier	 cf
=	TokenNameEQUAL	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
getColumnFamily	TokenNameIdentifier	 get Column Family
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
cf	TokenNameIdentifier	 cf
.	TokenNameDOT	
isMarkedForDelete	TokenNameIdentifier	 is Marked For Delete
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
mostRecentRowTombstone	TokenNameIdentifier	 most Recent Row Tombstone
=	TokenNameEQUAL	
cf	TokenNameIdentifier	 cf
.	TokenNameDOT	
deletionInfo	TokenNameIdentifier	 deletion Info
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getTopLevelDeletion	TokenNameIdentifier	 get Top Level Deletion
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
markedForDeleteAt	TokenNameIdentifier	 marked For Delete At
;	TokenNameSEMICOLON	
returnCF	TokenNameIdentifier	 return CF
.	TokenNameDOT	
delete	TokenNameIdentifier	 delete
(	TokenNameLPAREN	
cf	TokenNameIdentifier	 cf
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
sstablesIterated	TokenNameIdentifier	 sstables Iterated
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// we need to distinguish between "there is no data at all for this row" (BF will let us rebuild that efficiently) 	TokenNameCOMMENT_LINE	we need to distinguish between "there is no data at all for this row" (BF will let us rebuild that efficiently) 
// and "there used to be data, but it's gone now" (we should cache the empty CF so we don't need to rebuild that slower) 	TokenNameCOMMENT_LINE	and "there used to be data, but it's gone now" (we should cache the empty CF so we don't need to rebuild that slower) 
if	TokenNameif	
(	TokenNameLPAREN	
iterators	TokenNameIdentifier	 iterators
.	TokenNameDOT	
isEmpty	TokenNameIdentifier	 is Empty
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
Tracing	TokenNameIdentifier	 Tracing
.	TokenNameDOT	
trace	TokenNameIdentifier	 trace
(	TokenNameLPAREN	
"Merging data from memtables and {} sstables"	TokenNameStringLiteral	Merging data from memtables and {} sstables
,	TokenNameCOMMA	
sstablesIterated	TokenNameIdentifier	 sstables Iterated
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
filter	TokenNameIdentifier	 filter
.	TokenNameDOT	
collateOnDiskAtom	TokenNameIdentifier	 collate On Disk Atom
(	TokenNameLPAREN	
returnCF	TokenNameIdentifier	 return CF
,	TokenNameCOMMA	
iterators	TokenNameIdentifier	 iterators
,	TokenNameCOMMA	
gcBefore	TokenNameIdentifier	 gc Before
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Caller is responsible for final removeDeletedCF. This is important for cacheRow to work correctly: 	TokenNameCOMMENT_LINE	Caller is responsible for final removeDeletedCF. This is important for cacheRow to work correctly: 
return	TokenNamereturn	
returnCF	TokenNameIdentifier	 return CF
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
OnDiskAtomIterator	TokenNameIdentifier	 On Disk Atom Iterator
iter	TokenNameIdentifier	 iter
:	TokenNameCOLON	
iterators	TokenNameIdentifier	 iterators
)	TokenNameRPAREN	
FileUtils	TokenNameIdentifier	 File Utils
.	TokenNameDOT	
closeQuietly	TokenNameIdentifier	 close Quietly
(	TokenNameLPAREN	
iter	TokenNameIdentifier	 iter
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
SSTableReader	TokenNameIdentifier	 SS Table Reader
.	TokenNameDOT	
releaseReferences	TokenNameIdentifier	 release References
(	TokenNameLPAREN	
view	TokenNameIdentifier	 view
.	TokenNameDOT	
sstables	TokenNameIdentifier	 sstables
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
public	TokenNamepublic	
int	TokenNameint	
getSstablesIterated	TokenNameIdentifier	 get Sstables Iterated
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
sstablesIterated	TokenNameIdentifier	 sstables Iterated
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
