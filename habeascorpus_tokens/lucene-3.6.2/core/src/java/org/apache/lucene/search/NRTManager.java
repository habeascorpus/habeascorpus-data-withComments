package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
search	TokenNameIdentifier	 search
;	TokenNameSEMICOLON	
/** * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the "License"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */	TokenNameCOMMENT_JAVADOC	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
IOException	TokenNameIdentifier	 IO Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Collection	TokenNameIdentifier	 Collection
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
List	TokenNameIdentifier	 List
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
concurrent	TokenNameIdentifier	 concurrent
.	TokenNameDOT	
CopyOnWriteArrayList	TokenNameIdentifier	 Copy On Write Array List
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
concurrent	TokenNameIdentifier	 concurrent
.	TokenNameDOT	
TimeUnit	TokenNameIdentifier	 Time Unit
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
concurrent	TokenNameIdentifier	 concurrent
.	TokenNameDOT	
atomic	TokenNameIdentifier	 atomic
.	TokenNameDOT	
AtomicLong	TokenNameIdentifier	 Atomic Long
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
concurrent	TokenNameIdentifier	 concurrent
.	TokenNameDOT	
locks	TokenNameIdentifier	 locks
.	TokenNameDOT	
Condition	TokenNameIdentifier	 Condition
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
concurrent	TokenNameIdentifier	 concurrent
.	TokenNameDOT	
locks	TokenNameIdentifier	 locks
.	TokenNameDOT	
ReentrantLock	TokenNameIdentifier	 Reentrant Lock
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
analysis	TokenNameIdentifier	 analysis
.	TokenNameDOT	
Analyzer	TokenNameIdentifier	 Analyzer
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
document	TokenNameIdentifier	 document
.	TokenNameDOT	
Document	TokenNameIdentifier	 Document
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
CorruptIndexException	TokenNameIdentifier	 Corrupt Index Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
IndexReader	TokenNameIdentifier	 Index Reader
;	TokenNameSEMICOLON	
// javadocs 	TokenNameCOMMENT_LINE	javadocs 
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
IndexWriter	TokenNameIdentifier	 Index Writer
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
Term	TokenNameIdentifier	 Term
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
search	TokenNameIdentifier	 search
.	TokenNameDOT	
IndexSearcher	TokenNameIdentifier	 Index Searcher
;	TokenNameSEMICOLON	
// javadocs 	TokenNameCOMMENT_LINE	javadocs 
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
search	TokenNameIdentifier	 search
.	TokenNameDOT	
SearcherFactory	TokenNameIdentifier	 Searcher Factory
;	TokenNameSEMICOLON	
// javadocs 	TokenNameCOMMENT_LINE	javadocs 
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
store	TokenNameIdentifier	 store
.	TokenNameDOT	
Directory	TokenNameIdentifier	 Directory
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ThreadInterruptedException	TokenNameIdentifier	 Thread Interrupted Exception
;	TokenNameSEMICOLON	
/** * Utility class to manage sharing near-real-time searchers * across multiple searching thread. The difference vs * SearcherManager is that this class enables individual * requests to wait until specific indexing changes are * visible. * * <p>You must create an IndexWriter, then create a {@link * NRTManager.TrackingIndexWriter} from it, and pass that to the * NRTManager. You may want to create two NRTManagers, once * that always applies deletes on refresh and one that does * not. In this case you should use a single {@link * NRTManager.TrackingIndexWriter} instance for both. * * <p>Then, use {@link #acquire} to obtain the * {@link IndexSearcher}, and {@link #release} (ideally, * from within a <code>finally</code> clause) to release it. * * <p>NOTE: to use this class, you must call {@link #maybeRefresh()} * periodically. The {@link NRTManagerReopenThread} is a * simple class to do this on a periodic basis, and reopens * more quickly if a request is waiting. If you implement * your own reopener, be sure to call {@link * #addWaitingListener} so your reopener is notified when a * caller is waiting for a specific generation * searcher. </p> * * @see SearcherFactory * * @lucene.experimental */	TokenNameCOMMENT_JAVADOC	 Utility class to manage sharing near-real-time searchers across multiple searching thread. The difference vs SearcherManager is that this class enables individual requests to wait until specific indexing changes are visible. * <p>You must create an IndexWriter, then create a {@link NRTManager.TrackingIndexWriter} from it, and pass that to the NRTManager. You may want to create two NRTManagers, once that always applies deletes on refresh and one that does not. In this case you should use a single {@link NRTManager.TrackingIndexWriter} instance for both. * <p>Then, use {@link #acquire} to obtain the {@link IndexSearcher}, and {@link #release} (ideally, from within a <code>finally</code> clause) to release it. * <p>NOTE: to use this class, you must call {@link #maybeRefresh()} periodically. The {@link NRTManagerReopenThread} is a simple class to do this on a periodic basis, and reopens more quickly if a request is waiting. If you implement your own reopener, be sure to call {@link #addWaitingListener} so your reopener is notified when a caller is waiting for a specific generation searcher. </p> * @see SearcherFactory * @lucene.experimental 
public	TokenNamepublic	
class	TokenNameclass	
NRTManager	TokenNameIdentifier	 NRT Manager
extends	TokenNameextends	
ReferenceManager	TokenNameIdentifier	 Reference Manager
<	TokenNameLESS	
IndexSearcher	TokenNameIdentifier	 Index Searcher
>	TokenNameGREATER	
{	TokenNameLBRACE	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
long	TokenNamelong	
MAX_SEARCHER_GEN	TokenNameIdentifier	 MAX  SEARCHER  GEN
=	TokenNameEQUAL	
Long	TokenNameIdentifier	 Long
.	TokenNameDOT	
MAX_VALUE	TokenNameIdentifier	 MAX  VALUE
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
TrackingIndexWriter	TokenNameIdentifier	 Tracking Index Writer
writer	TokenNameIdentifier	 writer
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
List	TokenNameIdentifier	 List
<	TokenNameLESS	
WaitingListener	TokenNameIdentifier	 Waiting Listener
>	TokenNameGREATER	
waitingListeners	TokenNameIdentifier	 waiting Listeners
=	TokenNameEQUAL	
new	TokenNamenew	
CopyOnWriteArrayList	TokenNameIdentifier	 Copy On Write Array List
<	TokenNameLESS	
WaitingListener	TokenNameIdentifier	 Waiting Listener
>	TokenNameGREATER	
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
ReentrantLock	TokenNameIdentifier	 Reentrant Lock
genLock	TokenNameIdentifier	 gen Lock
=	TokenNameEQUAL	
new	TokenNamenew	
ReentrantLock	TokenNameIdentifier	 Reentrant Lock
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
Condition	TokenNameIdentifier	 Condition
newGeneration	TokenNameIdentifier	 new Generation
=	TokenNameEQUAL	
genLock	TokenNameIdentifier	 gen Lock
.	TokenNameDOT	
newCondition	TokenNameIdentifier	 new Condition
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
SearcherFactory	TokenNameIdentifier	 Searcher Factory
searcherFactory	TokenNameIdentifier	 searcher Factory
;	TokenNameSEMICOLON	
private	TokenNameprivate	
volatile	TokenNamevolatile	
long	TokenNamelong	
searchingGen	TokenNameIdentifier	 searching Gen
;	TokenNameSEMICOLON	
/** * Create new NRTManager. * * @param writer TrackingIndexWriter to open near-real-time * readers * @param searcherFactory An optional {@link SearcherFactory}. Pass * <code>null</code> if you don't require the searcher to be warmed * before going live or other custom behavior. */	TokenNameCOMMENT_JAVADOC	 Create new NRTManager. * @param writer TrackingIndexWriter to open near-real-time readers @param searcherFactory An optional {@link SearcherFactory}. Pass <code>null</code> if you don't require the searcher to be warmed before going live or other custom behavior. 
public	TokenNamepublic	
NRTManager	TokenNameIdentifier	 NRT Manager
(	TokenNameLPAREN	
TrackingIndexWriter	TokenNameIdentifier	 Tracking Index Writer
writer	TokenNameIdentifier	 writer
,	TokenNameCOMMA	
SearcherFactory	TokenNameIdentifier	 Searcher Factory
searcherFactory	TokenNameIdentifier	 searcher Factory
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
this	TokenNamethis	
(	TokenNameLPAREN	
writer	TokenNameIdentifier	 writer
,	TokenNameCOMMA	
searcherFactory	TokenNameIdentifier	 searcher Factory
,	TokenNameCOMMA	
true	TokenNametrue	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Expert: just like {@link * #NRTManager(TrackingIndexWriter,SearcherFactory)}, * but you can also specify whether each reopened searcher must * apply deletes. This is useful for cases where certain * uses can tolerate seeing some deleted docs, since * reopen time is faster if deletes need not be applied. */	TokenNameCOMMENT_JAVADOC	 Expert: just like {@link #NRTManager(TrackingIndexWriter,SearcherFactory)}, but you can also specify whether each reopened searcher must apply deletes. This is useful for cases where certain uses can tolerate seeing some deleted docs, since reopen time is faster if deletes need not be applied. 
public	TokenNamepublic	
NRTManager	TokenNameIdentifier	 NRT Manager
(	TokenNameLPAREN	
TrackingIndexWriter	TokenNameIdentifier	 Tracking Index Writer
writer	TokenNameIdentifier	 writer
,	TokenNameCOMMA	
SearcherFactory	TokenNameIdentifier	 Searcher Factory
searcherFactory	TokenNameIdentifier	 searcher Factory
,	TokenNameCOMMA	
boolean	TokenNameboolean	
applyAllDeletes	TokenNameIdentifier	 apply All Deletes
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
writer	TokenNameIdentifier	 writer
=	TokenNameEQUAL	
writer	TokenNameIdentifier	 writer
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
searcherFactory	TokenNameIdentifier	 searcher Factory
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
searcherFactory	TokenNameIdentifier	 searcher Factory
=	TokenNameEQUAL	
new	TokenNamenew	
SearcherFactory	TokenNameIdentifier	 Searcher Factory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
this	TokenNamethis	
.	TokenNameDOT	
searcherFactory	TokenNameIdentifier	 searcher Factory
=	TokenNameEQUAL	
searcherFactory	TokenNameIdentifier	 searcher Factory
;	TokenNameSEMICOLON	
current	TokenNameIdentifier	 current
=	TokenNameEQUAL	
SearcherManager	TokenNameIdentifier	 Searcher Manager
.	TokenNameDOT	
getSearcher	TokenNameIdentifier	 get Searcher
(	TokenNameLPAREN	
searcherFactory	TokenNameIdentifier	 searcher Factory
,	TokenNameCOMMA	
IndexReader	TokenNameIdentifier	 Index Reader
.	TokenNameDOT	
open	TokenNameIdentifier	 open
(	TokenNameLPAREN	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
getIndexWriter	TokenNameIdentifier	 get Index Writer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
applyAllDeletes	TokenNameIdentifier	 apply All Deletes
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
protected	TokenNameprotected	
void	TokenNamevoid	
decRef	TokenNameIdentifier	 dec Ref
(	TokenNameLPAREN	
IndexSearcher	TokenNameIdentifier	 Index Searcher
reference	TokenNameIdentifier	 reference
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
reference	TokenNameIdentifier	 reference
.	TokenNameDOT	
getIndexReader	TokenNameIdentifier	 get Index Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
decRef	TokenNameIdentifier	 dec Ref
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
protected	TokenNameprotected	
boolean	TokenNameboolean	
tryIncRef	TokenNameIdentifier	 try Inc Ref
(	TokenNameLPAREN	
IndexSearcher	TokenNameIdentifier	 Index Searcher
reference	TokenNameIdentifier	 reference
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
reference	TokenNameIdentifier	 reference
.	TokenNameDOT	
getIndexReader	TokenNameIdentifier	 get Index Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
tryIncRef	TokenNameIdentifier	 try Inc Ref
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** NRTManager invokes this interface to notify it when a * caller is waiting for a specific generation searcher * to be visible. */	TokenNameCOMMENT_JAVADOC	 NRTManager invokes this interface to notify it when a caller is waiting for a specific generation searcher to be visible. 
public	TokenNamepublic	
static	TokenNamestatic	
interface	TokenNameinterface	
WaitingListener	TokenNameIdentifier	 Waiting Listener
{	TokenNameLBRACE	
public	TokenNamepublic	
void	TokenNamevoid	
waiting	TokenNameIdentifier	 waiting
(	TokenNameLPAREN	
long	TokenNamelong	
targetGen	TokenNameIdentifier	 target Gen
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** Adds a listener, to be notified when a caller is * waiting for a specific generation searcher to be * visible. */	TokenNameCOMMENT_JAVADOC	 Adds a listener, to be notified when a caller is waiting for a specific generation searcher to be visible. 
public	TokenNamepublic	
void	TokenNamevoid	
addWaitingListener	TokenNameIdentifier	 add Waiting Listener
(	TokenNameLPAREN	
WaitingListener	TokenNameIdentifier	 Waiting Listener
l	TokenNameIdentifier	 l
)	TokenNameRPAREN	
{	TokenNameLBRACE	
waitingListeners	TokenNameIdentifier	 waiting Listeners
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
l	TokenNameIdentifier	 l
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** Remove a listener added with {@link * #addWaitingListener}. */	TokenNameCOMMENT_JAVADOC	 Remove a listener added with {@link #addWaitingListener}. 
public	TokenNamepublic	
void	TokenNamevoid	
removeWaitingListener	TokenNameIdentifier	 remove Waiting Listener
(	TokenNameLPAREN	
WaitingListener	TokenNameIdentifier	 Waiting Listener
l	TokenNameIdentifier	 l
)	TokenNameRPAREN	
{	TokenNameLBRACE	
waitingListeners	TokenNameIdentifier	 waiting Listeners
.	TokenNameDOT	
remove	TokenNameIdentifier	 remove
(	TokenNameLPAREN	
l	TokenNameIdentifier	 l
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** Class that tracks changes to a delegated * IndexWriter. Create this class (passing your * IndexWriter), and then pass this class to NRTManager. * Be sure to make all changes via the * TrackingIndexWriter, otherwise NRTManager won't know * about the changes. * * @lucene.experimental */	TokenNameCOMMENT_JAVADOC	 Class that tracks changes to a delegated IndexWriter. Create this class (passing your IndexWriter), and then pass this class to NRTManager. Be sure to make all changes via the TrackingIndexWriter, otherwise NRTManager won't know about the changes. * @lucene.experimental 
public	TokenNamepublic	
static	TokenNamestatic	
class	TokenNameclass	
TrackingIndexWriter	TokenNameIdentifier	 Tracking Index Writer
{	TokenNameLBRACE	
private	TokenNameprivate	
final	TokenNamefinal	
IndexWriter	TokenNameIdentifier	 Index Writer
writer	TokenNameIdentifier	 writer
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
AtomicLong	TokenNameIdentifier	 Atomic Long
indexingGen	TokenNameIdentifier	 indexing Gen
=	TokenNameEQUAL	
new	TokenNamenew	
AtomicLong	TokenNameIdentifier	 Atomic Long
(	TokenNameLPAREN	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
public	TokenNamepublic	
TrackingIndexWriter	TokenNameIdentifier	 Tracking Index Writer
(	TokenNameLPAREN	
IndexWriter	TokenNameIdentifier	 Index Writer
writer	TokenNameIdentifier	 writer
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
writer	TokenNameIdentifier	 writer
=	TokenNameEQUAL	
writer	TokenNameIdentifier	 writer
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
updateDocument	TokenNameIdentifier	 update Document
(	TokenNameLPAREN	
Term	TokenNameIdentifier	 Term
t	TokenNameIdentifier	 t
,	TokenNameCOMMA	
Document	TokenNameIdentifier	 Document
d	TokenNameIdentifier	 d
,	TokenNameCOMMA	
Analyzer	TokenNameIdentifier	 Analyzer
a	TokenNameIdentifier	 a
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
updateDocument	TokenNameIdentifier	 update Document
(	TokenNameLPAREN	
t	TokenNameIdentifier	 t
,	TokenNameCOMMA	
d	TokenNameIdentifier	 d
,	TokenNameCOMMA	
a	TokenNameIdentifier	 a
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
updateDocument	TokenNameIdentifier	 update Document
(	TokenNameLPAREN	
Term	TokenNameIdentifier	 Term
t	TokenNameIdentifier	 t
,	TokenNameCOMMA	
Document	TokenNameIdentifier	 Document
d	TokenNameIdentifier	 d
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
updateDocument	TokenNameIdentifier	 update Document
(	TokenNameLPAREN	
t	TokenNameIdentifier	 t
,	TokenNameCOMMA	
d	TokenNameIdentifier	 d
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
updateDocuments	TokenNameIdentifier	 update Documents
(	TokenNameLPAREN	
Term	TokenNameIdentifier	 Term
t	TokenNameIdentifier	 t
,	TokenNameCOMMA	
Collection	TokenNameIdentifier	 Collection
<	TokenNameLESS	
Document	TokenNameIdentifier	 Document
>	TokenNameGREATER	
docs	TokenNameIdentifier	 docs
,	TokenNameCOMMA	
Analyzer	TokenNameIdentifier	 Analyzer
a	TokenNameIdentifier	 a
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
updateDocuments	TokenNameIdentifier	 update Documents
(	TokenNameLPAREN	
t	TokenNameIdentifier	 t
,	TokenNameCOMMA	
docs	TokenNameIdentifier	 docs
,	TokenNameCOMMA	
a	TokenNameIdentifier	 a
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
updateDocuments	TokenNameIdentifier	 update Documents
(	TokenNameLPAREN	
Term	TokenNameIdentifier	 Term
t	TokenNameIdentifier	 t
,	TokenNameCOMMA	
Collection	TokenNameIdentifier	 Collection
<	TokenNameLESS	
Document	TokenNameIdentifier	 Document
>	TokenNameGREATER	
docs	TokenNameIdentifier	 docs
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
updateDocuments	TokenNameIdentifier	 update Documents
(	TokenNameLPAREN	
t	TokenNameIdentifier	 t
,	TokenNameCOMMA	
docs	TokenNameIdentifier	 docs
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
deleteDocuments	TokenNameIdentifier	 delete Documents
(	TokenNameLPAREN	
Term	TokenNameIdentifier	 Term
t	TokenNameIdentifier	 t
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
deleteDocuments	TokenNameIdentifier	 delete Documents
(	TokenNameLPAREN	
t	TokenNameIdentifier	 t
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
deleteDocuments	TokenNameIdentifier	 delete Documents
(	TokenNameLPAREN	
Term	TokenNameIdentifier	 Term
...	TokenNameELLIPSIS	
terms	TokenNameIdentifier	 terms
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
deleteDocuments	TokenNameIdentifier	 delete Documents
(	TokenNameLPAREN	
terms	TokenNameIdentifier	 terms
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
deleteDocuments	TokenNameIdentifier	 delete Documents
(	TokenNameLPAREN	
Query	TokenNameIdentifier	 Query
q	TokenNameIdentifier	 q
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
deleteDocuments	TokenNameIdentifier	 delete Documents
(	TokenNameLPAREN	
q	TokenNameIdentifier	 q
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
deleteDocuments	TokenNameIdentifier	 delete Documents
(	TokenNameLPAREN	
Query	TokenNameIdentifier	 Query
...	TokenNameELLIPSIS	
queries	TokenNameIdentifier	 queries
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
deleteDocuments	TokenNameIdentifier	 delete Documents
(	TokenNameLPAREN	
queries	TokenNameIdentifier	 queries
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
deleteAll	TokenNameIdentifier	 delete All
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
deleteAll	TokenNameIdentifier	 delete All
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
addDocument	TokenNameIdentifier	 add Document
(	TokenNameLPAREN	
Document	TokenNameIdentifier	 Document
d	TokenNameIdentifier	 d
,	TokenNameCOMMA	
Analyzer	TokenNameIdentifier	 Analyzer
a	TokenNameIdentifier	 a
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
addDocument	TokenNameIdentifier	 add Document
(	TokenNameLPAREN	
d	TokenNameIdentifier	 d
,	TokenNameCOMMA	
a	TokenNameIdentifier	 a
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
addDocuments	TokenNameIdentifier	 add Documents
(	TokenNameLPAREN	
Collection	TokenNameIdentifier	 Collection
<	TokenNameLESS	
Document	TokenNameIdentifier	 Document
>	TokenNameGREATER	
docs	TokenNameIdentifier	 docs
,	TokenNameCOMMA	
Analyzer	TokenNameIdentifier	 Analyzer
a	TokenNameIdentifier	 a
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
addDocuments	TokenNameIdentifier	 add Documents
(	TokenNameLPAREN	
docs	TokenNameIdentifier	 docs
,	TokenNameCOMMA	
a	TokenNameIdentifier	 a
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
addDocument	TokenNameIdentifier	 add Document
(	TokenNameLPAREN	
Document	TokenNameIdentifier	 Document
d	TokenNameIdentifier	 d
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
addDocument	TokenNameIdentifier	 add Document
(	TokenNameLPAREN	
d	TokenNameIdentifier	 d
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
addDocuments	TokenNameIdentifier	 add Documents
(	TokenNameLPAREN	
Collection	TokenNameIdentifier	 Collection
<	TokenNameLESS	
Document	TokenNameIdentifier	 Document
>	TokenNameGREATER	
docs	TokenNameIdentifier	 docs
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
addDocuments	TokenNameIdentifier	 add Documents
(	TokenNameLPAREN	
docs	TokenNameIdentifier	 docs
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
addIndexes	TokenNameIdentifier	 add Indexes
(	TokenNameLPAREN	
Directory	TokenNameIdentifier	 Directory
...	TokenNameELLIPSIS	
dirs	TokenNameIdentifier	 dirs
)	TokenNameRPAREN	
throws	TokenNamethrows	
CorruptIndexException	TokenNameIdentifier	 Corrupt Index Exception
,	TokenNameCOMMA	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
addIndexes	TokenNameIdentifier	 add Indexes
(	TokenNameLPAREN	
dirs	TokenNameIdentifier	 dirs
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
addIndexes	TokenNameIdentifier	 add Indexes
(	TokenNameLPAREN	
IndexReader	TokenNameIdentifier	 Index Reader
...	TokenNameELLIPSIS	
readers	TokenNameIdentifier	 readers
)	TokenNameRPAREN	
throws	TokenNamethrows	
CorruptIndexException	TokenNameIdentifier	 Corrupt Index Exception
,	TokenNameCOMMA	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
addIndexes	TokenNameIdentifier	 add Indexes
(	TokenNameLPAREN	
readers	TokenNameIdentifier	 readers
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return gen as of when indexing finished: 	TokenNameCOMMENT_LINE	Return gen as of when indexing finished: 
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
long	TokenNamelong	
getGeneration	TokenNameIdentifier	 get Generation
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
IndexWriter	TokenNameIdentifier	 Index Writer
getIndexWriter	TokenNameIdentifier	 get Index Writer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
writer	TokenNameIdentifier	 writer
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
long	TokenNamelong	
getAndIncrementGeneration	TokenNameIdentifier	 get And Increment Generation
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
indexingGen	TokenNameIdentifier	 indexing Gen
.	TokenNameDOT	
getAndIncrement	TokenNameIdentifier	 get And Increment
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Waits for the target generation to become visible in * the searcher. * If the current searcher is older than the * target generation, this method will block * until the searcher is reopened, by another via * {@link #maybeRefresh} or until the {@link NRTManager} is closed. * * @param targetGen the generation to wait for */	TokenNameCOMMENT_JAVADOC	 Waits for the target generation to become visible in the searcher. If the current searcher is older than the target generation, this method will block until the searcher is reopened, by another via {@link #maybeRefresh} or until the {@link NRTManager} is closed. * @param targetGen the generation to wait for 
public	TokenNamepublic	
void	TokenNamevoid	
waitForGeneration	TokenNameIdentifier	 wait For Generation
(	TokenNameLPAREN	
long	TokenNamelong	
targetGen	TokenNameIdentifier	 target Gen
)	TokenNameRPAREN	
{	TokenNameLBRACE	
waitForGeneration	TokenNameIdentifier	 wait For Generation
(	TokenNameLPAREN	
targetGen	TokenNameIdentifier	 target Gen
,	TokenNameCOMMA	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
TimeUnit	TokenNameIdentifier	 Time Unit
.	TokenNameDOT	
NANOSECONDS	TokenNameIdentifier	 NANOSECONDS
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Waits for the target generation to become visible in * the searcher. If the current searcher is older than * the target generation, this method will block until the * searcher has been reopened by another thread via * {@link #maybeRefresh}, the given waiting time has elapsed, or until * the NRTManager is closed. * <p> * NOTE: if the waiting time elapses before the requested target generation is * available the current {@link SearcherManager} is returned instead. * * @param targetGen * the generation to wait for * @param time * the time to wait for the target generation * @param unit * the waiting time's time unit */	TokenNameCOMMENT_JAVADOC	 Waits for the target generation to become visible in the searcher. If the current searcher is older than the target generation, this method will block until the searcher has been reopened by another thread via {@link #maybeRefresh}, the given waiting time has elapsed, or until the NRTManager is closed. <p> NOTE: if the waiting time elapses before the requested target generation is available the current {@link SearcherManager} is returned instead. * @param targetGen the generation to wait for @param time the time to wait for the target generation @param unit the waiting time's time unit 
public	TokenNamepublic	
void	TokenNamevoid	
waitForGeneration	TokenNameIdentifier	 wait For Generation
(	TokenNameLPAREN	
long	TokenNamelong	
targetGen	TokenNameIdentifier	 target Gen
,	TokenNameCOMMA	
long	TokenNamelong	
time	TokenNameIdentifier	 time
,	TokenNameCOMMA	
TimeUnit	TokenNameIdentifier	 Time Unit
unit	TokenNameIdentifier	 unit
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
final	TokenNamefinal	
long	TokenNamelong	
curGen	TokenNameIdentifier	 cur Gen
=	TokenNameEQUAL	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
getGeneration	TokenNameIdentifier	 get Generation
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
targetGen	TokenNameIdentifier	 target Gen
>	TokenNameGREATER	
curGen	TokenNameIdentifier	 cur Gen
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
"targetGen="	TokenNameStringLiteral	targetGen=
+	TokenNamePLUS	
targetGen	TokenNameIdentifier	 target Gen
+	TokenNamePLUS	
" was never returned by this NRTManager instance (current gen="	TokenNameStringLiteral	 was never returned by this NRTManager instance (current gen=
+	TokenNamePLUS	
curGen	TokenNameIdentifier	 cur Gen
+	TokenNamePLUS	
")"	TokenNameStringLiteral	)
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
genLock	TokenNameIdentifier	 gen Lock
.	TokenNameDOT	
lockInterruptibly	TokenNameIdentifier	 lock Interruptibly
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
targetGen	TokenNameIdentifier	 target Gen
>	TokenNameGREATER	
searchingGen	TokenNameIdentifier	 searching Gen
)	TokenNameRPAREN	
{	TokenNameLBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
WaitingListener	TokenNameIdentifier	 Waiting Listener
listener	TokenNameIdentifier	 listener
:	TokenNameCOLON	
waitingListeners	TokenNameIdentifier	 waiting Listeners
)	TokenNameRPAREN	
{	TokenNameLBRACE	
listener	TokenNameIdentifier	 listener
.	TokenNameDOT	
waiting	TokenNameIdentifier	 waiting
(	TokenNameLPAREN	
targetGen	TokenNameIdentifier	 target Gen
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
while	TokenNamewhile	
(	TokenNameLPAREN	
targetGen	TokenNameIdentifier	 target Gen
>	TokenNameGREATER	
searchingGen	TokenNameIdentifier	 searching Gen
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
waitOnGenCondition	TokenNameIdentifier	 wait On Gen Condition
(	TokenNameLPAREN	
time	TokenNameIdentifier	 time
,	TokenNameCOMMA	
unit	TokenNameIdentifier	 unit
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
genLock	TokenNameIdentifier	 gen Lock
.	TokenNameDOT	
unlock	TokenNameIdentifier	 unlock
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
InterruptedException	TokenNameIdentifier	 Interrupted Exception
ie	TokenNameIdentifier	 ie
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
ThreadInterruptedException	TokenNameIdentifier	 Thread Interrupted Exception
(	TokenNameLPAREN	
ie	TokenNameIdentifier	 ie
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
private	TokenNameprivate	
boolean	TokenNameboolean	
waitOnGenCondition	TokenNameIdentifier	 wait On Gen Condition
(	TokenNameLPAREN	
long	TokenNamelong	
time	TokenNameIdentifier	 time
,	TokenNameCOMMA	
TimeUnit	TokenNameIdentifier	 Time Unit
unit	TokenNameIdentifier	 unit
)	TokenNameRPAREN	
throws	TokenNamethrows	
InterruptedException	TokenNameIdentifier	 Interrupted Exception
{	TokenNameLBRACE	
assert	TokenNameassert	
genLock	TokenNameIdentifier	 gen Lock
.	TokenNameDOT	
isHeldByCurrentThread	TokenNameIdentifier	 is Held By Current Thread
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
time	TokenNameIdentifier	 time
<	TokenNameLESS	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
newGeneration	TokenNameIdentifier	 new Generation
.	TokenNameDOT	
await	TokenNameIdentifier	 await
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
return	TokenNamereturn	
newGeneration	TokenNameIdentifier	 new Generation
.	TokenNameDOT	
await	TokenNameIdentifier	 await
(	TokenNameLPAREN	
time	TokenNameIdentifier	 time
,	TokenNameCOMMA	
unit	TokenNameIdentifier	 unit
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** Returns generation of current searcher. */	TokenNameCOMMENT_JAVADOC	 Returns generation of current searcher. 
public	TokenNamepublic	
long	TokenNamelong	
getCurrentSearchingGen	TokenNameIdentifier	 get Current Searching Gen
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
searchingGen	TokenNameIdentifier	 searching Gen
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
long	TokenNamelong	
lastRefreshGen	TokenNameIdentifier	 last Refresh Gen
;	TokenNameSEMICOLON	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
protected	TokenNameprotected	
IndexSearcher	TokenNameIdentifier	 Index Searcher
refreshIfNeeded	TokenNameIdentifier	 refresh If Needed
(	TokenNameLPAREN	
IndexSearcher	TokenNameIdentifier	 Index Searcher
referenceToRefresh	TokenNameIdentifier	 reference To Refresh
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
// Record gen as of when reopen started: 	TokenNameCOMMENT_LINE	Record gen as of when reopen started: 
lastRefreshGen	TokenNameIdentifier	 last Refresh Gen
=	TokenNameEQUAL	
writer	TokenNameIdentifier	 writer
.	TokenNameDOT	
getAndIncrementGeneration	TokenNameIdentifier	 get And Increment Generation
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
IndexReader	TokenNameIdentifier	 Index Reader
r	TokenNameIdentifier	 r
=	TokenNameEQUAL	
referenceToRefresh	TokenNameIdentifier	 reference To Refresh
.	TokenNameDOT	
getIndexReader	TokenNameIdentifier	 get Index Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
IndexSearcher	TokenNameIdentifier	 Index Searcher
newSearcher	TokenNameIdentifier	 new Searcher
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
r	TokenNameIdentifier	 r
.	TokenNameDOT	
isCurrent	TokenNameIdentifier	 is Current
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
final	TokenNamefinal	
IndexReader	TokenNameIdentifier	 Index Reader
newReader	TokenNameIdentifier	 new Reader
=	TokenNameEQUAL	
IndexReader	TokenNameIdentifier	 Index Reader
.	TokenNameDOT	
openIfChanged	TokenNameIdentifier	 open If Changed
(	TokenNameLPAREN	
r	TokenNameIdentifier	 r
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
newReader	TokenNameIdentifier	 new Reader
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
newSearcher	TokenNameIdentifier	 new Searcher
=	TokenNameEQUAL	
SearcherManager	TokenNameIdentifier	 Searcher Manager
.	TokenNameDOT	
getSearcher	TokenNameIdentifier	 get Searcher
(	TokenNameLPAREN	
searcherFactory	TokenNameIdentifier	 searcher Factory
,	TokenNameCOMMA	
newReader	TokenNameIdentifier	 new Reader
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
newSearcher	TokenNameIdentifier	 new Searcher
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
protected	TokenNameprotected	
void	TokenNamevoid	
afterRefresh	TokenNameIdentifier	 after Refresh
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
genLock	TokenNameIdentifier	 gen Lock
.	TokenNameDOT	
lock	TokenNameIdentifier	 lock
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
searchingGen	TokenNameIdentifier	 searching Gen
!=	TokenNameNOT_EQUAL	
MAX_SEARCHER_GEN	TokenNameIdentifier	 MAX  SEARCHER  GEN
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// update searchingGen: 	TokenNameCOMMENT_LINE	update searchingGen: 
assert	TokenNameassert	
lastRefreshGen	TokenNameIdentifier	 last Refresh Gen
>=	TokenNameGREATER_EQUAL	
searchingGen	TokenNameIdentifier	 searching Gen
;	TokenNameSEMICOLON	
searchingGen	TokenNameIdentifier	 searching Gen
=	TokenNameEQUAL	
lastRefreshGen	TokenNameIdentifier	 last Refresh Gen
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// wake up threads if we have a new generation: 	TokenNameCOMMENT_LINE	wake up threads if we have a new generation: 
newGeneration	TokenNameIdentifier	 new Generation
.	TokenNameDOT	
signalAll	TokenNameIdentifier	 signal All
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
genLock	TokenNameIdentifier	 gen Lock
.	TokenNameDOT	
unlock	TokenNameIdentifier	 unlock
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
protected	TokenNameprotected	
synchronized	TokenNamesynchronized	
void	TokenNamevoid	
afterClose	TokenNameIdentifier	 after Close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
genLock	TokenNameIdentifier	 gen Lock
.	TokenNameDOT	
lock	TokenNameIdentifier	 lock
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
// max it out to make sure nobody can wait on another gen 	TokenNameCOMMENT_LINE	max it out to make sure nobody can wait on another gen 
searchingGen	TokenNameIdentifier	 searching Gen
=	TokenNameEQUAL	
MAX_SEARCHER_GEN	TokenNameIdentifier	 MAX  SEARCHER  GEN
;	TokenNameSEMICOLON	
newGeneration	TokenNameIdentifier	 new Generation
.	TokenNameDOT	
signalAll	TokenNameIdentifier	 signal All
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
genLock	TokenNameIdentifier	 gen Lock
.	TokenNameDOT	
unlock	TokenNameIdentifier	 unlock
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Returns <code>true</code> if no changes have occured since this searcher * ie. reader was opened, otherwise <code>false</code>. * @see IndexReader#isCurrent() */	TokenNameCOMMENT_JAVADOC	 Returns <code>true</code> if no changes have occured since this searcher ie. reader was opened, otherwise <code>false</code>. @see IndexReader#isCurrent() 
public	TokenNamepublic	
boolean	TokenNameboolean	
isSearcherCurrent	TokenNameIdentifier	 is Searcher Current
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
final	TokenNamefinal	
IndexSearcher	TokenNameIdentifier	 Index Searcher
searcher	TokenNameIdentifier	 searcher
=	TokenNameEQUAL	
acquire	TokenNameIdentifier	 acquire
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
return	TokenNamereturn	
searcher	TokenNameIdentifier	 searcher
.	TokenNameDOT	
getIndexReader	TokenNameIdentifier	 get Index Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
isCurrent	TokenNameIdentifier	 is Current
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
release	TokenNameIdentifier	 release
(	TokenNameLPAREN	
searcher	TokenNameIdentifier	 searcher
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
