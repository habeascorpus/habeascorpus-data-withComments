/* * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the "License"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. * */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
taskdefs	TokenNameIdentifier	 taskdefs
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
File	TokenNameIdentifier	 File
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
FileNotFoundException	TokenNameIdentifier	 File Not Found Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
FileOutputStream	TokenNameIdentifier	 File Output Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
IOException	TokenNameIdentifier	 IO Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
InputStream	TokenNameIdentifier	 Input Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
OutputStream	TokenNameIdentifier	 Output Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
PrintStream	TokenNameIdentifier	 Print Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
net	TokenNameIdentifier	 net
.	TokenNameDOT	
HttpURLConnection	TokenNameIdentifier	 Http URL Connection
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
net	TokenNameIdentifier	 net
.	TokenNameDOT	
URL	TokenNameIdentifier	 URL
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
net	TokenNameIdentifier	 net
.	TokenNameDOT	
URLConnection	TokenNameIdentifier	 URL Connection
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Date	TokenNameIdentifier	 Date
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Iterator	TokenNameIdentifier	 Iterator
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
BuildException	TokenNameIdentifier	 Build Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
Project	TokenNameIdentifier	 Project
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
Task	TokenNameIdentifier	 Task
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
Mapper	TokenNameIdentifier	 Mapper
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
Resource	TokenNameIdentifier	 Resource
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
ResourceCollection	TokenNameIdentifier	 Resource Collection
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
resources	TokenNameIdentifier	 resources
.	TokenNameDOT	
Resources	TokenNameIdentifier	 Resources
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
resources	TokenNameIdentifier	 resources
.	TokenNameDOT	
URLProvider	TokenNameIdentifier	 URL Provider
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
resources	TokenNameIdentifier	 resources
.	TokenNameDOT	
URLResource	TokenNameIdentifier	 URL Resource
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
FileNameMapper	TokenNameIdentifier	 File Name Mapper
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
FileUtils	TokenNameIdentifier	 File Utils
;	TokenNameSEMICOLON	
/** * Gets a particular file from a URL source. * Options include verbose reporting, timestamp based fetches and controlling * actions on failures. NB: access through a firewall only works if the whole * Java runtime is correctly configured. * * @since Ant 1.1 * * @ant.task category="network" */	TokenNameCOMMENT_JAVADOC	 Gets a particular file from a URL source. Options include verbose reporting, timestamp based fetches and controlling actions on failures. NB: access through a firewall only works if the whole Java runtime is correctly configured. * @since Ant 1.1 * @ant.task category="network" 
public	TokenNamepublic	
class	TokenNameclass	
Get	TokenNameIdentifier	 Get
extends	TokenNameextends	
Task	TokenNameIdentifier	 Task
{	TokenNameLBRACE	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
int	TokenNameint	
NUMBER_RETRIES	TokenNameIdentifier	 NUMBER  RETRIES
=	TokenNameEQUAL	
3	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
int	TokenNameint	
DOTS_PER_LINE	TokenNameIdentifier	 DOTS  PER  LINE
=	TokenNameEQUAL	
50	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
int	TokenNameint	
BIG_BUFFER_SIZE	TokenNameIdentifier	 BIG  BUFFER  SIZE
=	TokenNameEQUAL	
100	TokenNameIntegerLiteral	
*	TokenNameMULTIPLY	
1024	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
FileUtils	TokenNameIdentifier	 File Utils
FILE_UTILS	TokenNameIdentifier	 FILE  UTILS
=	TokenNameEQUAL	
FileUtils	TokenNameIdentifier	 File Utils
.	TokenNameDOT	
getFileUtils	TokenNameIdentifier	 get File Utils
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
int	TokenNameint	
REDIRECT_LIMIT	TokenNameIdentifier	 REDIRECT  LIMIT
=	TokenNameEQUAL	
25	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
HTTP	TokenNameIdentifier	 HTTP
=	TokenNameEQUAL	
"http"	TokenNameStringLiteral	http
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
HTTPS	TokenNameIdentifier	 HTTPS
=	TokenNameEQUAL	
"https"	TokenNameStringLiteral	https
;	TokenNameSEMICOLON	
private	TokenNameprivate	
Resources	TokenNameIdentifier	 Resources
sources	TokenNameIdentifier	 sources
=	TokenNameEQUAL	
new	TokenNamenew	
Resources	TokenNameIdentifier	 Resources
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
File	TokenNameIdentifier	 File
destination	TokenNameIdentifier	 destination
;	TokenNameSEMICOLON	
// required 	TokenNameCOMMENT_LINE	required 
private	TokenNameprivate	
boolean	TokenNameboolean	
verbose	TokenNameIdentifier	 verbose
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
useTimestamp	TokenNameIdentifier	 use Timestamp
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
//off by default 	TokenNameCOMMENT_LINE	off by default 
private	TokenNameprivate	
boolean	TokenNameboolean	
ignoreErrors	TokenNameIdentifier	 ignore Errors
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
String	TokenNameIdentifier	 String
uname	TokenNameIdentifier	 uname
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
String	TokenNameIdentifier	 String
pword	TokenNameIdentifier	 pword
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
long	TokenNamelong	
maxTime	TokenNameIdentifier	 max Time
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
int	TokenNameint	
numberRetries	TokenNameIdentifier	 number Retries
=	TokenNameEQUAL	
NUMBER_RETRIES	TokenNameIdentifier	 NUMBER  RETRIES
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
skipExisting	TokenNameIdentifier	 skip Existing
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
httpUseCaches	TokenNameIdentifier	 http Use Caches
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
// on by default 	TokenNameCOMMENT_LINE	on by default 
private	TokenNameprivate	
Mapper	TokenNameIdentifier	 Mapper
mapperElement	TokenNameIdentifier	 mapper Element
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
/** * Does the work. * * @exception BuildException Thrown in unrecoverable error. */	TokenNameCOMMENT_JAVADOC	 Does the work. * @exception BuildException Thrown in unrecoverable error. 
public	TokenNamepublic	
void	TokenNamevoid	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
checkAttributes	TokenNameIdentifier	 check Attributes
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
iter	TokenNameIdentifier	 iter
=	TokenNameEQUAL	
sources	TokenNameIdentifier	 sources
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Resource	TokenNameIdentifier	 Resource
r	TokenNameIdentifier	 r
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Resource	TokenNameIdentifier	 Resource
)	TokenNameRPAREN	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
URLProvider	TokenNameIdentifier	 URL Provider
up	TokenNameIdentifier	 up
=	TokenNameEQUAL	
(	TokenNameLPAREN	
URLProvider	TokenNameIdentifier	 URL Provider
)	TokenNameRPAREN	
r	TokenNameIdentifier	 r
.	TokenNameDOT	
as	TokenNameIdentifier	 as
(	TokenNameLPAREN	
URLProvider	TokenNameIdentifier	 URL Provider
.	TokenNameDOT	
class	TokenNameclass	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
URL	TokenNameIdentifier	 URL
source	TokenNameIdentifier	 source
=	TokenNameEQUAL	
up	TokenNameIdentifier	 up
.	TokenNameDOT	
getURL	TokenNameIdentifier	 get URL
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
File	TokenNameIdentifier	 File
dest	TokenNameIdentifier	 dest
=	TokenNameEQUAL	
destination	TokenNameIdentifier	 destination
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
destination	TokenNameIdentifier	 destination
.	TokenNameDOT	
isDirectory	TokenNameIdentifier	 is Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
mapperElement	TokenNameIdentifier	 mapper Element
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
path	TokenNameIdentifier	 path
=	TokenNameEQUAL	
source	TokenNameIdentifier	 source
.	TokenNameDOT	
getPath	TokenNameIdentifier	 get Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
path	TokenNameIdentifier	 path
.	TokenNameDOT	
endsWith	TokenNameIdentifier	 ends With
(	TokenNameLPAREN	
"/"	TokenNameStringLiteral	/
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
path	TokenNameIdentifier	 path
=	TokenNameEQUAL	
path	TokenNameIdentifier	 path
.	TokenNameDOT	
substring	TokenNameIdentifier	 substring
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
path	TokenNameIdentifier	 path
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
int	TokenNameint	
slash	TokenNameIdentifier	 slash
=	TokenNameEQUAL	
path	TokenNameIdentifier	 path
.	TokenNameDOT	
lastIndexOf	TokenNameIdentifier	 last Index Of
(	TokenNameLPAREN	
"/"	TokenNameStringLiteral	/
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
slash	TokenNameIdentifier	 slash
>	TokenNameGREATER	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
path	TokenNameIdentifier	 path
=	TokenNameEQUAL	
path	TokenNameIdentifier	 path
.	TokenNameDOT	
substring	TokenNameIdentifier	 substring
(	TokenNameLPAREN	
slash	TokenNameIdentifier	 slash
+	TokenNamePLUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
dest	TokenNameIdentifier	 dest
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
destination	TokenNameIdentifier	 destination
,	TokenNameCOMMA	
path	TokenNameIdentifier	 path
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
FileNameMapper	TokenNameIdentifier	 File Name Mapper
mapper	TokenNameIdentifier	 mapper
=	TokenNameEQUAL	
mapperElement	TokenNameIdentifier	 mapper Element
.	TokenNameDOT	
getImplementation	TokenNameIdentifier	 get Implementation
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
d	TokenNameIdentifier	 d
=	TokenNameEQUAL	
mapper	TokenNameIdentifier	 mapper
.	TokenNameDOT	
mapFileName	TokenNameIdentifier	 map File Name
(	TokenNameLPAREN	
source	TokenNameIdentifier	 source
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
d	TokenNameIdentifier	 d
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"skipping "	TokenNameStringLiteral	skipping 
+	TokenNamePLUS	
r	TokenNameIdentifier	 r
+	TokenNamePLUS	
" - mapper can't handle it"	TokenNameStringLiteral	 - mapper can't handle it
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_WARN	TokenNameIdentifier	 MSG  WARN
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
continue	TokenNamecontinue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
d	TokenNameIdentifier	 d
.	TokenNameDOT	
length	TokenNameIdentifier	 length
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"skipping "	TokenNameStringLiteral	skipping 
+	TokenNamePLUS	
r	TokenNameIdentifier	 r
+	TokenNamePLUS	
" - mapper returns no file name"	TokenNameStringLiteral	 - mapper returns no file name
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_WARN	TokenNameIdentifier	 MSG  WARN
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
continue	TokenNamecontinue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
d	TokenNameIdentifier	 d
.	TokenNameDOT	
length	TokenNameIdentifier	 length
>	TokenNameGREATER	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"skipping "	TokenNameStringLiteral	skipping 
+	TokenNamePLUS	
r	TokenNameIdentifier	 r
+	TokenNamePLUS	
" - mapper returns multiple file"	TokenNameStringLiteral	 - mapper returns multiple file
+	TokenNamePLUS	
" names"	TokenNameStringLiteral	 names
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_WARN	TokenNameIdentifier	 MSG  WARN
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
continue	TokenNamecontinue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
dest	TokenNameIdentifier	 dest
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
destination	TokenNameIdentifier	 destination
,	TokenNameCOMMA	
d	TokenNameIdentifier	 d
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
//set up logging 	TokenNameCOMMENT_LINE	set up logging 
int	TokenNameint	
logLevel	TokenNameIdentifier	 log Level
=	TokenNameEQUAL	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_INFO	TokenNameIdentifier	 MSG  INFO
;	TokenNameSEMICOLON	
DownloadProgress	TokenNameIdentifier	 Download Progress
progress	TokenNameIdentifier	 progress
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
verbose	TokenNameIdentifier	 verbose
)	TokenNameRPAREN	
{	TokenNameLBRACE	
progress	TokenNameIdentifier	 progress
=	TokenNameEQUAL	
new	TokenNamenew	
VerboseProgress	TokenNameIdentifier	 Verbose Progress
(	TokenNameLPAREN	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
out	TokenNameIdentifier	 out
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
//execute the get 	TokenNameCOMMENT_LINE	execute the get 
try	TokenNametry	
{	TokenNameLBRACE	
doGet	TokenNameIdentifier	 do Get
(	TokenNameLPAREN	
source	TokenNameIdentifier	 source
,	TokenNameCOMMA	
dest	TokenNameIdentifier	 dest
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
,	TokenNameCOMMA	
progress	TokenNameIdentifier	 progress
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Error getting "	TokenNameStringLiteral	Error getting 
+	TokenNamePLUS	
source	TokenNameIdentifier	 source
+	TokenNamePLUS	
" to "	TokenNameStringLiteral	 to 
+	TokenNamePLUS	
dest	TokenNameIdentifier	 dest
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
ignoreErrors	TokenNameIdentifier	 ignore Errors
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ioe	TokenNameIdentifier	 ioe
,	TokenNameCOMMA	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * make a get request, with the supplied progress and logging info. * All the other config parameters are set at the task level, * source, dest, ignoreErrors, etc. * @param logLevel level to log at, see {@link Project#log(String, int)} * @param progress progress callback; null for no-callbacks * @return true for a successful download, false otherwise. * The return value is only relevant when {@link #ignoreErrors} is true, as * when false all failures raise BuildExceptions. * @throws IOException for network trouble * @throws BuildException for argument errors, or other trouble when ignoreErrors * is false. * @deprecated only gets the first configured resource */	TokenNameCOMMENT_JAVADOC	 make a get request, with the supplied progress and logging info. All the other config parameters are set at the task level, source, dest, ignoreErrors, etc. @param logLevel level to log at, see {@link Project#log(String, int)} @param progress progress callback; null for no-callbacks @return true for a successful download, false otherwise. The return value is only relevant when {@link #ignoreErrors} is true, as when false all failures raise BuildExceptions. @throws IOException for network trouble @throws BuildException for argument errors, or other trouble when ignoreErrors is false. @deprecated only gets the first configured resource 
public	TokenNamepublic	
boolean	TokenNameboolean	
doGet	TokenNameIdentifier	 do Get
(	TokenNameLPAREN	
int	TokenNameint	
logLevel	TokenNameIdentifier	 log Level
,	TokenNameCOMMA	
DownloadProgress	TokenNameIdentifier	 Download Progress
progress	TokenNameIdentifier	 progress
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
checkAttributes	TokenNameIdentifier	 check Attributes
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
iter	TokenNameIdentifier	 iter
=	TokenNameEQUAL	
sources	TokenNameIdentifier	 sources
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Resource	TokenNameIdentifier	 Resource
r	TokenNameIdentifier	 r
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Resource	TokenNameIdentifier	 Resource
)	TokenNameRPAREN	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
URLProvider	TokenNameIdentifier	 URL Provider
up	TokenNameIdentifier	 up
=	TokenNameEQUAL	
(	TokenNameLPAREN	
URLProvider	TokenNameIdentifier	 URL Provider
)	TokenNameRPAREN	
r	TokenNameIdentifier	 r
.	TokenNameDOT	
as	TokenNameIdentifier	 as
(	TokenNameLPAREN	
URLProvider	TokenNameIdentifier	 URL Provider
.	TokenNameDOT	
class	TokenNameclass	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
URL	TokenNameIdentifier	 URL
source	TokenNameIdentifier	 source
=	TokenNameEQUAL	
up	TokenNameIdentifier	 up
.	TokenNameDOT	
getURL	TokenNameIdentifier	 get URL
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
doGet	TokenNameIdentifier	 do Get
(	TokenNameLPAREN	
source	TokenNameIdentifier	 source
,	TokenNameCOMMA	
destination	TokenNameIdentifier	 destination
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
,	TokenNameCOMMA	
progress	TokenNameIdentifier	 progress
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/*NOTREACHED*/	TokenNameCOMMENT_BLOCK	NOTREACHED
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * make a get request, with the supplied progress and logging info. * * All the other config parameters like ignoreErrors are set at * the task level. * @param source the URL to get * @param dest the target file * @param logLevel level to log at, see {@link Project#log(String, int)} * @param progress progress callback; null for no-callbacks * @return true for a successful download, false otherwise. * The return value is only relevant when {@link #ignoreErrors} is true, as * when false all failures raise BuildExceptions. * @throws IOException for network trouble * @throws BuildException for argument errors, or other trouble when ignoreErrors * is false. * @since Ant 1.8.0 */	TokenNameCOMMENT_JAVADOC	 make a get request, with the supplied progress and logging info. * All the other config parameters like ignoreErrors are set at the task level. @param source the URL to get @param dest the target file @param logLevel level to log at, see {@link Project#log(String, int)} @param progress progress callback; null for no-callbacks @return true for a successful download, false otherwise. The return value is only relevant when {@link #ignoreErrors} is true, as when false all failures raise BuildExceptions. @throws IOException for network trouble @throws BuildException for argument errors, or other trouble when ignoreErrors is false. @since Ant 1.8.0 
public	TokenNamepublic	
boolean	TokenNameboolean	
doGet	TokenNameIdentifier	 do Get
(	TokenNameLPAREN	
URL	TokenNameIdentifier	 URL
source	TokenNameIdentifier	 source
,	TokenNameCOMMA	
File	TokenNameIdentifier	 File
dest	TokenNameIdentifier	 dest
,	TokenNameCOMMA	
int	TokenNameint	
logLevel	TokenNameIdentifier	 log Level
,	TokenNameCOMMA	
DownloadProgress	TokenNameIdentifier	 Download Progress
progress	TokenNameIdentifier	 progress
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
dest	TokenNameIdentifier	 dest
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
skipExisting	TokenNameIdentifier	 skip Existing
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Destination already exists (skipping): "	TokenNameStringLiteral	Destination already exists (skipping): 
+	TokenNamePLUS	
dest	TokenNameIdentifier	 dest
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
//dont do any progress, unless asked 	TokenNameCOMMENT_LINE	dont do any progress, unless asked 
if	TokenNameif	
(	TokenNameLPAREN	
progress	TokenNameIdentifier	 progress
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
progress	TokenNameIdentifier	 progress
=	TokenNameEQUAL	
new	TokenNamenew	
NullProgress	TokenNameIdentifier	 Null Progress
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Getting: "	TokenNameStringLiteral	Getting: 
+	TokenNamePLUS	
source	TokenNameIdentifier	 source
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"To: "	TokenNameStringLiteral	To: 
+	TokenNamePLUS	
dest	TokenNameIdentifier	 dest
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
//set the timestamp to the file date. 	TokenNameCOMMENT_LINE	set the timestamp to the file date. 
long	TokenNamelong	
timestamp	TokenNameIdentifier	 timestamp
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
hasTimestamp	TokenNameIdentifier	 has Timestamp
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
useTimestamp	TokenNameIdentifier	 use Timestamp
&&	TokenNameAND_AND	
dest	TokenNameIdentifier	 dest
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
timestamp	TokenNameIdentifier	 timestamp
=	TokenNameEQUAL	
dest	TokenNameIdentifier	 dest
.	TokenNameDOT	
lastModified	TokenNameIdentifier	 last Modified
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
verbose	TokenNameIdentifier	 verbose
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Date	TokenNameIdentifier	 Date
t	TokenNameIdentifier	 t
=	TokenNameEQUAL	
new	TokenNamenew	
Date	TokenNameIdentifier	 Date
(	TokenNameLPAREN	
timestamp	TokenNameIdentifier	 timestamp
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"local file date : "	TokenNameStringLiteral	local file date : 
+	TokenNamePLUS	
t	TokenNameIdentifier	 t
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
hasTimestamp	TokenNameIdentifier	 has Timestamp
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
GetThread	TokenNameIdentifier	 Get Thread
getThread	TokenNameIdentifier	 get Thread
=	TokenNameEQUAL	
new	TokenNamenew	
GetThread	TokenNameIdentifier	 Get Thread
(	TokenNameLPAREN	
source	TokenNameIdentifier	 source
,	TokenNameCOMMA	
dest	TokenNameIdentifier	 dest
,	TokenNameCOMMA	
hasTimestamp	TokenNameIdentifier	 has Timestamp
,	TokenNameCOMMA	
timestamp	TokenNameIdentifier	 timestamp
,	TokenNameCOMMA	
progress	TokenNameIdentifier	 progress
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
getThread	TokenNameIdentifier	 get Thread
.	TokenNameDOT	
setDaemon	TokenNameIdentifier	 set Daemon
(	TokenNameLPAREN	
true	TokenNametrue	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
getProject	TokenNameIdentifier	 get Project
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
registerThreadTask	TokenNameIdentifier	 register Thread Task
(	TokenNameLPAREN	
getThread	TokenNameIdentifier	 get Thread
,	TokenNameCOMMA	
this	TokenNamethis	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
getThread	TokenNameIdentifier	 get Thread
.	TokenNameDOT	
start	TokenNameIdentifier	 start
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
getThread	TokenNameIdentifier	 get Thread
.	TokenNameDOT	
join	TokenNameIdentifier	 join
(	TokenNameLPAREN	
maxTime	TokenNameIdentifier	 max Time
*	TokenNameMULTIPLY	
1000	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
InterruptedException	TokenNameIdentifier	 Interrupted Exception
ie	TokenNameIdentifier	 ie
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"interrupted waiting for GET to finish"	TokenNameStringLiteral	interrupted waiting for GET to finish
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
getThread	TokenNameIdentifier	 get Thread
.	TokenNameDOT	
isAlive	TokenNameIdentifier	 is Alive
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
msg	TokenNameIdentifier	 msg
=	TokenNameEQUAL	
"The GET operation took longer than "	TokenNameStringLiteral	The GET operation took longer than 
+	TokenNamePLUS	
maxTime	TokenNameIdentifier	 max Time
+	TokenNamePLUS	
" seconds, stopping it."	TokenNameStringLiteral	 seconds, stopping it.
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
ignoreErrors	TokenNameIdentifier	 ignore Errors
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
msg	TokenNameIdentifier	 msg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
getThread	TokenNameIdentifier	 get Thread
.	TokenNameDOT	
closeStreams	TokenNameIdentifier	 close Streams
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
ignoreErrors	TokenNameIdentifier	 ignore Errors
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
msg	TokenNameIdentifier	 msg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
getThread	TokenNameIdentifier	 get Thread
.	TokenNameDOT	
wasSuccessful	TokenNameIdentifier	 was Successful
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Check the attributes. */	TokenNameCOMMENT_JAVADOC	 Check the attributes. 
private	TokenNameprivate	
void	TokenNamevoid	
checkAttributes	TokenNameIdentifier	 check Attributes
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
sources	TokenNameIdentifier	 sources
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"at least one source is required"	TokenNameStringLiteral	at least one source is required
,	TokenNameCOMMA	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
iter	TokenNameIdentifier	 iter
=	TokenNameEQUAL	
sources	TokenNameIdentifier	 sources
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Object	TokenNameIdentifier	 Object
up	TokenNameIdentifier	 up
=	TokenNameEQUAL	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
Resource	TokenNameIdentifier	 Resource
)	TokenNameRPAREN	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
as	TokenNameIdentifier	 as
(	TokenNameLPAREN	
URLProvider	TokenNameIdentifier	 URL Provider
.	TokenNameDOT	
class	TokenNameclass	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
up	TokenNameIdentifier	 up
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"Only URLProvider resources are"	TokenNameStringLiteral	Only URLProvider resources are
+	TokenNamePLUS	
" supported"	TokenNameStringLiteral	 supported
,	TokenNameCOMMA	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
destination	TokenNameIdentifier	 destination
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"dest attribute is required"	TokenNameStringLiteral	dest attribute is required
,	TokenNameCOMMA	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
destination	TokenNameIdentifier	 destination
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
sources	TokenNameIdentifier	 sources
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
>	TokenNameGREATER	
1	TokenNameIntegerLiteral	
&&	TokenNameAND_AND	
!	TokenNameNOT	
destination	TokenNameIdentifier	 destination
.	TokenNameDOT	
isDirectory	TokenNameIdentifier	 is Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"The specified destination is not a"	TokenNameStringLiteral	The specified destination is not a
+	TokenNamePLUS	
" directory"	TokenNameStringLiteral	 directory
,	TokenNameCOMMA	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
destination	TokenNameIdentifier	 destination
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
!	TokenNameNOT	
destination	TokenNameIdentifier	 destination
.	TokenNameDOT	
canWrite	TokenNameIdentifier	 can Write
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"Can't write to "	TokenNameStringLiteral	Can't write to 
+	TokenNamePLUS	
destination	TokenNameIdentifier	 destination
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
sources	TokenNameIdentifier	 sources
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
>	TokenNameGREATER	
1	TokenNameIntegerLiteral	
&&	TokenNameAND_AND	
!	TokenNameNOT	
destination	TokenNameIdentifier	 destination
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
destination	TokenNameIdentifier	 destination
.	TokenNameDOT	
mkdirs	TokenNameIdentifier	 mkdirs
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Set an URL to get. * * @param u URL for the file. */	TokenNameCOMMENT_JAVADOC	 Set an URL to get. * @param u URL for the file. 
public	TokenNamepublic	
void	TokenNamevoid	
setSrc	TokenNameIdentifier	 set Src
(	TokenNameLPAREN	
URL	TokenNameIdentifier	 URL
u	TokenNameIdentifier	 u
)	TokenNameRPAREN	
{	TokenNameLBRACE	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
new	TokenNamenew	
URLResource	TokenNameIdentifier	 URL Resource
(	TokenNameLPAREN	
u	TokenNameIdentifier	 u
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Adds URLs to get. * @since Ant 1.8.0 */	TokenNameCOMMENT_JAVADOC	 Adds URLs to get. @since Ant 1.8.0 
public	TokenNamepublic	
void	TokenNamevoid	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
ResourceCollection	TokenNameIdentifier	 Resource Collection
rc	TokenNameIdentifier	 rc
)	TokenNameRPAREN	
{	TokenNameLBRACE	
sources	TokenNameIdentifier	 sources
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
rc	TokenNameIdentifier	 rc
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Where to copy the source file. * * @param dest Path to file. */	TokenNameCOMMENT_JAVADOC	 Where to copy the source file. * @param dest Path to file. 
public	TokenNamepublic	
void	TokenNamevoid	
setDest	TokenNameIdentifier	 set Dest
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
dest	TokenNameIdentifier	 dest
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
destination	TokenNameIdentifier	 destination
=	TokenNameEQUAL	
dest	TokenNameIdentifier	 dest
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * If true, show verbose progress information. * * @param v if "true" then be verbose */	TokenNameCOMMENT_JAVADOC	 If true, show verbose progress information. * @param v if "true" then be verbose 
public	TokenNamepublic	
void	TokenNamevoid	
setVerbose	TokenNameIdentifier	 set Verbose
(	TokenNameLPAREN	
boolean	TokenNameboolean	
v	TokenNameIdentifier	 v
)	TokenNameRPAREN	
{	TokenNameLBRACE	
verbose	TokenNameIdentifier	 verbose
=	TokenNameEQUAL	
v	TokenNameIdentifier	 v
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * If true, log errors but do not treat as fatal. * * @param v if "true" then don't report download errors up to ant */	TokenNameCOMMENT_JAVADOC	 If true, log errors but do not treat as fatal. * @param v if "true" then don't report download errors up to ant 
public	TokenNamepublic	
void	TokenNamevoid	
setIgnoreErrors	TokenNameIdentifier	 set Ignore Errors
(	TokenNameLPAREN	
boolean	TokenNameboolean	
v	TokenNameIdentifier	 v
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ignoreErrors	TokenNameIdentifier	 ignore Errors
=	TokenNameEQUAL	
v	TokenNameIdentifier	 v
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * If true, conditionally download a file based on the timestamp * of the local copy. * * <p>In this situation, the if-modified-since header is set so * that the file is only fetched if it is newer than the local * file (or there is no local file) This flag is only valid on * HTTP connections, it is ignored in other cases. When the flag * is set, the local copy of the downloaded file will also have * its timestamp set to the remote file time.</p> * * <p>Note that remote files of date 1/1/1970 (GMT) are treated as * 'no timestamp', and web servers often serve files with a * timestamp in the future by replacing their timestamp with that * of the current time. Also, inter-computer clock differences can * cause no end of grief.</p> * @param v "true" to enable file time fetching */	TokenNameCOMMENT_JAVADOC	 If true, conditionally download a file based on the timestamp of the local copy. * <p>In this situation, the if-modified-since header is set so that the file is only fetched if it is newer than the local file (or there is no local file) This flag is only valid on HTTP connections, it is ignored in other cases. When the flag is set, the local copy of the downloaded file will also have its timestamp set to the remote file time.</p> * <p>Note that remote files of date 1/1/1970 (GMT) are treated as 'no timestamp', and web servers often serve files with a timestamp in the future by replacing their timestamp with that of the current time. Also, inter-computer clock differences can cause no end of grief.</p> @param v "true" to enable file time fetching 
public	TokenNamepublic	
void	TokenNamevoid	
setUseTimestamp	TokenNameIdentifier	 set Use Timestamp
(	TokenNameLPAREN	
boolean	TokenNameboolean	
v	TokenNameIdentifier	 v
)	TokenNameRPAREN	
{	TokenNameLBRACE	
useTimestamp	TokenNameIdentifier	 use Timestamp
=	TokenNameEQUAL	
v	TokenNameIdentifier	 v
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Username for basic auth. * * @param u username for authentication */	TokenNameCOMMENT_JAVADOC	 Username for basic auth. * @param u username for authentication 
public	TokenNamepublic	
void	TokenNamevoid	
setUsername	TokenNameIdentifier	 set Username
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
u	TokenNameIdentifier	 u
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
uname	TokenNameIdentifier	 uname
=	TokenNameEQUAL	
u	TokenNameIdentifier	 u
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * password for the basic authentication. * * @param p password for authentication */	TokenNameCOMMENT_JAVADOC	 password for the basic authentication. * @param p password for authentication 
public	TokenNamepublic	
void	TokenNamevoid	
setPassword	TokenNameIdentifier	 set Password
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
p	TokenNameIdentifier	 p
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
pword	TokenNameIdentifier	 pword
=	TokenNameEQUAL	
p	TokenNameIdentifier	 p
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * The time in seconds the download is allowed to take before * being terminated. * * @since Ant 1.8.0 */	TokenNameCOMMENT_JAVADOC	 The time in seconds the download is allowed to take before being terminated. * @since Ant 1.8.0 
public	TokenNamepublic	
void	TokenNamevoid	
setMaxTime	TokenNameIdentifier	 set Max Time
(	TokenNameLPAREN	
long	TokenNamelong	
maxTime	TokenNameIdentifier	 max Time
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
maxTime	TokenNameIdentifier	 max Time
=	TokenNameEQUAL	
maxTime	TokenNameIdentifier	 max Time
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * The number of retries to attempt upon error, defaults to 3. * * @param r retry count * * @since Ant 1.8.0 */	TokenNameCOMMENT_JAVADOC	 The number of retries to attempt upon error, defaults to 3. * @param r retry count * @since Ant 1.8.0 
public	TokenNamepublic	
void	TokenNamevoid	
setRetries	TokenNameIdentifier	 set Retries
(	TokenNameLPAREN	
int	TokenNameint	
r	TokenNameIdentifier	 r
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
numberRetries	TokenNameIdentifier	 number Retries
=	TokenNameEQUAL	
r	TokenNameIdentifier	 r
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Skip files that already exist locally. * * @param s "true" to skip existing destination files * * @since Ant 1.8.0 */	TokenNameCOMMENT_JAVADOC	 Skip files that already exist locally. * @param s "true" to skip existing destination files * @since Ant 1.8.0 
public	TokenNamepublic	
void	TokenNamevoid	
setSkipExisting	TokenNameIdentifier	 set Skip Existing
(	TokenNameLPAREN	
boolean	TokenNameboolean	
s	TokenNameIdentifier	 s
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
skipExisting	TokenNameIdentifier	 skip Existing
=	TokenNameEQUAL	
s	TokenNameIdentifier	 s
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * HTTP connections only - control caching on the * HttpUrlConnection: httpConnection.setUseCaches(); if false, do * not allow caching on the HttpUrlConnection. * * <p>Defaults to true (allow caching, which is also the * HttpUrlConnection default value.</p> * * @since Ant 1.8.0 */	TokenNameCOMMENT_JAVADOC	 HTTP connections only - control caching on the HttpUrlConnection: httpConnection.setUseCaches(); if false, do not allow caching on the HttpUrlConnection. * <p>Defaults to true (allow caching, which is also the HttpUrlConnection default value.</p> * @since Ant 1.8.0 
public	TokenNamepublic	
void	TokenNamevoid	
setHttpUseCaches	TokenNameIdentifier	 set Http Use Caches
(	TokenNameLPAREN	
boolean	TokenNameboolean	
httpUseCache	TokenNameIdentifier	 http Use Cache
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
httpUseCaches	TokenNameIdentifier	 http Use Caches
=	TokenNameEQUAL	
httpUseCache	TokenNameIdentifier	 http Use Cache
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Define the mapper to map source to destination files. * @return a mapper to be configured. * @exception BuildException if more than one mapper is defined. * @since Ant 1.8.0 */	TokenNameCOMMENT_JAVADOC	 Define the mapper to map source to destination files. @return a mapper to be configured. @exception BuildException if more than one mapper is defined. @since Ant 1.8.0 
public	TokenNamepublic	
Mapper	TokenNameIdentifier	 Mapper
createMapper	TokenNameIdentifier	 create Mapper
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
mapperElement	TokenNameIdentifier	 mapper Element
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"Cannot define more than one mapper"	TokenNameStringLiteral	Cannot define more than one mapper
,	TokenNameCOMMA	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
mapperElement	TokenNameIdentifier	 mapper Element
=	TokenNameEQUAL	
new	TokenNamenew	
Mapper	TokenNameIdentifier	 Mapper
(	TokenNameLPAREN	
getProject	TokenNameIdentifier	 get Project
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
mapperElement	TokenNameIdentifier	 mapper Element
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Add a nested filenamemapper. * @param fileNameMapper the mapper to add. * @since Ant 1.8.0 */	TokenNameCOMMENT_JAVADOC	 Add a nested filenamemapper. @param fileNameMapper the mapper to add. @since Ant 1.8.0 
public	TokenNamepublic	
void	TokenNamevoid	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
FileNameMapper	TokenNameIdentifier	 File Name Mapper
fileNameMapper	TokenNameIdentifier	 file Name Mapper
)	TokenNameRPAREN	
{	TokenNameLBRACE	
createMapper	TokenNameIdentifier	 create Mapper
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
fileNameMapper	TokenNameIdentifier	 file Name Mapper
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Provide this for Backward Compatibility. */	TokenNameCOMMENT_JAVADOC	 Provide this for Backward Compatibility. 
protected	TokenNameprotected	
static	TokenNamestatic	
class	TokenNameclass	
Base64Converter	TokenNameIdentifier	 Base64 Converter
extends	TokenNameextends	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Base64Converter	TokenNameIdentifier	 Base64 Converter
{	TokenNameLBRACE	
}	TokenNameRBRACE	
/** * Interface implemented for reporting * progess of downloading. */	TokenNameCOMMENT_JAVADOC	 Interface implemented for reporting progess of downloading. 
public	TokenNamepublic	
interface	TokenNameinterface	
DownloadProgress	TokenNameIdentifier	 Download Progress
{	TokenNameLBRACE	
/** * begin a download */	TokenNameCOMMENT_JAVADOC	 begin a download 
void	TokenNamevoid	
beginDownload	TokenNameIdentifier	 begin Download
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
/** * tick handler * */	TokenNameCOMMENT_JAVADOC	 tick handler 
void	TokenNamevoid	
onTick	TokenNameIdentifier	 on Tick
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
/** * end a download */	TokenNameCOMMENT_JAVADOC	 end a download 
void	TokenNamevoid	
endDownload	TokenNameIdentifier	 end Download
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * do nothing with progress info */	TokenNameCOMMENT_JAVADOC	 do nothing with progress info 
public	TokenNamepublic	
static	TokenNamestatic	
class	TokenNameclass	
NullProgress	TokenNameIdentifier	 Null Progress
implements	TokenNameimplements	
DownloadProgress	TokenNameIdentifier	 Download Progress
{	TokenNameLBRACE	
/** * begin a download */	TokenNameCOMMENT_JAVADOC	 begin a download 
public	TokenNamepublic	
void	TokenNamevoid	
beginDownload	TokenNameIdentifier	 begin Download
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
}	TokenNameRBRACE	
/** * tick handler * */	TokenNameCOMMENT_JAVADOC	 tick handler 
public	TokenNamepublic	
void	TokenNamevoid	
onTick	TokenNameIdentifier	 on Tick
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
}	TokenNameRBRACE	
/** * end a download */	TokenNameCOMMENT_JAVADOC	 end a download 
public	TokenNamepublic	
void	TokenNamevoid	
endDownload	TokenNameIdentifier	 end Download
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * verbose progress system prints to some output stream */	TokenNameCOMMENT_JAVADOC	 verbose progress system prints to some output stream 
public	TokenNamepublic	
static	TokenNamestatic	
class	TokenNameclass	
VerboseProgress	TokenNameIdentifier	 Verbose Progress
implements	TokenNameimplements	
DownloadProgress	TokenNameIdentifier	 Download Progress
{	TokenNameLBRACE	
private	TokenNameprivate	
int	TokenNameint	
dots	TokenNameIdentifier	 dots
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
// CheckStyle:VisibilityModifier OFF - bc 	TokenNameCOMMENT_LINE	CheckStyle:VisibilityModifier OFF - bc 
PrintStream	TokenNameIdentifier	 Print Stream
out	TokenNameIdentifier	 out
;	TokenNameSEMICOLON	
// CheckStyle:VisibilityModifier ON 	TokenNameCOMMENT_LINE	CheckStyle:VisibilityModifier ON 
/** * Construct a verbose progress reporter. * @param out the output stream. */	TokenNameCOMMENT_JAVADOC	 Construct a verbose progress reporter. @param out the output stream. 
public	TokenNamepublic	
VerboseProgress	TokenNameIdentifier	 Verbose Progress
(	TokenNameLPAREN	
PrintStream	TokenNameIdentifier	 Print Stream
out	TokenNameIdentifier	 out
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
out	TokenNameIdentifier	 out
=	TokenNameEQUAL	
out	TokenNameIdentifier	 out
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * begin a download */	TokenNameCOMMENT_JAVADOC	 begin a download 
public	TokenNamepublic	
void	TokenNamevoid	
beginDownload	TokenNameIdentifier	 begin Download
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
dots	TokenNameIdentifier	 dots
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * tick handler * */	TokenNameCOMMENT_JAVADOC	 tick handler 
public	TokenNamepublic	
void	TokenNamevoid	
onTick	TokenNameIdentifier	 on Tick
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
print	TokenNameIdentifier	 print
(	TokenNameLPAREN	
"."	TokenNameStringLiteral	.
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
dots	TokenNameIdentifier	 dots
++	TokenNamePLUS_PLUS	
>	TokenNameGREATER	
DOTS_PER_LINE	TokenNameIdentifier	 DOTS  PER  LINE
)	TokenNameRPAREN	
{	TokenNameLBRACE	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
flush	TokenNameIdentifier	 flush
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dots	TokenNameIdentifier	 dots
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * end a download */	TokenNameCOMMENT_JAVADOC	 end a download 
public	TokenNamepublic	
void	TokenNamevoid	
endDownload	TokenNameIdentifier	 end Download
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
println	TokenNameIdentifier	 println
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
flush	TokenNameIdentifier	 flush
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
private	TokenNameprivate	
class	TokenNameclass	
GetThread	TokenNameIdentifier	 Get Thread
extends	TokenNameextends	
Thread	TokenNameIdentifier	 Thread
{	TokenNameLBRACE	
private	TokenNameprivate	
final	TokenNamefinal	
URL	TokenNameIdentifier	 URL
source	TokenNameIdentifier	 source
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
File	TokenNameIdentifier	 File
dest	TokenNameIdentifier	 dest
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
boolean	TokenNameboolean	
hasTimestamp	TokenNameIdentifier	 has Timestamp
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
long	TokenNamelong	
timestamp	TokenNameIdentifier	 timestamp
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
DownloadProgress	TokenNameIdentifier	 Download Progress
progress	TokenNameIdentifier	 progress
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
int	TokenNameint	
logLevel	TokenNameIdentifier	 log Level
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
success	TokenNameIdentifier	 success
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
IOException	TokenNameIdentifier	 IO Exception
ioexception	TokenNameIdentifier	 ioexception
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
BuildException	TokenNameIdentifier	 Build Exception
exception	TokenNameIdentifier	 exception
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
InputStream	TokenNameIdentifier	 Input Stream
is	TokenNameIdentifier	 is
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
OutputStream	TokenNameIdentifier	 Output Stream
os	TokenNameIdentifier	 os
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
URLConnection	TokenNameIdentifier	 URL Connection
connection	TokenNameIdentifier	 connection
;	TokenNameSEMICOLON	
private	TokenNameprivate	
int	TokenNameint	
redirections	TokenNameIdentifier	 redirections
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
GetThread	TokenNameIdentifier	 Get Thread
(	TokenNameLPAREN	
URL	TokenNameIdentifier	 URL
source	TokenNameIdentifier	 source
,	TokenNameCOMMA	
File	TokenNameIdentifier	 File
dest	TokenNameIdentifier	 dest
,	TokenNameCOMMA	
boolean	TokenNameboolean	
h	TokenNameIdentifier	 h
,	TokenNameCOMMA	
long	TokenNamelong	
t	TokenNameIdentifier	 t
,	TokenNameCOMMA	
DownloadProgress	TokenNameIdentifier	 Download Progress
p	TokenNameIdentifier	 p
,	TokenNameCOMMA	
int	TokenNameint	
l	TokenNameIdentifier	 l
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
source	TokenNameIdentifier	 source
=	TokenNameEQUAL	
source	TokenNameIdentifier	 source
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
dest	TokenNameIdentifier	 dest
=	TokenNameEQUAL	
dest	TokenNameIdentifier	 dest
;	TokenNameSEMICOLON	
hasTimestamp	TokenNameIdentifier	 has Timestamp
=	TokenNameEQUAL	
h	TokenNameIdentifier	 h
;	TokenNameSEMICOLON	
timestamp	TokenNameIdentifier	 timestamp
=	TokenNameEQUAL	
t	TokenNameIdentifier	 t
;	TokenNameSEMICOLON	
progress	TokenNameIdentifier	 progress
=	TokenNameEQUAL	
p	TokenNameIdentifier	 p
;	TokenNameSEMICOLON	
logLevel	TokenNameIdentifier	 log Level
=	TokenNameEQUAL	
l	TokenNameIdentifier	 l
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
void	TokenNamevoid	
run	TokenNameIdentifier	 run
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
success	TokenNameIdentifier	 success
=	TokenNameEQUAL	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioex	TokenNameIdentifier	 ioex
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ioexception	TokenNameIdentifier	 ioexception
=	TokenNameEQUAL	
ioex	TokenNameIdentifier	 ioex
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
BuildException	TokenNameIdentifier	 Build Exception
bex	TokenNameIdentifier	 bex
)	TokenNameRPAREN	
{	TokenNameLBRACE	
exception	TokenNameIdentifier	 exception
=	TokenNameEQUAL	
bex	TokenNameIdentifier	 bex
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
private	TokenNameprivate	
boolean	TokenNameboolean	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
connection	TokenNameIdentifier	 connection
=	TokenNameEQUAL	
openConnection	TokenNameIdentifier	 open Connection
(	TokenNameLPAREN	
source	TokenNameIdentifier	 source
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
connection	TokenNameIdentifier	 connection
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
boolean	TokenNameboolean	
downloadSucceeded	TokenNameIdentifier	 download Succeeded
=	TokenNameEQUAL	
downloadFile	TokenNameIdentifier	 download File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
//if (and only if) the use file time option is set, then 	TokenNameCOMMENT_LINE	if (and only if) the use file time option is set, then 
//the saved file now has its timestamp set to that of the 	TokenNameCOMMENT_LINE	the saved file now has its timestamp set to that of the 
//downloaded file 	TokenNameCOMMENT_LINE	downloaded file 
if	TokenNameif	
(	TokenNameLPAREN	
downloadSucceeded	TokenNameIdentifier	 download Succeeded
&&	TokenNameAND_AND	
useTimestamp	TokenNameIdentifier	 use Timestamp
)	TokenNameRPAREN	
{	TokenNameLBRACE	
updateTimeStamp	TokenNameIdentifier	 update Time Stamp
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
downloadSucceeded	TokenNameIdentifier	 download Succeeded
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
boolean	TokenNameboolean	
redirectionAllowed	TokenNameIdentifier	 redirection Allowed
(	TokenNameLPAREN	
URL	TokenNameIdentifier	 URL
aSource	TokenNameIdentifier	 a Source
,	TokenNameCOMMA	
URL	TokenNameIdentifier	 URL
aDest	TokenNameIdentifier	 a Dest
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
(	TokenNameLPAREN	
aSource	TokenNameIdentifier	 a Source
.	TokenNameDOT	
getProtocol	TokenNameIdentifier	 get Protocol
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
aDest	TokenNameIdentifier	 a Dest
.	TokenNameDOT	
getProtocol	TokenNameIdentifier	 get Protocol
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
||	TokenNameOR_OR	
(	TokenNameLPAREN	
HTTP	TokenNameIdentifier	 HTTP
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
aSource	TokenNameIdentifier	 a Source
.	TokenNameDOT	
getProtocol	TokenNameIdentifier	 get Protocol
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
HTTPS	TokenNameIdentifier	 HTTPS
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
aDest	TokenNameIdentifier	 a Dest
.	TokenNameDOT	
getProtocol	TokenNameIdentifier	 get Protocol
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
message	TokenNameIdentifier	 message
=	TokenNameEQUAL	
"Redirection detected from "	TokenNameStringLiteral	Redirection detected from 
+	TokenNamePLUS	
aSource	TokenNameIdentifier	 a Source
.	TokenNameDOT	
getProtocol	TokenNameIdentifier	 get Protocol
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" to "	TokenNameStringLiteral	 to 
+	TokenNamePLUS	
aDest	TokenNameIdentifier	 a Dest
.	TokenNameDOT	
getProtocol	TokenNameIdentifier	 get Protocol
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
". Protocol switch unsafe, not allowed."	TokenNameStringLiteral	. Protocol switch unsafe, not allowed.
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
ignoreErrors	TokenNameIdentifier	 ignore Errors
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
message	TokenNameIdentifier	 message
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
message	TokenNameIdentifier	 message
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
redirections	TokenNameIdentifier	 redirections
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
redirections	TokenNameIdentifier	 redirections
>	TokenNameGREATER	
REDIRECT_LIMIT	TokenNameIdentifier	 REDIRECT  LIMIT
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
message	TokenNameIdentifier	 message
=	TokenNameEQUAL	
"More than "	TokenNameStringLiteral	More than 
+	TokenNamePLUS	
REDIRECT_LIMIT	TokenNameIdentifier	 REDIRECT  LIMIT
+	TokenNamePLUS	
" times redirected, giving up"	TokenNameStringLiteral	 times redirected, giving up
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
ignoreErrors	TokenNameIdentifier	 ignore Errors
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
message	TokenNameIdentifier	 message
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
message	TokenNameIdentifier	 message
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
URLConnection	TokenNameIdentifier	 URL Connection
openConnection	TokenNameIdentifier	 open Connection
(	TokenNameLPAREN	
URL	TokenNameIdentifier	 URL
aSource	TokenNameIdentifier	 a Source
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
// set up the URL connection 	TokenNameCOMMENT_LINE	set up the URL connection 
URLConnection	TokenNameIdentifier	 URL Connection
connection	TokenNameIdentifier	 connection
=	TokenNameEQUAL	
aSource	TokenNameIdentifier	 a Source
.	TokenNameDOT	
openConnection	TokenNameIdentifier	 open Connection
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// modify the headers 	TokenNameCOMMENT_LINE	modify the headers 
// NB: things like user authentication could go in here too. 	TokenNameCOMMENT_LINE	NB: things like user authentication could go in here too. 
if	TokenNameif	
(	TokenNameLPAREN	
hasTimestamp	TokenNameIdentifier	 has Timestamp
)	TokenNameRPAREN	
{	TokenNameLBRACE	
connection	TokenNameIdentifier	 connection
.	TokenNameDOT	
setIfModifiedSince	TokenNameIdentifier	 set If Modified Since
(	TokenNameLPAREN	
timestamp	TokenNameIdentifier	 timestamp
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// prepare Java 1.1 style credentials 	TokenNameCOMMENT_LINE	prepare Java 1.1 style credentials 
if	TokenNameif	
(	TokenNameLPAREN	
uname	TokenNameIdentifier	 uname
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
||	TokenNameOR_OR	
pword	TokenNameIdentifier	 pword
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
up	TokenNameIdentifier	 up
=	TokenNameEQUAL	
uname	TokenNameIdentifier	 uname
+	TokenNamePLUS	
":"	TokenNameStringLiteral	:
+	TokenNamePLUS	
pword	TokenNameIdentifier	 pword
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
encoding	TokenNameIdentifier	 encoding
;	TokenNameSEMICOLON	
// we do not use the sun impl for portability, 	TokenNameCOMMENT_LINE	we do not use the sun impl for portability, 
// and always use our own implementation for consistent 	TokenNameCOMMENT_LINE	and always use our own implementation for consistent 
// testing 	TokenNameCOMMENT_LINE	testing 
Base64Converter	TokenNameIdentifier	 Base64 Converter
encoder	TokenNameIdentifier	 encoder
=	TokenNameEQUAL	
new	TokenNamenew	
Base64Converter	TokenNameIdentifier	 Base64 Converter
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
encoding	TokenNameIdentifier	 encoding
=	TokenNameEQUAL	
encoder	TokenNameIdentifier	 encoder
.	TokenNameDOT	
encode	TokenNameIdentifier	 encode
(	TokenNameLPAREN	
up	TokenNameIdentifier	 up
.	TokenNameDOT	
getBytes	TokenNameIdentifier	 get Bytes
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
connection	TokenNameIdentifier	 connection
.	TokenNameDOT	
setRequestProperty	TokenNameIdentifier	 set Request Property
(	TokenNameLPAREN	
"Authorization"	TokenNameStringLiteral	Authorization
,	TokenNameCOMMA	
"Basic "	TokenNameStringLiteral	Basic 
+	TokenNamePLUS	
encoding	TokenNameIdentifier	 encoding
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
connection	TokenNameIdentifier	 connection
instanceof	TokenNameinstanceof	
HttpURLConnection	TokenNameIdentifier	 Http URL Connection
)	TokenNameRPAREN	
{	TokenNameLBRACE	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
HttpURLConnection	TokenNameIdentifier	 Http URL Connection
)	TokenNameRPAREN	
connection	TokenNameIdentifier	 connection
)	TokenNameRPAREN	
.	TokenNameDOT	
setInstanceFollowRedirects	TokenNameIdentifier	 set Instance Follow Redirects
(	TokenNameLPAREN	
false	TokenNamefalse	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
HttpURLConnection	TokenNameIdentifier	 Http URL Connection
)	TokenNameRPAREN	
connection	TokenNameIdentifier	 connection
)	TokenNameRPAREN	
.	TokenNameDOT	
setUseCaches	TokenNameIdentifier	 set Use Caches
(	TokenNameLPAREN	
httpUseCaches	TokenNameIdentifier	 http Use Caches
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// connect to the remote site (may take some time) 	TokenNameCOMMENT_LINE	connect to the remote site (may take some time) 
try	TokenNametry	
{	TokenNameLBRACE	
connection	TokenNameIdentifier	 connection
.	TokenNameDOT	
connect	TokenNameIdentifier	 connect
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
NullPointerException	TokenNameIdentifier	 Null Pointer Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
//bad URLs can trigger NPEs in some JVMs 	TokenNameCOMMENT_LINE	bad URLs can trigger NPEs in some JVMs 
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"Failed to parse "	TokenNameStringLiteral	Failed to parse 
+	TokenNamePLUS	
source	TokenNameIdentifier	 source
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// First check on a 301 / 302 (moved) response (HTTP only) 	TokenNameCOMMENT_LINE	First check on a 301 / 302 (moved) response (HTTP only) 
if	TokenNameif	
(	TokenNameLPAREN	
connection	TokenNameIdentifier	 connection
instanceof	TokenNameinstanceof	
HttpURLConnection	TokenNameIdentifier	 Http URL Connection
)	TokenNameRPAREN	
{	TokenNameLBRACE	
HttpURLConnection	TokenNameIdentifier	 Http URL Connection
httpConnection	TokenNameIdentifier	 http Connection
=	TokenNameEQUAL	
(	TokenNameLPAREN	
HttpURLConnection	TokenNameIdentifier	 Http URL Connection
)	TokenNameRPAREN	
connection	TokenNameIdentifier	 connection
;	TokenNameSEMICOLON	
int	TokenNameint	
responseCode	TokenNameIdentifier	 response Code
=	TokenNameEQUAL	
httpConnection	TokenNameIdentifier	 http Connection
.	TokenNameDOT	
getResponseCode	TokenNameIdentifier	 get Response Code
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
responseCode	TokenNameIdentifier	 response Code
==	TokenNameEQUAL_EQUAL	
HttpURLConnection	TokenNameIdentifier	 Http URL Connection
.	TokenNameDOT	
HTTP_MOVED_PERM	TokenNameIdentifier	 HTTP  MOVED  PERM
||	TokenNameOR_OR	
responseCode	TokenNameIdentifier	 response Code
==	TokenNameEQUAL_EQUAL	
HttpURLConnection	TokenNameIdentifier	 Http URL Connection
.	TokenNameDOT	
HTTP_MOVED_TEMP	TokenNameIdentifier	 HTTP  MOVED  TEMP
||	TokenNameOR_OR	
responseCode	TokenNameIdentifier	 response Code
==	TokenNameEQUAL_EQUAL	
HttpURLConnection	TokenNameIdentifier	 Http URL Connection
.	TokenNameDOT	
HTTP_SEE_OTHER	TokenNameIdentifier	 HTTP  SEE  OTHER
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
newLocation	TokenNameIdentifier	 new Location
=	TokenNameEQUAL	
httpConnection	TokenNameIdentifier	 http Connection
.	TokenNameDOT	
getHeaderField	TokenNameIdentifier	 get Header Field
(	TokenNameLPAREN	
"Location"	TokenNameStringLiteral	Location
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
message	TokenNameIdentifier	 message
=	TokenNameEQUAL	
aSource	TokenNameIdentifier	 a Source
+	TokenNamePLUS	
(	TokenNameLPAREN	
responseCode	TokenNameIdentifier	 response Code
==	TokenNameEQUAL_EQUAL	
HttpURLConnection	TokenNameIdentifier	 Http URL Connection
.	TokenNameDOT	
HTTP_MOVED_PERM	TokenNameIdentifier	 HTTP  MOVED  PERM
?	TokenNameQUESTION	
" permanently"	TokenNameStringLiteral	 permanently
:	TokenNameCOLON	
""	TokenNameStringLiteral	 
)	TokenNameRPAREN	
+	TokenNamePLUS	
" moved to "	TokenNameStringLiteral	 moved to 
+	TokenNamePLUS	
newLocation	TokenNameIdentifier	 new Location
;	TokenNameSEMICOLON	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
message	TokenNameIdentifier	 message
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
URL	TokenNameIdentifier	 URL
newURL	TokenNameIdentifier	 new URL
=	TokenNameEQUAL	
new	TokenNamenew	
URL	TokenNameIdentifier	 URL
(	TokenNameLPAREN	
aSource	TokenNameIdentifier	 a Source
,	TokenNameCOMMA	
newLocation	TokenNameIdentifier	 new Location
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
redirectionAllowed	TokenNameIdentifier	 redirection Allowed
(	TokenNameLPAREN	
aSource	TokenNameIdentifier	 a Source
,	TokenNameCOMMA	
newURL	TokenNameIdentifier	 new URL
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
openConnection	TokenNameIdentifier	 open Connection
(	TokenNameLPAREN	
newURL	TokenNameIdentifier	 new URL
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// next test for a 304 result (HTTP only) 	TokenNameCOMMENT_LINE	next test for a 304 result (HTTP only) 
long	TokenNamelong	
lastModified	TokenNameIdentifier	 last Modified
=	TokenNameEQUAL	
httpConnection	TokenNameIdentifier	 http Connection
.	TokenNameDOT	
getLastModified	TokenNameIdentifier	 get Last Modified
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
responseCode	TokenNameIdentifier	 response Code
==	TokenNameEQUAL_EQUAL	
HttpURLConnection	TokenNameIdentifier	 Http URL Connection
.	TokenNameDOT	
HTTP_NOT_MODIFIED	TokenNameIdentifier	 HTTP  NOT  MODIFIED
||	TokenNameOR_OR	
(	TokenNameLPAREN	
lastModified	TokenNameIdentifier	 last Modified
!=	TokenNameNOT_EQUAL	
0	TokenNameIntegerLiteral	
&&	TokenNameAND_AND	
hasTimestamp	TokenNameIdentifier	 has Timestamp
&&	TokenNameAND_AND	
timestamp	TokenNameIdentifier	 timestamp
>=	TokenNameGREATER_EQUAL	
lastModified	TokenNameIdentifier	 last Modified
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// not modified so no file download. just return 	TokenNameCOMMENT_LINE	not modified so no file download. just return 
// instead and trace out something so the user 	TokenNameCOMMENT_LINE	instead and trace out something so the user 
// doesn't think that the download happened when it 	TokenNameCOMMENT_LINE	doesn't think that the download happened when it 
// didn't 	TokenNameCOMMENT_LINE	didn't 
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Not modified - so not downloaded"	TokenNameStringLiteral	Not modified - so not downloaded
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// test for 401 result (HTTP only) 	TokenNameCOMMENT_LINE	test for 401 result (HTTP only) 
if	TokenNameif	
(	TokenNameLPAREN	
responseCode	TokenNameIdentifier	 response Code
==	TokenNameEQUAL_EQUAL	
HttpURLConnection	TokenNameIdentifier	 Http URL Connection
.	TokenNameDOT	
HTTP_UNAUTHORIZED	TokenNameIdentifier	 HTTP  UNAUTHORIZED
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
message	TokenNameIdentifier	 message
=	TokenNameEQUAL	
"HTTP Authorization failure"	TokenNameStringLiteral	HTTP Authorization failure
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
ignoreErrors	TokenNameIdentifier	 ignore Errors
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
message	TokenNameIdentifier	 message
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
message	TokenNameIdentifier	 message
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
//REVISIT: at this point even non HTTP connections may 	TokenNameCOMMENT_LINE	REVISIT: at this point even non HTTP connections may 
//support the if-modified-since behaviour -we just check 	TokenNameCOMMENT_LINE	support the if-modified-since behaviour -we just check 
//the date of the content and skip the write if it is not 	TokenNameCOMMENT_LINE	the date of the content and skip the write if it is not 
//newer. Some protocols (FTP) don't include dates, of 	TokenNameCOMMENT_LINE	newer. Some protocols (FTP) don't include dates, of 
//course. 	TokenNameCOMMENT_LINE	course. 
return	TokenNamereturn	
connection	TokenNameIdentifier	 connection
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
boolean	TokenNameboolean	
downloadFile	TokenNameIdentifier	 download File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
FileNotFoundException	TokenNameIdentifier	 File Not Found Exception
,	TokenNameCOMMA	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
numberRetries	TokenNameIdentifier	 number Retries
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// this three attempt trick is to get round quirks in different 	TokenNameCOMMENT_LINE	this three attempt trick is to get round quirks in different 
// Java implementations. Some of them take a few goes to bind 	TokenNameCOMMENT_LINE	Java implementations. Some of them take a few goes to bind 
// property; we ignore the first couple of such failures. 	TokenNameCOMMENT_LINE	property; we ignore the first couple of such failures. 
try	TokenNametry	
{	TokenNameLBRACE	
is	TokenNameIdentifier	 is
=	TokenNameEQUAL	
connection	TokenNameIdentifier	 connection
.	TokenNameDOT	
getInputStream	TokenNameIdentifier	 get Input Stream
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ex	TokenNameIdentifier	 ex
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Error opening connection "	TokenNameStringLiteral	Error opening connection 
+	TokenNamePLUS	
ex	TokenNameIdentifier	 ex
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
is	TokenNameIdentifier	 is
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Can't get "	TokenNameStringLiteral	Can't get 
+	TokenNamePLUS	
source	TokenNameIdentifier	 source
+	TokenNamePLUS	
" to "	TokenNameStringLiteral	 to 
+	TokenNamePLUS	
dest	TokenNameIdentifier	 dest
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
ignoreErrors	TokenNameIdentifier	 ignore Errors
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"Can't get "	TokenNameStringLiteral	Can't get 
+	TokenNamePLUS	
source	TokenNameIdentifier	 source
+	TokenNamePLUS	
" to "	TokenNameStringLiteral	 to 
+	TokenNamePLUS	
dest	TokenNameIdentifier	 dest
,	TokenNameCOMMA	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
os	TokenNameIdentifier	 os
=	TokenNameEQUAL	
new	TokenNamenew	
FileOutputStream	TokenNameIdentifier	 File Output Stream
(	TokenNameLPAREN	
dest	TokenNameIdentifier	 dest
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
progress	TokenNameIdentifier	 progress
.	TokenNameDOT	
beginDownload	TokenNameIdentifier	 begin Download
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
finished	TokenNameIdentifier	 finished
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
byte	TokenNamebyte	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
buffer	TokenNameIdentifier	 buffer
=	TokenNameEQUAL	
new	TokenNamenew	
byte	TokenNamebyte	
[	TokenNameLBRACKET	
BIG_BUFFER_SIZE	TokenNameIdentifier	 BIG  BUFFER  SIZE
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
int	TokenNameint	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
!	TokenNameNOT	
isInterrupted	TokenNameIdentifier	 is Interrupted
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
(	TokenNameLPAREN	
length	TokenNameIdentifier	 length
=	TokenNameEQUAL	
is	TokenNameIdentifier	 is
.	TokenNameDOT	
read	TokenNameIdentifier	 read
(	TokenNameLPAREN	
buffer	TokenNameIdentifier	 buffer
)	TokenNameRPAREN	
)	TokenNameRPAREN	
>=	TokenNameGREATER_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
os	TokenNameIdentifier	 os
.	TokenNameDOT	
write	TokenNameIdentifier	 write
(	TokenNameLPAREN	
buffer	TokenNameIdentifier	 buffer
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
length	TokenNameIdentifier	 length
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
progress	TokenNameIdentifier	 progress
.	TokenNameDOT	
onTick	TokenNameIdentifier	 on Tick
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finished	TokenNameIdentifier	 finished
=	TokenNameEQUAL	
!	TokenNameNOT	
isInterrupted	TokenNameIdentifier	 is Interrupted
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
FileUtils	TokenNameIdentifier	 File Utils
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
os	TokenNameIdentifier	 os
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
FileUtils	TokenNameIdentifier	 File Utils
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
is	TokenNameIdentifier	 is
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// we have started to (over)write dest, but failed. 	TokenNameCOMMENT_LINE	we have started to (over)write dest, but failed. 
// Try to delete the garbage we'd otherwise leave 	TokenNameCOMMENT_LINE	Try to delete the garbage we'd otherwise leave 
// behind. 	TokenNameCOMMENT_LINE	behind. 
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
finished	TokenNameIdentifier	 finished
)	TokenNameRPAREN	
{	TokenNameLBRACE	
dest	TokenNameIdentifier	 dest
.	TokenNameDOT	
delete	TokenNameIdentifier	 delete
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
progress	TokenNameIdentifier	 progress
.	TokenNameDOT	
endDownload	TokenNameIdentifier	 end Download
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
void	TokenNamevoid	
updateTimeStamp	TokenNameIdentifier	 update Time Stamp
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
long	TokenNamelong	
remoteTimestamp	TokenNameIdentifier	 remote Timestamp
=	TokenNameEQUAL	
connection	TokenNameIdentifier	 connection
.	TokenNameDOT	
getLastModified	TokenNameIdentifier	 get Last Modified
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
verbose	TokenNameIdentifier	 verbose
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Date	TokenNameIdentifier	 Date
t	TokenNameIdentifier	 t
=	TokenNameEQUAL	
new	TokenNamenew	
Date	TokenNameIdentifier	 Date
(	TokenNameLPAREN	
remoteTimestamp	TokenNameIdentifier	 remote Timestamp
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"last modified = "	TokenNameStringLiteral	last modified = 
+	TokenNamePLUS	
t	TokenNameIdentifier	 t
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
remoteTimestamp	TokenNameIdentifier	 remote Timestamp
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
?	TokenNameQUESTION	
" - using current time instead"	TokenNameStringLiteral	 - using current time instead
:	TokenNameCOLON	
""	TokenNameStringLiteral	 
)	TokenNameRPAREN	
,	TokenNameCOMMA	
logLevel	TokenNameIdentifier	 log Level
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
remoteTimestamp	TokenNameIdentifier	 remote Timestamp
!=	TokenNameNOT_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
FILE_UTILS	TokenNameIdentifier	 FILE  UTILS
.	TokenNameDOT	
setFileLastModified	TokenNameIdentifier	 set File Last Modified
(	TokenNameLPAREN	
dest	TokenNameIdentifier	 dest
,	TokenNameCOMMA	
remoteTimestamp	TokenNameIdentifier	 remote Timestamp
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Has the download completed successfully? * * <p>Re-throws any exception caught during executaion.</p> */	TokenNameCOMMENT_JAVADOC	 Has the download completed successfully? * <p>Re-throws any exception caught during executaion.</p> 
boolean	TokenNameboolean	
wasSuccessful	TokenNameIdentifier	 was Successful
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
ioexception	TokenNameIdentifier	 ioexception
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
ioexception	TokenNameIdentifier	 ioexception
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
exception	TokenNameIdentifier	 exception
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
exception	TokenNameIdentifier	 exception
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
success	TokenNameIdentifier	 success
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Closes streams, interrupts the download, may delete the * output file. */	TokenNameCOMMENT_JAVADOC	 Closes streams, interrupts the download, may delete the output file. 
void	TokenNamevoid	
closeStreams	TokenNameIdentifier	 close Streams
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
interrupt	TokenNameIdentifier	 interrupt
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
FileUtils	TokenNameIdentifier	 File Utils
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
os	TokenNameIdentifier	 os
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
FileUtils	TokenNameIdentifier	 File Utils
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
is	TokenNameIdentifier	 is
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
success	TokenNameIdentifier	 success
&&	TokenNameAND_AND	
dest	TokenNameIdentifier	 dest
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
dest	TokenNameIdentifier	 dest
.	TokenNameDOT	
delete	TokenNameIdentifier	 delete
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
