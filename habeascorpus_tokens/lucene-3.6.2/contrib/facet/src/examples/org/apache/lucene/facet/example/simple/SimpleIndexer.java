package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
example	TokenNameIdentifier	 example
.	TokenNameDOT	
simple	TokenNameIdentifier	 simple
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
List	TokenNameIdentifier	 List
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
document	TokenNameIdentifier	 document
.	TokenNameDOT	
Document	TokenNameIdentifier	 Document
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
document	TokenNameIdentifier	 document
.	TokenNameDOT	
Field	TokenNameIdentifier	 Field
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
document	TokenNameIdentifier	 document
.	TokenNameDOT	
Field	TokenNameIdentifier	 Field
.	TokenNameDOT	
Index	TokenNameIdentifier	 Index
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
document	TokenNameIdentifier	 document
.	TokenNameDOT	
Field	TokenNameIdentifier	 Field
.	TokenNameDOT	
Store	TokenNameIdentifier	 Store
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
IndexWriter	TokenNameIdentifier	 Index Writer
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
IndexWriterConfig	TokenNameIdentifier	 Index Writer Config
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
IndexWriterConfig	TokenNameIdentifier	 Index Writer Config
.	TokenNameDOT	
OpenMode	TokenNameIdentifier	 Open Mode
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
store	TokenNameIdentifier	 store
.	TokenNameDOT	
Directory	TokenNameIdentifier	 Directory
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
example	TokenNameIdentifier	 example
.	TokenNameDOT	
ExampleUtils	TokenNameIdentifier	 Example Utils
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
CategoryDocumentBuilder	TokenNameIdentifier	 Category Document Builder
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
taxonomy	TokenNameIdentifier	 taxonomy
.	TokenNameDOT	
CategoryPath	TokenNameIdentifier	 Category Path
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
taxonomy	TokenNameIdentifier	 taxonomy
.	TokenNameDOT	
TaxonomyWriter	TokenNameIdentifier	 Taxonomy Writer
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
taxonomy	TokenNameIdentifier	 taxonomy
.	TokenNameDOT	
directory	TokenNameIdentifier	 directory
.	TokenNameDOT	
DirectoryTaxonomyWriter	TokenNameIdentifier	 Directory Taxonomy Writer
;	TokenNameSEMICOLON	
/** * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the "License"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */	TokenNameCOMMENT_JAVADOC	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
/** * Sample indexer creates an index, and adds to it sample documents and facets. * * @lucene.experimental */	TokenNameCOMMENT_JAVADOC	 Sample indexer creates an index, and adds to it sample documents and facets. * @lucene.experimental 
public	TokenNamepublic	
class	TokenNameclass	
SimpleIndexer	TokenNameIdentifier	 Simple Indexer
{	TokenNameLBRACE	
/** * Create an index, and adds to it sample documents and facets. * @param indexDir Directory in which the index should be created. * @param taxoDir Directory in which the taxonomy index should be created. * @throws Exception on error (no detailed exception handling here for sample simplicity */	TokenNameCOMMENT_JAVADOC	 Create an index, and adds to it sample documents and facets. @param indexDir Directory in which the index should be created. @param taxoDir Directory in which the taxonomy index should be created. @throws Exception on error (no detailed exception handling here for sample simplicity 
public	TokenNamepublic	
static	TokenNamestatic	
void	TokenNamevoid	
index	TokenNameIdentifier	 index
(	TokenNameLPAREN	
Directory	TokenNameIdentifier	 Directory
indexDir	TokenNameIdentifier	 index Dir
,	TokenNameCOMMA	
Directory	TokenNameIdentifier	 Directory
taxoDir	TokenNameIdentifier	 taxo Dir
)	TokenNameRPAREN	
throws	TokenNamethrows	
Exception	TokenNameIdentifier	 Exception
{	TokenNameLBRACE	
// create and open an index writer 	TokenNameCOMMENT_LINE	create and open an index writer 
IndexWriter	TokenNameIdentifier	 Index Writer
iw	TokenNameIdentifier	 iw
=	TokenNameEQUAL	
new	TokenNamenew	
IndexWriter	TokenNameIdentifier	 Index Writer
(	TokenNameLPAREN	
indexDir	TokenNameIdentifier	 index Dir
,	TokenNameCOMMA	
new	TokenNamenew	
IndexWriterConfig	TokenNameIdentifier	 Index Writer Config
(	TokenNameLPAREN	
ExampleUtils	TokenNameIdentifier	 Example Utils
.	TokenNameDOT	
EXAMPLE_VER	TokenNameIdentifier	 EXAMPLE  VER
,	TokenNameCOMMA	
SimpleUtils	TokenNameIdentifier	 Simple Utils
.	TokenNameDOT	
analyzer	TokenNameIdentifier	 analyzer
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// create and open a taxonomy writer 	TokenNameCOMMENT_LINE	create and open a taxonomy writer 
TaxonomyWriter	TokenNameIdentifier	 Taxonomy Writer
taxo	TokenNameIdentifier	 taxo
=	TokenNameEQUAL	
new	TokenNamenew	
DirectoryTaxonomyWriter	TokenNameIdentifier	 Directory Taxonomy Writer
(	TokenNameLPAREN	
taxoDir	TokenNameIdentifier	 taxo Dir
,	TokenNameCOMMA	
OpenMode	TokenNameIdentifier	 Open Mode
.	TokenNameDOT	
CREATE	TokenNameIdentifier	 CREATE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// loop over sample documents 	TokenNameCOMMENT_LINE	loop over sample documents 
int	TokenNameint	
nDocsAdded	TokenNameIdentifier	 n Docs Added
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
int	TokenNameint	
nFacetsAdded	TokenNameIdentifier	 n Facets Added
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
docNum	TokenNameIdentifier	 doc Num
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
docNum	TokenNameIdentifier	 doc Num
<	TokenNameLESS	
SimpleUtils	TokenNameIdentifier	 Simple Utils
.	TokenNameDOT	
docTexts	TokenNameIdentifier	 doc Texts
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
docNum	TokenNameIdentifier	 doc Num
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// obtain the sample facets for current document 	TokenNameCOMMENT_LINE	obtain the sample facets for current document 
List	TokenNameIdentifier	 List
<	TokenNameLESS	
CategoryPath	TokenNameIdentifier	 Category Path
>	TokenNameGREATER	
facetList	TokenNameIdentifier	 facet List
=	TokenNameEQUAL	
SimpleUtils	TokenNameIdentifier	 Simple Utils
.	TokenNameDOT	
categoryPathArrayToList	TokenNameIdentifier	 category Path Array To List
(	TokenNameLPAREN	
SimpleUtils	TokenNameIdentifier	 Simple Utils
.	TokenNameDOT	
categories	TokenNameIdentifier	 categories
[	TokenNameLBRACKET	
docNum	TokenNameIdentifier	 doc Num
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// we do not alter indexing parameters! 	TokenNameCOMMENT_LINE	we do not alter indexing parameters! 
// a category document builder will add the categories to a document once build() is called 	TokenNameCOMMENT_LINE	a category document builder will add the categories to a document once build() is called 
CategoryDocumentBuilder	TokenNameIdentifier	 Category Document Builder
categoryDocBuilder	TokenNameIdentifier	 category Doc Builder
=	TokenNameEQUAL	
new	TokenNamenew	
CategoryDocumentBuilder	TokenNameIdentifier	 Category Document Builder
(	TokenNameLPAREN	
taxo	TokenNameIdentifier	 taxo
)	TokenNameRPAREN	
.	TokenNameDOT	
setCategoryPaths	TokenNameIdentifier	 set Category Paths
(	TokenNameLPAREN	
facetList	TokenNameIdentifier	 facet List
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// create a plain Lucene document and add some regular Lucene fields to it 	TokenNameCOMMENT_LINE	create a plain Lucene document and add some regular Lucene fields to it 
Document	TokenNameIdentifier	 Document
doc	TokenNameIdentifier	 doc
=	TokenNameEQUAL	
new	TokenNamenew	
Document	TokenNameIdentifier	 Document
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
doc	TokenNameIdentifier	 doc
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
new	TokenNamenew	
Field	TokenNameIdentifier	 Field
(	TokenNameLPAREN	
SimpleUtils	TokenNameIdentifier	 Simple Utils
.	TokenNameDOT	
TITLE	TokenNameIdentifier	 TITLE
,	TokenNameCOMMA	
SimpleUtils	TokenNameIdentifier	 Simple Utils
.	TokenNameDOT	
docTitles	TokenNameIdentifier	 doc Titles
[	TokenNameLBRACKET	
docNum	TokenNameIdentifier	 doc Num
]	TokenNameRBRACKET	
,	TokenNameCOMMA	
Store	TokenNameIdentifier	 Store
.	TokenNameDOT	
YES	TokenNameIdentifier	 YES
,	TokenNameCOMMA	
Index	TokenNameIdentifier	 Index
.	TokenNameDOT	
ANALYZED	TokenNameIdentifier	 ANALYZED
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
doc	TokenNameIdentifier	 doc
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
new	TokenNamenew	
Field	TokenNameIdentifier	 Field
(	TokenNameLPAREN	
SimpleUtils	TokenNameIdentifier	 Simple Utils
.	TokenNameDOT	
TEXT	TokenNameIdentifier	 TEXT
,	TokenNameCOMMA	
SimpleUtils	TokenNameIdentifier	 Simple Utils
.	TokenNameDOT	
docTexts	TokenNameIdentifier	 doc Texts
[	TokenNameLBRACKET	
docNum	TokenNameIdentifier	 doc Num
]	TokenNameRBRACKET	
,	TokenNameCOMMA	
Store	TokenNameIdentifier	 Store
.	TokenNameDOT	
NO	TokenNameIdentifier	 NO
,	TokenNameCOMMA	
Index	TokenNameIdentifier	 Index
.	TokenNameDOT	
ANALYZED	TokenNameIdentifier	 ANALYZED
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// invoke the category document builder for adding categories to the document and, 	TokenNameCOMMENT_LINE	invoke the category document builder for adding categories to the document and, 
// as required, to the taxonomy index 	TokenNameCOMMENT_LINE	as required, to the taxonomy index 
categoryDocBuilder	TokenNameIdentifier	 category Doc Builder
.	TokenNameDOT	
build	TokenNameIdentifier	 build
(	TokenNameLPAREN	
doc	TokenNameIdentifier	 doc
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// finally add the document to the index 	TokenNameCOMMENT_LINE	finally add the document to the index 
iw	TokenNameIdentifier	 iw
.	TokenNameDOT	
addDocument	TokenNameIdentifier	 add Document
(	TokenNameLPAREN	
doc	TokenNameIdentifier	 doc
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
nDocsAdded	TokenNameIdentifier	 n Docs Added
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
nFacetsAdded	TokenNameIdentifier	 n Facets Added
+=	TokenNamePLUS_EQUAL	
facetList	TokenNameIdentifier	 facet List
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// commit changes. 	TokenNameCOMMENT_LINE	commit changes. 
// we commit changes to the taxonomy index prior to committing them to the search index. 	TokenNameCOMMENT_LINE	we commit changes to the taxonomy index prior to committing them to the search index. 
// this is important, so that all facets referred to by documents in the search index 	TokenNameCOMMENT_LINE	this is important, so that all facets referred to by documents in the search index 
// will indeed exist in the taxonomy index. 	TokenNameCOMMENT_LINE	will indeed exist in the taxonomy index. 
taxo	TokenNameIdentifier	 taxo
.	TokenNameDOT	
commit	TokenNameIdentifier	 commit
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
iw	TokenNameIdentifier	 iw
.	TokenNameDOT	
commit	TokenNameIdentifier	 commit
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// close the taxonomy index and the index - all modifications are 	TokenNameCOMMENT_LINE	close the taxonomy index and the index - all modifications are 
// now safely in the provided directories: indexDir and taxoDir. 	TokenNameCOMMENT_LINE	now safely in the provided directories: indexDir and taxoDir. 
taxo	TokenNameIdentifier	 taxo
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
iw	TokenNameIdentifier	 iw
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ExampleUtils	TokenNameIdentifier	 Example Utils
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Indexed "	TokenNameStringLiteral	Indexed 
+	TokenNamePLUS	
nDocsAdded	TokenNameIdentifier	 n Docs Added
+	TokenNamePLUS	
" documents with overall "	TokenNameStringLiteral	 documents with overall 
+	TokenNamePLUS	
nFacetsAdded	TokenNameIdentifier	 n Facets Added
+	TokenNamePLUS	
" facets."	TokenNameStringLiteral	 facets.
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
