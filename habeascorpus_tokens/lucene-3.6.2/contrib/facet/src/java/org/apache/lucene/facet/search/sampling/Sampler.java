package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
search	TokenNameIdentifier	 search
.	TokenNameDOT	
sampling	TokenNameIdentifier	 sampling
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
IOException	TokenNameIdentifier	 IO Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
IndexReader	TokenNameIdentifier	 Index Reader
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
search	TokenNameIdentifier	 search
.	TokenNameDOT	
CategoryListIterator	TokenNameIdentifier	 Category List Iterator
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
search	TokenNameIdentifier	 search
.	TokenNameDOT	
FacetArrays	TokenNameIdentifier	 Facet Arrays
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
search	TokenNameIdentifier	 search
.	TokenNameDOT	
ScoredDocIDs	TokenNameIdentifier	 Scored Doc I Ds
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
search	TokenNameIdentifier	 search
.	TokenNameDOT	
aggregator	TokenNameIdentifier	 aggregator
.	TokenNameDOT	
Aggregator	TokenNameIdentifier	 Aggregator
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
search	TokenNameIdentifier	 search
.	TokenNameDOT	
params	TokenNameIdentifier	 params
.	TokenNameDOT	
FacetRequest	TokenNameIdentifier	 Facet Request
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
search	TokenNameIdentifier	 search
.	TokenNameDOT	
params	TokenNameIdentifier	 params
.	TokenNameDOT	
FacetSearchParams	TokenNameIdentifier	 Facet Search Params
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
search	TokenNameIdentifier	 search
.	TokenNameDOT	
results	TokenNameIdentifier	 results
.	TokenNameDOT	
FacetResult	TokenNameIdentifier	 Facet Result
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
search	TokenNameIdentifier	 search
.	TokenNameDOT	
results	TokenNameIdentifier	 results
.	TokenNameDOT	
FacetResultNode	TokenNameIdentifier	 Facet Result Node
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
search	TokenNameIdentifier	 search
.	TokenNameDOT	
results	TokenNameIdentifier	 results
.	TokenNameDOT	
MutableFacetResultNode	TokenNameIdentifier	 Mutable Facet Result Node
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
taxonomy	TokenNameIdentifier	 taxonomy
.	TokenNameDOT	
TaxonomyReader	TokenNameIdentifier	 Taxonomy Reader
;	TokenNameSEMICOLON	
/** * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the "License"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */	TokenNameCOMMENT_JAVADOC	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
/** * Sampling definition for facets accumulation * <p> * The Sampler uses TAKMI style counting to provide a 'best guess' top-K result * set of the facets accumulated. * <p> * Note: Sampling accumulation (Accumulation over a sampled-set of the results), * does not guarantee accurate values for * {@link FacetResult#getNumValidDescendants()} & * {@link FacetResultNode#getResidue()}. * * @lucene.experimental */	TokenNameCOMMENT_JAVADOC	 Sampling definition for facets accumulation <p> The Sampler uses TAKMI style counting to provide a 'best guess' top-K result set of the facets accumulated. <p> Note: Sampling accumulation (Accumulation over a sampled-set of the results), does not guarantee accurate values for {@link FacetResult#getNumValidDescendants()} & {@link FacetResultNode#getResidue()}. * @lucene.experimental 
public	TokenNamepublic	
abstract	TokenNameabstract	
class	TokenNameclass	
Sampler	TokenNameIdentifier	 Sampler
{	TokenNameLBRACE	
protected	TokenNameprotected	
final	TokenNamefinal	
SamplingParams	TokenNameIdentifier	 Sampling Params
samplingParams	TokenNameIdentifier	 sampling Params
;	TokenNameSEMICOLON	
/** * Construct with {@link SamplingParams} */	TokenNameCOMMENT_JAVADOC	 Construct with {@link SamplingParams} 
public	TokenNamepublic	
Sampler	TokenNameIdentifier	 Sampler
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
(	TokenNameLPAREN	
new	TokenNamenew	
SamplingParams	TokenNameIdentifier	 Sampling Params
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Construct with certain {@link SamplingParams} * @param params sampling params in effect * @throws IllegalArgumentException if the provided SamplingParams are not valid */	TokenNameCOMMENT_JAVADOC	 Construct with certain {@link SamplingParams} @param params sampling params in effect @throws IllegalArgumentException if the provided SamplingParams are not valid 
public	TokenNamepublic	
Sampler	TokenNameIdentifier	 Sampler
(	TokenNameLPAREN	
SamplingParams	TokenNameIdentifier	 Sampling Params
params	TokenNameIdentifier	 params
)	TokenNameRPAREN	
throws	TokenNamethrows	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
params	TokenNameIdentifier	 params
.	TokenNameDOT	
validate	TokenNameIdentifier	 validate
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
"The provided SamplingParams are not valid!!"	TokenNameStringLiteral	The provided SamplingParams are not valid!!
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
this	TokenNamethis	
.	TokenNameDOT	
samplingParams	TokenNameIdentifier	 sampling Params
=	TokenNameEQUAL	
params	TokenNameIdentifier	 params
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Check if this sampler would complement for the input docIds */	TokenNameCOMMENT_JAVADOC	 Check if this sampler would complement for the input docIds 
public	TokenNamepublic	
boolean	TokenNameboolean	
shouldSample	TokenNameIdentifier	 should Sample
(	TokenNameLPAREN	
ScoredDocIDs	TokenNameIdentifier	 Scored Doc I Ds
docIds	TokenNameIdentifier	 doc Ids
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
docIds	TokenNameIdentifier	 doc Ids
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
>	TokenNameGREATER	
samplingParams	TokenNameIdentifier	 sampling Params
.	TokenNameDOT	
getSamplingThreshold	TokenNameIdentifier	 get Sampling Threshold
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Compute a sample set out of the input set, based on the {@link SamplingParams#getSampleRatio()} * in effect. Sub classes can override to alter how the sample set is * computed. * <p> * If the input set is of size smaller than {@link SamplingParams#getMinSampleSize()}, * the input set is returned (no sampling takes place). * <p> * Other than that, the returned set size will not be larger than {@link SamplingParams#getMaxSampleSize()} * nor smaller than {@link SamplingParams#getMinSampleSize()}. * @param docids * full set of matching documents out of which a sample is needed. */	TokenNameCOMMENT_JAVADOC	 Compute a sample set out of the input set, based on the {@link SamplingParams#getSampleRatio()} in effect. Sub classes can override to alter how the sample set is computed. <p> If the input set is of size smaller than {@link SamplingParams#getMinSampleSize()}, the input set is returned (no sampling takes place). <p> Other than that, the returned set size will not be larger than {@link SamplingParams#getMaxSampleSize()} nor smaller than {@link SamplingParams#getMinSampleSize()}. @param docids full set of matching documents out of which a sample is needed. 
public	TokenNamepublic	
SampleResult	TokenNameIdentifier	 Sample Result
getSampleSet	TokenNameIdentifier	 get Sample Set
(	TokenNameLPAREN	
ScoredDocIDs	TokenNameIdentifier	 Scored Doc I Ds
docids	TokenNameIdentifier	 docids
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
shouldSample	TokenNameIdentifier	 should Sample
(	TokenNameLPAREN	
docids	TokenNameIdentifier	 docids
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
new	TokenNamenew	
SampleResult	TokenNameIdentifier	 Sample Result
(	TokenNameLPAREN	
docids	TokenNameIdentifier	 docids
,	TokenNameCOMMA	
1d	TokenNameDoubleLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
int	TokenNameint	
actualSize	TokenNameIdentifier	 actual Size
=	TokenNameEQUAL	
docids	TokenNameIdentifier	 docids
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
sampleSetSize	TokenNameIdentifier	 sample Set Size
=	TokenNameEQUAL	
(	TokenNameLPAREN	
int	TokenNameint	
)	TokenNameRPAREN	
(	TokenNameLPAREN	
actualSize	TokenNameIdentifier	 actual Size
*	TokenNameMULTIPLY	
samplingParams	TokenNameIdentifier	 sampling Params
.	TokenNameDOT	
getSampleRatio	TokenNameIdentifier	 get Sample Ratio
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
sampleSetSize	TokenNameIdentifier	 sample Set Size
=	TokenNameEQUAL	
Math	TokenNameIdentifier	 Math
.	TokenNameDOT	
max	TokenNameIdentifier	 max
(	TokenNameLPAREN	
sampleSetSize	TokenNameIdentifier	 sample Set Size
,	TokenNameCOMMA	
samplingParams	TokenNameIdentifier	 sampling Params
.	TokenNameDOT	
getMinSampleSize	TokenNameIdentifier	 get Min Sample Size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
sampleSetSize	TokenNameIdentifier	 sample Set Size
=	TokenNameEQUAL	
Math	TokenNameIdentifier	 Math
.	TokenNameDOT	
min	TokenNameIdentifier	 min
(	TokenNameLPAREN	
sampleSetSize	TokenNameIdentifier	 sample Set Size
,	TokenNameCOMMA	
samplingParams	TokenNameIdentifier	 sampling Params
.	TokenNameDOT	
getMaxSampleSize	TokenNameIdentifier	 get Max Sample Size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
createSample	TokenNameIdentifier	 create Sample
(	TokenNameLPAREN	
docids	TokenNameIdentifier	 docids
,	TokenNameCOMMA	
actualSize	TokenNameIdentifier	 actual Size
,	TokenNameCOMMA	
sampleSetSize	TokenNameIdentifier	 sample Set Size
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Create and return a sample of the input set * @param docids input set out of which a sample is to be created * @param actualSize original size of set, prior to sampling * @param sampleSetSize required size of sample set * @return sample of the input set in the required size */	TokenNameCOMMENT_JAVADOC	 Create and return a sample of the input set @param docids input set out of which a sample is to be created @param actualSize original size of set, prior to sampling @param sampleSetSize required size of sample set @return sample of the input set in the required size 
protected	TokenNameprotected	
abstract	TokenNameabstract	
SampleResult	TokenNameIdentifier	 Sample Result
createSample	TokenNameIdentifier	 create Sample
(	TokenNameLPAREN	
ScoredDocIDs	TokenNameIdentifier	 Scored Doc I Ds
docids	TokenNameIdentifier	 docids
,	TokenNameCOMMA	
int	TokenNameint	
actualSize	TokenNameIdentifier	 actual Size
,	TokenNameCOMMA	
int	TokenNameint	
sampleSetSize	TokenNameIdentifier	 sample Set Size
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
;	TokenNameSEMICOLON	
/** * Get a fixer of sample facet accumulation results. Default implementation * returns a <code>TakmiSampleFixer</code> which is adequate only for * counting. For any other accumulator, provide a different fixer. */	TokenNameCOMMENT_JAVADOC	 Get a fixer of sample facet accumulation results. Default implementation returns a <code>TakmiSampleFixer</code> which is adequate only for counting. For any other accumulator, provide a different fixer. 
public	TokenNamepublic	
SampleFixer	TokenNameIdentifier	 Sample Fixer
getSampleFixer	TokenNameIdentifier	 get Sample Fixer
(	TokenNameLPAREN	
IndexReader	TokenNameIdentifier	 Index Reader
indexReader	TokenNameIdentifier	 index Reader
,	TokenNameCOMMA	
TaxonomyReader	TokenNameIdentifier	 Taxonomy Reader
taxonomyReader	TokenNameIdentifier	 taxonomy Reader
,	TokenNameCOMMA	
FacetSearchParams	TokenNameIdentifier	 Facet Search Params
searchParams	TokenNameIdentifier	 search Params
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
new	TokenNamenew	
TakmiSampleFixer	TokenNameIdentifier	 Takmi Sample Fixer
(	TokenNameLPAREN	
indexReader	TokenNameIdentifier	 index Reader
,	TokenNameCOMMA	
taxonomyReader	TokenNameIdentifier	 taxonomy Reader
,	TokenNameCOMMA	
searchParams	TokenNameIdentifier	 search Params
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Result of sample computation */	TokenNameCOMMENT_JAVADOC	 Result of sample computation 
public	TokenNamepublic	
final	TokenNamefinal	
static	TokenNamestatic	
class	TokenNameclass	
SampleResult	TokenNameIdentifier	 Sample Result
{	TokenNameLBRACE	
public	TokenNamepublic	
final	TokenNamefinal	
ScoredDocIDs	TokenNameIdentifier	 Scored Doc I Ds
docids	TokenNameIdentifier	 docids
;	TokenNameSEMICOLON	
public	TokenNamepublic	
final	TokenNamefinal	
double	TokenNamedouble	
actualSampleRatio	TokenNameIdentifier	 actual Sample Ratio
;	TokenNameSEMICOLON	
protected	TokenNameprotected	
SampleResult	TokenNameIdentifier	 Sample Result
(	TokenNameLPAREN	
ScoredDocIDs	TokenNameIdentifier	 Scored Doc I Ds
docids	TokenNameIdentifier	 docids
,	TokenNameCOMMA	
double	TokenNamedouble	
actualSampleRatio	TokenNameIdentifier	 actual Sample Ratio
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
docids	TokenNameIdentifier	 docids
=	TokenNameEQUAL	
docids	TokenNameIdentifier	 docids
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
actualSampleRatio	TokenNameIdentifier	 actual Sample Ratio
=	TokenNameEQUAL	
actualSampleRatio	TokenNameIdentifier	 actual Sample Ratio
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Return the sampling params in effect */	TokenNameCOMMENT_JAVADOC	 Return the sampling params in effect 
public	TokenNamepublic	
final	TokenNamefinal	
SamplingParams	TokenNameIdentifier	 Sampling Params
getSamplingParams	TokenNameIdentifier	 get Sampling Params
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
samplingParams	TokenNameIdentifier	 sampling Params
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Trim the input facet result.<br> * Note: It is only valid to call this method with result obtained for a * facet request created through {@link #overSampledSearchParams(FacetSearchParams)}. * * @throws IllegalArgumentException * if called with results not obtained for requests created * through {@link #overSampledSearchParams(FacetSearchParams)} */	TokenNameCOMMENT_JAVADOC	 Trim the input facet result.<br> Note: It is only valid to call this method with result obtained for a facet request created through {@link #overSampledSearchParams(FacetSearchParams)}. * @throws IllegalArgumentException if called with results not obtained for requests created through {@link #overSampledSearchParams(FacetSearchParams)} 
public	TokenNamepublic	
FacetResult	TokenNameIdentifier	 Facet Result
trimResult	TokenNameIdentifier	 trim Result
(	TokenNameLPAREN	
FacetResult	TokenNameIdentifier	 Facet Result
facetResult	TokenNameIdentifier	 facet Result
)	TokenNameRPAREN	
throws	TokenNamethrows	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
{	TokenNameLBRACE	
double	TokenNamedouble	
overSampleFactor	TokenNameIdentifier	 over Sample Factor
=	TokenNameEQUAL	
getSamplingParams	TokenNameIdentifier	 get Sampling Params
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getOversampleFactor	TokenNameIdentifier	 get Oversample Factor
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
overSampleFactor	TokenNameIdentifier	 over Sample Factor
<=	TokenNameLESS_EQUAL	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// no factoring done? 	TokenNameCOMMENT_LINE	no factoring done? 
return	TokenNamereturn	
facetResult	TokenNameIdentifier	 facet Result
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
OverSampledFacetRequest	TokenNameIdentifier	 Over Sampled Facet Request
sampledFreq	TokenNameIdentifier	 sampled Freq
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
sampledFreq	TokenNameIdentifier	 sampled Freq
=	TokenNameEQUAL	
(	TokenNameLPAREN	
OverSampledFacetRequest	TokenNameIdentifier	 Over Sampled Facet Request
)	TokenNameRPAREN	
facetResult	TokenNameIdentifier	 facet Result
.	TokenNameDOT	
getFacetRequest	TokenNameIdentifier	 get Facet Request
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
ClassCastException	TokenNameIdentifier	 Class Cast Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
"It is only valid to call this method with result obtained for a"	TokenNameStringLiteral	It is only valid to call this method with result obtained for a
+	TokenNamePLUS	
"facet request created through sampler.overSamlpingSearchParams()"	TokenNameStringLiteral	facet request created through sampler.overSamlpingSearchParams()
,	TokenNameCOMMA	
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
FacetRequest	TokenNameIdentifier	 Facet Request
origFrq	TokenNameIdentifier	 orig Frq
=	TokenNameEQUAL	
sampledFreq	TokenNameIdentifier	 sampled Freq
.	TokenNameDOT	
orig	TokenNameIdentifier	 orig
;	TokenNameSEMICOLON	
MutableFacetResultNode	TokenNameIdentifier	 Mutable Facet Result Node
trimmedRootNode	TokenNameIdentifier	 trimmed Root Node
=	TokenNameEQUAL	
MutableFacetResultNode	TokenNameIdentifier	 Mutable Facet Result Node
.	TokenNameDOT	
toImpl	TokenNameIdentifier	 to Impl
(	TokenNameLPAREN	
facetResult	TokenNameIdentifier	 facet Result
.	TokenNameDOT	
getFacetResultNode	TokenNameIdentifier	 get Facet Result Node
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
trimmedRootNode	TokenNameIdentifier	 trimmed Root Node
.	TokenNameDOT	
trimSubResults	TokenNameIdentifier	 trim Sub Results
(	TokenNameLPAREN	
origFrq	TokenNameIdentifier	 orig Frq
.	TokenNameDOT	
getNumResults	TokenNameIdentifier	 get Num Results
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
new	TokenNamenew	
FacetResult	TokenNameIdentifier	 Facet Result
(	TokenNameLPAREN	
origFrq	TokenNameIdentifier	 orig Frq
,	TokenNameCOMMA	
trimmedRootNode	TokenNameIdentifier	 trimmed Root Node
,	TokenNameCOMMA	
facetResult	TokenNameIdentifier	 facet Result
.	TokenNameDOT	
getNumValidDescendants	TokenNameIdentifier	 get Num Valid Descendants
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Over-sampled search params, wrapping each request with an over-sampled one. */	TokenNameCOMMENT_JAVADOC	 Over-sampled search params, wrapping each request with an over-sampled one. 
public	TokenNamepublic	
FacetSearchParams	TokenNameIdentifier	 Facet Search Params
overSampledSearchParams	TokenNameIdentifier	 over Sampled Search Params
(	TokenNameLPAREN	
FacetSearchParams	TokenNameIdentifier	 Facet Search Params
original	TokenNameIdentifier	 original
)	TokenNameRPAREN	
{	TokenNameLBRACE	
FacetSearchParams	TokenNameIdentifier	 Facet Search Params
res	TokenNameIdentifier	 res
=	TokenNameEQUAL	
original	TokenNameIdentifier	 original
;	TokenNameSEMICOLON	
// So now we can sample -> altering the searchParams to accommodate for the statistical error for the sampling 	TokenNameCOMMENT_LINE	So now we can sample -> altering the searchParams to accommodate for the statistical error for the sampling 
double	TokenNamedouble	
overSampleFactor	TokenNameIdentifier	 over Sample Factor
=	TokenNameEQUAL	
getSamplingParams	TokenNameIdentifier	 get Sampling Params
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getOversampleFactor	TokenNameIdentifier	 get Oversample Factor
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
overSampleFactor	TokenNameIdentifier	 over Sample Factor
>	TokenNameGREATER	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// any factoring to do? 	TokenNameCOMMENT_LINE	any factoring to do? 
res	TokenNameIdentifier	 res
=	TokenNameEQUAL	
new	TokenNamenew	
FacetSearchParams	TokenNameIdentifier	 Facet Search Params
(	TokenNameLPAREN	
original	TokenNameIdentifier	 original
.	TokenNameDOT	
getFacetIndexingParams	TokenNameIdentifier	 get Facet Indexing Params
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
FacetRequest	TokenNameIdentifier	 Facet Request
frq	TokenNameIdentifier	 frq
:	TokenNameCOLON	
original	TokenNameIdentifier	 original
.	TokenNameDOT	
getFacetRequests	TokenNameIdentifier	 get Facet Requests
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
int	TokenNameint	
overSampledNumResults	TokenNameIdentifier	 over Sampled Num Results
=	TokenNameEQUAL	
(	TokenNameLPAREN	
int	TokenNameint	
)	TokenNameRPAREN	
Math	TokenNameIdentifier	 Math
.	TokenNameDOT	
ceil	TokenNameIdentifier	 ceil
(	TokenNameLPAREN	
frq	TokenNameIdentifier	 frq
.	TokenNameDOT	
getNumResults	TokenNameIdentifier	 get Num Results
(	TokenNameLPAREN	
)	TokenNameRPAREN	
*	TokenNameMULTIPLY	
overSampleFactor	TokenNameIdentifier	 over Sample Factor
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
res	TokenNameIdentifier	 res
.	TokenNameDOT	
addFacetRequest	TokenNameIdentifier	 add Facet Request
(	TokenNameLPAREN	
new	TokenNamenew	
OverSampledFacetRequest	TokenNameIdentifier	 Over Sampled Facet Request
(	TokenNameLPAREN	
frq	TokenNameIdentifier	 frq
,	TokenNameCOMMA	
overSampledNumResults	TokenNameIdentifier	 over Sampled Num Results
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
res	TokenNameIdentifier	 res
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Wrapping a facet request for over sampling. * Implementation detail: even if the original request is a count request, no * statistics will be computed for it as the wrapping is not a count request. * This is ok, as the sampling accumulator is later computing the statistics * over the original requests. */	TokenNameCOMMENT_JAVADOC	 Wrapping a facet request for over sampling. Implementation detail: even if the original request is a count request, no statistics will be computed for it as the wrapping is not a count request. This is ok, as the sampling accumulator is later computing the statistics over the original requests. 
private	TokenNameprivate	
static	TokenNamestatic	
class	TokenNameclass	
OverSampledFacetRequest	TokenNameIdentifier	 Over Sampled Facet Request
extends	TokenNameextends	
FacetRequest	TokenNameIdentifier	 Facet Request
{	TokenNameLBRACE	
final	TokenNamefinal	
FacetRequest	TokenNameIdentifier	 Facet Request
orig	TokenNameIdentifier	 orig
;	TokenNameSEMICOLON	
public	TokenNamepublic	
OverSampledFacetRequest	TokenNameIdentifier	 Over Sampled Facet Request
(	TokenNameLPAREN	
FacetRequest	TokenNameIdentifier	 Facet Request
orig	TokenNameIdentifier	 orig
,	TokenNameCOMMA	
int	TokenNameint	
num	TokenNameIdentifier	 num
)	TokenNameRPAREN	
{	TokenNameLBRACE	
super	TokenNamesuper	
(	TokenNameLPAREN	
orig	TokenNameIdentifier	 orig
.	TokenNameDOT	
getCategoryPath	TokenNameIdentifier	 get Category Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
num	TokenNameIdentifier	 num
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
orig	TokenNameIdentifier	 orig
=	TokenNameEQUAL	
orig	TokenNameIdentifier	 orig
;	TokenNameSEMICOLON	
setDepth	TokenNameIdentifier	 set Depth
(	TokenNameLPAREN	
orig	TokenNameIdentifier	 orig
.	TokenNameDOT	
getDepth	TokenNameIdentifier	 get Depth
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
setNumLabel	TokenNameIdentifier	 set Num Label
(	TokenNameLPAREN	
orig	TokenNameIdentifier	 orig
.	TokenNameDOT	
getNumLabel	TokenNameIdentifier	 get Num Label
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
setResultMode	TokenNameIdentifier	 set Result Mode
(	TokenNameLPAREN	
orig	TokenNameIdentifier	 orig
.	TokenNameDOT	
getResultMode	TokenNameIdentifier	 get Result Mode
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
setSortBy	TokenNameIdentifier	 set Sort By
(	TokenNameLPAREN	
orig	TokenNameIdentifier	 orig
.	TokenNameDOT	
getSortBy	TokenNameIdentifier	 get Sort By
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
setSortOrder	TokenNameIdentifier	 set Sort Order
(	TokenNameLPAREN	
orig	TokenNameIdentifier	 orig
.	TokenNameDOT	
getSortOrder	TokenNameIdentifier	 get Sort Order
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
CategoryListIterator	TokenNameIdentifier	 Category List Iterator
createCategoryListIterator	TokenNameIdentifier	 create Category List Iterator
(	TokenNameLPAREN	
IndexReader	TokenNameIdentifier	 Index Reader
reader	TokenNameIdentifier	 reader
,	TokenNameCOMMA	
TaxonomyReader	TokenNameIdentifier	 Taxonomy Reader
taxo	TokenNameIdentifier	 taxo
,	TokenNameCOMMA	
FacetSearchParams	TokenNameIdentifier	 Facet Search Params
sParams	TokenNameIdentifier	 s Params
,	TokenNameCOMMA	
int	TokenNameint	
partition	TokenNameIdentifier	 partition
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
return	TokenNamereturn	
orig	TokenNameIdentifier	 orig
.	TokenNameDOT	
createCategoryListIterator	TokenNameIdentifier	 create Category List Iterator
(	TokenNameLPAREN	
reader	TokenNameIdentifier	 reader
,	TokenNameCOMMA	
taxo	TokenNameIdentifier	 taxo
,	TokenNameCOMMA	
sParams	TokenNameIdentifier	 s Params
,	TokenNameCOMMA	
partition	TokenNameIdentifier	 partition
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
Aggregator	TokenNameIdentifier	 Aggregator
createAggregator	TokenNameIdentifier	 create Aggregator
(	TokenNameLPAREN	
boolean	TokenNameboolean	
useComplements	TokenNameIdentifier	 use Complements
,	TokenNameCOMMA	
FacetArrays	TokenNameIdentifier	 Facet Arrays
arrays	TokenNameIdentifier	 arrays
,	TokenNameCOMMA	
IndexReader	TokenNameIdentifier	 Index Reader
indexReader	TokenNameIdentifier	 index Reader
,	TokenNameCOMMA	
TaxonomyReader	TokenNameIdentifier	 Taxonomy Reader
taxonomy	TokenNameIdentifier	 taxonomy
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
return	TokenNamereturn	
orig	TokenNameIdentifier	 orig
.	TokenNameDOT	
createAggregator	TokenNameIdentifier	 create Aggregator
(	TokenNameLPAREN	
useComplements	TokenNameIdentifier	 use Complements
,	TokenNameCOMMA	
arrays	TokenNameIdentifier	 arrays
,	TokenNameCOMMA	
indexReader	TokenNameIdentifier	 index Reader
,	TokenNameCOMMA	
taxonomy	TokenNameIdentifier	 taxonomy
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
double	TokenNamedouble	
getValueOf	TokenNameIdentifier	 get Value Of
(	TokenNameLPAREN	
FacetArrays	TokenNameIdentifier	 Facet Arrays
arrays	TokenNameIdentifier	 arrays
,	TokenNameCOMMA	
int	TokenNameint	
idx	TokenNameIdentifier	 idx
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
orig	TokenNameIdentifier	 orig
.	TokenNameDOT	
getValueOf	TokenNameIdentifier	 get Value Of
(	TokenNameLPAREN	
arrays	TokenNameIdentifier	 arrays
,	TokenNameCOMMA	
idx	TokenNameIdentifier	 idx
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
boolean	TokenNameboolean	
requireDocumentScore	TokenNameIdentifier	 require Document Score
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
orig	TokenNameIdentifier	 orig
.	TokenNameDOT	
requireDocumentScore	TokenNameIdentifier	 require Document Score
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
boolean	TokenNameboolean	
supportsComplements	TokenNameIdentifier	 supports Complements
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
orig	TokenNameIdentifier	 orig
.	TokenNameDOT	
supportsComplements	TokenNameIdentifier	 supports Complements
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
