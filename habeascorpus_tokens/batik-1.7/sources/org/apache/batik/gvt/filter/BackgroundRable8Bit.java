/* Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
gvt	TokenNameIdentifier	 gvt
.	TokenNameDOT	
filter	TokenNameIdentifier	 filter
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
Shape	TokenNameIdentifier	 Shape
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
geom	TokenNameIdentifier	 geom
.	TokenNameDOT	
AffineTransform	TokenNameIdentifier	 Affine Transform
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
geom	TokenNameIdentifier	 geom
.	TokenNameDOT	
NoninvertibleTransformException	TokenNameIdentifier	 Noninvertible Transform Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
geom	TokenNameIdentifier	 geom
.	TokenNameDOT	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
RenderedImage	TokenNameIdentifier	 Rendered Image
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
renderable	TokenNameIdentifier	 renderable
.	TokenNameDOT	
RenderContext	TokenNameIdentifier	 Render Context
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Iterator	TokenNameIdentifier	 Iterator
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
List	TokenNameIdentifier	 List
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ArrayList	TokenNameIdentifier	 Array List
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
CompositeRule	TokenNameIdentifier	 Composite Rule
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
PadMode	TokenNameIdentifier	 Pad Mode
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
renderable	TokenNameIdentifier	 renderable
.	TokenNameDOT	
AbstractRable	TokenNameIdentifier	 Abstract Rable
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
renderable	TokenNameIdentifier	 renderable
.	TokenNameDOT	
AffineRable8Bit	TokenNameIdentifier	 Affine Rable8 Bit
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
renderable	TokenNameIdentifier	 renderable
.	TokenNameDOT	
CompositeRable8Bit	TokenNameIdentifier	 Composite Rable8 Bit
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
renderable	TokenNameIdentifier	 renderable
.	TokenNameDOT	
Filter	TokenNameIdentifier	 Filter
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
renderable	TokenNameIdentifier	 renderable
.	TokenNameDOT	
PadRable8Bit	TokenNameIdentifier	 Pad Rable8 Bit
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
gvt	TokenNameIdentifier	 gvt
.	TokenNameDOT	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
gvt	TokenNameIdentifier	 gvt
.	TokenNameDOT	
GraphicsNode	TokenNameIdentifier	 Graphics Node
;	TokenNameSEMICOLON	
/** * This implementation of RenderableImage will render its input * GraphicsNode into a BufferedImage upon invokation of one of its * createRendering methods. * * @author <a href="mailto:vincent.hardy@eng.sun.com">Vincent Hardy</a> * @version $Id: BackgroundRable8Bit.java 479559 2006-11-27 09:46:16Z dvholten $ */	TokenNameCOMMENT_JAVADOC	 This implementation of RenderableImage will render its input GraphicsNode into a BufferedImage upon invokation of one of its createRendering methods. * @author <a href="mailto:vincent.hardy@eng.sun.com">Vincent Hardy</a> @version $Id: BackgroundRable8Bit.java 479559 2006-11-27 09:46:16Z dvholten $ 
public	TokenNamepublic	
class	TokenNameclass	
BackgroundRable8Bit	TokenNameIdentifier	 Background Rable8 Bit
extends	TokenNameextends	
AbstractRable	TokenNameIdentifier	 Abstract Rable
{	TokenNameLBRACE	
/** * GraphicsNode this image can render */	TokenNameCOMMENT_JAVADOC	 GraphicsNode this image can render 
private	TokenNameprivate	
GraphicsNode	TokenNameIdentifier	 Graphics Node
node	TokenNameIdentifier	 node
;	TokenNameSEMICOLON	
/** * Returns the <tt>GraphicsNode</tt> rendered by this image */	TokenNameCOMMENT_JAVADOC	 Returns the <tt>GraphicsNode</tt> rendered by this image 
public	TokenNamepublic	
GraphicsNode	TokenNameIdentifier	 Graphics Node
getGraphicsNode	TokenNameIdentifier	 get Graphics Node
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
node	TokenNameIdentifier	 node
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Sets the <tt>GraphicsNode</tt> this image should render */	TokenNameCOMMENT_JAVADOC	 Sets the <tt>GraphicsNode</tt> this image should render 
public	TokenNamepublic	
void	TokenNamevoid	
setGraphicsNode	TokenNameIdentifier	 set Graphics Node
(	TokenNameLPAREN	
GraphicsNode	TokenNameIdentifier	 Graphics Node
node	TokenNameIdentifier	 node
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
node	TokenNameIdentifier	 node
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
this	TokenNamethis	
.	TokenNameDOT	
node	TokenNameIdentifier	 node
=	TokenNameEQUAL	
node	TokenNameIdentifier	 node
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * @param node The GraphicsNode this image should represent */	TokenNameCOMMENT_JAVADOC	 @param node The GraphicsNode this image should represent 
public	TokenNamepublic	
BackgroundRable8Bit	TokenNameIdentifier	 Background Rable8 Bit
(	TokenNameLPAREN	
GraphicsNode	TokenNameIdentifier	 Graphics Node
node	TokenNameIdentifier	 node
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
node	TokenNameIdentifier	 node
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
node	TokenNameIdentifier	 node
=	TokenNameEQUAL	
node	TokenNameIdentifier	 node
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// This is a utilitiy method that unions the bounds of 	TokenNameCOMMENT_LINE	This is a utilitiy method that unions the bounds of 
// cgn upto child (if child is null it does all children). 	TokenNameCOMMENT_LINE	cgn upto child (if child is null it does all children). 
// It unions them with init if provided. 	TokenNameCOMMENT_LINE	It unions them with init if provided. 
static	TokenNamestatic	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
addBounds	TokenNameIdentifier	 add Bounds
(	TokenNameLPAREN	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
cgn	TokenNameIdentifier	 cgn
,	TokenNameCOMMA	
GraphicsNode	TokenNameIdentifier	 Graphics Node
child	TokenNameIdentifier	 child
,	TokenNameCOMMA	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
init	TokenNameIdentifier	 init
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// System.out.println("CGN: " + cgn); 	TokenNameCOMMENT_LINE	System.out.println("CGN: " + cgn); 
// System.out.println("Child: " + child); 	TokenNameCOMMENT_LINE	System.out.println("Child: " + child); 
List	TokenNameIdentifier	 List
children	TokenNameIdentifier	 children
=	TokenNameEQUAL	
cgn	TokenNameIdentifier	 cgn
.	TokenNameDOT	
getChildren	TokenNameIdentifier	 get Children
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Iterator	TokenNameIdentifier	 Iterator
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
children	TokenNameIdentifier	 children
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
GraphicsNode	TokenNameIdentifier	 Graphics Node
gn	TokenNameIdentifier	 gn
=	TokenNameEQUAL	
(	TokenNameLPAREN	
GraphicsNode	TokenNameIdentifier	 Graphics Node
)	TokenNameRPAREN	
i	TokenNameIdentifier	 i
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
gn	TokenNameIdentifier	 gn
==	TokenNameEQUAL_EQUAL	
child	TokenNameIdentifier	 child
)	TokenNameRPAREN	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
// System.out.println("GN: " + gn); 	TokenNameCOMMENT_LINE	System.out.println("GN: " + gn); 
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
cr2d	TokenNameIdentifier	 cr2d
=	TokenNameEQUAL	
gn	TokenNameIdentifier	 gn
.	TokenNameDOT	
getBounds	TokenNameIdentifier	 get Bounds
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
AffineTransform	TokenNameIdentifier	 Affine Transform
at	TokenNameIdentifier	 at
=	TokenNameEQUAL	
gn	TokenNameIdentifier	 gn
.	TokenNameDOT	
getTransform	TokenNameIdentifier	 get Transform
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
at	TokenNameIdentifier	 at
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
cr2d	TokenNameIdentifier	 cr2d
=	TokenNameEQUAL	
at	TokenNameIdentifier	 at
.	TokenNameDOT	
createTransformedShape	TokenNameIdentifier	 create Transformed Shape
(	TokenNameLPAREN	
cr2d	TokenNameIdentifier	 cr2d
)	TokenNameRPAREN	
.	TokenNameDOT	
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
r2d	TokenNameIdentifier	 r2d
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
)	TokenNameRPAREN	
cr2d	TokenNameIdentifier	 cr2d
.	TokenNameDOT	
clone	TokenNameIdentifier	 clone
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
else	TokenNameelse	
r2d	TokenNameIdentifier	 r2d
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
cr2d	TokenNameIdentifier	 cr2d
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
r2d	TokenNameIdentifier	 r2d
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
init	TokenNameIdentifier	 init
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
.	TokenNameDOT	
VIEWPORT	TokenNameIdentifier	 VIEWPORT
;	TokenNameSEMICOLON	
return	TokenNamereturn	
init	TokenNameIdentifier	 init
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
init	TokenNameIdentifier	 init
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
r2d	TokenNameIdentifier	 r2d
;	TokenNameSEMICOLON	
init	TokenNameIdentifier	 init
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
r2d	TokenNameIdentifier	 r2d
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
init	TokenNameIdentifier	 init
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
static	TokenNamestatic	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
getViewportBounds	TokenNameIdentifier	 get Viewport Bounds
(	TokenNameLPAREN	
GraphicsNode	TokenNameIdentifier	 Graphics Node
gn	TokenNameIdentifier	 gn
,	TokenNameCOMMA	
GraphicsNode	TokenNameIdentifier	 Graphics Node
child	TokenNameIdentifier	 child
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// See if background is enabled. 	TokenNameCOMMENT_LINE	See if background is enabled. 
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
gn	TokenNameIdentifier	 gn
instanceof	TokenNameinstanceof	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
)	TokenNameRPAREN	
{	TokenNameLBRACE	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
cgn	TokenNameIdentifier	 cgn
=	TokenNameEQUAL	
(	TokenNameLPAREN	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
)	TokenNameRPAREN	
gn	TokenNameIdentifier	 gn
;	TokenNameSEMICOLON	
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
cgn	TokenNameIdentifier	 cgn
.	TokenNameDOT	
getBackgroundEnable	TokenNameIdentifier	 get Background Enable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
r2d	TokenNameIdentifier	 r2d
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
// No background enable so check our parent's value. 	TokenNameCOMMENT_LINE	No background enable so check our parent's value. 
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
getViewportBounds	TokenNameIdentifier	 get Viewport Bounds
(	TokenNameLPAREN	
gn	TokenNameIdentifier	 gn
.	TokenNameDOT	
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
gn	TokenNameIdentifier	 gn
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// No background for any ancester (error) return null 	TokenNameCOMMENT_LINE	No background for any ancester (error) return null 
if	TokenNameif	
(	TokenNameLPAREN	
r2d	TokenNameIdentifier	 r2d
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
// Background enabled is set, but it has no fixed bounds set. 	TokenNameCOMMENT_LINE	Background enabled is set, but it has no fixed bounds set. 
if	TokenNameif	
(	TokenNameLPAREN	
r2d	TokenNameIdentifier	 r2d
==	TokenNameEQUAL_EQUAL	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
.	TokenNameDOT	
VIEWPORT	TokenNameIdentifier	 VIEWPORT
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// If we don't have a child then just use our bounds. 	TokenNameCOMMENT_LINE	If we don't have a child then just use our bounds. 
if	TokenNameif	
(	TokenNameLPAREN	
child	TokenNameIdentifier	 child
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
(	TokenNameLPAREN	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
)	TokenNameRPAREN	
gn	TokenNameIdentifier	 gn
.	TokenNameDOT	
getPrimitiveBounds	TokenNameIdentifier	 get Primitive Bounds
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
clone	TokenNameIdentifier	 clone
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// gn must be composite so add all it's children's bounds 	TokenNameCOMMENT_LINE	gn must be composite so add all it's children's bounds 
// up to child. 	TokenNameCOMMENT_LINE	up to child. 
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
cgn	TokenNameIdentifier	 cgn
=	TokenNameEQUAL	
(	TokenNameLPAREN	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
)	TokenNameRPAREN	
gn	TokenNameIdentifier	 gn
;	TokenNameSEMICOLON	
return	TokenNamereturn	
addBounds	TokenNameIdentifier	 add Bounds
(	TokenNameLPAREN	
cgn	TokenNameIdentifier	 cgn
,	TokenNameCOMMA	
child	TokenNameIdentifier	 child
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// We have a partial bound from parent, so map it to gn's 	TokenNameCOMMENT_LINE	We have a partial bound from parent, so map it to gn's 
// coordinate system... 	TokenNameCOMMENT_LINE	coordinate system... 
AffineTransform	TokenNameIdentifier	 Affine Transform
at	TokenNameIdentifier	 at
=	TokenNameEQUAL	
gn	TokenNameIdentifier	 gn
.	TokenNameDOT	
getTransform	TokenNameIdentifier	 get Transform
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
at	TokenNameIdentifier	 at
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
at	TokenNameIdentifier	 at
=	TokenNameEQUAL	
at	TokenNameIdentifier	 at
.	TokenNameDOT	
createInverse	TokenNameIdentifier	 create Inverse
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
at	TokenNameIdentifier	 at
.	TokenNameDOT	
createTransformedShape	TokenNameIdentifier	 create Transformed Shape
(	TokenNameLPAREN	
r2d	TokenNameIdentifier	 r2d
)	TokenNameRPAREN	
.	TokenNameDOT	
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
NoninvertibleTransformException	TokenNameIdentifier	 Noninvertible Transform Exception
nte	TokenNameIdentifier	 nte
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Degenerate case return null; 	TokenNameCOMMENT_LINE	Degenerate case return null; 
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
child	TokenNameIdentifier	 child
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Add our childrens bounds to it... 	TokenNameCOMMENT_LINE	Add our childrens bounds to it... 
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
cgn	TokenNameIdentifier	 cgn
=	TokenNameEQUAL	
(	TokenNameLPAREN	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
)	TokenNameRPAREN	
gn	TokenNameIdentifier	 gn
;	TokenNameSEMICOLON	
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
addBounds	TokenNameIdentifier	 add Bounds
(	TokenNameLPAREN	
cgn	TokenNameIdentifier	 cgn
,	TokenNameCOMMA	
child	TokenNameIdentifier	 child
,	TokenNameCOMMA	
r2d	TokenNameIdentifier	 r2d
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
gnb	TokenNameIdentifier	 gnb
=	TokenNameEQUAL	
gn	TokenNameIdentifier	 gn
.	TokenNameDOT	
getPrimitiveBounds	TokenNameIdentifier	 get Primitive Bounds
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
gnb	TokenNameIdentifier	 gnb
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
r2d	TokenNameIdentifier	 r2d
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
gnb	TokenNameIdentifier	 gnb
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
r2d	TokenNameIdentifier	 r2d
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// This does the leg work for getBounds(). 	TokenNameCOMMENT_LINE	This does the leg work for getBounds(). 
// It traverses the tree figuring out the bounds of the 	TokenNameCOMMENT_LINE	It traverses the tree figuring out the bounds of the 
// background image. 	TokenNameCOMMENT_LINE	background image. 
static	TokenNamestatic	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
getBoundsRecursive	TokenNameIdentifier	 get Bounds Recursive
(	TokenNameLPAREN	
GraphicsNode	TokenNameIdentifier	 Graphics Node
gn	TokenNameIdentifier	 gn
,	TokenNameCOMMA	
GraphicsNode	TokenNameIdentifier	 Graphics Node
child	TokenNameIdentifier	 child
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
gn	TokenNameIdentifier	 gn
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// System.out.println("Null GN Parent: " + child ); 	TokenNameCOMMENT_LINE	System.out.println("Null GN Parent: " + child ); 
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
gn	TokenNameIdentifier	 gn
instanceof	TokenNameinstanceof	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
)	TokenNameRPAREN	
{	TokenNameLBRACE	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
cgn	TokenNameIdentifier	 cgn
=	TokenNameEQUAL	
(	TokenNameLPAREN	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
)	TokenNameRPAREN	
gn	TokenNameIdentifier	 gn
;	TokenNameSEMICOLON	
// See if background is enabled. 	TokenNameCOMMENT_LINE	See if background is enabled. 
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
cgn	TokenNameIdentifier	 cgn
.	TokenNameDOT	
getBackgroundEnable	TokenNameIdentifier	 get Background Enable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// background has definite bounds so return them. 	TokenNameCOMMENT_LINE	background has definite bounds so return them. 
if	TokenNameif	
(	TokenNameLPAREN	
r2d	TokenNameIdentifier	 r2d
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
r2d	TokenNameIdentifier	 r2d
;	TokenNameSEMICOLON	
// No background enable so check our parent's value. 	TokenNameCOMMENT_LINE	No background enable so check our parent's value. 
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
getBoundsRecursive	TokenNameIdentifier	 get Bounds Recursive
(	TokenNameLPAREN	
gn	TokenNameIdentifier	 gn
.	TokenNameDOT	
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
gn	TokenNameIdentifier	 gn
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// No background for any ancester (error) return empty Rect... 	TokenNameCOMMENT_LINE	No background for any ancester (error) return empty Rect... 
if	TokenNameif	
(	TokenNameLPAREN	
r2d	TokenNameIdentifier	 r2d
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// System.out.println("Null GetBoundsRec:" + gn + "\n\t" + child); 	TokenNameCOMMENT_LINE	System.out.println("Null GetBoundsRec:" + gn + "\n\t" + child); 
return	TokenNamereturn	
new	TokenNamenew	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
.	TokenNameDOT	
Float	TokenNameIdentifier	 Float
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Our parent has background but no bounds (and we must 	TokenNameCOMMENT_LINE	Our parent has background but no bounds (and we must 
// have been the first child so build the new bounds... 	TokenNameCOMMENT_LINE	have been the first child so build the new bounds... 
if	TokenNameif	
(	TokenNameLPAREN	
r2d	TokenNameIdentifier	 r2d
==	TokenNameEQUAL_EQUAL	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
.	TokenNameDOT	
VIEWPORT	TokenNameIdentifier	 VIEWPORT
)	TokenNameRPAREN	
return	TokenNamereturn	
r2d	TokenNameIdentifier	 r2d
;	TokenNameSEMICOLON	
AffineTransform	TokenNameIdentifier	 Affine Transform
at	TokenNameIdentifier	 at
=	TokenNameEQUAL	
gn	TokenNameIdentifier	 gn
.	TokenNameDOT	
getTransform	TokenNameIdentifier	 get Transform
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
at	TokenNameIdentifier	 at
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
// background has a definite bound so map it to gn's 	TokenNameCOMMENT_LINE	background has a definite bound so map it to gn's 
// coordinate system... 	TokenNameCOMMENT_LINE	coordinate system... 
at	TokenNameIdentifier	 at
=	TokenNameEQUAL	
at	TokenNameIdentifier	 at
.	TokenNameDOT	
createInverse	TokenNameIdentifier	 create Inverse
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
at	TokenNameIdentifier	 at
.	TokenNameDOT	
createTransformedShape	TokenNameIdentifier	 create Transformed Shape
(	TokenNameLPAREN	
r2d	TokenNameIdentifier	 r2d
)	TokenNameRPAREN	
.	TokenNameDOT	
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
NoninvertibleTransformException	TokenNameIdentifier	 Noninvertible Transform Exception
nte	TokenNameIdentifier	 nte
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Degenerate case return null; 	TokenNameCOMMENT_LINE	Degenerate case return null; 
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
r2d	TokenNameIdentifier	 r2d
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the bounds of this Rable in the user coordinate system. */	TokenNameCOMMENT_JAVADOC	 Returns the bounds of this Rable in the user coordinate system. 
public	TokenNamepublic	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// System.out.println("GetBounds2D called"); 	TokenNameCOMMENT_LINE	System.out.println("GetBounds2D called"); 
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
getBoundsRecursive	TokenNameIdentifier	 get Bounds Recursive
(	TokenNameLPAREN	
node	TokenNameIdentifier	 node
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// System.out.println("BoundsRec: " + r2d); 	TokenNameCOMMENT_LINE	System.out.println("BoundsRec: " + r2d); 
if	TokenNameif	
(	TokenNameLPAREN	
r2d	TokenNameIdentifier	 r2d
==	TokenNameEQUAL_EQUAL	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
.	TokenNameDOT	
VIEWPORT	TokenNameIdentifier	 VIEWPORT
)	TokenNameRPAREN	
{	TokenNameLBRACE	
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
getViewportBounds	TokenNameIdentifier	 get Viewport Bounds
(	TokenNameLPAREN	
node	TokenNameIdentifier	 node
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// System.out.println("BoundsViewport: " + r2d); 	TokenNameCOMMENT_LINE	System.out.println("BoundsViewport: " + r2d); 
}	TokenNameRBRACE	
return	TokenNamereturn	
r2d	TokenNameIdentifier	 r2d
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns a filter that represents the background image * for <tt>child</tt>. * @param gn Node to get background image for. * @param child Child to stop at when compositing children of gn into * the background image. * @param aoi The area of interest for rendering (used to cull * nodes that don't intersect the region to render). */	TokenNameCOMMENT_JAVADOC	 Returns a filter that represents the background image for <tt>child</tt>. @param gn Node to get background image for. @param child Child to stop at when compositing children of gn into the background image. @param aoi The area of interest for rendering (used to cull nodes that don't intersect the region to render). 
public	TokenNamepublic	
Filter	TokenNameIdentifier	 Filter
getBackground	TokenNameIdentifier	 get Background
(	TokenNameLPAREN	
GraphicsNode	TokenNameIdentifier	 Graphics Node
gn	TokenNameIdentifier	 gn
,	TokenNameCOMMA	
GraphicsNode	TokenNameIdentifier	 Graphics Node
child	TokenNameIdentifier	 child
,	TokenNameCOMMA	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
aoi	TokenNameIdentifier	 aoi
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
gn	TokenNameIdentifier	 gn
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
"BackgroundImage requested yet no parent has "	TokenNameStringLiteral	BackgroundImage requested yet no parent has 
+	TokenNamePLUS	
"'enable-background:new'"	TokenNameStringLiteral	'enable-background:new'
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
gn	TokenNameIdentifier	 gn
instanceof	TokenNameinstanceof	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
)	TokenNameRPAREN	
{	TokenNameLBRACE	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
cgn	TokenNameIdentifier	 cgn
=	TokenNameEQUAL	
(	TokenNameLPAREN	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
)	TokenNameRPAREN	
gn	TokenNameIdentifier	 gn
;	TokenNameSEMICOLON	
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
cgn	TokenNameIdentifier	 cgn
.	TokenNameDOT	
getBackgroundEnable	TokenNameIdentifier	 get Background Enable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
List	TokenNameIdentifier	 List
srcs	TokenNameIdentifier	 srcs
=	TokenNameEQUAL	
new	TokenNamenew	
ArrayList	TokenNameIdentifier	 Array List
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// this hides a member in a super-class!! 	TokenNameCOMMENT_LINE	this hides a member in a super-class!! 
if	TokenNameif	
(	TokenNameLPAREN	
r2d	TokenNameIdentifier	 r2d
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
paoi	TokenNameIdentifier	 paoi
=	TokenNameEQUAL	
aoi	TokenNameIdentifier	 aoi
;	TokenNameSEMICOLON	
AffineTransform	TokenNameIdentifier	 Affine Transform
at	TokenNameIdentifier	 at
=	TokenNameEQUAL	
gn	TokenNameIdentifier	 gn
.	TokenNameDOT	
getTransform	TokenNameIdentifier	 get Transform
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
at	TokenNameIdentifier	 at
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
paoi	TokenNameIdentifier	 paoi
=	TokenNameEQUAL	
at	TokenNameIdentifier	 at
.	TokenNameDOT	
createTransformedShape	TokenNameIdentifier	 create Transformed Shape
(	TokenNameLPAREN	
aoi	TokenNameIdentifier	 aoi
)	TokenNameRPAREN	
.	TokenNameDOT	
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Filter	TokenNameIdentifier	 Filter
f	TokenNameIdentifier	 f
=	TokenNameEQUAL	
getBackground	TokenNameIdentifier	 get Background
(	TokenNameLPAREN	
gn	TokenNameIdentifier	 gn
.	TokenNameDOT	
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
gn	TokenNameIdentifier	 gn
,	TokenNameCOMMA	
paoi	TokenNameIdentifier	 paoi
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Don't add the nodes unless they will contribute. 	TokenNameCOMMENT_LINE	Don't add the nodes unless they will contribute. 
if	TokenNameif	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
f	TokenNameIdentifier	 f
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
f	TokenNameIdentifier	 f
.	TokenNameDOT	
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
intersects	TokenNameIdentifier	 intersects
(	TokenNameLPAREN	
aoi	TokenNameIdentifier	 aoi
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
srcs	TokenNameIdentifier	 srcs
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
f	TokenNameIdentifier	 f
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
child	TokenNameIdentifier	 child
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
cgn	TokenNameIdentifier	 cgn
=	TokenNameEQUAL	
(	TokenNameLPAREN	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
)	TokenNameRPAREN	
gn	TokenNameIdentifier	 gn
;	TokenNameSEMICOLON	
List	TokenNameIdentifier	 List
children	TokenNameIdentifier	 children
=	TokenNameEQUAL	
cgn	TokenNameIdentifier	 cgn
.	TokenNameDOT	
getChildren	TokenNameIdentifier	 get Children
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Iterator	TokenNameIdentifier	 Iterator
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
children	TokenNameIdentifier	 children
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
GraphicsNode	TokenNameIdentifier	 Graphics Node
childGN	TokenNameIdentifier	 child GN
=	TokenNameEQUAL	
(	TokenNameLPAREN	
GraphicsNode	TokenNameIdentifier	 Graphics Node
)	TokenNameRPAREN	
i	TokenNameIdentifier	 i
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// System.out.println("Parent: " + cgn + 	TokenNameCOMMENT_LINE	System.out.println("Parent: " + cgn + 
// "\n Child: " + child + 	TokenNameCOMMENT_LINE	"\n Child: " + child + 
// "\n ChildGN: " + childGN); 	TokenNameCOMMENT_LINE	"\n ChildGN: " + childGN); 
if	TokenNameif	
(	TokenNameLPAREN	
childGN	TokenNameIdentifier	 child GN
==	TokenNameEQUAL_EQUAL	
child	TokenNameIdentifier	 child
)	TokenNameRPAREN	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
cbounds	TokenNameIdentifier	 cbounds
=	TokenNameEQUAL	
childGN	TokenNameIdentifier	 child GN
.	TokenNameDOT	
getBounds	TokenNameIdentifier	 get Bounds
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// System.out.println("Child : " + childGN); 	TokenNameCOMMENT_LINE	System.out.println("Child : " + childGN); 
// System.out.println("Bounds: " + cbounds); 	TokenNameCOMMENT_LINE	System.out.println("Bounds: " + cbounds); 
// System.out.println(" : " + aoi); 	TokenNameCOMMENT_LINE	System.out.println(" : " + aoi); 
AffineTransform	TokenNameIdentifier	 Affine Transform
at	TokenNameIdentifier	 at
=	TokenNameEQUAL	
childGN	TokenNameIdentifier	 child GN
.	TokenNameDOT	
getTransform	TokenNameIdentifier	 get Transform
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
at	TokenNameIdentifier	 at
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
cbounds	TokenNameIdentifier	 cbounds
=	TokenNameEQUAL	
at	TokenNameIdentifier	 at
.	TokenNameDOT	
createTransformedShape	TokenNameIdentifier	 create Transformed Shape
(	TokenNameLPAREN	
cbounds	TokenNameIdentifier	 cbounds
)	TokenNameRPAREN	
.	TokenNameDOT	
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
aoi	TokenNameIdentifier	 aoi
.	TokenNameDOT	
intersects	TokenNameIdentifier	 intersects
(	TokenNameLPAREN	
cbounds	TokenNameIdentifier	 cbounds
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
srcs	TokenNameIdentifier	 srcs
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
childGN	TokenNameIdentifier	 child GN
.	TokenNameDOT	
getEnableBackgroundGraphicsNodeRable	TokenNameIdentifier	 get Enable Background Graphics Node Rable
(	TokenNameLPAREN	
true	TokenNametrue	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
srcs	TokenNameIdentifier	 srcs
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
Filter	TokenNameIdentifier	 Filter
ret	TokenNameIdentifier	 ret
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
srcs	TokenNameIdentifier	 srcs
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
ret	TokenNameIdentifier	 ret
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Filter	TokenNameIdentifier	 Filter
)	TokenNameRPAREN	
srcs	TokenNameIdentifier	 srcs
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
else	TokenNameelse	
ret	TokenNameIdentifier	 ret
=	TokenNameEQUAL	
new	TokenNamenew	
CompositeRable8Bit	TokenNameIdentifier	 Composite Rable8 Bit
(	TokenNameLPAREN	
srcs	TokenNameIdentifier	 srcs
,	TokenNameCOMMA	
CompositeRule	TokenNameIdentifier	 Composite Rule
.	TokenNameDOT	
OVER	TokenNameIdentifier	 OVER
,	TokenNameCOMMA	
false	TokenNamefalse	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
child	TokenNameIdentifier	 child
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// We are returning the filter to child so make 	TokenNameCOMMENT_LINE	We are returning the filter to child so make 
// sure to map the filter from the parents user space 	TokenNameCOMMENT_LINE	sure to map the filter from the parents user space 
// to the childs user space... 	TokenNameCOMMENT_LINE	to the childs user space... 
AffineTransform	TokenNameIdentifier	 Affine Transform
at	TokenNameIdentifier	 at
=	TokenNameEQUAL	
child	TokenNameIdentifier	 child
.	TokenNameDOT	
getTransform	TokenNameIdentifier	 get Transform
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
at	TokenNameIdentifier	 at
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
at	TokenNameIdentifier	 at
=	TokenNameEQUAL	
at	TokenNameIdentifier	 at
.	TokenNameDOT	
createInverse	TokenNameIdentifier	 create Inverse
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ret	TokenNameIdentifier	 ret
=	TokenNameEQUAL	
new	TokenNamenew	
AffineRable8Bit	TokenNameIdentifier	 Affine Rable8 Bit
(	TokenNameLPAREN	
ret	TokenNameIdentifier	 ret
,	TokenNameCOMMA	
at	TokenNameIdentifier	 at
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
NoninvertibleTransformException	TokenNameIdentifier	 Noninvertible Transform Exception
nte	TokenNameIdentifier	 nte
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ret	TokenNameIdentifier	 ret
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
ret	TokenNameIdentifier	 ret
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns true if successive renderings (that is, calls to * createRendering() or createScaledRendering()) with the same arguments * may produce different results. This method may be used to * determine whether an existing rendering may be cached and * reused. It is always safe to return true. */	TokenNameCOMMENT_JAVADOC	 Returns true if successive renderings (that is, calls to createRendering() or createScaledRendering()) with the same arguments may produce different results. This method may be used to determine whether an existing rendering may be cached and reused. It is always safe to return true. 
public	TokenNamepublic	
boolean	TokenNameboolean	
isDynamic	TokenNameIdentifier	 is Dynamic
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Creates a RenderedImage that represented a rendering of this image * using a given RenderContext. This is the most general way to obtain a * rendering of a RenderableImage. * * <p> The created RenderedImage may have a property identified * by the String HINTS_OBSERVED to indicate which RenderingHints * (from the RenderContext) were used to create the image. * In addition any RenderedImages * that are obtained via the getSources() method on the created * RenderedImage may have such a property. * * @param renderContext the RenderContext to use to produce the rendering. * @return a RenderedImage containing the rendered data. */	TokenNameCOMMENT_JAVADOC	 Creates a RenderedImage that represented a rendering of this image using a given RenderContext. This is the most general way to obtain a rendering of a RenderableImage. * <p> The created RenderedImage may have a property identified by the String HINTS_OBSERVED to indicate which RenderingHints (from the RenderContext) were used to create the image. In addition any RenderedImages that are obtained via the getSources() method on the created RenderedImage may have such a property. * @param renderContext the RenderContext to use to produce the rendering. @return a RenderedImage containing the rendered data. 
public	TokenNamepublic	
RenderedImage	TokenNameIdentifier	 Rendered Image
createRendering	TokenNameIdentifier	 create Rendering
(	TokenNameLPAREN	
RenderContext	TokenNameIdentifier	 Render Context
renderContext	TokenNameIdentifier	 render Context
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
r2d	TokenNameIdentifier	 r2d
=	TokenNameEQUAL	
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// System.out.println("Rendering called"); 	TokenNameCOMMENT_LINE	System.out.println("Rendering called"); 
Shape	TokenNameIdentifier	 Shape
aoi	TokenNameIdentifier	 aoi
=	TokenNameEQUAL	
renderContext	TokenNameIdentifier	 render Context
.	TokenNameDOT	
getAreaOfInterest	TokenNameIdentifier	 get Area Of Interest
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
aoi	TokenNameIdentifier	 aoi
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
aoiR2d	TokenNameIdentifier	 aoi R2d
=	TokenNameEQUAL	
aoi	TokenNameIdentifier	 aoi
.	TokenNameDOT	
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// System.out.println("R2d: " + r2d); 	TokenNameCOMMENT_LINE	System.out.println("R2d: " + r2d); 
// System.out.println("AOI: " + aoiR2d); 	TokenNameCOMMENT_LINE	System.out.println("AOI: " + aoiR2d); 
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
r2d	TokenNameIdentifier	 r2d
.	TokenNameDOT	
intersects	TokenNameIdentifier	 intersects
(	TokenNameLPAREN	
aoiR2d	TokenNameIdentifier	 aoi R2d
)	TokenNameRPAREN	
)	TokenNameRPAREN	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
.	TokenNameDOT	
intersect	TokenNameIdentifier	 intersect
(	TokenNameLPAREN	
r2d	TokenNameIdentifier	 r2d
,	TokenNameCOMMA	
aoiR2d	TokenNameIdentifier	 aoi R2d
,	TokenNameCOMMA	
r2d	TokenNameIdentifier	 r2d
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
Filter	TokenNameIdentifier	 Filter
background	TokenNameIdentifier	 background
=	TokenNameEQUAL	
getBackground	TokenNameIdentifier	 get Background
(	TokenNameLPAREN	
node	TokenNameIdentifier	 node
,	TokenNameCOMMA	
null	TokenNamenull	
,	TokenNameCOMMA	
r2d	TokenNameIdentifier	 r2d
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// System.out.println("BG: " + background); 	TokenNameCOMMENT_LINE	System.out.println("BG: " + background); 
if	TokenNameif	
(	TokenNameLPAREN	
background	TokenNameIdentifier	 background
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
background	TokenNameIdentifier	 background
=	TokenNameEQUAL	
new	TokenNamenew	
PadRable8Bit	TokenNameIdentifier	 Pad Rable8 Bit
(	TokenNameLPAREN	
background	TokenNameIdentifier	 background
,	TokenNameCOMMA	
r2d	TokenNameIdentifier	 r2d
,	TokenNameCOMMA	
PadMode	TokenNameIdentifier	 Pad Mode
.	TokenNameDOT	
ZERO_PAD	TokenNameIdentifier	 ZERO  PAD
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
RenderedImage	TokenNameIdentifier	 Rendered Image
ri	TokenNameIdentifier	 ri
=	TokenNameEQUAL	
background	TokenNameIdentifier	 background
.	TokenNameDOT	
createRendering	TokenNameIdentifier	 create Rendering
(	TokenNameLPAREN	
new	TokenNamenew	
RenderContext	TokenNameIdentifier	 Render Context
(	TokenNameLPAREN	
renderContext	TokenNameIdentifier	 render Context
.	TokenNameDOT	
getTransform	TokenNameIdentifier	 get Transform
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
r2d	TokenNameIdentifier	 r2d
,	TokenNameCOMMA	
renderContext	TokenNameIdentifier	 render Context
.	TokenNameDOT	
getRenderingHints	TokenNameIdentifier	 get Rendering Hints
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// System.out.println("RI: [" + ri.getMinX() + ", " 	TokenNameCOMMENT_LINE	System.out.println("RI: [" + ri.getMinX() + ", " 
// + ri.getMinY() + ", " + 	TokenNameCOMMENT_LINE	+ ri.getMinY() + ", " + 
// + ri.getWidth() + ", " + 	TokenNameCOMMENT_LINE	+ ri.getWidth() + ", " + 
// + ri.getHeight() + "]"); 	TokenNameCOMMENT_LINE	+ ri.getHeight() + "]"); 
// org.ImageDisplay.showImage("BG: ", ri); 	TokenNameCOMMENT_LINE	org.ImageDisplay.showImage("BG: ", ri); 
return	TokenNamereturn	
ri	TokenNameIdentifier	 ri
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
