package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
index	TokenNameIdentifier	 index
;	TokenNameSEMICOLON	
/** * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the "License"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */	TokenNameCOMMENT_JAVADOC	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
IOException	TokenNameIdentifier	 IO Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ArrayList	TokenNameIdentifier	 Array List
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Arrays	TokenNameIdentifier	 Arrays
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
HashMap	TokenNameIdentifier	 Hash Map
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
List	TokenNameIdentifier	 List
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Map	TokenNameIdentifier	 Map
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
concurrent	TokenNameIdentifier	 concurrent
.	TokenNameDOT	
atomic	TokenNameIdentifier	 atomic
.	TokenNameDOT	
AtomicInteger	TokenNameIdentifier	 Atomic Integer
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
document	TokenNameIdentifier	 document
.	TokenNameDOT	
Document	TokenNameIdentifier	 Document
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
document	TokenNameIdentifier	 document
.	TokenNameDOT	
FieldSelector	TokenNameIdentifier	 Field Selector
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
search	TokenNameIdentifier	 search
.	TokenNameDOT	
FieldCache	TokenNameIdentifier	 Field Cache
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
search	TokenNameIdentifier	 search
.	TokenNameDOT	
Similarity	TokenNameIdentifier	 Similarity
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
store	TokenNameIdentifier	 store
.	TokenNameDOT	
BufferedIndexInput	TokenNameIdentifier	 Buffered Index Input
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
store	TokenNameIdentifier	 store
.	TokenNameDOT	
Directory	TokenNameIdentifier	 Directory
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
store	TokenNameIdentifier	 store
.	TokenNameDOT	
IndexInput	TokenNameIdentifier	 Index Input
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
BitVector	TokenNameIdentifier	 Bit Vector
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
CloseableThreadLocal	TokenNameIdentifier	 Closeable Thread Local
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
StringHelper	TokenNameIdentifier	 String Helper
;	TokenNameSEMICOLON	
/** * IndexReader implementation over a single segment. * <p> * Instances pointing to the same segment (but with different deletes, etc) * may share the same core data. * @lucene.experimental */	TokenNameCOMMENT_JAVADOC	 IndexReader implementation over a single segment. <p> Instances pointing to the same segment (but with different deletes, etc) may share the same core data. @lucene.experimental 
public	TokenNamepublic	
class	TokenNameclass	
SegmentReader	TokenNameIdentifier	 Segment Reader
extends	TokenNameextends	
IndexReader	TokenNameIdentifier	 Index Reader
implements	TokenNameimplements	
Cloneable	TokenNameIdentifier	 Cloneable
{	TokenNameLBRACE	
@	TokenNameAT	
Deprecated	TokenNameIdentifier	 Deprecated
protected	TokenNameprotected	
boolean	TokenNameboolean	
readOnly	TokenNameIdentifier	 read Only
;	TokenNameSEMICOLON	
private	TokenNameprivate	
SegmentInfo	TokenNameIdentifier	 Segment Info
si	TokenNameIdentifier	 si
;	TokenNameSEMICOLON	
private	TokenNameprivate	
int	TokenNameint	
readBufferSize	TokenNameIdentifier	 read Buffer Size
;	TokenNameSEMICOLON	
CloseableThreadLocal	TokenNameIdentifier	 Closeable Thread Local
<	TokenNameLESS	
FieldsReader	TokenNameIdentifier	 Fields Reader
>	TokenNameGREATER	
fieldsReaderLocal	TokenNameIdentifier	 fields Reader Local
=	TokenNameEQUAL	
new	TokenNamenew	
FieldsReaderLocal	TokenNameIdentifier	 Fields Reader Local
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
CloseableThreadLocal	TokenNameIdentifier	 Closeable Thread Local
<	TokenNameLESS	
TermVectorsReader	TokenNameIdentifier	 Term Vectors Reader
>	TokenNameGREATER	
termVectorsLocal	TokenNameIdentifier	 term Vectors Local
=	TokenNameEQUAL	
new	TokenNamenew	
CloseableThreadLocal	TokenNameIdentifier	 Closeable Thread Local
<	TokenNameLESS	
TermVectorsReader	TokenNameIdentifier	 Term Vectors Reader
>	TokenNameGREATER	
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
BitVector	TokenNameIdentifier	 Bit Vector
deletedDocs	TokenNameIdentifier	 deleted Docs
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
AtomicInteger	TokenNameIdentifier	 Atomic Integer
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
deletedDocsDirty	TokenNameIdentifier	 deleted Docs Dirty
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
normsDirty	TokenNameIdentifier	 norms Dirty
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
// TODO: we should move this tracking into SegmentInfo; 	TokenNameCOMMENT_LINE	TODO: we should move this tracking into SegmentInfo; 
// this way SegmentInfo.toString shows pending deletes 	TokenNameCOMMENT_LINE	this way SegmentInfo.toString shows pending deletes 
private	TokenNameprivate	
int	TokenNameint	
pendingDeleteCount	TokenNameIdentifier	 pending Delete Count
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
rollbackHasChanges	TokenNameIdentifier	 rollback Has Changes
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
rollbackDeletedDocsDirty	TokenNameIdentifier	 rollback Deleted Docs Dirty
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
rollbackNormsDirty	TokenNameIdentifier	 rollback Norms Dirty
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
SegmentInfo	TokenNameIdentifier	 Segment Info
rollbackSegmentInfo	TokenNameIdentifier	 rollback Segment Info
;	TokenNameSEMICOLON	
private	TokenNameprivate	
int	TokenNameint	
rollbackPendingDeleteCount	TokenNameIdentifier	 rollback Pending Delete Count
;	TokenNameSEMICOLON	
// optionally used for the .nrm file shared by multiple norms 	TokenNameCOMMENT_LINE	optionally used for the .nrm file shared by multiple norms 
IndexInput	TokenNameIdentifier	 Index Input
singleNormStream	TokenNameIdentifier	 single Norm Stream
;	TokenNameSEMICOLON	
AtomicInteger	TokenNameIdentifier	 Atomic Integer
singleNormRef	TokenNameIdentifier	 single Norm Ref
;	TokenNameSEMICOLON	
SegmentCoreReaders	TokenNameIdentifier	 Segment Core Readers
core	TokenNameIdentifier	 core
;	TokenNameSEMICOLON	
/** * Sets the initial value */	TokenNameCOMMENT_JAVADOC	 Sets the initial value 
private	TokenNameprivate	
class	TokenNameclass	
FieldsReaderLocal	TokenNameIdentifier	 Fields Reader Local
extends	TokenNameextends	
CloseableThreadLocal	TokenNameIdentifier	 Closeable Thread Local
<	TokenNameLESS	
FieldsReader	TokenNameIdentifier	 Fields Reader
>	TokenNameGREATER	
{	TokenNameLBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
protected	TokenNameprotected	
FieldsReader	TokenNameIdentifier	 Fields Reader
initialValue	TokenNameIdentifier	 initial Value
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
(	TokenNameLPAREN	
FieldsReader	TokenNameIdentifier	 Fields Reader
)	TokenNameRPAREN	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
getFieldsReaderOrig	TokenNameIdentifier	 get Fields Reader Orig
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
clone	TokenNameIdentifier	 clone
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
Map	TokenNameIdentifier	 Map
<	TokenNameLESS	
String	TokenNameIdentifier	 String
,	TokenNameCOMMA	
SegmentNorms	TokenNameIdentifier	 Segment Norms
>	TokenNameGREATER	
norms	TokenNameIdentifier	 norms
=	TokenNameEQUAL	
new	TokenNamenew	
HashMap	TokenNameIdentifier	 Hash Map
<	TokenNameLESS	
String	TokenNameIdentifier	 String
,	TokenNameCOMMA	
SegmentNorms	TokenNameIdentifier	 Segment Norms
>	TokenNameGREATER	
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
/** * @throws CorruptIndexException if the index is corrupt * @throws IOException if there is a low-level IO error */	TokenNameCOMMENT_JAVADOC	 @throws CorruptIndexException if the index is corrupt @throws IOException if there is a low-level IO error 
public	TokenNamepublic	
static	TokenNamestatic	
SegmentReader	TokenNameIdentifier	 Segment Reader
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
boolean	TokenNameboolean	
readOnly	TokenNameIdentifier	 read Only
,	TokenNameCOMMA	
SegmentInfo	TokenNameIdentifier	 Segment Info
si	TokenNameIdentifier	 si
,	TokenNameCOMMA	
int	TokenNameint	
termInfosIndexDivisor	TokenNameIdentifier	 term Infos Index Divisor
)	TokenNameRPAREN	
throws	TokenNamethrows	
CorruptIndexException	TokenNameIdentifier	 Corrupt Index Exception
,	TokenNameCOMMA	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
return	TokenNamereturn	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
readOnly	TokenNameIdentifier	 read Only
,	TokenNameCOMMA	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
si	TokenNameIdentifier	 si
,	TokenNameCOMMA	
BufferedIndexInput	TokenNameIdentifier	 Buffered Index Input
.	TokenNameDOT	
BUFFER_SIZE	TokenNameIdentifier	 BUFFER  SIZE
,	TokenNameCOMMA	
true	TokenNametrue	
,	TokenNameCOMMA	
termInfosIndexDivisor	TokenNameIdentifier	 term Infos Index Divisor
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * @throws CorruptIndexException if the index is corrupt * @throws IOException if there is a low-level IO error */	TokenNameCOMMENT_JAVADOC	 @throws CorruptIndexException if the index is corrupt @throws IOException if there is a low-level IO error 
public	TokenNamepublic	
static	TokenNamestatic	
SegmentReader	TokenNameIdentifier	 Segment Reader
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
boolean	TokenNameboolean	
readOnly	TokenNameIdentifier	 read Only
,	TokenNameCOMMA	
Directory	TokenNameIdentifier	 Directory
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
SegmentInfo	TokenNameIdentifier	 Segment Info
si	TokenNameIdentifier	 si
,	TokenNameCOMMA	
int	TokenNameint	
readBufferSize	TokenNameIdentifier	 read Buffer Size
,	TokenNameCOMMA	
boolean	TokenNameboolean	
doOpenStores	TokenNameIdentifier	 do Open Stores
,	TokenNameCOMMA	
int	TokenNameint	
termInfosIndexDivisor	TokenNameIdentifier	 term Infos Index Divisor
)	TokenNameRPAREN	
throws	TokenNamethrows	
CorruptIndexException	TokenNameIdentifier	 Corrupt Index Exception
,	TokenNameCOMMA	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
SegmentReader	TokenNameIdentifier	 Segment Reader
instance	TokenNameIdentifier	 instance
=	TokenNameEQUAL	
readOnly	TokenNameIdentifier	 read Only
?	TokenNameQUESTION	
new	TokenNamenew	
ReadOnlySegmentReader	TokenNameIdentifier	 Read Only Segment Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
:	TokenNameCOLON	
new	TokenNamenew	
SegmentReader	TokenNameIdentifier	 Segment Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
instance	TokenNameIdentifier	 instance
.	TokenNameDOT	
readOnly	TokenNameIdentifier	 read Only
=	TokenNameEQUAL	
readOnly	TokenNameIdentifier	 read Only
;	TokenNameSEMICOLON	
instance	TokenNameIdentifier	 instance
.	TokenNameDOT	
si	TokenNameIdentifier	 si
=	TokenNameEQUAL	
si	TokenNameIdentifier	 si
;	TokenNameSEMICOLON	
instance	TokenNameIdentifier	 instance
.	TokenNameDOT	
readBufferSize	TokenNameIdentifier	 read Buffer Size
=	TokenNameEQUAL	
readBufferSize	TokenNameIdentifier	 read Buffer Size
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
success	TokenNameIdentifier	 success
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
instance	TokenNameIdentifier	 instance
.	TokenNameDOT	
core	TokenNameIdentifier	 core
=	TokenNameEQUAL	
new	TokenNamenew	
SegmentCoreReaders	TokenNameIdentifier	 Segment Core Readers
(	TokenNameLPAREN	
instance	TokenNameIdentifier	 instance
,	TokenNameCOMMA	
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
si	TokenNameIdentifier	 si
,	TokenNameCOMMA	
readBufferSize	TokenNameIdentifier	 read Buffer Size
,	TokenNameCOMMA	
termInfosIndexDivisor	TokenNameIdentifier	 term Infos Index Divisor
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
doOpenStores	TokenNameIdentifier	 do Open Stores
)	TokenNameRPAREN	
{	TokenNameLBRACE	
instance	TokenNameIdentifier	 instance
.	TokenNameDOT	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
openDocStores	TokenNameIdentifier	 open Doc Stores
(	TokenNameLPAREN	
si	TokenNameIdentifier	 si
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
instance	TokenNameIdentifier	 instance
.	TokenNameDOT	
loadDeletedDocs	TokenNameIdentifier	 load Deleted Docs
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
instance	TokenNameIdentifier	 instance
.	TokenNameDOT	
openNorms	TokenNameIdentifier	 open Norms
(	TokenNameLPAREN	
instance	TokenNameIdentifier	 instance
.	TokenNameDOT	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
cfsDir	TokenNameIdentifier	 cfs Dir
,	TokenNameCOMMA	
readBufferSize	TokenNameIdentifier	 read Buffer Size
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
success	TokenNameIdentifier	 success
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
// With lock-less commits, it's entirely possible (and 	TokenNameCOMMENT_LINE	With lock-less commits, it's entirely possible (and 
// fine) to hit a FileNotFound exception above. In 	TokenNameCOMMENT_LINE	fine) to hit a FileNotFound exception above. In 
// this case, we want to explicitly close any subset 	TokenNameCOMMENT_LINE	this case, we want to explicitly close any subset 
// of things that were opened so that we don't have to 	TokenNameCOMMENT_LINE	of things that were opened so that we don't have to 
// wait for a GC to do so. 	TokenNameCOMMENT_LINE	wait for a GC to do so. 
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
success	TokenNameIdentifier	 success
)	TokenNameRPAREN	
{	TokenNameLBRACE	
instance	TokenNameIdentifier	 instance
.	TokenNameDOT	
doClose	TokenNameIdentifier	 do Close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
instance	TokenNameIdentifier	 instance
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
void	TokenNamevoid	
openDocStores	TokenNameIdentifier	 open Doc Stores
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
openDocStores	TokenNameIdentifier	 open Doc Stores
(	TokenNameLPAREN	
si	TokenNameIdentifier	 si
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
boolean	TokenNameboolean	
checkDeletedCounts	TokenNameIdentifier	 check Deleted Counts
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
final	TokenNamefinal	
int	TokenNameint	
recomputedCount	TokenNameIdentifier	 recomputed Count
=	TokenNameEQUAL	
deletedDocs	TokenNameIdentifier	 deleted Docs
.	TokenNameDOT	
getRecomputedCount	TokenNameIdentifier	 get Recomputed Count
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
assert	TokenNameassert	
deletedDocs	TokenNameIdentifier	 deleted Docs
.	TokenNameDOT	
count	TokenNameIdentifier	 count
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
recomputedCount	TokenNameIdentifier	 recomputed Count
:	TokenNameCOLON	
"deleted count="	TokenNameStringLiteral	deleted count=
+	TokenNamePLUS	
deletedDocs	TokenNameIdentifier	 deleted Docs
.	TokenNameDOT	
count	TokenNameIdentifier	 count
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" vs recomputed count="	TokenNameStringLiteral	 vs recomputed count=
+	TokenNamePLUS	
recomputedCount	TokenNameIdentifier	 recomputed Count
;	TokenNameSEMICOLON	
assert	TokenNameassert	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getDelCount	TokenNameIdentifier	 get Del Count
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
recomputedCount	TokenNameIdentifier	 recomputed Count
:	TokenNameCOLON	
"delete count mismatch: info="	TokenNameStringLiteral	delete count mismatch: info=
+	TokenNamePLUS	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getDelCount	TokenNameIdentifier	 get Del Count
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" vs BitVector="	TokenNameStringLiteral	 vs BitVector=
+	TokenNamePLUS	
recomputedCount	TokenNameIdentifier	 recomputed Count
;	TokenNameSEMICOLON	
// Verify # deletes does not exceed maxDoc for this 	TokenNameCOMMENT_LINE	Verify # deletes does not exceed maxDoc for this 
// segment: 	TokenNameCOMMENT_LINE	segment: 
assert	TokenNameassert	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getDelCount	TokenNameIdentifier	 get Del Count
(	TokenNameLPAREN	
)	TokenNameRPAREN	
<=	TokenNameLESS_EQUAL	
maxDoc	TokenNameIdentifier	 max Doc
(	TokenNameLPAREN	
)	TokenNameRPAREN	
:	TokenNameCOLON	
"delete count mismatch: "	TokenNameStringLiteral	delete count mismatch: 
+	TokenNamePLUS	
recomputedCount	TokenNameIdentifier	 recomputed Count
+	TokenNamePLUS	
") exceeds max doc ("	TokenNameStringLiteral	) exceeds max doc (
+	TokenNamePLUS	
maxDoc	TokenNameIdentifier	 max Doc
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
") for segment "	TokenNameStringLiteral	) for segment 
+	TokenNamePLUS	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
name	TokenNameIdentifier	 name
;	TokenNameSEMICOLON	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
void	TokenNamevoid	
loadDeletedDocs	TokenNameIdentifier	 load Deleted Docs
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
// NOTE: the bitvector is stored using the regular directory, not cfs 	TokenNameCOMMENT_LINE	NOTE: the bitvector is stored using the regular directory, not cfs 
if	TokenNameif	
(	TokenNameLPAREN	
hasDeletions	TokenNameIdentifier	 has Deletions
(	TokenNameLPAREN	
si	TokenNameIdentifier	 si
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
deletedDocs	TokenNameIdentifier	 deleted Docs
=	TokenNameEQUAL	
new	TokenNamenew	
BitVector	TokenNameIdentifier	 Bit Vector
(	TokenNameLPAREN	
directory	TokenNameIdentifier	 directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getDelFileName	TokenNameIdentifier	 get Del File Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
=	TokenNameEQUAL	
new	TokenNamenew	
AtomicInteger	TokenNameIdentifier	 Atomic Integer
(	TokenNameLPAREN	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
assert	TokenNameassert	
checkDeletedCounts	TokenNameIdentifier	 check Deleted Counts
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
deletedDocs	TokenNameIdentifier	 deleted Docs
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
docCount	TokenNameIdentifier	 doc Count
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
CorruptIndexException	TokenNameIdentifier	 Corrupt Index Exception
(	TokenNameLPAREN	
"document count mismatch: deleted docs count "	TokenNameStringLiteral	document count mismatch: deleted docs count 
+	TokenNamePLUS	
deletedDocs	TokenNameIdentifier	 deleted Docs
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" vs segment doc count "	TokenNameStringLiteral	 vs segment doc count 
+	TokenNamePLUS	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
docCount	TokenNameIdentifier	 doc Count
+	TokenNamePLUS	
" segment="	TokenNameStringLiteral	 segment=
+	TokenNamePLUS	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
assert	TokenNameassert	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getDelCount	TokenNameIdentifier	 get Del Count
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Clones the norm bytes. May be overridden by subclasses. New and experimental. * @param bytes Byte array to clone * @return New BitVector * @deprecated */	TokenNameCOMMENT_JAVADOC	 Clones the norm bytes. May be overridden by subclasses. New and experimental. @param bytes Byte array to clone @return New BitVector @deprecated 
@	TokenNameAT	
Deprecated	TokenNameIdentifier	 Deprecated
protected	TokenNameprotected	
byte	TokenNamebyte	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
cloneNormBytes	TokenNameIdentifier	 clone Norm Bytes
(	TokenNameLPAREN	
byte	TokenNamebyte	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
bytes	TokenNameIdentifier	 bytes
)	TokenNameRPAREN	
{	TokenNameLBRACE	
byte	TokenNamebyte	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
cloneBytes	TokenNameIdentifier	 clone Bytes
=	TokenNameEQUAL	
new	TokenNamenew	
byte	TokenNamebyte	
[	TokenNameLBRACKET	
bytes	TokenNameIdentifier	 bytes
.	TokenNameDOT	
length	TokenNameIdentifier	 length
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
arraycopy	TokenNameIdentifier	 arraycopy
(	TokenNameLPAREN	
bytes	TokenNameIdentifier	 bytes
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
cloneBytes	TokenNameIdentifier	 clone Bytes
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
bytes	TokenNameIdentifier	 bytes
.	TokenNameDOT	
length	TokenNameIdentifier	 length
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
cloneBytes	TokenNameIdentifier	 clone Bytes
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Clones the deleteDocs BitVector. May be overridden by subclasses. New and experimental. * @param bv BitVector to clone * @return New BitVector * @deprecated */	TokenNameCOMMENT_JAVADOC	 Clones the deleteDocs BitVector. May be overridden by subclasses. New and experimental. @param bv BitVector to clone @return New BitVector @deprecated 
@	TokenNameAT	
Deprecated	TokenNameIdentifier	 Deprecated
protected	TokenNameprotected	
BitVector	TokenNameIdentifier	 Bit Vector
cloneDeletedDocs	TokenNameIdentifier	 clone Deleted Docs
(	TokenNameLPAREN	
BitVector	TokenNameIdentifier	 Bit Vector
bv	TokenNameIdentifier	 bv
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
(	TokenNameLPAREN	
BitVector	TokenNameIdentifier	 Bit Vector
)	TokenNameRPAREN	
bv	TokenNameIdentifier	 bv
.	TokenNameDOT	
clone	TokenNameIdentifier	 clone
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
final	TokenNamefinal	
synchronized	TokenNamesynchronized	
Object	TokenNameIdentifier	 Object
clone	TokenNameIdentifier	 clone
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
return	TokenNamereturn	
clone	TokenNameIdentifier	 clone
(	TokenNameLPAREN	
readOnly	TokenNameIdentifier	 read Only
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Preserve current readOnly 	TokenNameCOMMENT_LINE	Preserve current readOnly 
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
Exception	TokenNameIdentifier	 Exception
ex	TokenNameIdentifier	 ex
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
RuntimeException	TokenNameIdentifier	 Runtime Exception
(	TokenNameLPAREN	
ex	TokenNameIdentifier	 ex
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** {@inheritDoc} */	TokenNameCOMMENT_JAVADOC	 {@inheritDoc} 
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
@	TokenNameAT	
Deprecated	TokenNameIdentifier	 Deprecated
public	TokenNamepublic	
final	TokenNamefinal	
synchronized	TokenNamesynchronized	
IndexReader	TokenNameIdentifier	 Index Reader
clone	TokenNameIdentifier	 clone
(	TokenNameLPAREN	
boolean	TokenNameboolean	
openReadOnly	TokenNameIdentifier	 open Read Only
)	TokenNameRPAREN	
throws	TokenNamethrows	
CorruptIndexException	TokenNameIdentifier	 Corrupt Index Exception
,	TokenNameCOMMA	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
return	TokenNamereturn	
reopenSegment	TokenNameIdentifier	 reopen Segment
(	TokenNameLPAREN	
si	TokenNameIdentifier	 si
,	TokenNameCOMMA	
true	TokenNametrue	
,	TokenNameCOMMA	
openReadOnly	TokenNameIdentifier	 open Read Only
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
protected	TokenNameprotected	
synchronized	TokenNamesynchronized	
IndexReader	TokenNameIdentifier	 Index Reader
doOpenIfChanged	TokenNameIdentifier	 do Open If Changed
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
CorruptIndexException	TokenNameIdentifier	 Corrupt Index Exception
,	TokenNameCOMMA	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
return	TokenNamereturn	
reopenSegment	TokenNameIdentifier	 reopen Segment
(	TokenNameLPAREN	
si	TokenNameIdentifier	 si
,	TokenNameCOMMA	
false	TokenNamefalse	
,	TokenNameCOMMA	
readOnly	TokenNameIdentifier	 read Only
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** {@inheritDoc} */	TokenNameCOMMENT_JAVADOC	 {@inheritDoc} 
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
@	TokenNameAT	
Deprecated	TokenNameIdentifier	 Deprecated
protected	TokenNameprotected	
synchronized	TokenNamesynchronized	
IndexReader	TokenNameIdentifier	 Index Reader
doOpenIfChanged	TokenNameIdentifier	 do Open If Changed
(	TokenNameLPAREN	
boolean	TokenNameboolean	
openReadOnly	TokenNameIdentifier	 open Read Only
)	TokenNameRPAREN	
throws	TokenNamethrows	
CorruptIndexException	TokenNameIdentifier	 Corrupt Index Exception
,	TokenNameCOMMA	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
return	TokenNamereturn	
reopenSegment	TokenNameIdentifier	 reopen Segment
(	TokenNameLPAREN	
si	TokenNameIdentifier	 si
,	TokenNameCOMMA	
false	TokenNamefalse	
,	TokenNameCOMMA	
openReadOnly	TokenNameIdentifier	 open Read Only
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
synchronized	TokenNamesynchronized	
SegmentReader	TokenNameIdentifier	 Segment Reader
reopenSegment	TokenNameIdentifier	 reopen Segment
(	TokenNameLPAREN	
SegmentInfo	TokenNameIdentifier	 Segment Info
si	TokenNameIdentifier	 si
,	TokenNameCOMMA	
boolean	TokenNameboolean	
doClone	TokenNameIdentifier	 do Clone
,	TokenNameCOMMA	
boolean	TokenNameboolean	
openReadOnly	TokenNameIdentifier	 open Read Only
)	TokenNameRPAREN	
throws	TokenNamethrows	
CorruptIndexException	TokenNameIdentifier	 Corrupt Index Exception
,	TokenNameCOMMA	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
deletionsUpToDate	TokenNameIdentifier	 deletions Up To Date
=	TokenNameEQUAL	
(	TokenNameLPAREN	
this	TokenNamethis	
.	TokenNameDOT	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
hasDeletions	TokenNameIdentifier	 has Deletions
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
hasDeletions	TokenNameIdentifier	 has Deletions
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
(	TokenNameLPAREN	
!	TokenNameNOT	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
hasDeletions	TokenNameIdentifier	 has Deletions
(	TokenNameLPAREN	
)	TokenNameRPAREN	
||	TokenNameOR_OR	
this	TokenNamethis	
.	TokenNameDOT	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getDelFileName	TokenNameIdentifier	 get Del File Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getDelFileName	TokenNameIdentifier	 get Del File Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
normsUpToDate	TokenNameIdentifier	 norms Up To Date
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
fieldNormsChanged	TokenNameIdentifier	 field Norms Changed
=	TokenNameEQUAL	
new	TokenNamenew	
boolean	TokenNameboolean	
[	TokenNameLBRACKET	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
fieldInfos	TokenNameIdentifier	 field Infos
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
int	TokenNameint	
fieldCount	TokenNameIdentifier	 field Count
=	TokenNameEQUAL	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
fieldInfos	TokenNameIdentifier	 field Infos
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
fieldCount	TokenNameIdentifier	 field Count
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
this	TokenNamethis	
.	TokenNameDOT	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getNormFileName	TokenNameIdentifier	 get Norm File Name
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getNormFileName	TokenNameIdentifier	 get Norm File Name
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
normsUpToDate	TokenNameIdentifier	 norms Up To Date
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
fieldNormsChanged	TokenNameIdentifier	 field Norms Changed
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// if we're cloning we need to run through the reopenSegment logic 	TokenNameCOMMENT_LINE	if we're cloning we need to run through the reopenSegment logic 
// also if both old and new readers aren't readonly, we clone to avoid sharing modifications 	TokenNameCOMMENT_LINE	also if both old and new readers aren't readonly, we clone to avoid sharing modifications 
if	TokenNameif	
(	TokenNameLPAREN	
normsUpToDate	TokenNameIdentifier	 norms Up To Date
&&	TokenNameAND_AND	
deletionsUpToDate	TokenNameIdentifier	 deletions Up To Date
&&	TokenNameAND_AND	
!	TokenNameNOT	
doClone	TokenNameIdentifier	 do Clone
&&	TokenNameAND_AND	
openReadOnly	TokenNameIdentifier	 open Read Only
&&	TokenNameAND_AND	
readOnly	TokenNameIdentifier	 read Only
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// When cloning, the incoming SegmentInfos should not 	TokenNameCOMMENT_LINE	When cloning, the incoming SegmentInfos should not 
// have any changes in it: 	TokenNameCOMMENT_LINE	have any changes in it: 
assert	TokenNameassert	
!	TokenNameNOT	
doClone	TokenNameIdentifier	 do Clone
||	TokenNameOR_OR	
(	TokenNameLPAREN	
normsUpToDate	TokenNameIdentifier	 norms Up To Date
&&	TokenNameAND_AND	
deletionsUpToDate	TokenNameIdentifier	 deletions Up To Date
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// clone reader 	TokenNameCOMMENT_LINE	clone reader 
SegmentReader	TokenNameIdentifier	 Segment Reader
clone	TokenNameIdentifier	 clone
=	TokenNameEQUAL	
openReadOnly	TokenNameIdentifier	 open Read Only
?	TokenNameQUESTION	
new	TokenNamenew	
ReadOnlySegmentReader	TokenNameIdentifier	 Read Only Segment Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
:	TokenNameCOLON	
new	TokenNamenew	
SegmentReader	TokenNameIdentifier	 Segment Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
success	TokenNameIdentifier	 success
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
incRef	TokenNameIdentifier	 inc Ref
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
core	TokenNameIdentifier	 core
=	TokenNameEQUAL	
core	TokenNameIdentifier	 core
;	TokenNameSEMICOLON	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
readOnly	TokenNameIdentifier	 read Only
=	TokenNameEQUAL	
openReadOnly	TokenNameIdentifier	 open Read Only
;	TokenNameSEMICOLON	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
si	TokenNameIdentifier	 si
=	TokenNameEQUAL	
si	TokenNameIdentifier	 si
;	TokenNameSEMICOLON	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
readBufferSize	TokenNameIdentifier	 read Buffer Size
=	TokenNameEQUAL	
readBufferSize	TokenNameIdentifier	 read Buffer Size
;	TokenNameSEMICOLON	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
pendingDeleteCount	TokenNameIdentifier	 pending Delete Count
=	TokenNameEQUAL	
pendingDeleteCount	TokenNameIdentifier	 pending Delete Count
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
openReadOnly	TokenNameIdentifier	 open Read Only
&&	TokenNameAND_AND	
hasChanges	TokenNameIdentifier	 has Changes
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// My pending changes transfer to the new reader 	TokenNameCOMMENT_LINE	My pending changes transfer to the new reader 
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
deletedDocsDirty	TokenNameIdentifier	 deleted Docs Dirty
=	TokenNameEQUAL	
deletedDocsDirty	TokenNameIdentifier	 deleted Docs Dirty
;	TokenNameSEMICOLON	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
normsDirty	TokenNameIdentifier	 norms Dirty
=	TokenNameEQUAL	
normsDirty	TokenNameIdentifier	 norms Dirty
;	TokenNameSEMICOLON	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
hasChanges	TokenNameIdentifier	 has Changes
=	TokenNameEQUAL	
hasChanges	TokenNameIdentifier	 has Changes
;	TokenNameSEMICOLON	
hasChanges	TokenNameIdentifier	 has Changes
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
doClone	TokenNameIdentifier	 do Clone
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
deletedDocs	TokenNameIdentifier	 deleted Docs
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
.	TokenNameDOT	
incrementAndGet	TokenNameIdentifier	 increment And Get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
deletedDocs	TokenNameIdentifier	 deleted Docs
=	TokenNameEQUAL	
deletedDocs	TokenNameIdentifier	 deleted Docs
;	TokenNameSEMICOLON	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
=	TokenNameEQUAL	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
deletionsUpToDate	TokenNameIdentifier	 deletions Up To Date
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// load deleted docs 	TokenNameCOMMENT_LINE	load deleted docs 
assert	TokenNameassert	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
deletedDocs	TokenNameIdentifier	 deleted Docs
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
loadDeletedDocs	TokenNameIdentifier	 load Deleted Docs
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
deletedDocs	TokenNameIdentifier	 deleted Docs
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
.	TokenNameDOT	
incrementAndGet	TokenNameIdentifier	 increment And Get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
deletedDocs	TokenNameIdentifier	 deleted Docs
=	TokenNameEQUAL	
deletedDocs	TokenNameIdentifier	 deleted Docs
;	TokenNameSEMICOLON	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
=	TokenNameEQUAL	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
norms	TokenNameIdentifier	 norms
=	TokenNameEQUAL	
new	TokenNamenew	
HashMap	TokenNameIdentifier	 Hash Map
<	TokenNameLESS	
String	TokenNameIdentifier	 String
,	TokenNameCOMMA	
SegmentNorms	TokenNameIdentifier	 Segment Norms
>	TokenNameGREATER	
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Clone norms 	TokenNameCOMMENT_LINE	Clone norms 
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
fieldNormsChanged	TokenNameIdentifier	 field Norms Changed
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Clone unchanged norms to the cloned reader 	TokenNameCOMMENT_LINE	Clone unchanged norms to the cloned reader 
if	TokenNameif	
(	TokenNameLPAREN	
doClone	TokenNameIdentifier	 do Clone
||	TokenNameOR_OR	
!	TokenNameNOT	
fieldNormsChanged	TokenNameIdentifier	 field Norms Changed
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
curField	TokenNameIdentifier	 cur Field
=	TokenNameEQUAL	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
fieldInfos	TokenNameIdentifier	 field Infos
.	TokenNameDOT	
fieldInfo	TokenNameIdentifier	 field Info
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
)	TokenNameRPAREN	
.	TokenNameDOT	
name	TokenNameIdentifier	 name
;	TokenNameSEMICOLON	
SegmentNorms	TokenNameIdentifier	 Segment Norms
norm	TokenNameIdentifier	 norm
=	TokenNameEQUAL	
this	TokenNamethis	
.	TokenNameDOT	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
curField	TokenNameIdentifier	 cur Field
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
norm	TokenNameIdentifier	 norm
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
curField	TokenNameIdentifier	 cur Field
,	TokenNameCOMMA	
(	TokenNameLPAREN	
SegmentNorms	TokenNameIdentifier	 Segment Norms
)	TokenNameRPAREN	
norm	TokenNameIdentifier	 norm
.	TokenNameDOT	
clone	TokenNameIdentifier	 clone
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// If we are not cloning, then this will open anew 	TokenNameCOMMENT_LINE	If we are not cloning, then this will open anew 
// any norms that have changed: 	TokenNameCOMMENT_LINE	any norms that have changed: 
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
openNorms	TokenNameIdentifier	 open Norms
(	TokenNameLPAREN	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getUseCompoundFile	TokenNameIdentifier	 get Use Compound File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
?	TokenNameQUESTION	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
getCFSReader	TokenNameIdentifier	 get CFS Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
:	TokenNameCOLON	
directory	TokenNameIdentifier	 directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
readBufferSize	TokenNameIdentifier	 read Buffer Size
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
success	TokenNameIdentifier	 success
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
success	TokenNameIdentifier	 success
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// An exception occurred during reopen, we have to decRef the norms 	TokenNameCOMMENT_LINE	An exception occurred during reopen, we have to decRef the norms 
// that we incRef'ed already and close singleNormsStream and FieldsReader 	TokenNameCOMMENT_LINE	that we incRef'ed already and close singleNormsStream and FieldsReader 
clone	TokenNameIdentifier	 clone
.	TokenNameDOT	
decRef	TokenNameIdentifier	 dec Ref
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
clone	TokenNameIdentifier	 clone
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** {@inheritDoc} */	TokenNameCOMMENT_JAVADOC	 {@inheritDoc} 
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
@	TokenNameAT	
Deprecated	TokenNameIdentifier	 Deprecated
protected	TokenNameprotected	
void	TokenNamevoid	
doCommit	TokenNameIdentifier	 do Commit
(	TokenNameLPAREN	
Map	TokenNameIdentifier	 Map
<	TokenNameLESS	
String	TokenNameIdentifier	 String
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
>	TokenNameGREATER	
commitUserData	TokenNameIdentifier	 commit User Data
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
hasChanges	TokenNameIdentifier	 has Changes
)	TokenNameRPAREN	
{	TokenNameLBRACE	
startCommit	TokenNameIdentifier	 start Commit
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
success	TokenNameIdentifier	 success
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
commitChanges	TokenNameIdentifier	 commit Changes
(	TokenNameLPAREN	
commitUserData	TokenNameIdentifier	 commit User Data
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
success	TokenNameIdentifier	 success
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
success	TokenNameIdentifier	 success
)	TokenNameRPAREN	
{	TokenNameLBRACE	
rollbackCommit	TokenNameIdentifier	 rollback Commit
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
private	TokenNameprivate	
synchronized	TokenNamesynchronized	
void	TokenNamevoid	
commitChanges	TokenNameIdentifier	 commit Changes
(	TokenNameLPAREN	
Map	TokenNameIdentifier	 Map
<	TokenNameLESS	
String	TokenNameIdentifier	 String
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
>	TokenNameGREATER	
commitUserData	TokenNameIdentifier	 commit User Data
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
deletedDocsDirty	TokenNameIdentifier	 deleted Docs Dirty
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// re-write deleted 	TokenNameCOMMENT_LINE	re-write deleted 
si	TokenNameIdentifier	 si
.	TokenNameDOT	
advanceDelGen	TokenNameIdentifier	 advance Del Gen
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
assert	TokenNameassert	
deletedDocs	TokenNameIdentifier	 deleted Docs
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
docCount	TokenNameIdentifier	 doc Count
;	TokenNameSEMICOLON	
// We can write directly to the actual name (vs to a 	TokenNameCOMMENT_LINE	We can write directly to the actual name (vs to a 
// .tmp & renaming it) because the file is not live 	TokenNameCOMMENT_LINE	.tmp & renaming it) because the file is not live 
// until segments file is written: 	TokenNameCOMMENT_LINE	until segments file is written: 
final	TokenNamefinal	
String	TokenNameIdentifier	 String
delFileName	TokenNameIdentifier	 del File Name
=	TokenNameEQUAL	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getDelFileName	TokenNameIdentifier	 get Del File Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
success	TokenNameIdentifier	 success
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
deletedDocs	TokenNameIdentifier	 deleted Docs
.	TokenNameDOT	
write	TokenNameIdentifier	 write
(	TokenNameLPAREN	
directory	TokenNameIdentifier	 directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
delFileName	TokenNameIdentifier	 del File Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
success	TokenNameIdentifier	 success
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
success	TokenNameIdentifier	 success
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
directory	TokenNameIdentifier	 directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
deleteFile	TokenNameIdentifier	 delete File
(	TokenNameLPAREN	
delFileName	TokenNameIdentifier	 del File Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
Throwable	TokenNameIdentifier	 Throwable
t	TokenNameIdentifier	 t
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// suppress this so we keep throwing the 	TokenNameCOMMENT_LINE	suppress this so we keep throwing the 
// original exception 	TokenNameCOMMENT_LINE	original exception 
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
setDelCount	TokenNameIdentifier	 set Del Count
(	TokenNameLPAREN	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getDelCount	TokenNameIdentifier	 get Del Count
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
pendingDeleteCount	TokenNameIdentifier	 pending Delete Count
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
pendingDeleteCount	TokenNameIdentifier	 pending Delete Count
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
assert	TokenNameassert	
deletedDocs	TokenNameIdentifier	 deleted Docs
.	TokenNameDOT	
count	TokenNameIdentifier	 count
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getDelCount	TokenNameIdentifier	 get Del Count
(	TokenNameLPAREN	
)	TokenNameRPAREN	
:	TokenNameCOLON	
"delete count mismatch during commit: info="	TokenNameStringLiteral	delete count mismatch during commit: info=
+	TokenNamePLUS	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getDelCount	TokenNameIdentifier	 get Del Count
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" vs BitVector="	TokenNameStringLiteral	 vs BitVector=
+	TokenNamePLUS	
deletedDocs	TokenNameIdentifier	 deleted Docs
.	TokenNameDOT	
count	TokenNameIdentifier	 count
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
assert	TokenNameassert	
pendingDeleteCount	TokenNameIdentifier	 pending Delete Count
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
normsDirty	TokenNameIdentifier	 norms Dirty
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// re-write norms 	TokenNameCOMMENT_LINE	re-write norms 
si	TokenNameIdentifier	 si
.	TokenNameDOT	
setNumFields	TokenNameIdentifier	 set Num Fields
(	TokenNameLPAREN	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
fieldInfos	TokenNameIdentifier	 field Infos
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
final	TokenNamefinal	
SegmentNorms	TokenNameIdentifier	 Segment Norms
norm	TokenNameIdentifier	 norm
:	TokenNameCOLON	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
values	TokenNameIdentifier	 values
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
norm	TokenNameIdentifier	 norm
.	TokenNameDOT	
dirty	TokenNameIdentifier	 dirty
)	TokenNameRPAREN	
{	TokenNameLBRACE	
norm	TokenNameIdentifier	 norm
.	TokenNameDOT	
reWrite	TokenNameIdentifier	 re Write
(	TokenNameLPAREN	
si	TokenNameIdentifier	 si
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
deletedDocsDirty	TokenNameIdentifier	 deleted Docs Dirty
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
normsDirty	TokenNameIdentifier	 norms Dirty
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
hasChanges	TokenNameIdentifier	 has Changes
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
FieldsReader	TokenNameIdentifier	 Fields Reader
getFieldsReader	TokenNameIdentifier	 get Fields Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
fieldsReaderLocal	TokenNameIdentifier	 fields Reader Local
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
protected	TokenNameprotected	
void	TokenNamevoid	
doClose	TokenNameIdentifier	 do Close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
termVectorsLocal	TokenNameIdentifier	 term Vectors Local
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
fieldsReaderLocal	TokenNameIdentifier	 fields Reader Local
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
deletedDocs	TokenNameIdentifier	 deleted Docs
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
.	TokenNameDOT	
decrementAndGet	TokenNameIdentifier	 decrement And Get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// null so if an app hangs on to us we still free most ram 	TokenNameCOMMENT_LINE	null so if an app hangs on to us we still free most ram 
deletedDocs	TokenNameIdentifier	 deleted Docs
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
final	TokenNamefinal	
SegmentNorms	TokenNameIdentifier	 Segment Norms
norm	TokenNameIdentifier	 norm
:	TokenNameCOLON	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
values	TokenNameIdentifier	 values
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
norm	TokenNameIdentifier	 norm
.	TokenNameDOT	
decRef	TokenNameIdentifier	 dec Ref
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
core	TokenNameIdentifier	 core
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
decRef	TokenNameIdentifier	 dec Ref
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
static	TokenNamestatic	
boolean	TokenNameboolean	
hasDeletions	TokenNameIdentifier	 has Deletions
(	TokenNameLPAREN	
SegmentInfo	TokenNameIdentifier	 Segment Info
si	TokenNameIdentifier	 si
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
// Don't call ensureOpen() here (it could affect performance) 	TokenNameCOMMENT_LINE	Don't call ensureOpen() here (it could affect performance) 
return	TokenNamereturn	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
hasDeletions	TokenNameIdentifier	 has Deletions
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
boolean	TokenNameboolean	
hasDeletions	TokenNameIdentifier	 has Deletions
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Don't call ensureOpen() here (it could affect performance) 	TokenNameCOMMENT_LINE	Don't call ensureOpen() here (it could affect performance) 
return	TokenNamereturn	
deletedDocs	TokenNameIdentifier	 deleted Docs
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
static	TokenNamestatic	
boolean	TokenNameboolean	
usesCompoundFile	TokenNameIdentifier	 uses Compound File
(	TokenNameLPAREN	
SegmentInfo	TokenNameIdentifier	 Segment Info
si	TokenNameIdentifier	 si
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
return	TokenNamereturn	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getUseCompoundFile	TokenNameIdentifier	 get Use Compound File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
static	TokenNamestatic	
boolean	TokenNameboolean	
hasSeparateNorms	TokenNameIdentifier	 has Separate Norms
(	TokenNameLPAREN	
SegmentInfo	TokenNameIdentifier	 Segment Info
si	TokenNameIdentifier	 si
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
return	TokenNamereturn	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
hasSeparateNorms	TokenNameIdentifier	 has Separate Norms
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** {@inheritDoc} */	TokenNameCOMMENT_JAVADOC	 {@inheritDoc} 
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
@	TokenNameAT	
Deprecated	TokenNameIdentifier	 Deprecated
protected	TokenNameprotected	
void	TokenNamevoid	
doDelete	TokenNameIdentifier	 do Delete
(	TokenNameLPAREN	
int	TokenNameint	
docNum	TokenNameIdentifier	 doc Num
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
deletedDocs	TokenNameIdentifier	 deleted Docs
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
deletedDocs	TokenNameIdentifier	 deleted Docs
=	TokenNameEQUAL	
new	TokenNamenew	
BitVector	TokenNameIdentifier	 Bit Vector
(	TokenNameLPAREN	
maxDoc	TokenNameIdentifier	 max Doc
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
=	TokenNameEQUAL	
new	TokenNamenew	
AtomicInteger	TokenNameIdentifier	 Atomic Integer
(	TokenNameLPAREN	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// there is more than 1 SegmentReader with a reference to this 	TokenNameCOMMENT_LINE	there is more than 1 SegmentReader with a reference to this 
// deletedDocs BitVector so decRef the current deletedDocsRef, 	TokenNameCOMMENT_LINE	deletedDocs BitVector so decRef the current deletedDocsRef, 
// clone the BitVector, create a new deletedDocsRef 	TokenNameCOMMENT_LINE	clone the BitVector, create a new deletedDocsRef 
if	TokenNameif	
(	TokenNameLPAREN	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
>	TokenNameGREATER	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
AtomicInteger	TokenNameIdentifier	 Atomic Integer
oldRef	TokenNameIdentifier	 old Ref
=	TokenNameEQUAL	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
;	TokenNameSEMICOLON	
deletedDocs	TokenNameIdentifier	 deleted Docs
=	TokenNameEQUAL	
cloneDeletedDocs	TokenNameIdentifier	 clone Deleted Docs
(	TokenNameLPAREN	
deletedDocs	TokenNameIdentifier	 deleted Docs
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
=	TokenNameEQUAL	
new	TokenNamenew	
AtomicInteger	TokenNameIdentifier	 Atomic Integer
(	TokenNameLPAREN	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
oldRef	TokenNameIdentifier	 old Ref
.	TokenNameDOT	
decrementAndGet	TokenNameIdentifier	 decrement And Get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
deletedDocsDirty	TokenNameIdentifier	 deleted Docs Dirty
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
deletedDocs	TokenNameIdentifier	 deleted Docs
.	TokenNameDOT	
getAndSet	TokenNameIdentifier	 get And Set
(	TokenNameLPAREN	
docNum	TokenNameIdentifier	 doc Num
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
pendingDeleteCount	TokenNameIdentifier	 pending Delete Count
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** {@inheritDoc} */	TokenNameCOMMENT_JAVADOC	 {@inheritDoc} 
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
@	TokenNameAT	
Deprecated	TokenNameIdentifier	 Deprecated
protected	TokenNameprotected	
void	TokenNamevoid	
doUndeleteAll	TokenNameIdentifier	 do Undelete All
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
deletedDocsDirty	TokenNameIdentifier	 deleted Docs Dirty
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
deletedDocs	TokenNameIdentifier	 deleted Docs
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
assert	TokenNameassert	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
.	TokenNameDOT	
decrementAndGet	TokenNameIdentifier	 decrement And Get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
deletedDocs	TokenNameIdentifier	 deleted Docs
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
pendingDeleteCount	TokenNameIdentifier	 pending Delete Count
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
clearDelGen	TokenNameIdentifier	 clear Del Gen
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
setDelCount	TokenNameIdentifier	 set Del Count
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
assert	TokenNameassert	
deletedDocsRef	TokenNameIdentifier	 deleted Docs Ref
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
assert	TokenNameassert	
pendingDeleteCount	TokenNameIdentifier	 pending Delete Count
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
List	TokenNameIdentifier	 List
<	TokenNameLESS	
String	TokenNameIdentifier	 String
>	TokenNameGREATER	
files	TokenNameIdentifier	 files
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
return	TokenNamereturn	
new	TokenNamenew	
ArrayList	TokenNameIdentifier	 Array List
<	TokenNameLESS	
String	TokenNameIdentifier	 String
>	TokenNameGREATER	
(	TokenNameLPAREN	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
files	TokenNameIdentifier	 files
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
TermEnum	TokenNameIdentifier	 Term Enum
terms	TokenNameIdentifier	 terms
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
getTermsReader	TokenNameIdentifier	 get Terms Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
terms	TokenNameIdentifier	 terms
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
TermEnum	TokenNameIdentifier	 Term Enum
terms	TokenNameIdentifier	 terms
(	TokenNameLPAREN	
Term	TokenNameIdentifier	 Term
t	TokenNameIdentifier	 t
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
getTermsReader	TokenNameIdentifier	 get Terms Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
terms	TokenNameIdentifier	 terms
(	TokenNameLPAREN	
t	TokenNameIdentifier	 t
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
FieldInfos	TokenNameIdentifier	 Field Infos
getFieldInfos	TokenNameIdentifier	 get Field Infos
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
fieldInfos	TokenNameIdentifier	 field Infos
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// TODO: remove in 4.0 	TokenNameCOMMENT_LINE	TODO: remove in 4.0 
FieldInfos	TokenNameIdentifier	 Field Infos
fieldInfos	TokenNameIdentifier	 field Infos
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
fieldInfos	TokenNameIdentifier	 field Infos
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
Document	TokenNameIdentifier	 Document
document	TokenNameIdentifier	 document
(	TokenNameLPAREN	
int	TokenNameint	
n	TokenNameIdentifier	 n
,	TokenNameCOMMA	
FieldSelector	TokenNameIdentifier	 Field Selector
fieldSelector	TokenNameIdentifier	 field Selector
)	TokenNameRPAREN	
throws	TokenNamethrows	
CorruptIndexException	TokenNameIdentifier	 Corrupt Index Exception
,	TokenNameCOMMA	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
n	TokenNameIdentifier	 n
<	TokenNameLESS	
0	TokenNameIntegerLiteral	
||	TokenNameOR_OR	
n	TokenNameIdentifier	 n
>=	TokenNameGREATER_EQUAL	
maxDoc	TokenNameIdentifier	 max Doc
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
"docID must be >= 0 and < maxDoc="	TokenNameStringLiteral	docID must be >= 0 and < maxDoc=
+	TokenNamePLUS	
maxDoc	TokenNameIdentifier	 max Doc
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" (got docID="	TokenNameStringLiteral	 (got docID=
+	TokenNamePLUS	
n	TokenNameIdentifier	 n
+	TokenNamePLUS	
")"	TokenNameStringLiteral	)
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
getFieldsReader	TokenNameIdentifier	 get Fields Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
doc	TokenNameIdentifier	 doc
(	TokenNameLPAREN	
n	TokenNameIdentifier	 n
,	TokenNameCOMMA	
fieldSelector	TokenNameIdentifier	 field Selector
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
synchronized	TokenNamesynchronized	
boolean	TokenNameboolean	
isDeleted	TokenNameIdentifier	 is Deleted
(	TokenNameLPAREN	
int	TokenNameint	
n	TokenNameIdentifier	 n
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
(	TokenNameLPAREN	
deletedDocs	TokenNameIdentifier	 deleted Docs
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
deletedDocs	TokenNameIdentifier	 deleted Docs
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
n	TokenNameIdentifier	 n
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
TermDocs	TokenNameIdentifier	 Term Docs
termDocs	TokenNameIdentifier	 term Docs
(	TokenNameLPAREN	
Term	TokenNameIdentifier	 Term
term	TokenNameIdentifier	 term
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
term	TokenNameIdentifier	 term
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
new	TokenNamenew	
AllTermDocs	TokenNameIdentifier	 All Term Docs
(	TokenNameLPAREN	
this	TokenNamethis	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
return	TokenNamereturn	
super	TokenNamesuper	
.	TokenNameDOT	
termDocs	TokenNameIdentifier	 term Docs
(	TokenNameLPAREN	
term	TokenNameIdentifier	 term
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** Expert: returns an enumeration of the documents that contain * <code>term</code>, including deleted documents (which * are normally filtered out). * * @lucene.experimental */	TokenNameCOMMENT_JAVADOC	 Expert: returns an enumeration of the documents that contain <code>term</code>, including deleted documents (which are normally filtered out). * @lucene.experimental 
public	TokenNamepublic	
TermDocs	TokenNameIdentifier	 Term Docs
rawTermDocs	TokenNameIdentifier	 raw Term Docs
(	TokenNameLPAREN	
Term	TokenNameIdentifier	 Term
term	TokenNameIdentifier	 term
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
term	TokenNameIdentifier	 term
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
"term must not be null"	TokenNameStringLiteral	term must not be null
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
TermDocs	TokenNameIdentifier	 Term Docs
td	TokenNameIdentifier	 td
=	TokenNameEQUAL	
new	TokenNamenew	
SegmentTermDocs	TokenNameIdentifier	 Segment Term Docs
(	TokenNameLPAREN	
this	TokenNamethis	
,	TokenNameCOMMA	
true	TokenNametrue	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
td	TokenNameIdentifier	 td
.	TokenNameDOT	
seek	TokenNameIdentifier	 seek
(	TokenNameLPAREN	
term	TokenNameIdentifier	 term
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
td	TokenNameIdentifier	 td
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
TermDocs	TokenNameIdentifier	 Term Docs
termDocs	TokenNameIdentifier	 term Docs
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
new	TokenNamenew	
SegmentTermDocs	TokenNameIdentifier	 Segment Term Docs
(	TokenNameLPAREN	
this	TokenNamethis	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
TermPositions	TokenNameIdentifier	 Term Positions
termPositions	TokenNameIdentifier	 term Positions
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
new	TokenNamenew	
SegmentTermPositions	TokenNameIdentifier	 Segment Term Positions
(	TokenNameLPAREN	
this	TokenNamethis	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
int	TokenNameint	
docFreq	TokenNameIdentifier	 doc Freq
(	TokenNameLPAREN	
Term	TokenNameIdentifier	 Term
t	TokenNameIdentifier	 t
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
TermInfo	TokenNameIdentifier	 Term Info
ti	TokenNameIdentifier	 ti
=	TokenNameEQUAL	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
getTermsReader	TokenNameIdentifier	 get Terms Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
t	TokenNameIdentifier	 t
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
ti	TokenNameIdentifier	 ti
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
ti	TokenNameIdentifier	 ti
.	TokenNameDOT	
docFreq	TokenNameIdentifier	 doc Freq
;	TokenNameSEMICOLON	
else	TokenNameelse	
return	TokenNamereturn	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
int	TokenNameint	
numDocs	TokenNameIdentifier	 num Docs
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Don't call ensureOpen() here (it could affect performance) 	TokenNameCOMMENT_LINE	Don't call ensureOpen() here (it could affect performance) 
int	TokenNameint	
n	TokenNameIdentifier	 n
=	TokenNameEQUAL	
maxDoc	TokenNameIdentifier	 max Doc
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
deletedDocs	TokenNameIdentifier	 deleted Docs
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
n	TokenNameIdentifier	 n
-=	TokenNameMINUS_EQUAL	
deletedDocs	TokenNameIdentifier	 deleted Docs
.	TokenNameDOT	
count	TokenNameIdentifier	 count
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
n	TokenNameIdentifier	 n
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
int	TokenNameint	
maxDoc	TokenNameIdentifier	 max Doc
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Don't call ensureOpen() here (it could affect performance) 	TokenNameCOMMENT_LINE	Don't call ensureOpen() here (it could affect performance) 
return	TokenNamereturn	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
docCount	TokenNameIdentifier	 doc Count
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
boolean	TokenNameboolean	
hasNorms	TokenNameIdentifier	 has Norms
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
field	TokenNameIdentifier	 field
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
containsKey	TokenNameIdentifier	 contains Key
(	TokenNameLPAREN	
field	TokenNameIdentifier	 field
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
byte	TokenNamebyte	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
norms	TokenNameIdentifier	 norms
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
field	TokenNameIdentifier	 field
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
SegmentNorms	TokenNameIdentifier	 Segment Norms
norm	TokenNameIdentifier	 norm
=	TokenNameEQUAL	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
field	TokenNameIdentifier	 field
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
norm	TokenNameIdentifier	 norm
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// not indexed, or norms not stored 	TokenNameCOMMENT_LINE	not indexed, or norms not stored 
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
norm	TokenNameIdentifier	 norm
.	TokenNameDOT	
bytes	TokenNameIdentifier	 bytes
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** {@inheritDoc} */	TokenNameCOMMENT_JAVADOC	 {@inheritDoc} 
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
@	TokenNameAT	
Deprecated	TokenNameIdentifier	 Deprecated
protected	TokenNameprotected	
void	TokenNamevoid	
doSetNorm	TokenNameIdentifier	 do Set Norm
(	TokenNameLPAREN	
int	TokenNameint	
doc	TokenNameIdentifier	 doc
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
field	TokenNameIdentifier	 field
,	TokenNameCOMMA	
byte	TokenNamebyte	
value	TokenNameIdentifier	 value
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
SegmentNorms	TokenNameIdentifier	 Segment Norms
norm	TokenNameIdentifier	 norm
=	TokenNameEQUAL	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
field	TokenNameIdentifier	 field
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
norm	TokenNameIdentifier	 norm
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// field does not store norms 	TokenNameCOMMENT_LINE	field does not store norms 
throw	TokenNamethrow	
new	TokenNamenew	
IllegalStateException	TokenNameIdentifier	 Illegal State Exception
(	TokenNameLPAREN	
"Cannot setNorm for field "	TokenNameStringLiteral	Cannot setNorm for field 
+	TokenNamePLUS	
field	TokenNameIdentifier	 field
+	TokenNamePLUS	
": norms were omitted"	TokenNameStringLiteral	: norms were omitted
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
normsDirty	TokenNameIdentifier	 norms Dirty
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
norm	TokenNameIdentifier	 norm
.	TokenNameDOT	
copyOnWrite	TokenNameIdentifier	 copy On Write
(	TokenNameLPAREN	
)	TokenNameRPAREN	
[	TokenNameLBRACKET	
doc	TokenNameIdentifier	 doc
]	TokenNameRBRACKET	
=	TokenNameEQUAL	
value	TokenNameIdentifier	 value
;	TokenNameSEMICOLON	
// set the value 	TokenNameCOMMENT_LINE	set the value 
}	TokenNameRBRACE	
/** Read norms into a pre-allocated array. */	TokenNameCOMMENT_JAVADOC	 Read norms into a pre-allocated array. 
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
synchronized	TokenNamesynchronized	
void	TokenNamevoid	
norms	TokenNameIdentifier	 norms
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
field	TokenNameIdentifier	 field
,	TokenNameCOMMA	
byte	TokenNamebyte	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
bytes	TokenNameIdentifier	 bytes
,	TokenNameCOMMA	
int	TokenNameint	
offset	TokenNameIdentifier	 offset
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
SegmentNorms	TokenNameIdentifier	 Segment Norms
norm	TokenNameIdentifier	 norm
=	TokenNameEQUAL	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
field	TokenNameIdentifier	 field
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
norm	TokenNameIdentifier	 norm
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Arrays	TokenNameIdentifier	 Arrays
.	TokenNameDOT	
fill	TokenNameIdentifier	 fill
(	TokenNameLPAREN	
bytes	TokenNameIdentifier	 bytes
,	TokenNameCOMMA	
offset	TokenNameIdentifier	 offset
,	TokenNameCOMMA	
bytes	TokenNameIdentifier	 bytes
.	TokenNameDOT	
length	TokenNameIdentifier	 length
,	TokenNameCOMMA	
Similarity	TokenNameIdentifier	 Similarity
.	TokenNameDOT	
getDefault	TokenNameIdentifier	 get Default
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
encodeNormValue	TokenNameIdentifier	 encode Norm Value
(	TokenNameLPAREN	
1.0f	TokenNameFloatingPointLiteral	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
norm	TokenNameIdentifier	 norm
.	TokenNameDOT	
bytes	TokenNameIdentifier	 bytes
(	TokenNameLPAREN	
bytes	TokenNameIdentifier	 bytes
,	TokenNameCOMMA	
offset	TokenNameIdentifier	 offset
,	TokenNameCOMMA	
maxDoc	TokenNameIdentifier	 max Doc
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// For testing 	TokenNameCOMMENT_LINE	For testing 
/** @lucene.internal */	TokenNameCOMMENT_JAVADOC	 @lucene.internal 
int	TokenNameint	
getPostingsSkipInterval	TokenNameIdentifier	 get Postings Skip Interval
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
getTermsReader	TokenNameIdentifier	 get Terms Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getSkipInterval	TokenNameIdentifier	 get Skip Interval
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
void	TokenNamevoid	
openNorms	TokenNameIdentifier	 open Norms
(	TokenNameLPAREN	
Directory	TokenNameIdentifier	 Directory
cfsDir	TokenNameIdentifier	 cfs Dir
,	TokenNameCOMMA	
int	TokenNameint	
readBufferSize	TokenNameIdentifier	 read Buffer Size
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
boolean	TokenNameboolean	
normsInitiallyEmpty	TokenNameIdentifier	 norms Initially Empty
=	TokenNameEQUAL	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
isEmpty	TokenNameIdentifier	 is Empty
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// only used for assert 	TokenNameCOMMENT_LINE	only used for assert 
long	TokenNamelong	
nextNormSeek	TokenNameIdentifier	 next Norm Seek
=	TokenNameEQUAL	
SegmentNorms	TokenNameIdentifier	 Segment Norms
.	TokenNameDOT	
NORMS_HEADER	TokenNameIdentifier	 NORMS  HEADER
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
//skip header (header unused for now) 	TokenNameCOMMENT_LINE	skip header (header unused for now) 
int	TokenNameint	
maxDoc	TokenNameIdentifier	 max Doc
=	TokenNameEQUAL	
maxDoc	TokenNameIdentifier	 max Doc
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
fieldInfos	TokenNameIdentifier	 field Infos
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
FieldInfo	TokenNameIdentifier	 Field Info
fi	TokenNameIdentifier	 fi
=	TokenNameEQUAL	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
fieldInfos	TokenNameIdentifier	 field Infos
.	TokenNameDOT	
fieldInfo	TokenNameIdentifier	 field Info
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
containsKey	TokenNameIdentifier	 contains Key
(	TokenNameLPAREN	
fi	TokenNameIdentifier	 fi
.	TokenNameDOT	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// in case this SegmentReader is being re-opened, we might be able to 	TokenNameCOMMENT_LINE	in case this SegmentReader is being re-opened, we might be able to 
// reuse some norm instances and skip loading them here 	TokenNameCOMMENT_LINE	reuse some norm instances and skip loading them here 
continue	TokenNamecontinue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
fi	TokenNameIdentifier	 fi
.	TokenNameDOT	
isIndexed	TokenNameIdentifier	 is Indexed
&&	TokenNameAND_AND	
!	TokenNameNOT	
fi	TokenNameIdentifier	 fi
.	TokenNameDOT	
omitNorms	TokenNameIdentifier	 omit Norms
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Directory	TokenNameIdentifier	 Directory
d	TokenNameIdentifier	 d
=	TokenNameEQUAL	
directory	TokenNameIdentifier	 directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
fileName	TokenNameIdentifier	 file Name
=	TokenNameEQUAL	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getNormFileName	TokenNameIdentifier	 get Norm File Name
(	TokenNameLPAREN	
fi	TokenNameIdentifier	 fi
.	TokenNameDOT	
number	TokenNameIdentifier	 number
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
hasSeparateNorms	TokenNameIdentifier	 has Separate Norms
(	TokenNameLPAREN	
fi	TokenNameIdentifier	 fi
.	TokenNameDOT	
number	TokenNameIdentifier	 number
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
d	TokenNameIdentifier	 d
=	TokenNameEQUAL	
cfsDir	TokenNameIdentifier	 cfs Dir
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// singleNormFile means multiple norms share this file 	TokenNameCOMMENT_LINE	singleNormFile means multiple norms share this file 
boolean	TokenNameboolean	
singleNormFile	TokenNameIdentifier	 single Norm File
=	TokenNameEQUAL	
IndexFileNames	TokenNameIdentifier	 Index File Names
.	TokenNameDOT	
matchesExtension	TokenNameIdentifier	 matches Extension
(	TokenNameLPAREN	
fileName	TokenNameIdentifier	 file Name
,	TokenNameCOMMA	
IndexFileNames	TokenNameIdentifier	 Index File Names
.	TokenNameDOT	
NORMS_EXTENSION	TokenNameIdentifier	 NORMS  EXTENSION
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
IndexInput	TokenNameIdentifier	 Index Input
normInput	TokenNameIdentifier	 norm Input
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
long	TokenNamelong	
normSeek	TokenNameIdentifier	 norm Seek
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
singleNormFile	TokenNameIdentifier	 single Norm File
)	TokenNameRPAREN	
{	TokenNameLBRACE	
normSeek	TokenNameIdentifier	 norm Seek
=	TokenNameEQUAL	
nextNormSeek	TokenNameIdentifier	 next Norm Seek
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
singleNormStream	TokenNameIdentifier	 single Norm Stream
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
singleNormStream	TokenNameIdentifier	 single Norm Stream
=	TokenNameEQUAL	
d	TokenNameIdentifier	 d
.	TokenNameDOT	
openInput	TokenNameIdentifier	 open Input
(	TokenNameLPAREN	
fileName	TokenNameIdentifier	 file Name
,	TokenNameCOMMA	
readBufferSize	TokenNameIdentifier	 read Buffer Size
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
singleNormRef	TokenNameIdentifier	 single Norm Ref
=	TokenNameEQUAL	
new	TokenNamenew	
AtomicInteger	TokenNameIdentifier	 Atomic Integer
(	TokenNameLPAREN	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
singleNormRef	TokenNameIdentifier	 single Norm Ref
.	TokenNameDOT	
incrementAndGet	TokenNameIdentifier	 increment And Get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// All norms in the .nrm file can share a single IndexInput since 	TokenNameCOMMENT_LINE	All norms in the .nrm file can share a single IndexInput since 
// they are only used in a synchronized context. 	TokenNameCOMMENT_LINE	they are only used in a synchronized context. 
// If this were to change in the future, a clone could be done here. 	TokenNameCOMMENT_LINE	If this were to change in the future, a clone could be done here. 
normInput	TokenNameIdentifier	 norm Input
=	TokenNameEQUAL	
singleNormStream	TokenNameIdentifier	 single Norm Stream
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
normInput	TokenNameIdentifier	 norm Input
=	TokenNameEQUAL	
d	TokenNameIdentifier	 d
.	TokenNameDOT	
openInput	TokenNameIdentifier	 open Input
(	TokenNameLPAREN	
fileName	TokenNameIdentifier	 file Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// if the segment was created in 3.2 or after, we wrote the header for sure, 	TokenNameCOMMENT_LINE	if the segment was created in 3.2 or after, we wrote the header for sure, 
// and don't need to do the sketchy file size check. otherwise, we check 	TokenNameCOMMENT_LINE	and don't need to do the sketchy file size check. otherwise, we check 
// if the size is exactly equal to maxDoc to detect a headerless file. 	TokenNameCOMMENT_LINE	if the size is exactly equal to maxDoc to detect a headerless file. 
// NOTE: remove this check in Lucene 5.0! 	TokenNameCOMMENT_LINE	NOTE: remove this check in Lucene 5.0! 
String	TokenNameIdentifier	 String
version	TokenNameIdentifier	 version
=	TokenNameEQUAL	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
getVersion	TokenNameIdentifier	 get Version
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
boolean	TokenNameboolean	
isUnversioned	TokenNameIdentifier	 is Unversioned
=	TokenNameEQUAL	
(	TokenNameLPAREN	
version	TokenNameIdentifier	 version
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
||	TokenNameOR_OR	
StringHelper	TokenNameIdentifier	 String Helper
.	TokenNameDOT	
getVersionComparator	TokenNameIdentifier	 get Version Comparator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
compare	TokenNameIdentifier	 compare
(	TokenNameLPAREN	
version	TokenNameIdentifier	 version
,	TokenNameCOMMA	
"3.2"	TokenNameStringLiteral	3.2
)	TokenNameRPAREN	
<	TokenNameLESS	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
normInput	TokenNameIdentifier	 norm Input
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
maxDoc	TokenNameIdentifier	 max Doc
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
isUnversioned	TokenNameIdentifier	 is Unversioned
)	TokenNameRPAREN	
{	TokenNameLBRACE	
normSeek	TokenNameIdentifier	 norm Seek
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
normSeek	TokenNameIdentifier	 norm Seek
=	TokenNameEQUAL	
SegmentNorms	TokenNameIdentifier	 Segment Norms
.	TokenNameDOT	
NORMS_HEADER	TokenNameIdentifier	 NORMS  HEADER
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
fi	TokenNameIdentifier	 fi
.	TokenNameDOT	
name	TokenNameIdentifier	 name
,	TokenNameCOMMA	
new	TokenNamenew	
SegmentNorms	TokenNameIdentifier	 Segment Norms
(	TokenNameLPAREN	
normInput	TokenNameIdentifier	 norm Input
,	TokenNameCOMMA	
fi	TokenNameIdentifier	 fi
.	TokenNameDOT	
number	TokenNameIdentifier	 number
,	TokenNameCOMMA	
normSeek	TokenNameIdentifier	 norm Seek
,	TokenNameCOMMA	
this	TokenNamethis	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
nextNormSeek	TokenNameIdentifier	 next Norm Seek
+=	TokenNamePLUS_EQUAL	
maxDoc	TokenNameIdentifier	 max Doc
;	TokenNameSEMICOLON	
// increment also if some norms are separate 	TokenNameCOMMENT_LINE	increment also if some norms are separate 
}	TokenNameRBRACE	
}	TokenNameRBRACE	
assert	TokenNameassert	
singleNormStream	TokenNameIdentifier	 single Norm Stream
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
||	TokenNameOR_OR	
!	TokenNameNOT	
normsInitiallyEmpty	TokenNameIdentifier	 norms Initially Empty
||	TokenNameOR_OR	
nextNormSeek	TokenNameIdentifier	 next Norm Seek
==	TokenNameEQUAL_EQUAL	
singleNormStream	TokenNameIdentifier	 single Norm Stream
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
boolean	TokenNameboolean	
termsIndexLoaded	TokenNameIdentifier	 terms Index Loaded
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
termsIndexIsLoaded	TokenNameIdentifier	 terms Index Is Loaded
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// NOTE: only called from IndexWriter when a near 	TokenNameCOMMENT_LINE	NOTE: only called from IndexWriter when a near 
// real-time reader is opened, or applyDeletes is run, 	TokenNameCOMMENT_LINE	real-time reader is opened, or applyDeletes is run, 
// sharing a segment that's still being merged. This 	TokenNameCOMMENT_LINE	sharing a segment that's still being merged. This 
// method is not thread safe, and relies on the 	TokenNameCOMMENT_LINE	method is not thread safe, and relies on the 
// synchronization in IndexWriter 	TokenNameCOMMENT_LINE	synchronization in IndexWriter 
void	TokenNamevoid	
loadTermsIndex	TokenNameIdentifier	 load Terms Index
(	TokenNameLPAREN	
int	TokenNameint	
termsIndexDivisor	TokenNameIdentifier	 terms Index Divisor
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
loadTermsIndex	TokenNameIdentifier	 load Terms Index
(	TokenNameLPAREN	
si	TokenNameIdentifier	 si
,	TokenNameCOMMA	
termsIndexDivisor	TokenNameIdentifier	 terms Index Divisor
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// for testing only 	TokenNameCOMMENT_LINE	for testing only 
boolean	TokenNameboolean	
normsClosed	TokenNameIdentifier	 norms Closed
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
singleNormStream	TokenNameIdentifier	 single Norm Stream
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
final	TokenNamefinal	
SegmentNorms	TokenNameIdentifier	 Segment Norms
norm	TokenNameIdentifier	 norm
:	TokenNameCOLON	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
values	TokenNameIdentifier	 values
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
norm	TokenNameIdentifier	 norm
.	TokenNameDOT	
refCount	TokenNameIdentifier	 ref Count
>	TokenNameGREATER	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// for testing only 	TokenNameCOMMENT_LINE	for testing only 
boolean	TokenNameboolean	
normsClosed	TokenNameIdentifier	 norms Closed
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
field	TokenNameIdentifier	 field
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
field	TokenNameIdentifier	 field
)	TokenNameRPAREN	
.	TokenNameDOT	
refCount	TokenNameIdentifier	 ref Count
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Create a clone from the initial TermVectorsReader and store it in the ThreadLocal. * @return TermVectorsReader */	TokenNameCOMMENT_JAVADOC	 Create a clone from the initial TermVectorsReader and store it in the ThreadLocal. @return TermVectorsReader 
TermVectorsReader	TokenNameIdentifier	 Term Vectors Reader
getTermVectorsReader	TokenNameIdentifier	 get Term Vectors Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
TermVectorsReader	TokenNameIdentifier	 Term Vectors Reader
tvReader	TokenNameIdentifier	 tv Reader
=	TokenNameEQUAL	
termVectorsLocal	TokenNameIdentifier	 term Vectors Local
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
tvReader	TokenNameIdentifier	 tv Reader
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
TermVectorsReader	TokenNameIdentifier	 Term Vectors Reader
orig	TokenNameIdentifier	 orig
=	TokenNameEQUAL	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
getTermVectorsReaderOrig	TokenNameIdentifier	 get Term Vectors Reader Orig
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
orig	TokenNameIdentifier	 orig
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
tvReader	TokenNameIdentifier	 tv Reader
=	TokenNameEQUAL	
(	TokenNameLPAREN	
TermVectorsReader	TokenNameIdentifier	 Term Vectors Reader
)	TokenNameRPAREN	
orig	TokenNameIdentifier	 orig
.	TokenNameDOT	
clone	TokenNameIdentifier	 clone
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
CloneNotSupportedException	TokenNameIdentifier	 Clone Not Supported Exception
cnse	TokenNameIdentifier	 cnse
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
termVectorsLocal	TokenNameIdentifier	 term Vectors Local
.	TokenNameDOT	
set	TokenNameIdentifier	 set
(	TokenNameLPAREN	
tvReader	TokenNameIdentifier	 tv Reader
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
tvReader	TokenNameIdentifier	 tv Reader
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
TermVectorsReader	TokenNameIdentifier	 Term Vectors Reader
getTermVectorsReaderOrig	TokenNameIdentifier	 get Term Vectors Reader Orig
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
getTermVectorsReaderOrig	TokenNameIdentifier	 get Term Vectors Reader Orig
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** Return a term frequency vector for the specified document and field. The * vector returned contains term numbers and frequencies for all terms in * the specified field of this document, if the field had storeTermVector * flag set. If the flag was not set, the method returns null. * @throws IOException */	TokenNameCOMMENT_JAVADOC	 Return a term frequency vector for the specified document and field. The vector returned contains term numbers and frequencies for all terms in the specified field of this document, if the field had storeTermVector flag set. If the flag was not set, the method returns null. @throws IOException 
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
TermFreqVector	TokenNameIdentifier	 Term Freq Vector
getTermFreqVector	TokenNameIdentifier	 get Term Freq Vector
(	TokenNameLPAREN	
int	TokenNameint	
docNumber	TokenNameIdentifier	 doc Number
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
field	TokenNameIdentifier	 field
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
// Check if this field is invalid or has no stored term vector 	TokenNameCOMMENT_LINE	Check if this field is invalid or has no stored term vector 
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
FieldInfo	TokenNameIdentifier	 Field Info
fi	TokenNameIdentifier	 fi
=	TokenNameEQUAL	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
fieldInfos	TokenNameIdentifier	 field Infos
.	TokenNameDOT	
fieldInfo	TokenNameIdentifier	 field Info
(	TokenNameLPAREN	
field	TokenNameIdentifier	 field
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
fi	TokenNameIdentifier	 fi
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
||	TokenNameOR_OR	
!	TokenNameNOT	
fi	TokenNameIdentifier	 fi
.	TokenNameDOT	
storeTermVector	TokenNameIdentifier	 store Term Vector
)	TokenNameRPAREN	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
TermVectorsReader	TokenNameIdentifier	 Term Vectors Reader
termVectorsReader	TokenNameIdentifier	 term Vectors Reader
=	TokenNameEQUAL	
getTermVectorsReader	TokenNameIdentifier	 get Term Vectors Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
termVectorsReader	TokenNameIdentifier	 term Vectors Reader
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
termVectorsReader	TokenNameIdentifier	 term Vectors Reader
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
docNumber	TokenNameIdentifier	 doc Number
,	TokenNameCOMMA	
field	TokenNameIdentifier	 field
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
void	TokenNamevoid	
getTermFreqVector	TokenNameIdentifier	 get Term Freq Vector
(	TokenNameLPAREN	
int	TokenNameint	
docNumber	TokenNameIdentifier	 doc Number
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
field	TokenNameIdentifier	 field
,	TokenNameCOMMA	
TermVectorMapper	TokenNameIdentifier	 Term Vector Mapper
mapper	TokenNameIdentifier	 mapper
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
FieldInfo	TokenNameIdentifier	 Field Info
fi	TokenNameIdentifier	 fi
=	TokenNameEQUAL	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
fieldInfos	TokenNameIdentifier	 field Infos
.	TokenNameDOT	
fieldInfo	TokenNameIdentifier	 field Info
(	TokenNameLPAREN	
field	TokenNameIdentifier	 field
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
fi	TokenNameIdentifier	 fi
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
||	TokenNameOR_OR	
!	TokenNameNOT	
fi	TokenNameIdentifier	 fi
.	TokenNameDOT	
storeTermVector	TokenNameIdentifier	 store Term Vector
)	TokenNameRPAREN	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
TermVectorsReader	TokenNameIdentifier	 Term Vectors Reader
termVectorsReader	TokenNameIdentifier	 term Vectors Reader
=	TokenNameEQUAL	
getTermVectorsReader	TokenNameIdentifier	 get Term Vectors Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
termVectorsReader	TokenNameIdentifier	 term Vectors Reader
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
termVectorsReader	TokenNameIdentifier	 term Vectors Reader
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
docNumber	TokenNameIdentifier	 doc Number
,	TokenNameCOMMA	
field	TokenNameIdentifier	 field
,	TokenNameCOMMA	
mapper	TokenNameIdentifier	 mapper
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
void	TokenNamevoid	
getTermFreqVector	TokenNameIdentifier	 get Term Freq Vector
(	TokenNameLPAREN	
int	TokenNameint	
docNumber	TokenNameIdentifier	 doc Number
,	TokenNameCOMMA	
TermVectorMapper	TokenNameIdentifier	 Term Vector Mapper
mapper	TokenNameIdentifier	 mapper
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
TermVectorsReader	TokenNameIdentifier	 Term Vectors Reader
termVectorsReader	TokenNameIdentifier	 term Vectors Reader
=	TokenNameEQUAL	
getTermVectorsReader	TokenNameIdentifier	 get Term Vectors Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
termVectorsReader	TokenNameIdentifier	 term Vectors Reader
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
termVectorsReader	TokenNameIdentifier	 term Vectors Reader
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
docNumber	TokenNameIdentifier	 doc Number
,	TokenNameCOMMA	
mapper	TokenNameIdentifier	 mapper
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** Return an array of term frequency vectors for the specified document. * The array contains a vector for each vectorized field in the document. * Each vector vector contains term numbers and frequencies for all terms * in a given vectorized field. * If no such fields existed, the method returns null. * @throws IOException */	TokenNameCOMMENT_JAVADOC	 Return an array of term frequency vectors for the specified document. The array contains a vector for each vectorized field in the document. Each vector vector contains term numbers and frequencies for all terms in a given vectorized field. If no such fields existed, the method returns null. @throws IOException 
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
TermFreqVector	TokenNameIdentifier	 Term Freq Vector
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
getTermFreqVectors	TokenNameIdentifier	 get Term Freq Vectors
(	TokenNameLPAREN	
int	TokenNameint	
docNumber	TokenNameIdentifier	 doc Number
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
TermVectorsReader	TokenNameIdentifier	 Term Vectors Reader
termVectorsReader	TokenNameIdentifier	 term Vectors Reader
=	TokenNameEQUAL	
getTermVectorsReader	TokenNameIdentifier	 get Term Vectors Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
termVectorsReader	TokenNameIdentifier	 term Vectors Reader
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
termVectorsReader	TokenNameIdentifier	 term Vectors Reader
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
docNumber	TokenNameIdentifier	 doc Number
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** {@inheritDoc} */	TokenNameCOMMENT_JAVADOC	 {@inheritDoc} 
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
String	TokenNameIdentifier	 String
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
final	TokenNamefinal	
StringBuilder	TokenNameIdentifier	 String Builder
buffer	TokenNameIdentifier	 buffer
=	TokenNameEQUAL	
new	TokenNamenew	
StringBuilder	TokenNameIdentifier	 String Builder
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
hasChanges	TokenNameIdentifier	 has Changes
)	TokenNameRPAREN	
{	TokenNameLBRACE	
buffer	TokenNameIdentifier	 buffer
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
'*'	TokenNameCharacterLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
buffer	TokenNameIdentifier	 buffer
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
pendingDeleteCount	TokenNameIdentifier	 pending Delete Count
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
buffer	TokenNameIdentifier	 buffer
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Return the name of the segment this reader is reading. */	TokenNameCOMMENT_JAVADOC	 Return the name of the segment this reader is reading. 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getSegmentName	TokenNameIdentifier	 get Segment Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
segment	TokenNameIdentifier	 segment
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Return the SegmentInfo of the segment this reader is reading. */	TokenNameCOMMENT_JAVADOC	 Return the SegmentInfo of the segment this reader is reading. 
SegmentInfo	TokenNameIdentifier	 Segment Info
getSegmentInfo	TokenNameIdentifier	 get Segment Info
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
si	TokenNameIdentifier	 si
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
void	TokenNamevoid	
setSegmentInfo	TokenNameIdentifier	 set Segment Info
(	TokenNameLPAREN	
SegmentInfo	TokenNameIdentifier	 Segment Info
info	TokenNameIdentifier	 info
)	TokenNameRPAREN	
{	TokenNameLBRACE	
si	TokenNameIdentifier	 si
=	TokenNameEQUAL	
info	TokenNameIdentifier	 info
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
void	TokenNamevoid	
startCommit	TokenNameIdentifier	 start Commit
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
rollbackSegmentInfo	TokenNameIdentifier	 rollback Segment Info
=	TokenNameEQUAL	
(	TokenNameLPAREN	
SegmentInfo	TokenNameIdentifier	 Segment Info
)	TokenNameRPAREN	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
clone	TokenNameIdentifier	 clone
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
rollbackHasChanges	TokenNameIdentifier	 rollback Has Changes
=	TokenNameEQUAL	
hasChanges	TokenNameIdentifier	 has Changes
;	TokenNameSEMICOLON	
rollbackDeletedDocsDirty	TokenNameIdentifier	 rollback Deleted Docs Dirty
=	TokenNameEQUAL	
deletedDocsDirty	TokenNameIdentifier	 deleted Docs Dirty
;	TokenNameSEMICOLON	
rollbackNormsDirty	TokenNameIdentifier	 rollback Norms Dirty
=	TokenNameEQUAL	
normsDirty	TokenNameIdentifier	 norms Dirty
;	TokenNameSEMICOLON	
rollbackPendingDeleteCount	TokenNameIdentifier	 rollback Pending Delete Count
=	TokenNameEQUAL	
pendingDeleteCount	TokenNameIdentifier	 pending Delete Count
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
SegmentNorms	TokenNameIdentifier	 Segment Norms
norm	TokenNameIdentifier	 norm
:	TokenNameCOLON	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
values	TokenNameIdentifier	 values
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
norm	TokenNameIdentifier	 norm
.	TokenNameDOT	
rollbackDirty	TokenNameIdentifier	 rollback Dirty
=	TokenNameEQUAL	
norm	TokenNameIdentifier	 norm
.	TokenNameDOT	
dirty	TokenNameIdentifier	 dirty
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
void	TokenNamevoid	
rollbackCommit	TokenNameIdentifier	 rollback Commit
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
si	TokenNameIdentifier	 si
.	TokenNameDOT	
reset	TokenNameIdentifier	 reset
(	TokenNameLPAREN	
rollbackSegmentInfo	TokenNameIdentifier	 rollback Segment Info
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
hasChanges	TokenNameIdentifier	 has Changes
=	TokenNameEQUAL	
rollbackHasChanges	TokenNameIdentifier	 rollback Has Changes
;	TokenNameSEMICOLON	
deletedDocsDirty	TokenNameIdentifier	 deleted Docs Dirty
=	TokenNameEQUAL	
rollbackDeletedDocsDirty	TokenNameIdentifier	 rollback Deleted Docs Dirty
;	TokenNameSEMICOLON	
normsDirty	TokenNameIdentifier	 norms Dirty
=	TokenNameEQUAL	
rollbackNormsDirty	TokenNameIdentifier	 rollback Norms Dirty
;	TokenNameSEMICOLON	
pendingDeleteCount	TokenNameIdentifier	 pending Delete Count
=	TokenNameEQUAL	
rollbackPendingDeleteCount	TokenNameIdentifier	 rollback Pending Delete Count
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
SegmentNorms	TokenNameIdentifier	 Segment Norms
norm	TokenNameIdentifier	 norm
:	TokenNameCOLON	
norms	TokenNameIdentifier	 norms
.	TokenNameDOT	
values	TokenNameIdentifier	 values
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
norm	TokenNameIdentifier	 norm
.	TokenNameDOT	
dirty	TokenNameIdentifier	 dirty
=	TokenNameEQUAL	
norm	TokenNameIdentifier	 norm
.	TokenNameDOT	
rollbackDirty	TokenNameIdentifier	 rollback Dirty
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** Returns the directory this index resides in. */	TokenNameCOMMENT_JAVADOC	 Returns the directory this index resides in. 
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
Directory	TokenNameIdentifier	 Directory
directory	TokenNameIdentifier	 directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Don't ensureOpen here -- in certain cases, when a 	TokenNameCOMMENT_LINE	Don't ensureOpen here -- in certain cases, when a 
// cloned/reopened reader needs to commit, it may call 	TokenNameCOMMENT_LINE	cloned/reopened reader needs to commit, it may call 
// this method on the closed original reader 	TokenNameCOMMENT_LINE	this method on the closed original reader 
return	TokenNamereturn	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
dir	TokenNameIdentifier	 dir
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// This is necessary so that cloned SegmentReaders (which 	TokenNameCOMMENT_LINE	This is necessary so that cloned SegmentReaders (which 
// share the underlying postings data) will map to the 	TokenNameCOMMENT_LINE	share the underlying postings data) will map to the 
// same entry in the FieldCache. See LUCENE-1579. 	TokenNameCOMMENT_LINE	same entry in the FieldCache. See LUCENE-1579. 
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
final	TokenNamefinal	
Object	TokenNameIdentifier	 Object
getCoreCacheKey	TokenNameIdentifier	 get Core Cache Key
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
freqStream	TokenNameIdentifier	 freq Stream
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
Object	TokenNameIdentifier	 Object
getDeletesCacheKey	TokenNameIdentifier	 get Deletes Cache Key
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
deletedDocs	TokenNameIdentifier	 deleted Docs
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
long	TokenNamelong	
getUniqueTermCount	TokenNameIdentifier	 get Unique Term Count
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
getTermsReader	TokenNameIdentifier	 get Terms Reader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Lotsa tests did hacks like:<br/> * SegmentReader reader = (SegmentReader) IndexReader.open(dir);<br/> * They broke. This method serves as a hack to keep hacks working * We do it with R/W access for the tests (BW compatibility) * @deprecated Remove this when tests are fixed! */	TokenNameCOMMENT_JAVADOC	 Lotsa tests did hacks like:<br/> SegmentReader reader = (SegmentReader) IndexReader.open(dir);<br/> They broke. This method serves as a hack to keep hacks working We do it with R/W access for the tests (BW compatibility) @deprecated Remove this when tests are fixed! 
@	TokenNameAT	
Deprecated	TokenNameIdentifier	 Deprecated
static	TokenNamestatic	
SegmentReader	TokenNameIdentifier	 Segment Reader
getOnlySegmentReader	TokenNameIdentifier	 get Only Segment Reader
(	TokenNameLPAREN	
Directory	TokenNameIdentifier	 Directory
dir	TokenNameIdentifier	 dir
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
return	TokenNamereturn	
getOnlySegmentReader	TokenNameIdentifier	 get Only Segment Reader
(	TokenNameLPAREN	
IndexReader	TokenNameIdentifier	 Index Reader
.	TokenNameDOT	
open	TokenNameIdentifier	 open
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
false	TokenNamefalse	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
static	TokenNamestatic	
SegmentReader	TokenNameIdentifier	 Segment Reader
getOnlySegmentReader	TokenNameIdentifier	 get Only Segment Reader
(	TokenNameLPAREN	
IndexReader	TokenNameIdentifier	 Index Reader
reader	TokenNameIdentifier	 reader
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
reader	TokenNameIdentifier	 reader
instanceof	TokenNameinstanceof	
SegmentReader	TokenNameIdentifier	 Segment Reader
)	TokenNameRPAREN	
return	TokenNamereturn	
(	TokenNameLPAREN	
SegmentReader	TokenNameIdentifier	 Segment Reader
)	TokenNameRPAREN	
reader	TokenNameIdentifier	 reader
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
reader	TokenNameIdentifier	 reader
instanceof	TokenNameinstanceof	
DirectoryReader	TokenNameIdentifier	 Directory Reader
)	TokenNameRPAREN	
{	TokenNameLBRACE	
IndexReader	TokenNameIdentifier	 Index Reader
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
subReaders	TokenNameIdentifier	 sub Readers
=	TokenNameEQUAL	
reader	TokenNameIdentifier	 reader
.	TokenNameDOT	
getSequentialSubReaders	TokenNameIdentifier	 get Sequential Sub Readers
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
subReaders	TokenNameIdentifier	 sub Readers
.	TokenNameDOT	
length	TokenNameIdentifier	 length
!=	TokenNameNOT_EQUAL	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
reader	TokenNameIdentifier	 reader
+	TokenNamePLUS	
" has "	TokenNameStringLiteral	 has 
+	TokenNamePLUS	
subReaders	TokenNameIdentifier	 sub Readers
.	TokenNameDOT	
length	TokenNameIdentifier	 length
+	TokenNamePLUS	
" segments instead of exactly one"	TokenNameStringLiteral	 segments instead of exactly one
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
(	TokenNameLPAREN	
SegmentReader	TokenNameIdentifier	 Segment Reader
)	TokenNameRPAREN	
subReaders	TokenNameIdentifier	 sub Readers
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
reader	TokenNameIdentifier	 reader
+	TokenNamePLUS	
" is not a SegmentReader or a single-segment DirectoryReader"	TokenNameStringLiteral	 is not a SegmentReader or a single-segment DirectoryReader
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
int	TokenNameint	
getTermInfosIndexDivisor	TokenNameIdentifier	 get Term Infos Index Divisor
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
termsIndexDivisor	TokenNameIdentifier	 terms Index Divisor
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Called when the shared core for this SegmentReader * is closed. * <p> * This listener is called only once all SegmentReaders * sharing the same core are closed. At this point it * is safe for apps to evict this reader from any caches * keyed on {@link #getCoreCacheKey}. This is the same * interface that {@link FieldCache} uses, internally, * to evict entries.</p> * * @lucene.experimental */	TokenNameCOMMENT_JAVADOC	 Called when the shared core for this SegmentReader is closed. <p> This listener is called only once all SegmentReaders sharing the same core are closed. At this point it is safe for apps to evict this reader from any caches keyed on {@link #getCoreCacheKey}. This is the same interface that {@link FieldCache} uses, internally, to evict entries.</p> * @lucene.experimental 
public	TokenNamepublic	
static	TokenNamestatic	
interface	TokenNameinterface	
CoreClosedListener	TokenNameIdentifier	 Core Closed Listener
{	TokenNameLBRACE	
public	TokenNamepublic	
void	TokenNamevoid	
onClose	TokenNameIdentifier	 on Close
(	TokenNameLPAREN	
SegmentReader	TokenNameIdentifier	 Segment Reader
owner	TokenNameIdentifier	 owner
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** Expert: adds a CoreClosedListener to this reader's shared core */	TokenNameCOMMENT_JAVADOC	 Expert: adds a CoreClosedListener to this reader's shared core 
public	TokenNamepublic	
void	TokenNamevoid	
addCoreClosedListener	TokenNameIdentifier	 add Core Closed Listener
(	TokenNameLPAREN	
CoreClosedListener	TokenNameIdentifier	 Core Closed Listener
listener	TokenNameIdentifier	 listener
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
addCoreClosedListener	TokenNameIdentifier	 add Core Closed Listener
(	TokenNameLPAREN	
listener	TokenNameIdentifier	 listener
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** Expert: removes a CoreClosedListener from this reader's shared core */	TokenNameCOMMENT_JAVADOC	 Expert: removes a CoreClosedListener from this reader's shared core 
public	TokenNamepublic	
void	TokenNamevoid	
removeCoreClosedListener	TokenNameIdentifier	 remove Core Closed Listener
(	TokenNameLPAREN	
CoreClosedListener	TokenNameIdentifier	 Core Closed Listener
listener	TokenNameIdentifier	 listener
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ensureOpen	TokenNameIdentifier	 ensure Open
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
core	TokenNameIdentifier	 core
.	TokenNameDOT	
removeCoreClosedListener	TokenNameIdentifier	 remove Core Closed Listener
(	TokenNameLPAREN	
listener	TokenNameIdentifier	 listener
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
