/* * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the "License"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. * */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
taskdefs	TokenNameIdentifier	 taskdefs
.	TokenNameDOT	
optional	TokenNameIdentifier	 optional
.	TokenNameDOT	
net	TokenNameIdentifier	 net
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
BufferedInputStream	TokenNameIdentifier	 Buffered Input Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
BufferedOutputStream	TokenNameIdentifier	 Buffered Output Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
BufferedWriter	TokenNameIdentifier	 Buffered Writer
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
File	TokenNameIdentifier	 File
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
FileInputStream	TokenNameIdentifier	 File Input Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
FileOutputStream	TokenNameIdentifier	 File Output Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
FileWriter	TokenNameIdentifier	 File Writer
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
IOException	TokenNameIdentifier	 IO Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
InputStream	TokenNameIdentifier	 Input Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
OutputStream	TokenNameIdentifier	 Output Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
text	TokenNameIdentifier	 text
.	TokenNameDOT	
SimpleDateFormat	TokenNameIdentifier	 Simple Date Format
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Date	TokenNameIdentifier	 Date
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Enumeration	TokenNameIdentifier	 Enumeration
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
HashMap	TokenNameIdentifier	 Hash Map
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
HashSet	TokenNameIdentifier	 Hash Set
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Hashtable	TokenNameIdentifier	 Hashtable
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Map	TokenNameIdentifier	 Map
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Set	TokenNameIdentifier	 Set
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
StringTokenizer	TokenNameIdentifier	 String Tokenizer
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Vector	TokenNameIdentifier	 Vector
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
commons	TokenNameIdentifier	 commons
.	TokenNameDOT	
net	TokenNameIdentifier	 net
.	TokenNameDOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
FTPClient	TokenNameIdentifier	 FTP Client
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
commons	TokenNameIdentifier	 commons
.	TokenNameDOT	
net	TokenNameIdentifier	 net
.	TokenNameDOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
FTPFile	TokenNameIdentifier	 FTP File
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
commons	TokenNameIdentifier	 commons
.	TokenNameDOT	
net	TokenNameIdentifier	 net
.	TokenNameDOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
FTPReply	TokenNameIdentifier	 FTP Reply
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
BuildException	TokenNameIdentifier	 Build Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
DirectoryScanner	TokenNameIdentifier	 Directory Scanner
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
Project	TokenNameIdentifier	 Project
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
taskdefs	TokenNameIdentifier	 taskdefs
.	TokenNameDOT	
Delete	TokenNameIdentifier	 Delete
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
FileSet	TokenNameIdentifier	 File Set
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
selectors	TokenNameIdentifier	 selectors
.	TokenNameDOT	
SelectorUtils	TokenNameIdentifier	 Selector Utils
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
FileUtils	TokenNameIdentifier	 File Utils
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
RetryHandler	TokenNameIdentifier	 Retry Handler
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Retryable	TokenNameIdentifier	 Retryable
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
VectorSet	TokenNameIdentifier	 Vector Set
;	TokenNameSEMICOLON	
public	TokenNamepublic	
class	TokenNameclass	
FTPTaskMirrorImpl	TokenNameIdentifier	 FTP Task Mirror Impl
implements	TokenNameimplements	
FTPTaskMirror	TokenNameIdentifier	 FTP Task Mirror
{	TokenNameLBRACE	
/** return code of ftp */	TokenNameCOMMENT_JAVADOC	 return code of ftp 
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
int	TokenNameint	
CODE_521	TokenNameIdentifier	 CODE 521
=	TokenNameEQUAL	
521	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
int	TokenNameint	
CODE_550	TokenNameIdentifier	 CODE 550
=	TokenNameEQUAL	
550	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
int	TokenNameint	
CODE_553	TokenNameIdentifier	 CODE 553
=	TokenNameEQUAL	
553	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
/** Date formatter used in logging, note not thread safe! */	TokenNameCOMMENT_JAVADOC	 Date formatter used in logging, note not thread safe! 
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
SimpleDateFormat	TokenNameIdentifier	 Simple Date Format
TIMESTAMP_LOGGING_SDF	TokenNameIdentifier	 TIMESTAMP  LOGGING  SDF
=	TokenNameEQUAL	
new	TokenNamenew	
SimpleDateFormat	TokenNameIdentifier	 Simple Date Format
(	TokenNameLPAREN	
"yyyy-MM-dd HH:mm:ss"	TokenNameStringLiteral	yyyy-MM-dd HH:mm:ss
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
FileUtils	TokenNameIdentifier	 File Utils
FILE_UTILS	TokenNameIdentifier	 FILE  UTILS
=	TokenNameEQUAL	
FileUtils	TokenNameIdentifier	 File Utils
.	TokenNameDOT	
getFileUtils	TokenNameIdentifier	 get File Utils
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
FTPTask	TokenNameIdentifier	 FTP Task
task	TokenNameIdentifier	 task
;	TokenNameSEMICOLON	
private	TokenNameprivate	
Set	TokenNameIdentifier	 Set
dirCache	TokenNameIdentifier	 dir Cache
=	TokenNameEQUAL	
new	TokenNamenew	
HashSet	TokenNameIdentifier	 Hash Set
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
int	TokenNameint	
transferred	TokenNameIdentifier	 transferred
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
int	TokenNameint	
skipped	TokenNameIdentifier	 skipped
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
/** * Constructor. * @param task the FTPTask that uses this mirror. */	TokenNameCOMMENT_JAVADOC	 Constructor. @param task the FTPTask that uses this mirror. 
public	TokenNamepublic	
FTPTaskMirrorImpl	TokenNameIdentifier	 FTP Task Mirror Impl
(	TokenNameLPAREN	
FTPTask	TokenNameIdentifier	 FTP Task
task	TokenNameIdentifier	 task
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
task	TokenNameIdentifier	 task
=	TokenNameEQUAL	
task	TokenNameIdentifier	 task
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * internal class providing a File-like interface to some of the information * available from the FTP server * */	TokenNameCOMMENT_JAVADOC	 internal class providing a File-like interface to some of the information available from the FTP server 
protected	TokenNameprotected	
static	TokenNamestatic	
class	TokenNameclass	
FTPFileProxy	TokenNameIdentifier	 FTP File Proxy
extends	TokenNameextends	
File	TokenNameIdentifier	 File
{	TokenNameLBRACE	
private	TokenNameprivate	
final	TokenNamefinal	
FTPFile	TokenNameIdentifier	 FTP File
file	TokenNameIdentifier	 file
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
parts	TokenNameIdentifier	 parts
;	TokenNameSEMICOLON	
private	TokenNameprivate	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
name	TokenNameIdentifier	 name
;	TokenNameSEMICOLON	
/** * creates a proxy to a FTP file * @param file */	TokenNameCOMMENT_JAVADOC	 creates a proxy to a FTP file @param file 
public	TokenNamepublic	
FTPFileProxy	TokenNameIdentifier	 FTP File Proxy
(	TokenNameLPAREN	
FTPFile	TokenNameIdentifier	 FTP File
file	TokenNameIdentifier	 file
)	TokenNameRPAREN	
{	TokenNameLBRACE	
super	TokenNamesuper	
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
name	TokenNameIdentifier	 name
=	TokenNameEQUAL	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
file	TokenNameIdentifier	 file
=	TokenNameEQUAL	
file	TokenNameIdentifier	 file
;	TokenNameSEMICOLON	
parts	TokenNameIdentifier	 parts
=	TokenNameEQUAL	
FileUtils	TokenNameIdentifier	 File Utils
.	TokenNameDOT	
getPathStack	TokenNameIdentifier	 get Path Stack
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * creates a proxy to a FTP directory * @param completePath the remote directory. */	TokenNameCOMMENT_JAVADOC	 creates a proxy to a FTP directory @param completePath the remote directory. 
public	TokenNamepublic	
FTPFileProxy	TokenNameIdentifier	 FTP File Proxy
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
completePath	TokenNameIdentifier	 complete Path
)	TokenNameRPAREN	
{	TokenNameLBRACE	
super	TokenNamesuper	
(	TokenNameLPAREN	
completePath	TokenNameIdentifier	 complete Path
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
file	TokenNameIdentifier	 file
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
name	TokenNameIdentifier	 name
=	TokenNameEQUAL	
completePath	TokenNameIdentifier	 complete Path
;	TokenNameSEMICOLON	
parts	TokenNameIdentifier	 parts
=	TokenNameEQUAL	
FileUtils	TokenNameIdentifier	 File Utils
.	TokenNameDOT	
getPathStack	TokenNameIdentifier	 get Path Stack
(	TokenNameLPAREN	
completePath	TokenNameIdentifier	 complete Path
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/* (non-Javadoc) * @see java.io.File#exists() */	TokenNameCOMMENT_BLOCK	 (non-Javadoc) @see java.io.File#exists() 
public	TokenNamepublic	
boolean	TokenNameboolean	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/* (non-Javadoc) * @see java.io.File#getAbsolutePath() */	TokenNameCOMMENT_BLOCK	 (non-Javadoc) @see java.io.File#getAbsolutePath() 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
name	TokenNameIdentifier	 name
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/* (non-Javadoc) * @see java.io.File#getName() */	TokenNameCOMMENT_BLOCK	 (non-Javadoc) @see java.io.File#getName() 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
parts	TokenNameIdentifier	 parts
.	TokenNameDOT	
length	TokenNameIdentifier	 length
>	TokenNameGREATER	
0	TokenNameIntegerLiteral	
?	TokenNameQUESTION	
parts	TokenNameIdentifier	 parts
[	TokenNameLBRACKET	
parts	TokenNameIdentifier	 parts
.	TokenNameDOT	
length	TokenNameIdentifier	 length
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
:	TokenNameCOLON	
name	TokenNameIdentifier	 name
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/* (non-Javadoc) * @see java.io.File#getParent() */	TokenNameCOMMENT_BLOCK	 (non-Javadoc) @see java.io.File#getParent() 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
result	TokenNameIdentifier	 result
=	TokenNameEQUAL	
""	TokenNameStringLiteral	 
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
parts	TokenNameIdentifier	 parts
.	TokenNameDOT	
length	TokenNameIdentifier	 length
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
result	TokenNameIdentifier	 result
+=	TokenNamePLUS_EQUAL	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separatorChar	TokenNameIdentifier	 separator Char
+	TokenNamePLUS	
parts	TokenNameIdentifier	 parts
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
result	TokenNameIdentifier	 result
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/* (non-Javadoc) * @see java.io.File#getPath() */	TokenNameCOMMENT_BLOCK	 (non-Javadoc) @see java.io.File#getPath() 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getPath	TokenNameIdentifier	 get Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
name	TokenNameIdentifier	 name
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * FTP files are stored as absolute paths * @return true */	TokenNameCOMMENT_JAVADOC	 FTP files are stored as absolute paths @return true 
public	TokenNamepublic	
boolean	TokenNameboolean	
isAbsolute	TokenNameIdentifier	 is Absolute
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/* (non-Javadoc) * @see java.io.File#isDirectory() */	TokenNameCOMMENT_BLOCK	 (non-Javadoc) @see java.io.File#isDirectory() 
public	TokenNamepublic	
boolean	TokenNameboolean	
isDirectory	TokenNameIdentifier	 is Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
file	TokenNameIdentifier	 file
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/* (non-Javadoc) * @see java.io.File#isFile() */	TokenNameCOMMENT_BLOCK	 (non-Javadoc) @see java.io.File#isFile() 
public	TokenNamepublic	
boolean	TokenNameboolean	
isFile	TokenNameIdentifier	 is File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
file	TokenNameIdentifier	 file
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * FTP files cannot be hidden * * @return false */	TokenNameCOMMENT_JAVADOC	 FTP files cannot be hidden * @return false 
public	TokenNamepublic	
boolean	TokenNameboolean	
isHidden	TokenNameIdentifier	 is Hidden
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/* (non-Javadoc) * @see java.io.File#lastModified() */	TokenNameCOMMENT_BLOCK	 (non-Javadoc) @see java.io.File#lastModified() 
public	TokenNamepublic	
long	TokenNamelong	
lastModified	TokenNameIdentifier	 last Modified
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getTimestamp	TokenNameIdentifier	 get Timestamp
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getTimeInMillis	TokenNameIdentifier	 get Time In Millis
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/* (non-Javadoc) * @see java.io.File#length() */	TokenNameCOMMENT_BLOCK	 (non-Javadoc) @see java.io.File#length() 
public	TokenNamepublic	
long	TokenNamelong	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getSize	TokenNameIdentifier	 get Size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * internal class allowing to read the contents of a remote file system * using the FTP protocol * used in particular for ftp get operations * differences with DirectoryScanner * "" (the root of the fileset) is never included in the included directories * followSymlinks defaults to false */	TokenNameCOMMENT_JAVADOC	 internal class allowing to read the contents of a remote file system using the FTP protocol used in particular for ftp get operations differences with DirectoryScanner "" (the root of the fileset) is never included in the included directories followSymlinks defaults to false 
protected	TokenNameprotected	
class	TokenNameclass	
FTPDirectoryScanner	TokenNameIdentifier	 FTP Directory Scanner
extends	TokenNameextends	
DirectoryScanner	TokenNameIdentifier	 Directory Scanner
{	TokenNameLBRACE	
// CheckStyle:VisibilityModifier OFF - bc 	TokenNameCOMMENT_LINE	CheckStyle:VisibilityModifier OFF - bc 
protected	TokenNameprotected	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
// CheckStyle:VisibilityModifier ON 	TokenNameCOMMENT_LINE	CheckStyle:VisibilityModifier ON 
private	TokenNameprivate	
String	TokenNameIdentifier	 String
rootPath	TokenNameIdentifier	 root Path
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
/** * since ant 1.6 * this flag should be set to true on UNIX and can save scanning time */	TokenNameCOMMENT_JAVADOC	 since ant 1.6 this flag should be set to true on UNIX and can save scanning time 
private	TokenNameprivate	
boolean	TokenNameboolean	
remoteSystemCaseSensitive	TokenNameIdentifier	 remote System Case Sensitive
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
remoteSensitivityChecked	TokenNameIdentifier	 remote Sensitivity Checked
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
/** * constructor * @param ftp ftpclient object */	TokenNameCOMMENT_JAVADOC	 constructor @param ftp ftpclient object 
public	TokenNamepublic	
FTPDirectoryScanner	TokenNameIdentifier	 FTP Directory Scanner
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
)	TokenNameRPAREN	
{	TokenNameLBRACE	
super	TokenNamesuper	
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
ftp	TokenNameIdentifier	 ftp
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
setFollowSymlinks	TokenNameIdentifier	 set Follow Symlinks
(	TokenNameLPAREN	
false	TokenNamefalse	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * scans the remote directory, * storing internally the included files, directories, ... */	TokenNameCOMMENT_JAVADOC	 scans the remote directory, storing internally the included files, directories, ... 
public	TokenNamepublic	
void	TokenNamevoid	
scan	TokenNameIdentifier	 scan
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
includes	TokenNameIdentifier	 includes
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// No includes supplied, so set it to 'matches all' 	TokenNameCOMMENT_LINE	No includes supplied, so set it to 'matches all' 
includes	TokenNameIdentifier	 includes
=	TokenNameEQUAL	
new	TokenNamenew	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
1	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
includes	TokenNameIdentifier	 includes
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
=	TokenNameEQUAL	
"**"	TokenNameStringLiteral	**
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
excludes	TokenNameIdentifier	 excludes
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
excludes	TokenNameIdentifier	 excludes
=	TokenNameEQUAL	
new	TokenNamenew	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
filesIncluded	TokenNameIdentifier	 files Included
=	TokenNameEQUAL	
new	TokenNamenew	
VectorSet	TokenNameIdentifier	 Vector Set
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
filesNotIncluded	TokenNameIdentifier	 files Not Included
=	TokenNameEQUAL	
new	TokenNamenew	
Vector	TokenNameIdentifier	 Vector
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
filesExcluded	TokenNameIdentifier	 files Excluded
=	TokenNameEQUAL	
new	TokenNamenew	
VectorSet	TokenNameIdentifier	 Vector Set
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dirsIncluded	TokenNameIdentifier	 dirs Included
=	TokenNameEQUAL	
new	TokenNamenew	
VectorSet	TokenNameIdentifier	 Vector Set
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dirsNotIncluded	TokenNameIdentifier	 dirs Not Included
=	TokenNameEQUAL	
new	TokenNamenew	
Vector	TokenNameIdentifier	 Vector
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dirsExcluded	TokenNameIdentifier	 dirs Excluded
=	TokenNameEQUAL	
new	TokenNamenew	
VectorSet	TokenNameIdentifier	 Vector Set
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
cwd	TokenNameIdentifier	 cwd
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
printWorkingDirectory	TokenNameIdentifier	 print Working Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// always start from the current ftp working dir 	TokenNameCOMMENT_LINE	always start from the current ftp working dir 
forceRemoteSensitivityCheck	TokenNameIdentifier	 force Remote Sensitivity Check
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
checkIncludePatterns	TokenNameIdentifier	 check Include Patterns
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
clearCaches	TokenNameIdentifier	 clear Caches
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
cwd	TokenNameIdentifier	 cwd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"Unable to scan FTP server: "	TokenNameStringLiteral	Unable to scan FTP server: 
,	TokenNameCOMMA	
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * this routine is actually checking all the include patterns in * order to avoid scanning everything under base dir * @since ant1.6 */	TokenNameCOMMENT_JAVADOC	 this routine is actually checking all the include patterns in order to avoid scanning everything under base dir @since ant1.6 
private	TokenNameprivate	
void	TokenNamevoid	
checkIncludePatterns	TokenNameIdentifier	 check Include Patterns
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Hashtable	TokenNameIdentifier	 Hashtable
newroots	TokenNameIdentifier	 newroots
=	TokenNameEQUAL	
new	TokenNamenew	
Hashtable	TokenNameIdentifier	 Hashtable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// put in the newroots vector the include patterns without 	TokenNameCOMMENT_LINE	put in the newroots vector the include patterns without 
// wildcard tokens 	TokenNameCOMMENT_LINE	wildcard tokens 
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
icounter	TokenNameIdentifier	 icounter
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
icounter	TokenNameIdentifier	 icounter
<	TokenNameLESS	
includes	TokenNameIdentifier	 includes
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
icounter	TokenNameIdentifier	 icounter
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
newpattern	TokenNameIdentifier	 newpattern
=	TokenNameEQUAL	
SelectorUtils	TokenNameIdentifier	 Selector Utils
.	TokenNameDOT	
rtrimWildcardTokens	TokenNameIdentifier	 rtrim Wildcard Tokens
(	TokenNameLPAREN	
includes	TokenNameIdentifier	 includes
[	TokenNameLBRACKET	
icounter	TokenNameIdentifier	 icounter
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
newroots	TokenNameIdentifier	 newroots
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
newpattern	TokenNameIdentifier	 newpattern
,	TokenNameCOMMA	
includes	TokenNameIdentifier	 includes
[	TokenNameLBRACKET	
icounter	TokenNameIdentifier	 icounter
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getRemotedir	TokenNameIdentifier	 get Remotedir
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
setRemotedir	TokenNameIdentifier	 set Remotedir
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
printWorkingDirectory	TokenNameIdentifier	 print Working Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not read current ftp directory"	TokenNameStringLiteral	could not read current ftp directory
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
AntFTPFile	TokenNameIdentifier	 Ant FTP File
baseFTPFile	TokenNameIdentifier	 base FTP File
=	TokenNameEQUAL	
new	TokenNamenew	
AntFTPRootFile	TokenNameIdentifier	 Ant FTP Root File
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getRemotedir	TokenNameIdentifier	 get Remotedir
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
rootPath	TokenNameIdentifier	 root Path
=	TokenNameEQUAL	
baseFTPFile	TokenNameIdentifier	 base FTP File
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// construct it 	TokenNameCOMMENT_LINE	construct it 
if	TokenNameif	
(	TokenNameLPAREN	
newroots	TokenNameIdentifier	 newroots
.	TokenNameDOT	
containsKey	TokenNameIdentifier	 contains Key
(	TokenNameLPAREN	
""	TokenNameStringLiteral	 
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// we are going to scan everything anyway 	TokenNameCOMMENT_LINE	we are going to scan everything anyway 
scandir	TokenNameIdentifier	 scandir
(	TokenNameLPAREN	
rootPath	TokenNameIdentifier	 root Path
,	TokenNameCOMMA	
""	TokenNameStringLiteral	 
,	TokenNameCOMMA	
true	TokenNametrue	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
// only scan directories that can include matched files or 	TokenNameCOMMENT_LINE	only scan directories that can include matched files or 
// directories 	TokenNameCOMMENT_LINE	directories 
Enumeration	TokenNameIdentifier	 Enumeration
enum2	TokenNameIdentifier	 enum2
=	TokenNameEQUAL	
newroots	TokenNameIdentifier	 newroots
.	TokenNameDOT	
keys	TokenNameIdentifier	 keys
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
enum2	TokenNameIdentifier	 enum2
.	TokenNameDOT	
hasMoreElements	TokenNameIdentifier	 has More Elements
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
currentelement	TokenNameIdentifier	 currentelement
=	TokenNameEQUAL	
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
enum2	TokenNameIdentifier	 enum2
.	TokenNameDOT	
nextElement	TokenNameIdentifier	 next Element
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
originalpattern	TokenNameIdentifier	 originalpattern
=	TokenNameEQUAL	
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
newroots	TokenNameIdentifier	 newroots
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
currentelement	TokenNameIdentifier	 currentelement
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
AntFTPFile	TokenNameIdentifier	 Ant FTP File
myfile	TokenNameIdentifier	 myfile
=	TokenNameEQUAL	
new	TokenNamenew	
AntFTPFile	TokenNameIdentifier	 Ant FTP File
(	TokenNameLPAREN	
baseFTPFile	TokenNameIdentifier	 base FTP File
,	TokenNameCOMMA	
currentelement	TokenNameIdentifier	 currentelement
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
isOK	TokenNameIdentifier	 is OK
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
traversesSymlinks	TokenNameIdentifier	 traverses Symlinks
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
path	TokenNameIdentifier	 path
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
myfile	TokenNameIdentifier	 myfile
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
forceRemoteSensitivityCheck	TokenNameIdentifier	 force Remote Sensitivity Check
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
remoteSensitivityChecked	TokenNameIdentifier	 remote Sensitivity Checked
&&	TokenNameAND_AND	
remoteSystemCaseSensitive	TokenNameIdentifier	 remote System Case Sensitive
&&	TokenNameAND_AND	
isFollowSymlinks	TokenNameIdentifier	 is Follow Symlinks
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// cool case, 	TokenNameCOMMENT_LINE	cool case, 
//we do not need to scan all the subdirs in the relative path 	TokenNameCOMMENT_LINE	we do not need to scan all the subdirs in the relative path 
path	TokenNameIdentifier	 path
=	TokenNameEQUAL	
myfile	TokenNameIdentifier	 myfile
.	TokenNameDOT	
getFastRelativePath	TokenNameIdentifier	 get Fast Relative Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
// may be on a case insensitive file system. We want 	TokenNameCOMMENT_LINE	may be on a case insensitive file system. We want 
// the results to show what's really on the disk, so 	TokenNameCOMMENT_LINE	the results to show what's really on the disk, so 
// we need to double check. 	TokenNameCOMMENT_LINE	we need to double check. 
try	TokenNametry	
{	TokenNameLBRACE	
path	TokenNameIdentifier	 path
=	TokenNameEQUAL	
myfile	TokenNameIdentifier	 myfile
.	TokenNameDOT	
getRelativePath	TokenNameIdentifier	 get Relative Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
traversesSymlinks	TokenNameIdentifier	 traverses Symlinks
=	TokenNameEQUAL	
myfile	TokenNameIdentifier	 myfile
.	TokenNameDOT	
isTraverseSymlinks	TokenNameIdentifier	 is Traverse Symlinks
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
be	TokenNameIdentifier	 be
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
be	TokenNameIdentifier	 be
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
BuildException	TokenNameIdentifier	 Build Exception
be	TokenNameIdentifier	 be
)	TokenNameRPAREN	
{	TokenNameLBRACE	
isOK	TokenNameIdentifier	 is OK
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
isOK	TokenNameIdentifier	 is OK
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
isOK	TokenNameIdentifier	 is OK
)	TokenNameRPAREN	
{	TokenNameLBRACE	
currentelement	TokenNameIdentifier	 currentelement
=	TokenNameEQUAL	
path	TokenNameIdentifier	 path
.	TokenNameDOT	
replace	TokenNameIdentifier	 replace
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getSeparator	TokenNameIdentifier	 get Separator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
charAt	TokenNameIdentifier	 char At
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separatorChar	TokenNameIdentifier	 separator Char
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
isFollowSymlinks	TokenNameIdentifier	 is Follow Symlinks
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
traversesSymlinks	TokenNameIdentifier	 traverses Symlinks
)	TokenNameRPAREN	
{	TokenNameLBRACE	
continue	TokenNamecontinue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
myfile	TokenNameIdentifier	 myfile
.	TokenNameDOT	
isDirectory	TokenNameIdentifier	 is Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
isIncluded	TokenNameIdentifier	 is Included
(	TokenNameLPAREN	
currentelement	TokenNameIdentifier	 currentelement
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
currentelement	TokenNameIdentifier	 currentelement
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
>	TokenNameGREATER	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
accountForIncludedDir	TokenNameIdentifier	 account For Included Dir
(	TokenNameLPAREN	
currentelement	TokenNameIdentifier	 currentelement
,	TokenNameCOMMA	
myfile	TokenNameIdentifier	 myfile
,	TokenNameCOMMA	
true	TokenNametrue	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
currentelement	TokenNameIdentifier	 currentelement
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
>	TokenNameGREATER	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
currentelement	TokenNameIdentifier	 currentelement
.	TokenNameDOT	
charAt	TokenNameIdentifier	 char At
(	TokenNameLPAREN	
currentelement	TokenNameIdentifier	 currentelement
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separatorChar	TokenNameIdentifier	 separator Char
)	TokenNameRPAREN	
{	TokenNameLBRACE	
currentelement	TokenNameIdentifier	 currentelement
=	TokenNameEQUAL	
currentelement	TokenNameIdentifier	 currentelement
+	TokenNamePLUS	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separatorChar	TokenNameIdentifier	 separator Char
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
scandir	TokenNameIdentifier	 scandir
(	TokenNameLPAREN	
myfile	TokenNameIdentifier	 myfile
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
currentelement	TokenNameIdentifier	 currentelement
,	TokenNameCOMMA	
true	TokenNametrue	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
isCaseSensitive	TokenNameIdentifier	 is Case Sensitive
&&	TokenNameAND_AND	
originalpattern	TokenNameIdentifier	 originalpattern
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
currentelement	TokenNameIdentifier	 currentelement
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
accountForIncludedFile	TokenNameIdentifier	 account For Included File
(	TokenNameLPAREN	
currentelement	TokenNameIdentifier	 currentelement
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
isCaseSensitive	TokenNameIdentifier	 is Case Sensitive
&&	TokenNameAND_AND	
originalpattern	TokenNameIdentifier	 originalpattern
.	TokenNameDOT	
equalsIgnoreCase	TokenNameIdentifier	 equals Ignore Case
(	TokenNameLPAREN	
currentelement	TokenNameIdentifier	 currentelement
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
accountForIncludedFile	TokenNameIdentifier	 account For Included File
(	TokenNameLPAREN	
currentelement	TokenNameIdentifier	 currentelement
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * scans a particular directory. populates the scannedDirs cache. * * @param dir directory to scan * @param vpath relative path to the base directory of the remote fileset * always ended with a File.separator * @param fast seems to be always true in practice */	TokenNameCOMMENT_JAVADOC	 scans a particular directory. populates the scannedDirs cache. * @param dir directory to scan @param vpath relative path to the base directory of the remote fileset always ended with a File.separator @param fast seems to be always true in practice 
protected	TokenNameprotected	
void	TokenNamevoid	
scandir	TokenNameIdentifier	 scandir
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
vpath	TokenNameIdentifier	 vpath
,	TokenNameCOMMA	
boolean	TokenNameboolean	
fast	TokenNameIdentifier	 fast
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// avoid double scanning of directories, can only happen in fast mode 	TokenNameCOMMENT_LINE	avoid double scanning of directories, can only happen in fast mode 
if	TokenNameif	
(	TokenNameLPAREN	
fast	TokenNameIdentifier	 fast
&&	TokenNameAND_AND	
hasBeenScanned	TokenNameIdentifier	 has Been Scanned
(	TokenNameLPAREN	
vpath	TokenNameIdentifier	 vpath
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
String	TokenNameIdentifier	 String
completePath	TokenNameIdentifier	 complete Path
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
vpath	TokenNameIdentifier	 vpath
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
""	TokenNameStringLiteral	 
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
completePath	TokenNameIdentifier	 complete Path
=	TokenNameEQUAL	
rootPath	TokenNameIdentifier	 root Path
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getSeparator	TokenNameIdentifier	 get Separator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
vpath	TokenNameIdentifier	 vpath
.	TokenNameDOT	
replace	TokenNameIdentifier	 replace
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separatorChar	TokenNameIdentifier	 separator Char
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getSeparator	TokenNameIdentifier	 get Separator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
charAt	TokenNameIdentifier	 char At
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
completePath	TokenNameIdentifier	 complete Path
=	TokenNameEQUAL	
rootPath	TokenNameIdentifier	 root Path
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
newfiles	TokenNameIdentifier	 newfiles
=	TokenNameEQUAL	
listFiles	TokenNameIdentifier	 list Files
(	TokenNameLPAREN	
completePath	TokenNameIdentifier	 complete Path
,	TokenNameCOMMA	
false	TokenNamefalse	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
newfiles	TokenNameIdentifier	 newfiles
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeToParentDirectory	TokenNameIdentifier	 change To Parent Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
newfiles	TokenNameIdentifier	 newfiles
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
FTPFile	TokenNameIdentifier	 FTP File
file	TokenNameIdentifier	 file
=	TokenNameEQUAL	
newfiles	TokenNameIdentifier	 newfiles
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
!	TokenNameNOT	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
"."	TokenNameStringLiteral	.
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
!	TokenNameNOT	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
".."	TokenNameStringLiteral	..
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
name	TokenNameIdentifier	 name
=	TokenNameEQUAL	
vpath	TokenNameIdentifier	 vpath
+	TokenNamePLUS	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
scannedDirs	TokenNameIdentifier	 scanned Dirs
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
,	TokenNameCOMMA	
new	TokenNamenew	
FTPFileProxy	TokenNameIdentifier	 FTP File Proxy
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
isFunctioningAsDirectory	TokenNameIdentifier	 is Functioning As Directory
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
file	TokenNameIdentifier	 file
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
boolean	TokenNameboolean	
slowScanAllowed	TokenNameIdentifier	 slow Scan Allowed
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
isFollowSymlinks	TokenNameIdentifier	 is Follow Symlinks
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
isSymbolicLink	TokenNameIdentifier	 is Symbolic Link
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
dirsExcluded	TokenNameIdentifier	 dirs Excluded
.	TokenNameDOT	
addElement	TokenNameIdentifier	 add Element
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
slowScanAllowed	TokenNameIdentifier	 slow Scan Allowed
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
isIncluded	TokenNameIdentifier	 is Included
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
accountForIncludedDir	TokenNameIdentifier	 account For Included Dir
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
,	TokenNameCOMMA	
new	TokenNamenew	
AntFTPFile	TokenNameIdentifier	 Ant FTP File
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
file	TokenNameIdentifier	 file
,	TokenNameCOMMA	
completePath	TokenNameIdentifier	 complete Path
)	TokenNameRPAREN	
,	TokenNameCOMMA	
fast	TokenNameIdentifier	 fast
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
dirsNotIncluded	TokenNameIdentifier	 dirs Not Included
.	TokenNameDOT	
addElement	TokenNameIdentifier	 add Element
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
fast	TokenNameIdentifier	 fast
&&	TokenNameAND_AND	
couldHoldIncluded	TokenNameIdentifier	 could Hold Included
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
scandir	TokenNameIdentifier	 scandir
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
name	TokenNameIdentifier	 name
+	TokenNamePLUS	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separator	TokenNameIdentifier	 separator
,	TokenNameCOMMA	
fast	TokenNameIdentifier	 fast
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
fast	TokenNameIdentifier	 fast
&&	TokenNameAND_AND	
slowScanAllowed	TokenNameIdentifier	 slow Scan Allowed
)	TokenNameRPAREN	
{	TokenNameLBRACE	
scandir	TokenNameIdentifier	 scandir
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
name	TokenNameIdentifier	 name
+	TokenNamePLUS	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separator	TokenNameIdentifier	 separator
,	TokenNameCOMMA	
fast	TokenNameIdentifier	 fast
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
isFollowSymlinks	TokenNameIdentifier	 is Follow Symlinks
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
isSymbolicLink	TokenNameIdentifier	 is Symbolic Link
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
filesExcluded	TokenNameIdentifier	 files Excluded
.	TokenNameDOT	
addElement	TokenNameIdentifier	 add Element
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
isFunctioningAsFile	TokenNameIdentifier	 is Functioning As File
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
file	TokenNameIdentifier	 file
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
accountForIncludedFile	TokenNameIdentifier	 account For Included File
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeToParentDirectory	TokenNameIdentifier	 change To Parent Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"Error while communicating with FTP "	TokenNameStringLiteral	Error while communicating with FTP 
+	TokenNamePLUS	
"server: "	TokenNameStringLiteral	server: 
,	TokenNameCOMMA	
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * process included file * @param name path of the file relative to the directory of the fileset */	TokenNameCOMMENT_JAVADOC	 process included file @param name path of the file relative to the directory of the fileset 
private	TokenNameprivate	
void	TokenNamevoid	
accountForIncludedFile	TokenNameIdentifier	 account For Included File
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
filesIncluded	TokenNameIdentifier	 files Included
.	TokenNameDOT	
contains	TokenNameIdentifier	 contains
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
!	TokenNameNOT	
filesExcluded	TokenNameIdentifier	 files Excluded
.	TokenNameDOT	
contains	TokenNameIdentifier	 contains
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
isIncluded	TokenNameIdentifier	 is Included
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
isExcluded	TokenNameIdentifier	 is Excluded
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
isSelected	TokenNameIdentifier	 is Selected
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
,	TokenNameCOMMA	
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
)	TokenNameRPAREN	
scannedDirs	TokenNameIdentifier	 scanned Dirs
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
filesIncluded	TokenNameIdentifier	 files Included
.	TokenNameDOT	
addElement	TokenNameIdentifier	 add Element
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
filesExcluded	TokenNameIdentifier	 files Excluded
.	TokenNameDOT	
addElement	TokenNameIdentifier	 add Element
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
filesNotIncluded	TokenNameIdentifier	 files Not Included
.	TokenNameDOT	
addElement	TokenNameIdentifier	 add Element
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * * @param name path of the directory relative to the directory of * the fileset * @param file directory as file * @param fast */	TokenNameCOMMENT_JAVADOC	 * @param name path of the directory relative to the directory of the fileset @param file directory as file @param fast 
private	TokenNameprivate	
void	TokenNamevoid	
accountForIncludedDir	TokenNameIdentifier	 account For Included Dir
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
name	TokenNameIdentifier	 name
,	TokenNameCOMMA	
AntFTPFile	TokenNameIdentifier	 Ant FTP File
file	TokenNameIdentifier	 file
,	TokenNameCOMMA	
boolean	TokenNameboolean	
fast	TokenNameIdentifier	 fast
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
dirsIncluded	TokenNameIdentifier	 dirs Included
.	TokenNameDOT	
contains	TokenNameIdentifier	 contains
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
!	TokenNameNOT	
dirsExcluded	TokenNameIdentifier	 dirs Excluded
.	TokenNameDOT	
contains	TokenNameIdentifier	 contains
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
isExcluded	TokenNameIdentifier	 is Excluded
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
fast	TokenNameIdentifier	 fast
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
isSymbolicLink	TokenNameIdentifier	 is Symbolic Link
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getClient	TokenNameIdentifier	 get Client
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
curpwd	TokenNameIdentifier	 curpwd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not change directory to curpwd"	TokenNameStringLiteral	could not change directory to curpwd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
scandir	TokenNameIdentifier	 scandir
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getLink	TokenNameIdentifier	 get Link
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
name	TokenNameIdentifier	 name
+	TokenNamePLUS	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separator	TokenNameIdentifier	 separator
,	TokenNameCOMMA	
fast	TokenNameIdentifier	 fast
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getClient	TokenNameIdentifier	 get Client
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
curpwd	TokenNameIdentifier	 curpwd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not change directory to curpwd"	TokenNameStringLiteral	could not change directory to curpwd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
scandir	TokenNameIdentifier	 scandir
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
name	TokenNameIdentifier	 name
+	TokenNamePLUS	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separator	TokenNameIdentifier	 separator
,	TokenNameCOMMA	
fast	TokenNameIdentifier	 fast
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
dirsIncluded	TokenNameIdentifier	 dirs Included
.	TokenNameDOT	
addElement	TokenNameIdentifier	 add Element
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
dirsExcluded	TokenNameIdentifier	 dirs Excluded
.	TokenNameDOT	
addElement	TokenNameIdentifier	 add Element
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
fast	TokenNameIdentifier	 fast
&&	TokenNameAND_AND	
couldHoldIncluded	TokenNameIdentifier	 could Hold Included
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getClient	TokenNameIdentifier	 get Client
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
curpwd	TokenNameIdentifier	 curpwd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not change directory to curpwd"	TokenNameStringLiteral	could not change directory to curpwd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
scandir	TokenNameIdentifier	 scandir
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
name	TokenNameIdentifier	 name
+	TokenNamePLUS	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separator	TokenNameIdentifier	 separator
,	TokenNameCOMMA	
fast	TokenNameIdentifier	 fast
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * temporary table to speed up the various scanning methods below * * @since Ant 1.6 */	TokenNameCOMMENT_JAVADOC	 temporary table to speed up the various scanning methods below * @since Ant 1.6 
private	TokenNameprivate	
Map	TokenNameIdentifier	 Map
fileListMap	TokenNameIdentifier	 file List Map
=	TokenNameEQUAL	
new	TokenNamenew	
HashMap	TokenNameIdentifier	 Hash Map
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
/** * List of all scanned directories. * * @since Ant 1.6 */	TokenNameCOMMENT_JAVADOC	 List of all scanned directories. * @since Ant 1.6 
private	TokenNameprivate	
Map	TokenNameIdentifier	 Map
scannedDirs	TokenNameIdentifier	 scanned Dirs
=	TokenNameEQUAL	
new	TokenNamenew	
HashMap	TokenNameIdentifier	 Hash Map
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
/** * Has the directory with the given path relative to the base * directory already been scanned? * * @since Ant 1.6 */	TokenNameCOMMENT_JAVADOC	 Has the directory with the given path relative to the base directory already been scanned? * @since Ant 1.6 
private	TokenNameprivate	
boolean	TokenNameboolean	
hasBeenScanned	TokenNameIdentifier	 has Been Scanned
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
vpath	TokenNameIdentifier	 vpath
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
scannedDirs	TokenNameIdentifier	 scanned Dirs
.	TokenNameDOT	
containsKey	TokenNameIdentifier	 contains Key
(	TokenNameLPAREN	
vpath	TokenNameIdentifier	 vpath
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Clear internal caches. * * @since Ant 1.6 */	TokenNameCOMMENT_JAVADOC	 Clear internal caches. * @since Ant 1.6 
private	TokenNameprivate	
void	TokenNamevoid	
clearCaches	TokenNameIdentifier	 clear Caches
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
fileListMap	TokenNameIdentifier	 file List Map
.	TokenNameDOT	
clear	TokenNameIdentifier	 clear
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
scannedDirs	TokenNameIdentifier	 scanned Dirs
.	TokenNameDOT	
clear	TokenNameIdentifier	 clear
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * list the files present in one directory. * @param directory full path on the remote side * @param changedir if true change to directory directory before listing * @return array of FTPFile */	TokenNameCOMMENT_JAVADOC	 list the files present in one directory. @param directory full path on the remote side @param changedir if true change to directory directory before listing @return array of FTPFile 
public	TokenNamepublic	
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
listFiles	TokenNameIdentifier	 list Files
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
directory	TokenNameIdentifier	 directory
,	TokenNameCOMMA	
boolean	TokenNameboolean	
changedir	TokenNameIdentifier	 changedir
)	TokenNameRPAREN	
{	TokenNameLBRACE	
//task.log("listing files in directory " + directory, Project.MSG_DEBUG); 	TokenNameCOMMENT_LINE	task.log("listing files in directory " + directory, Project.MSG_DEBUG); 
String	TokenNameIdentifier	 String
currentPath	TokenNameIdentifier	 current Path
=	TokenNameEQUAL	
directory	TokenNameIdentifier	 directory
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
changedir	TokenNameIdentifier	 changedir
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
boolean	TokenNameboolean	
result	TokenNameIdentifier	 result
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
directory	TokenNameIdentifier	 directory
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
result	TokenNameIdentifier	 result
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
currentPath	TokenNameIdentifier	 current Path
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
printWorkingDirectory	TokenNameIdentifier	 print Working Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ioe	TokenNameIdentifier	 ioe
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
fileListMap	TokenNameIdentifier	 file List Map
.	TokenNameDOT	
containsKey	TokenNameIdentifier	 contains Key
(	TokenNameLPAREN	
currentPath	TokenNameIdentifier	 current Path
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"filelist map used in listing files"	TokenNameStringLiteral	filelist map used in listing files
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_DEBUG	TokenNameIdentifier	 MSG  DEBUG
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
fileListMap	TokenNameIdentifier	 file List Map
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
currentPath	TokenNameIdentifier	 current Path
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
result	TokenNameIdentifier	 result
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
result	TokenNameIdentifier	 result
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
listFiles	TokenNameIdentifier	 list Files
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ioe	TokenNameIdentifier	 ioe
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
fileListMap	TokenNameIdentifier	 file List Map
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
currentPath	TokenNameIdentifier	 current Path
,	TokenNameCOMMA	
result	TokenNameIdentifier	 result
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
remoteSensitivityChecked	TokenNameIdentifier	 remote Sensitivity Checked
)	TokenNameRPAREN	
{	TokenNameLBRACE	
checkRemoteSensitivity	TokenNameIdentifier	 check Remote Sensitivity
(	TokenNameLPAREN	
result	TokenNameIdentifier	 result
,	TokenNameCOMMA	
directory	TokenNameIdentifier	 directory
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
result	TokenNameIdentifier	 result
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
void	TokenNamevoid	
forceRemoteSensitivityCheck	TokenNameIdentifier	 force Remote Sensitivity Check
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
remoteSensitivityChecked	TokenNameIdentifier	 remote Sensitivity Checked
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
checkRemoteSensitivity	TokenNameIdentifier	 check Remote Sensitivity
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
listFiles	TokenNameIdentifier	 list Files
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
printWorkingDirectory	TokenNameIdentifier	 print Working Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ioe	TokenNameIdentifier	 ioe
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * cd into one directory and * list the files present in one directory. * @param directory full path on the remote side * @return array of FTPFile */	TokenNameCOMMENT_JAVADOC	 cd into one directory and list the files present in one directory. @param directory full path on the remote side @return array of FTPFile 
public	TokenNamepublic	
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
listFiles	TokenNameIdentifier	 list Files
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
directory	TokenNameIdentifier	 directory
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
listFiles	TokenNameIdentifier	 list Files
(	TokenNameLPAREN	
directory	TokenNameIdentifier	 directory
,	TokenNameCOMMA	
true	TokenNametrue	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
void	TokenNamevoid	
checkRemoteSensitivity	TokenNameIdentifier	 check Remote Sensitivity
(	TokenNameLPAREN	
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
array	TokenNameIdentifier	 array
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
directory	TokenNameIdentifier	 directory
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
array	TokenNameIdentifier	 array
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
boolean	TokenNameboolean	
candidateFound	TokenNameIdentifier	 candidate Found
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
target	TokenNameIdentifier	 target
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
icounter	TokenNameIdentifier	 icounter
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
icounter	TokenNameIdentifier	 icounter
<	TokenNameLESS	
array	TokenNameIdentifier	 array
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
icounter	TokenNameIdentifier	 icounter
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
array	TokenNameIdentifier	 array
[	TokenNameLBRACKET	
icounter	TokenNameIdentifier	 icounter
]	TokenNameRBRACKET	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
array	TokenNameIdentifier	 array
[	TokenNameLBRACKET	
icounter	TokenNameIdentifier	 icounter
]	TokenNameRBRACKET	
.	TokenNameDOT	
isDirectory	TokenNameIdentifier	 is Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
array	TokenNameIdentifier	 array
[	TokenNameLBRACKET	
icounter	TokenNameIdentifier	 icounter
]	TokenNameRBRACKET	
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
"."	TokenNameStringLiteral	.
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
!	TokenNameNOT	
array	TokenNameIdentifier	 array
[	TokenNameLBRACKET	
icounter	TokenNameIdentifier	 icounter
]	TokenNameRBRACKET	
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
".."	TokenNameStringLiteral	..
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
candidateFound	TokenNameIdentifier	 candidate Found
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
target	TokenNameIdentifier	 target
=	TokenNameEQUAL	
fiddleName	TokenNameIdentifier	 fiddle Name
(	TokenNameLPAREN	
array	TokenNameIdentifier	 array
[	TokenNameLBRACKET	
icounter	TokenNameIdentifier	 icounter
]	TokenNameRBRACKET	
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"will try to cd to "	TokenNameStringLiteral	will try to cd to 
+	TokenNamePLUS	
target	TokenNameIdentifier	 target
+	TokenNamePLUS	
" where a directory called "	TokenNameStringLiteral	 where a directory called 
+	TokenNamePLUS	
array	TokenNameIdentifier	 array
[	TokenNameLBRACKET	
icounter	TokenNameIdentifier	 icounter
]	TokenNameRBRACKET	
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" exists"	TokenNameStringLiteral	 exists
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_DEBUG	TokenNameIdentifier	 MSG  DEBUG
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
pcounter	TokenNameIdentifier	 pcounter
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
pcounter	TokenNameIdentifier	 pcounter
<	TokenNameLESS	
array	TokenNameIdentifier	 array
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
pcounter	TokenNameIdentifier	 pcounter
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
array	TokenNameIdentifier	 array
[	TokenNameLBRACKET	
pcounter	TokenNameIdentifier	 pcounter
]	TokenNameRBRACKET	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
pcounter	TokenNameIdentifier	 pcounter
!=	TokenNameNOT_EQUAL	
icounter	TokenNameIdentifier	 icounter
&&	TokenNameAND_AND	
target	TokenNameIdentifier	 target
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
array	TokenNameIdentifier	 array
[	TokenNameLBRACKET	
pcounter	TokenNameIdentifier	 pcounter
]	TokenNameRBRACKET	
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
candidateFound	TokenNameIdentifier	 candidate Found
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
candidateFound	TokenNameIdentifier	 candidate Found
)	TokenNameRPAREN	
{	TokenNameLBRACE	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
candidateFound	TokenNameIdentifier	 candidate Found
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"testing case sensitivity, attempting to cd to "	TokenNameStringLiteral	testing case sensitivity, attempting to cd to 
+	TokenNamePLUS	
target	TokenNameIdentifier	 target
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_DEBUG	TokenNameIdentifier	 MSG  DEBUG
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
remoteSystemCaseSensitive	TokenNameIdentifier	 remote System Case Sensitive
=	TokenNameEQUAL	
!	TokenNameNOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
target	TokenNameIdentifier	 target
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
remoteSystemCaseSensitive	TokenNameIdentifier	 remote System Case Sensitive
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
directory	TokenNameIdentifier	 directory
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ioe	TokenNameIdentifier	 ioe
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"remote system is case sensitive : "	TokenNameStringLiteral	remote system is case sensitive : 
+	TokenNamePLUS	
remoteSystemCaseSensitive	TokenNameIdentifier	 remote System Case Sensitive
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
remoteSensitivityChecked	TokenNameIdentifier	 remote Sensitivity Checked
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
private	TokenNameprivate	
String	TokenNameIdentifier	 String
fiddleName	TokenNameIdentifier	 fiddle Name
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
origin	TokenNameIdentifier	 origin
)	TokenNameRPAREN	
{	TokenNameLBRACE	
StringBuffer	TokenNameIdentifier	 String Buffer
result	TokenNameIdentifier	 result
=	TokenNameEQUAL	
new	TokenNamenew	
StringBuffer	TokenNameIdentifier	 String Buffer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
icounter	TokenNameIdentifier	 icounter
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
icounter	TokenNameIdentifier	 icounter
<	TokenNameLESS	
origin	TokenNameIdentifier	 origin
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
icounter	TokenNameIdentifier	 icounter
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
Character	TokenNameIdentifier	 Character
.	TokenNameDOT	
isLowerCase	TokenNameIdentifier	 is Lower Case
(	TokenNameLPAREN	
origin	TokenNameIdentifier	 origin
.	TokenNameDOT	
charAt	TokenNameIdentifier	 char At
(	TokenNameLPAREN	
icounter	TokenNameIdentifier	 icounter
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
result	TokenNameIdentifier	 result
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
Character	TokenNameIdentifier	 Character
.	TokenNameDOT	
toUpperCase	TokenNameIdentifier	 to Upper Case
(	TokenNameLPAREN	
origin	TokenNameIdentifier	 origin
.	TokenNameDOT	
charAt	TokenNameIdentifier	 char At
(	TokenNameLPAREN	
icounter	TokenNameIdentifier	 icounter
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
Character	TokenNameIdentifier	 Character
.	TokenNameDOT	
isUpperCase	TokenNameIdentifier	 is Upper Case
(	TokenNameLPAREN	
origin	TokenNameIdentifier	 origin
.	TokenNameDOT	
charAt	TokenNameIdentifier	 char At
(	TokenNameLPAREN	
icounter	TokenNameIdentifier	 icounter
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
result	TokenNameIdentifier	 result
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
Character	TokenNameIdentifier	 Character
.	TokenNameDOT	
toLowerCase	TokenNameIdentifier	 to Lower Case
(	TokenNameLPAREN	
origin	TokenNameIdentifier	 origin
.	TokenNameDOT	
charAt	TokenNameIdentifier	 char At
(	TokenNameLPAREN	
icounter	TokenNameIdentifier	 icounter
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
result	TokenNameIdentifier	 result
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
origin	TokenNameIdentifier	 origin
.	TokenNameDOT	
charAt	TokenNameIdentifier	 char At
(	TokenNameLPAREN	
icounter	TokenNameIdentifier	 icounter
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
result	TokenNameIdentifier	 result
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * an AntFTPFile is a representation of a remote file * @since Ant 1.6 */	TokenNameCOMMENT_JAVADOC	 an AntFTPFile is a representation of a remote file @since Ant 1.6 
protected	TokenNameprotected	
class	TokenNameclass	
AntFTPFile	TokenNameIdentifier	 Ant FTP File
{	TokenNameLBRACE	
/** * ftp client */	TokenNameCOMMENT_JAVADOC	 ftp client 
private	TokenNameprivate	
FTPClient	TokenNameIdentifier	 FTP Client
client	TokenNameIdentifier	 client
;	TokenNameSEMICOLON	
/** * parent directory of the file */	TokenNameCOMMENT_JAVADOC	 parent directory of the file 
private	TokenNameprivate	
String	TokenNameIdentifier	 String
curpwd	TokenNameIdentifier	 curpwd
;	TokenNameSEMICOLON	
/** * the file itself */	TokenNameCOMMENT_JAVADOC	 the file itself 
private	TokenNameprivate	
FTPFile	TokenNameIdentifier	 FTP File
ftpFile	TokenNameIdentifier	 ftp File
;	TokenNameSEMICOLON	
/** * */	TokenNameCOMMENT_JAVADOC	 
private	TokenNameprivate	
AntFTPFile	TokenNameIdentifier	 Ant FTP File
parent	TokenNameIdentifier	 parent
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
relativePathCalculated	TokenNameIdentifier	 relative Path Calculated
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
traversesSymlinks	TokenNameIdentifier	 traverses Symlinks
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
String	TokenNameIdentifier	 String
relativePath	TokenNameIdentifier	 relative Path
=	TokenNameEQUAL	
""	TokenNameStringLiteral	 
;	TokenNameSEMICOLON	
/** * constructor * @param client ftp client variable * @param ftpFile the file * @param curpwd absolute remote path where the file is found */	TokenNameCOMMENT_JAVADOC	 constructor @param client ftp client variable @param ftpFile the file @param curpwd absolute remote path where the file is found 
public	TokenNamepublic	
AntFTPFile	TokenNameIdentifier	 Ant FTP File
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
client	TokenNameIdentifier	 client
,	TokenNameCOMMA	
FTPFile	TokenNameIdentifier	 FTP File
ftpFile	TokenNameIdentifier	 ftp File
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
curpwd	TokenNameIdentifier	 curpwd
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
client	TokenNameIdentifier	 client
=	TokenNameEQUAL	
client	TokenNameIdentifier	 client
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
ftpFile	TokenNameIdentifier	 ftp File
=	TokenNameEQUAL	
ftpFile	TokenNameIdentifier	 ftp File
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
curpwd	TokenNameIdentifier	 curpwd
=	TokenNameEQUAL	
curpwd	TokenNameIdentifier	 curpwd
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * other constructor * @param parent the parent file * @param path a relative path to the parent file */	TokenNameCOMMENT_JAVADOC	 other constructor @param parent the parent file @param path a relative path to the parent file 
public	TokenNamepublic	
AntFTPFile	TokenNameIdentifier	 Ant FTP File
(	TokenNameLPAREN	
AntFTPFile	TokenNameIdentifier	 Ant FTP File
parent	TokenNameIdentifier	 parent
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
path	TokenNameIdentifier	 path
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
parent	TokenNameIdentifier	 parent
=	TokenNameEQUAL	
parent	TokenNameIdentifier	 parent
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
client	TokenNameIdentifier	 client
=	TokenNameEQUAL	
parent	TokenNameIdentifier	 parent
.	TokenNameDOT	
client	TokenNameIdentifier	 client
;	TokenNameSEMICOLON	
Vector	TokenNameIdentifier	 Vector
pathElements	TokenNameIdentifier	 path Elements
=	TokenNameEQUAL	
SelectorUtils	TokenNameIdentifier	 Selector Utils
.	TokenNameDOT	
tokenizePath	TokenNameIdentifier	 tokenize Path
(	TokenNameLPAREN	
path	TokenNameIdentifier	 path
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
boolean	TokenNameboolean	
result	TokenNameIdentifier	 result
=	TokenNameEQUAL	
this	TokenNamethis	
.	TokenNameDOT	
client	TokenNameIdentifier	 client
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
parent	TokenNameIdentifier	 parent
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
//this should not happen, except if parent has been deleted by another process 	TokenNameCOMMENT_LINE	this should not happen, except if parent has been deleted by another process 
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
result	TokenNameIdentifier	 result
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
this	TokenNamethis	
.	TokenNameDOT	
curpwd	TokenNameIdentifier	 curpwd
=	TokenNameEQUAL	
parent	TokenNameIdentifier	 parent
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not change working dir to "	TokenNameStringLiteral	could not change working dir to 
+	TokenNamePLUS	
parent	TokenNameIdentifier	 parent
.	TokenNameDOT	
curpwd	TokenNameIdentifier	 curpwd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
final	TokenNamefinal	
int	TokenNameint	
size	TokenNameIdentifier	 size
=	TokenNameEQUAL	
pathElements	TokenNameIdentifier	 path Elements
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
fcount	TokenNameIdentifier	 fcount
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
fcount	TokenNameIdentifier	 fcount
<	TokenNameLESS	
size	TokenNameIdentifier	 size
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
fcount	TokenNameIdentifier	 fcount
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
currentPathElement	TokenNameIdentifier	 current Path Element
=	TokenNameEQUAL	
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
pathElements	TokenNameIdentifier	 path Elements
.	TokenNameDOT	
elementAt	TokenNameIdentifier	 element At
(	TokenNameLPAREN	
fcount	TokenNameIdentifier	 fcount
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
boolean	TokenNameboolean	
result	TokenNameIdentifier	 result
=	TokenNameEQUAL	
this	TokenNamethis	
.	TokenNameDOT	
client	TokenNameIdentifier	 client
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
currentPathElement	TokenNameIdentifier	 current Path Element
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
result	TokenNameIdentifier	 result
&&	TokenNameAND_AND	
!	TokenNameNOT	
isCaseSensitive	TokenNameIdentifier	 is Case Sensitive
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
(	TokenNameLPAREN	
remoteSystemCaseSensitive	TokenNameIdentifier	 remote System Case Sensitive
||	TokenNameOR_OR	
!	TokenNameNOT	
remoteSensitivityChecked	TokenNameIdentifier	 remote Sensitivity Checked
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
currentPathElement	TokenNameIdentifier	 current Path Element
=	TokenNameEQUAL	
findPathElementCaseUnsensitive	TokenNameIdentifier	 find Path Element Case Unsensitive
(	TokenNameLPAREN	
this	TokenNamethis	
.	TokenNameDOT	
curpwd	TokenNameIdentifier	 curpwd
,	TokenNameCOMMA	
currentPathElement	TokenNameIdentifier	 current Path Element
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
currentPathElement	TokenNameIdentifier	 current Path Element
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
result	TokenNameIdentifier	 result
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
this	TokenNamethis	
.	TokenNameDOT	
curpwd	TokenNameIdentifier	 curpwd
=	TokenNameEQUAL	
getCurpwdPlusFileSep	TokenNameIdentifier	 get Curpwd Plus File Sep
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
currentPathElement	TokenNameIdentifier	 current Path Element
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not change working dir to "	TokenNameStringLiteral	could not change working dir to 
+	TokenNamePLUS	
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
pathElements	TokenNameIdentifier	 path Elements
.	TokenNameDOT	
elementAt	TokenNameIdentifier	 element At
(	TokenNameLPAREN	
fcount	TokenNameIdentifier	 fcount
)	TokenNameRPAREN	
+	TokenNamePLUS	
" from "	TokenNameStringLiteral	 from 
+	TokenNamePLUS	
this	TokenNamethis	
.	TokenNameDOT	
curpwd	TokenNameIdentifier	 curpwd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
String	TokenNameIdentifier	 String
lastpathelement	TokenNameIdentifier	 lastpathelement
=	TokenNameEQUAL	
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
pathElements	TokenNameIdentifier	 path Elements
.	TokenNameDOT	
elementAt	TokenNameIdentifier	 element At
(	TokenNameLPAREN	
size	TokenNameIdentifier	 size
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
theFiles	TokenNameIdentifier	 the Files
=	TokenNameEQUAL	
listFiles	TokenNameIdentifier	 list Files
(	TokenNameLPAREN	
this	TokenNamethis	
.	TokenNameDOT	
curpwd	TokenNameIdentifier	 curpwd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
ftpFile	TokenNameIdentifier	 ftp File
=	TokenNameEQUAL	
getFile	TokenNameIdentifier	 get File
(	TokenNameLPAREN	
theFiles	TokenNameIdentifier	 the Files
,	TokenNameCOMMA	
lastpathelement	TokenNameIdentifier	 lastpathelement
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * find a file in a directory in case unsensitive way * @param parentPath where we are * @param soughtPathElement what is being sought * @return the first file found or null if not found */	TokenNameCOMMENT_JAVADOC	 find a file in a directory in case unsensitive way @param parentPath where we are @param soughtPathElement what is being sought @return the first file found or null if not found 
private	TokenNameprivate	
String	TokenNameIdentifier	 String
findPathElementCaseUnsensitive	TokenNameIdentifier	 find Path Element Case Unsensitive
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
parentPath	TokenNameIdentifier	 parent Path
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
soughtPathElement	TokenNameIdentifier	 sought Path Element
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// we are already in the right path, so the second parameter 	TokenNameCOMMENT_LINE	we are already in the right path, so the second parameter 
// is false 	TokenNameCOMMENT_LINE	is false 
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
theFiles	TokenNameIdentifier	 the Files
=	TokenNameEQUAL	
listFiles	TokenNameIdentifier	 list Files
(	TokenNameLPAREN	
parentPath	TokenNameIdentifier	 parent Path
,	TokenNameCOMMA	
false	TokenNamefalse	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
theFiles	TokenNameIdentifier	 the Files
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
icounter	TokenNameIdentifier	 icounter
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
icounter	TokenNameIdentifier	 icounter
<	TokenNameLESS	
theFiles	TokenNameIdentifier	 the Files
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
icounter	TokenNameIdentifier	 icounter
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
theFiles	TokenNameIdentifier	 the Files
[	TokenNameLBRACKET	
icounter	TokenNameIdentifier	 icounter
]	TokenNameRBRACKET	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
theFiles	TokenNameIdentifier	 the Files
[	TokenNameLBRACKET	
icounter	TokenNameIdentifier	 icounter
]	TokenNameRBRACKET	
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equalsIgnoreCase	TokenNameIdentifier	 equals Ignore Case
(	TokenNameLPAREN	
soughtPathElement	TokenNameIdentifier	 sought Path Element
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
theFiles	TokenNameIdentifier	 the Files
[	TokenNameLBRACKET	
icounter	TokenNameIdentifier	 icounter
]	TokenNameRBRACKET	
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * find out if the file exists * @return true if the file exists */	TokenNameCOMMENT_JAVADOC	 find out if the file exists @return true if the file exists 
public	TokenNamepublic	
boolean	TokenNameboolean	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
(	TokenNameLPAREN	
ftpFile	TokenNameIdentifier	 ftp File
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * if the file is a symbolic link, find out to what it is pointing * @return the target of the symbolic link */	TokenNameCOMMENT_JAVADOC	 if the file is a symbolic link, find out to what it is pointing @return the target of the symbolic link 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getLink	TokenNameIdentifier	 get Link
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
ftpFile	TokenNameIdentifier	 ftp File
.	TokenNameDOT	
getLink	TokenNameIdentifier	 get Link
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * get the name of the file * @return the name of the file */	TokenNameCOMMENT_JAVADOC	 get the name of the file @return the name of the file 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
ftpFile	TokenNameIdentifier	 ftp File
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * find out the absolute path of the file * @return absolute path as string */	TokenNameCOMMENT_JAVADOC	 find out the absolute path of the file @return absolute path as string 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
getCurpwdPlusFileSep	TokenNameIdentifier	 get Curpwd Plus File Sep
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
ftpFile	TokenNameIdentifier	 ftp File
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * find out the relative path assuming that the path used to construct * this AntFTPFile was spelled properly with regards to case. * This is OK on a case sensitive system such as UNIX * @return relative path */	TokenNameCOMMENT_JAVADOC	 find out the relative path assuming that the path used to construct this AntFTPFile was spelled properly with regards to case. This is OK on a case sensitive system such as UNIX @return relative path 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getFastRelativePath	TokenNameIdentifier	 get Fast Relative Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
absPath	TokenNameIdentifier	 abs Path
=	TokenNameEQUAL	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
absPath	TokenNameIdentifier	 abs Path
.	TokenNameDOT	
indexOf	TokenNameIdentifier	 index Of
(	TokenNameLPAREN	
rootPath	TokenNameIdentifier	 root Path
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getSeparator	TokenNameIdentifier	 get Separator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
absPath	TokenNameIdentifier	 abs Path
.	TokenNameDOT	
substring	TokenNameIdentifier	 substring
(	TokenNameLPAREN	
rootPath	TokenNameIdentifier	 root Path
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getSeparator	TokenNameIdentifier	 get Separator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * find out the relative path to the rootPath of the enclosing scanner. * this relative path is spelled exactly like on disk, * for instance if the AntFTPFile has been instantiated as ALPHA, * but the file is really called alpha, this method will return alpha. * If a symbolic link is encountered, it is followed, but the name of the link * rather than the name of the target is returned. * (ie does not behave like File.getCanonicalPath()) * @return relative path, separated by remoteFileSep * @throws IOException if a change directory fails, ... * @throws BuildException if one of the components of the relative path cannot * be found. */	TokenNameCOMMENT_JAVADOC	 find out the relative path to the rootPath of the enclosing scanner. this relative path is spelled exactly like on disk, for instance if the AntFTPFile has been instantiated as ALPHA, but the file is really called alpha, this method will return alpha. If a symbolic link is encountered, it is followed, but the name of the link rather than the name of the target is returned. (ie does not behave like File.getCanonicalPath()) @return relative path, separated by remoteFileSep @throws IOException if a change directory fails, ... @throws BuildException if one of the components of the relative path cannot be found. 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getRelativePath	TokenNameIdentifier	 get Relative Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
relativePathCalculated	TokenNameIdentifier	 relative Path Calculated
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
parent	TokenNameIdentifier	 parent
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
traversesSymlinks	TokenNameIdentifier	 traverses Symlinks
=	TokenNameEQUAL	
parent	TokenNameIdentifier	 parent
.	TokenNameDOT	
isTraverseSymlinks	TokenNameIdentifier	 is Traverse Symlinks
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
relativePath	TokenNameIdentifier	 relative Path
=	TokenNameEQUAL	
getRelativePath	TokenNameIdentifier	 get Relative Path
(	TokenNameLPAREN	
parent	TokenNameIdentifier	 parent
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
parent	TokenNameIdentifier	 parent
.	TokenNameDOT	
getRelativePath	TokenNameIdentifier	 get Relative Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
relativePath	TokenNameIdentifier	 relative Path
=	TokenNameEQUAL	
getRelativePath	TokenNameIdentifier	 get Relative Path
(	TokenNameLPAREN	
rootPath	TokenNameIdentifier	 root Path
,	TokenNameCOMMA	
""	TokenNameStringLiteral	 
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
relativePathCalculated	TokenNameIdentifier	 relative Path Calculated
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
relativePath	TokenNameIdentifier	 relative Path
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * get thge relative path of this file * @param currentPath base path * @param currentRelativePath relative path of the base path with regards to remote dir * @return relative path */	TokenNameCOMMENT_JAVADOC	 get thge relative path of this file @param currentPath base path @param currentRelativePath relative path of the base path with regards to remote dir @return relative path 
private	TokenNameprivate	
String	TokenNameIdentifier	 String
getRelativePath	TokenNameIdentifier	 get Relative Path
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
currentPath	TokenNameIdentifier	 current Path
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
currentRelativePath	TokenNameIdentifier	 current Relative Path
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Vector	TokenNameIdentifier	 Vector
pathElements	TokenNameIdentifier	 path Elements
=	TokenNameEQUAL	
SelectorUtils	TokenNameIdentifier	 Selector Utils
.	TokenNameDOT	
tokenizePath	TokenNameIdentifier	 tokenize Path
(	TokenNameLPAREN	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getSeparator	TokenNameIdentifier	 get Separator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Vector	TokenNameIdentifier	 Vector
pathElements2	TokenNameIdentifier	 path Elements2
=	TokenNameEQUAL	
SelectorUtils	TokenNameIdentifier	 Selector Utils
.	TokenNameDOT	
tokenizePath	TokenNameIdentifier	 tokenize Path
(	TokenNameLPAREN	
currentPath	TokenNameIdentifier	 current Path
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getSeparator	TokenNameIdentifier	 get Separator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
relPath	TokenNameIdentifier	 rel Path
=	TokenNameEQUAL	
currentRelativePath	TokenNameIdentifier	 current Relative Path
;	TokenNameSEMICOLON	
final	TokenNamefinal	
int	TokenNameint	
size	TokenNameIdentifier	 size
=	TokenNameEQUAL	
pathElements	TokenNameIdentifier	 path Elements
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
pcount	TokenNameIdentifier	 pcount
=	TokenNameEQUAL	
pathElements2	TokenNameIdentifier	 path Elements2
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
pcount	TokenNameIdentifier	 pcount
<	TokenNameLESS	
size	TokenNameIdentifier	 size
;	TokenNameSEMICOLON	
pcount	TokenNameIdentifier	 pcount
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
currentElement	TokenNameIdentifier	 current Element
=	TokenNameEQUAL	
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
pathElements	TokenNameIdentifier	 path Elements
.	TokenNameDOT	
elementAt	TokenNameIdentifier	 element At
(	TokenNameLPAREN	
pcount	TokenNameIdentifier	 pcount
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
theFiles	TokenNameIdentifier	 the Files
=	TokenNameEQUAL	
listFiles	TokenNameIdentifier	 list Files
(	TokenNameLPAREN	
currentPath	TokenNameIdentifier	 current Path
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
FTPFile	TokenNameIdentifier	 FTP File
theFile	TokenNameIdentifier	 the File
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
theFiles	TokenNameIdentifier	 the Files
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
theFile	TokenNameIdentifier	 the File
=	TokenNameEQUAL	
getFile	TokenNameIdentifier	 get File
(	TokenNameLPAREN	
theFiles	TokenNameIdentifier	 the Files
,	TokenNameCOMMA	
currentElement	TokenNameIdentifier	 current Element
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
relPath	TokenNameIdentifier	 rel Path
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
""	TokenNameStringLiteral	 
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
relPath	TokenNameIdentifier	 rel Path
=	TokenNameEQUAL	
relPath	TokenNameIdentifier	 rel Path
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getSeparator	TokenNameIdentifier	 get Separator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
theFile	TokenNameIdentifier	 the File
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// hit a hidden file assume not a symlink 	TokenNameCOMMENT_LINE	hit a hidden file assume not a symlink 
relPath	TokenNameIdentifier	 rel Path
=	TokenNameEQUAL	
relPath	TokenNameIdentifier	 rel Path
+	TokenNamePLUS	
currentElement	TokenNameIdentifier	 current Element
;	TokenNameSEMICOLON	
currentPath	TokenNameIdentifier	 current Path
=	TokenNameEQUAL	
currentPath	TokenNameIdentifier	 current Path
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getSeparator	TokenNameIdentifier	 get Separator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
currentElement	TokenNameIdentifier	 current Element
;	TokenNameSEMICOLON	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Hidden file "	TokenNameStringLiteral	Hidden file 
+	TokenNamePLUS	
relPath	TokenNameIdentifier	 rel Path
+	TokenNamePLUS	
" assumed to not be a symlink."	TokenNameStringLiteral	 assumed to not be a symlink.
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
traversesSymlinks	TokenNameIdentifier	 traverses Symlinks
=	TokenNameEQUAL	
traversesSymlinks	TokenNameIdentifier	 traverses Symlinks
||	TokenNameOR_OR	
theFile	TokenNameIdentifier	 the File
.	TokenNameDOT	
isSymbolicLink	TokenNameIdentifier	 is Symbolic Link
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
relPath	TokenNameIdentifier	 rel Path
=	TokenNameEQUAL	
relPath	TokenNameIdentifier	 rel Path
+	TokenNamePLUS	
theFile	TokenNameIdentifier	 the File
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
currentPath	TokenNameIdentifier	 current Path
=	TokenNameEQUAL	
currentPath	TokenNameIdentifier	 current Path
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getSeparator	TokenNameIdentifier	 get Separator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
theFile	TokenNameIdentifier	 the File
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
relPath	TokenNameIdentifier	 rel Path
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * find a file matching a string in an array of FTPFile. * This method will find "alpha" when requested for "ALPHA" * if and only if the caseSensitive attribute is set to false. * When caseSensitive is set to true, only the exact match is returned. * @param theFiles array of files * @param lastpathelement the file name being sought * @return null if the file cannot be found, otherwise return the matching file. */	TokenNameCOMMENT_JAVADOC	 find a file matching a string in an array of FTPFile. This method will find "alpha" when requested for "ALPHA" if and only if the caseSensitive attribute is set to false. When caseSensitive is set to true, only the exact match is returned. @param theFiles array of files @param lastpathelement the file name being sought @return null if the file cannot be found, otherwise return the matching file. 
public	TokenNamepublic	
FTPFile	TokenNameIdentifier	 FTP File
getFile	TokenNameIdentifier	 get File
(	TokenNameLPAREN	
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
theFiles	TokenNameIdentifier	 the Files
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
lastpathelement	TokenNameIdentifier	 lastpathelement
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
theFiles	TokenNameIdentifier	 the Files
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
fcount	TokenNameIdentifier	 fcount
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
fcount	TokenNameIdentifier	 fcount
<	TokenNameLESS	
theFiles	TokenNameIdentifier	 the Files
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
fcount	TokenNameIdentifier	 fcount
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
theFiles	TokenNameIdentifier	 the Files
[	TokenNameLBRACKET	
fcount	TokenNameIdentifier	 fcount
]	TokenNameRBRACKET	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
theFiles	TokenNameIdentifier	 the Files
[	TokenNameLBRACKET	
fcount	TokenNameIdentifier	 fcount
]	TokenNameRBRACKET	
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
lastpathelement	TokenNameIdentifier	 lastpathelement
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
theFiles	TokenNameIdentifier	 the Files
[	TokenNameLBRACKET	
fcount	TokenNameIdentifier	 fcount
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
isCaseSensitive	TokenNameIdentifier	 is Case Sensitive
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
theFiles	TokenNameIdentifier	 the Files
[	TokenNameLBRACKET	
fcount	TokenNameIdentifier	 fcount
]	TokenNameRBRACKET	
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equalsIgnoreCase	TokenNameIdentifier	 equals Ignore Case
(	TokenNameLPAREN	
lastpathelement	TokenNameIdentifier	 lastpathelement
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
theFiles	TokenNameIdentifier	 the Files
[	TokenNameLBRACKET	
fcount	TokenNameIdentifier	 fcount
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * tell if a file is a directory. * note that it will return false for symbolic links pointing to directories. * @return <code>true</code> for directories */	TokenNameCOMMENT_JAVADOC	 tell if a file is a directory. note that it will return false for symbolic links pointing to directories. @return <code>true</code> for directories 
public	TokenNamepublic	
boolean	TokenNameboolean	
isDirectory	TokenNameIdentifier	 is Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
ftpFile	TokenNameIdentifier	 ftp File
.	TokenNameDOT	
isDirectory	TokenNameIdentifier	 is Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * tell if a file is a symbolic link * @return <code>true</code> for symbolic links */	TokenNameCOMMENT_JAVADOC	 tell if a file is a symbolic link @return <code>true</code> for symbolic links 
public	TokenNamepublic	
boolean	TokenNameboolean	
isSymbolicLink	TokenNameIdentifier	 is Symbolic Link
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
ftpFile	TokenNameIdentifier	 ftp File
.	TokenNameDOT	
isSymbolicLink	TokenNameIdentifier	 is Symbolic Link
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * return the attached FTP client object. * Warning : this instance is really shared with the enclosing class. * @return FTP client */	TokenNameCOMMENT_JAVADOC	 return the attached FTP client object. Warning : this instance is really shared with the enclosing class. @return FTP client 
protected	TokenNameprotected	
FTPClient	TokenNameIdentifier	 FTP Client
getClient	TokenNameIdentifier	 get Client
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
client	TokenNameIdentifier	 client
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * sets the current path of an AntFTPFile * @param curpwd the current path one wants to set */	TokenNameCOMMENT_JAVADOC	 sets the current path of an AntFTPFile @param curpwd the current path one wants to set 
protected	TokenNameprotected	
void	TokenNamevoid	
setCurpwd	TokenNameIdentifier	 set Curpwd
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
curpwd	TokenNameIdentifier	 curpwd
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
curpwd	TokenNameIdentifier	 curpwd
=	TokenNameEQUAL	
curpwd	TokenNameIdentifier	 curpwd
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * returns the path of the directory containing the AntFTPFile. * of the full path of the file itself in case of AntFTPRootFile * @return parent directory of the AntFTPFile */	TokenNameCOMMENT_JAVADOC	 returns the path of the directory containing the AntFTPFile. of the full path of the file itself in case of AntFTPRootFile @return parent directory of the AntFTPFile 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getCurpwd	TokenNameIdentifier	 get Curpwd
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
curpwd	TokenNameIdentifier	 curpwd
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * returns the path of the directory containing the AntFTPFile. * of the full path of the file itself in case of AntFTPRootFile * and appends the remote file separator if necessary. * @return parent directory of the AntFTPFile * @since Ant 1.8.2 */	TokenNameCOMMENT_JAVADOC	 returns the path of the directory containing the AntFTPFile. of the full path of the file itself in case of AntFTPRootFile and appends the remote file separator if necessary. @return parent directory of the AntFTPFile @since Ant 1.8.2 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getCurpwdPlusFileSep	TokenNameIdentifier	 get Curpwd Plus File Sep
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
sep	TokenNameIdentifier	 sep
=	TokenNameEQUAL	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getSeparator	TokenNameIdentifier	 get Separator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
curpwd	TokenNameIdentifier	 curpwd
.	TokenNameDOT	
endsWith	TokenNameIdentifier	 ends With
(	TokenNameLPAREN	
sep	TokenNameIdentifier	 sep
)	TokenNameRPAREN	
?	TokenNameQUESTION	
curpwd	TokenNameIdentifier	 curpwd
:	TokenNameCOLON	
curpwd	TokenNameIdentifier	 curpwd
+	TokenNamePLUS	
sep	TokenNameIdentifier	 sep
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * find out if a symbolic link is encountered in the relative path of this file * from rootPath. * @return <code>true</code> if a symbolic link is encountered in the relative path. * @throws IOException if one of the change directory or directory listing operations * fails * @throws BuildException if a path component in the relative path cannot be found. */	TokenNameCOMMENT_JAVADOC	 find out if a symbolic link is encountered in the relative path of this file from rootPath. @return <code>true</code> if a symbolic link is encountered in the relative path. @throws IOException if one of the change directory or directory listing operations fails @throws BuildException if a path component in the relative path cannot be found. 
public	TokenNamepublic	
boolean	TokenNameboolean	
isTraverseSymlinks	TokenNameIdentifier	 is Traverse Symlinks
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
relativePathCalculated	TokenNameIdentifier	 relative Path Calculated
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// getRelativePath also finds about symlinks 	TokenNameCOMMENT_LINE	getRelativePath also finds about symlinks 
getRelativePath	TokenNameIdentifier	 get Relative Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
traversesSymlinks	TokenNameIdentifier	 traverses Symlinks
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Get a string rep of this object. * @return a string containing the pwd and the file. */	TokenNameCOMMENT_JAVADOC	 Get a string rep of this object. @return a string containing the pwd and the file. 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
"AntFtpFile: "	TokenNameStringLiteral	AntFtpFile: 
+	TokenNamePLUS	
curpwd	TokenNameIdentifier	 curpwd
+	TokenNamePLUS	
"%"	TokenNameStringLiteral	%
+	TokenNamePLUS	
ftpFile	TokenNameIdentifier	 ftp File
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * special class to represent the remote directory itself * @since Ant 1.6 */	TokenNameCOMMENT_JAVADOC	 special class to represent the remote directory itself @since Ant 1.6 
protected	TokenNameprotected	
class	TokenNameclass	
AntFTPRootFile	TokenNameIdentifier	 Ant FTP Root File
extends	TokenNameextends	
AntFTPFile	TokenNameIdentifier	 Ant FTP File
{	TokenNameLBRACE	
private	TokenNameprivate	
String	TokenNameIdentifier	 String
remotedir	TokenNameIdentifier	 remotedir
;	TokenNameSEMICOLON	
/** * constructor * @param aclient FTP client * @param remotedir remote directory */	TokenNameCOMMENT_JAVADOC	 constructor @param aclient FTP client @param remotedir remote directory 
public	TokenNamepublic	
AntFTPRootFile	TokenNameIdentifier	 Ant FTP Root File
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
aclient	TokenNameIdentifier	 aclient
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
remotedir	TokenNameIdentifier	 remotedir
)	TokenNameRPAREN	
{	TokenNameLBRACE	
super	TokenNamesuper	
(	TokenNameLPAREN	
aclient	TokenNameIdentifier	 aclient
,	TokenNameCOMMA	
null	TokenNamenull	
,	TokenNameCOMMA	
remotedir	TokenNameIdentifier	 remotedir
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
remotedir	TokenNameIdentifier	 remotedir
=	TokenNameEQUAL	
remotedir	TokenNameIdentifier	 remotedir
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
getClient	TokenNameIdentifier	 get Client
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
this	TokenNamethis	
.	TokenNameDOT	
remotedir	TokenNameIdentifier	 remotedir
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
setCurpwd	TokenNameIdentifier	 set Curpwd
(	TokenNameLPAREN	
this	TokenNamethis	
.	TokenNameDOT	
getClient	TokenNameIdentifier	 get Client
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
printWorkingDirectory	TokenNameIdentifier	 print Working Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ioe	TokenNameIdentifier	 ioe
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * find the absolute path * @return absolute path */	TokenNameCOMMENT_JAVADOC	 find the absolute path @return absolute path 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
this	TokenNamethis	
.	TokenNameDOT	
getCurpwd	TokenNameIdentifier	 get Curpwd
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * find out the relative path to root * @return empty string * @throws BuildException actually never * @throws IOException actually never */	TokenNameCOMMENT_JAVADOC	 find out the relative path to root @return empty string @throws BuildException actually never @throws IOException actually never 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getRelativePath	TokenNameIdentifier	 get Relative Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
,	TokenNameCOMMA	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
return	TokenNamereturn	
""	TokenNameStringLiteral	 
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * check FTPFiles to check whether they function as directories too * the FTPFile API seem to make directory and symbolic links incompatible * we want to find out if we can cd to a symbolic link * @param dir the parent directory of the file to test * @param file the file to test * @return true if it is possible to cd to this directory * @since ant 1.6 */	TokenNameCOMMENT_JAVADOC	 check FTPFiles to check whether they function as directories too the FTPFile API seem to make directory and symbolic links incompatible we want to find out if we can cd to a symbolic link @param dir the parent directory of the file to test @param file the file to test @return true if it is possible to cd to this directory @since ant 1.6 
private	TokenNameprivate	
boolean	TokenNameboolean	
isFunctioningAsDirectory	TokenNameIdentifier	 is Functioning As Directory
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
FTPFile	TokenNameIdentifier	 FTP File
file	TokenNameIdentifier	 file
)	TokenNameRPAREN	
{	TokenNameLBRACE	
boolean	TokenNameboolean	
result	TokenNameIdentifier	 result
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
currentWorkingDir	TokenNameIdentifier	 current Working Dir
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
isDirectory	TokenNameIdentifier	 is Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
isFile	TokenNameIdentifier	 is File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
currentWorkingDir	TokenNameIdentifier	 current Working Dir
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
printWorkingDirectory	TokenNameIdentifier	 print Working Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"could not find current working directory "	TokenNameStringLiteral	could not find current working directory 
+	TokenNamePLUS	
dir	TokenNameIdentifier	 dir
+	TokenNamePLUS	
" while checking a symlink"	TokenNameStringLiteral	 while checking a symlink
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_DEBUG	TokenNameIdentifier	 MSG  DEBUG
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
currentWorkingDir	TokenNameIdentifier	 current Working Dir
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
result	TokenNameIdentifier	 result
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getLink	TokenNameIdentifier	 get Link
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"could not cd to "	TokenNameStringLiteral	could not cd to 
+	TokenNamePLUS	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getLink	TokenNameIdentifier	 get Link
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" while checking a symlink"	TokenNameStringLiteral	 while checking a symlink
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_DEBUG	TokenNameIdentifier	 MSG  DEBUG
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
result	TokenNameIdentifier	 result
)	TokenNameRPAREN	
{	TokenNameLBRACE	
boolean	TokenNameboolean	
comeback	TokenNameIdentifier	 comeback
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
comeback	TokenNameIdentifier	 comeback
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
currentWorkingDir	TokenNameIdentifier	 current Working Dir
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"could not cd back to "	TokenNameStringLiteral	could not cd back to 
+	TokenNamePLUS	
dir	TokenNameIdentifier	 dir
+	TokenNamePLUS	
" while checking a symlink"	TokenNameStringLiteral	 while checking a symlink
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_ERR	TokenNameIdentifier	 MSG  ERR
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
comeback	TokenNameIdentifier	 comeback
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not cd back to "	TokenNameStringLiteral	could not cd back to 
+	TokenNamePLUS	
dir	TokenNameIdentifier	 dir
+	TokenNamePLUS	
" while checking a symlink"	TokenNameStringLiteral	 while checking a symlink
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
result	TokenNameIdentifier	 result
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * check FTPFiles to check whether they function as directories too * the FTPFile API seem to make directory and symbolic links incompatible * we want to find out if we can cd to a symbolic link * @param dir the parent directory of the file to test * @param file the file to test * @return true if it is possible to cd to this directory * @since ant 1.6 */	TokenNameCOMMENT_JAVADOC	 check FTPFiles to check whether they function as directories too the FTPFile API seem to make directory and symbolic links incompatible we want to find out if we can cd to a symbolic link @param dir the parent directory of the file to test @param file the file to test @return true if it is possible to cd to this directory @since ant 1.6 
private	TokenNameprivate	
boolean	TokenNameboolean	
isFunctioningAsFile	TokenNameIdentifier	 is Functioning As File
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
FTPFile	TokenNameIdentifier	 FTP File
file	TokenNameIdentifier	 file
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
isDirectory	TokenNameIdentifier	 is Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
isFile	TokenNameIdentifier	 is File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
!	TokenNameNOT	
isFunctioningAsDirectory	TokenNameIdentifier	 is Functioning As Directory
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
file	TokenNameIdentifier	 file
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Executable a retryable object. * @param h the retry hander. * @param r the object that should be retried until it succeeds * or the number of retrys is reached. * @param descr a description of the command that is being run. * @throws IOException if there is a problem. */	TokenNameCOMMENT_JAVADOC	 Executable a retryable object. @param h the retry hander. @param r the object that should be retried until it succeeds or the number of retrys is reached. @param descr a description of the command that is being run. @throws IOException if there is a problem. 
protected	TokenNameprotected	
void	TokenNamevoid	
executeRetryable	TokenNameIdentifier	 execute Retryable
(	TokenNameLPAREN	
RetryHandler	TokenNameIdentifier	 Retry Handler
h	TokenNameIdentifier	 h
,	TokenNameCOMMA	
Retryable	TokenNameIdentifier	 Retryable
r	TokenNameIdentifier	 r
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
descr	TokenNameIdentifier	 descr
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
h	TokenNameIdentifier	 h
.	TokenNameDOT	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
r	TokenNameIdentifier	 r
,	TokenNameCOMMA	
descr	TokenNameIdentifier	 descr
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * For each file in the fileset, do the appropriate action: send, get, * delete, or list. * * @param ftp the FTPClient instance used to perform FTP actions * @param fs the fileset on which the actions are performed. * * @return the number of files to be transferred. * * @throws IOException if there is a problem reading a file * @throws BuildException if there is a problem in the configuration. */	TokenNameCOMMENT_JAVADOC	 For each file in the fileset, do the appropriate action: send, get, delete, or list. * @param ftp the FTPClient instance used to perform FTP actions @param fs the fileset on which the actions are performed. * @return the number of files to be transferred. * @throws IOException if there is a problem reading a file @throws BuildException if there is a problem in the configuration. 
protected	TokenNameprotected	
int	TokenNameint	
transferFiles	TokenNameIdentifier	 transfer Files
(	TokenNameLPAREN	
final	TokenNamefinal	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
FileSet	TokenNameIdentifier	 File Set
fs	TokenNameIdentifier	 fs
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
DirectoryScanner	TokenNameIdentifier	 Directory Scanner
ds	TokenNameIdentifier	 ds
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
SEND_FILES	TokenNameIdentifier	 SEND  FILES
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ds	TokenNameIdentifier	 ds
=	TokenNameEQUAL	
fs	TokenNameIdentifier	 fs
.	TokenNameDOT	
getDirectoryScanner	TokenNameIdentifier	 get Directory Scanner
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getProject	TokenNameIdentifier	 get Project
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
ds	TokenNameIdentifier	 ds
=	TokenNameEQUAL	
new	TokenNamenew	
FTPDirectoryScanner	TokenNameIdentifier	 FTP Directory Scanner
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
fs	TokenNameIdentifier	 fs
.	TokenNameDOT	
setupDirectoryScanner	TokenNameIdentifier	 setup Directory Scanner
(	TokenNameLPAREN	
ds	TokenNameIdentifier	 ds
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getProject	TokenNameIdentifier	 get Project
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ds	TokenNameIdentifier	 ds
.	TokenNameDOT	
setFollowSymlinks	TokenNameIdentifier	 set Follow Symlinks
(	TokenNameLPAREN	
fs	TokenNameIdentifier	 fs
.	TokenNameDOT	
isFollowSymlinks	TokenNameIdentifier	 is Follow Symlinks
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ds	TokenNameIdentifier	 ds
.	TokenNameDOT	
scan	TokenNameIdentifier	 scan
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
dsfiles	TokenNameIdentifier	 dsfiles
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
RM_DIR	TokenNameIdentifier	 RM  DIR
)	TokenNameRPAREN	
{	TokenNameLBRACE	
dsfiles	TokenNameIdentifier	 dsfiles
=	TokenNameEQUAL	
ds	TokenNameIdentifier	 ds
.	TokenNameDOT	
getIncludedDirectories	TokenNameIdentifier	 get Included Directories
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
dsfiles	TokenNameIdentifier	 dsfiles
=	TokenNameEQUAL	
ds	TokenNameIdentifier	 ds
.	TokenNameDOT	
getIncludedFiles	TokenNameIdentifier	 get Included Files
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
String	TokenNameIdentifier	 String
dir	TokenNameIdentifier	 dir
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
ds	TokenNameIdentifier	 ds
.	TokenNameDOT	
getBasedir	TokenNameIdentifier	 get Basedir
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
SEND_FILES	TokenNameIdentifier	 SEND  FILES
)	TokenNameRPAREN	
||	TokenNameOR_OR	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
GET_FILES	TokenNameIdentifier	 GET  FILES
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"the dir attribute must be set for send "	TokenNameStringLiteral	the dir attribute must be set for send 
+	TokenNamePLUS	
"and get actions"	TokenNameStringLiteral	and get actions
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
SEND_FILES	TokenNameIdentifier	 SEND  FILES
)	TokenNameRPAREN	
||	TokenNameOR_OR	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
GET_FILES	TokenNameIdentifier	 GET  FILES
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
dir	TokenNameIdentifier	 dir
=	TokenNameEQUAL	
ds	TokenNameIdentifier	 ds
.	TokenNameDOT	
getBasedir	TokenNameIdentifier	 get Basedir
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// If we are doing a listing, we need the output stream created now. 	TokenNameCOMMENT_LINE	If we are doing a listing, we need the output stream created now. 
BufferedWriter	TokenNameIdentifier	 Buffered Writer
bw	TokenNameIdentifier	 bw
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
LIST_FILES	TokenNameIdentifier	 LIST  FILES
)	TokenNameRPAREN	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
pd	TokenNameIdentifier	 pd
=	TokenNameEQUAL	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getListing	TokenNameIdentifier	 get Listing
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getParentFile	TokenNameIdentifier	 get Parent File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
pd	TokenNameIdentifier	 pd
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
pd	TokenNameIdentifier	 pd
.	TokenNameDOT	
mkdirs	TokenNameIdentifier	 mkdirs
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
bw	TokenNameIdentifier	 bw
=	TokenNameEQUAL	
new	TokenNamenew	
BufferedWriter	TokenNameIdentifier	 Buffered Writer
(	TokenNameLPAREN	
new	TokenNamenew	
FileWriter	TokenNameIdentifier	 File Writer
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getListing	TokenNameIdentifier	 get Listing
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
RetryHandler	TokenNameIdentifier	 Retry Handler
h	TokenNameIdentifier	 h
=	TokenNameEQUAL	
new	TokenNamenew	
RetryHandler	TokenNameIdentifier	 Retry Handler
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getRetriesAllowed	TokenNameIdentifier	 get Retries Allowed
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
RM_DIR	TokenNameIdentifier	 RM  DIR
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// to remove directories, start by the end of the list 	TokenNameCOMMENT_LINE	to remove directories, start by the end of the list 
// the trunk does not let itself be removed before the leaves 	TokenNameCOMMENT_LINE	the trunk does not let itself be removed before the leaves 
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
dsfiles	TokenNameIdentifier	 dsfiles
.	TokenNameDOT	
length	TokenNameIdentifier	 length
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
>=	TokenNameGREATER_EQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
--	TokenNameMINUS_MINUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
dsfile	TokenNameIdentifier	 dsfile
=	TokenNameEQUAL	
dsfiles	TokenNameIdentifier	 dsfiles
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
executeRetryable	TokenNameIdentifier	 execute Retryable
(	TokenNameLPAREN	
h	TokenNameIdentifier	 h
,	TokenNameCOMMA	
new	TokenNamenew	
Retryable	TokenNameIdentifier	 Retryable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
public	TokenNamepublic	
void	TokenNamevoid	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
rmDir	TokenNameIdentifier	 rm Dir
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
dsfile	TokenNameIdentifier	 dsfile
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
,	TokenNameCOMMA	
dsfile	TokenNameIdentifier	 dsfile
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
final	TokenNamefinal	
BufferedWriter	TokenNameIdentifier	 Buffered Writer
fbw	TokenNameIdentifier	 fbw
=	TokenNameEQUAL	
bw	TokenNameIdentifier	 bw
;	TokenNameSEMICOLON	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
fdir	TokenNameIdentifier	 fdir
=	TokenNameEQUAL	
dir	TokenNameIdentifier	 dir
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isNewer	TokenNameIdentifier	 is Newer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
setGranularityMillis	TokenNameIdentifier	 set Granularity Millis
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getTimestampGranularity	TokenNameIdentifier	 get Timestamp Granularity
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getMilliseconds	TokenNameIdentifier	 get Milliseconds
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
dsfiles	TokenNameIdentifier	 dsfiles
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
dsfile	TokenNameIdentifier	 dsfile
=	TokenNameEQUAL	
dsfiles	TokenNameIdentifier	 dsfiles
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
executeRetryable	TokenNameIdentifier	 execute Retryable
(	TokenNameLPAREN	
h	TokenNameIdentifier	 h
,	TokenNameCOMMA	
new	TokenNamenew	
Retryable	TokenNameIdentifier	 Retryable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
public	TokenNamepublic	
void	TokenNamevoid	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
switch	TokenNameswitch	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
case	TokenNamecase	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
SEND_FILES	TokenNameIdentifier	 SEND  FILES
:	TokenNameCOLON	
sendFile	TokenNameIdentifier	 send File
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
fdir	TokenNameIdentifier	 fdir
,	TokenNameCOMMA	
dsfile	TokenNameIdentifier	 dsfile
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
case	TokenNamecase	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
GET_FILES	TokenNameIdentifier	 GET  FILES
:	TokenNameCOLON	
getFile	TokenNameIdentifier	 get File
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
fdir	TokenNameIdentifier	 fdir
,	TokenNameCOMMA	
dsfile	TokenNameIdentifier	 dsfile
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
case	TokenNamecase	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
DEL_FILES	TokenNameIdentifier	 DEL  FILES
:	TokenNameCOLON	
delFile	TokenNameIdentifier	 del File
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
dsfile	TokenNameIdentifier	 dsfile
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
case	TokenNamecase	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
LIST_FILES	TokenNameIdentifier	 LIST  FILES
:	TokenNameCOLON	
listFile	TokenNameIdentifier	 list File
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
fbw	TokenNameIdentifier	 fbw
,	TokenNameCOMMA	
dsfile	TokenNameIdentifier	 dsfile
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
case	TokenNamecase	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
CHMOD	TokenNameIdentifier	 CHMOD
:	TokenNameCOLON	
doSiteCommand	TokenNameIdentifier	 do Site Command
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
"chmod "	TokenNameStringLiteral	chmod 
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getChmod	TokenNameIdentifier	 get Chmod
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" "	TokenNameStringLiteral	 
+	TokenNamePLUS	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
dsfile	TokenNameIdentifier	 dsfile
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
transferred	TokenNameIdentifier	 transferred
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
default	TokenNamedefault	
:	TokenNameCOLON	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"unknown ftp action "	TokenNameStringLiteral	unknown ftp action 
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
,	TokenNameCOMMA	
dsfile	TokenNameIdentifier	 dsfile
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
bw	TokenNameIdentifier	 bw
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
bw	TokenNameIdentifier	 bw
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
dsfiles	TokenNameIdentifier	 dsfiles
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Sends all files specified by the configured filesets to the remote * server. * * @param ftp the FTPClient instance used to perform FTP actions * * @throws IOException if there is a problem reading a file * @throws BuildException if there is a problem in the configuration. */	TokenNameCOMMENT_JAVADOC	 Sends all files specified by the configured filesets to the remote server. * @param ftp the FTPClient instance used to perform FTP actions * @throws IOException if there is a problem reading a file @throws BuildException if there is a problem in the configuration. 
protected	TokenNameprotected	
void	TokenNamevoid	
transferFiles	TokenNameIdentifier	 transfer Files
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
transferred	TokenNameIdentifier	 transferred
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
skipped	TokenNameIdentifier	 skipped
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getFilesets	TokenNameIdentifier	 get Filesets
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"at least one fileset must be specified."	TokenNameStringLiteral	at least one fileset must be specified.
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
// get files from filesets 	TokenNameCOMMENT_LINE	get files from filesets 
final	TokenNamefinal	
int	TokenNameint	
size	TokenNameIdentifier	 size
=	TokenNameEQUAL	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getFilesets	TokenNameIdentifier	 get Filesets
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
size	TokenNameIdentifier	 size
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
FileSet	TokenNameIdentifier	 File Set
fs	TokenNameIdentifier	 fs
=	TokenNameEQUAL	
(	TokenNameLPAREN	
FileSet	TokenNameIdentifier	 File Set
)	TokenNameRPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getFilesets	TokenNameIdentifier	 get Filesets
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
elementAt	TokenNameIdentifier	 element At
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
fs	TokenNameIdentifier	 fs
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
transferFiles	TokenNameIdentifier	 transfer Files
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
fs	TokenNameIdentifier	 fs
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
transferred	TokenNameIdentifier	 transferred
+	TokenNamePLUS	
" "	TokenNameStringLiteral	 
+	TokenNamePLUS	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
ACTION_TARGET_STRS	TokenNameIdentifier	 ACTION  TARGET  STRS
[	TokenNameLBRACKET	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
]	TokenNameRBRACKET	
+	TokenNamePLUS	
" "	TokenNameStringLiteral	 
+	TokenNamePLUS	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
COMPLETED_ACTION_STRS	TokenNameIdentifier	 COMPLETED  ACTION  STRS
[	TokenNameLBRACKET	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
skipped	TokenNameIdentifier	 skipped
!=	TokenNameNOT_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
skipped	TokenNameIdentifier	 skipped
+	TokenNamePLUS	
" "	TokenNameStringLiteral	 
+	TokenNamePLUS	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
ACTION_TARGET_STRS	TokenNameIdentifier	 ACTION  TARGET  STRS
[	TokenNameLBRACKET	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
]	TokenNameRBRACKET	
+	TokenNamePLUS	
" were not successfully "	TokenNameStringLiteral	 were not successfully 
+	TokenNamePLUS	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
COMPLETED_ACTION_STRS	TokenNameIdentifier	 COMPLETED  ACTION  STRS
[	TokenNameLBRACKET	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Correct a file path to correspond to the remote host requirements. This * implementation currently assumes that the remote end can handle * Unix-style paths with forward-slash separators. This can be overridden * with the <code>separator</code> task parameter. No attempt is made to * determine what syntax is appropriate for the remote host. * * @param file the remote file name to be resolved * * @return the filename as it will appear on the server. */	TokenNameCOMMENT_JAVADOC	 Correct a file path to correspond to the remote host requirements. This implementation currently assumes that the remote end can handle Unix-style paths with forward-slash separators. This can be overridden with the <code>separator</code> task parameter. No attempt is made to determine what syntax is appropriate for the remote host. * @param file the remote file name to be resolved * @return the filename as it will appear on the server. 
protected	TokenNameprotected	
String	TokenNameIdentifier	 String
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
file	TokenNameIdentifier	 file
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
replace	TokenNameIdentifier	 replace
(	TokenNameLPAREN	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
getProperty	TokenNameIdentifier	 get Property
(	TokenNameLPAREN	
"file.separator"	TokenNameStringLiteral	file.separator
)	TokenNameRPAREN	
.	TokenNameDOT	
charAt	TokenNameIdentifier	 char At
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getSeparator	TokenNameIdentifier	 get Separator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
charAt	TokenNameIdentifier	 char At
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Creates all parent directories specified in a complete relative * pathname. Attempts to create existing directories will not cause * errors. * * @param ftp the FTP client instance to use to execute FTP actions on * the remote server. * @param filename the name of the file whose parents should be created. * @throws IOException under non documented circumstances * @throws BuildException if it is impossible to cd to a remote directory * */	TokenNameCOMMENT_JAVADOC	 Creates all parent directories specified in a complete relative pathname. Attempts to create existing directories will not cause errors. * @param ftp the FTP client instance to use to execute FTP actions on the remote server. @param filename the name of the file whose parents should be created. @throws IOException under non documented circumstances @throws BuildException if it is impossible to cd to a remote directory 
protected	TokenNameprotected	
void	TokenNamevoid	
createParents	TokenNameIdentifier	 create Parents
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
dir	TokenNameIdentifier	 dir
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
dirCache	TokenNameIdentifier	 dir Cache
.	TokenNameDOT	
contains	TokenNameIdentifier	 contains
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
Vector	TokenNameIdentifier	 Vector
parents	TokenNameIdentifier	 parents
=	TokenNameEQUAL	
new	TokenNamenew	
Vector	TokenNameIdentifier	 Vector
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
dirname	TokenNameIdentifier	 dirname
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
dirname	TokenNameIdentifier	 dirname
=	TokenNameEQUAL	
dir	TokenNameIdentifier	 dir
.	TokenNameDOT	
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
checkDir	TokenNameIdentifier	 check Dir
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
dirname	TokenNameIdentifier	 dirname
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
dirCache	TokenNameIdentifier	 dir Cache
.	TokenNameDOT	
contains	TokenNameIdentifier	 contains
(	TokenNameLPAREN	
checkDir	TokenNameIdentifier	 check Dir
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
dir	TokenNameIdentifier	 dir
=	TokenNameEQUAL	
checkDir	TokenNameIdentifier	 check Dir
;	TokenNameSEMICOLON	
parents	TokenNameIdentifier	 parents
.	TokenNameDOT	
addElement	TokenNameIdentifier	 add Element
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// find first non cached dir 	TokenNameCOMMENT_LINE	find first non cached dir 
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
parents	TokenNameIdentifier	 parents
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
>=	TokenNameGREATER_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
cwd	TokenNameIdentifier	 cwd
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
printWorkingDirectory	TokenNameIdentifier	 print Working Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
parent	TokenNameIdentifier	 parent
=	TokenNameEQUAL	
dir	TokenNameIdentifier	 dir
.	TokenNameDOT	
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
parent	TokenNameIdentifier	 parent
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
parent	TokenNameIdentifier	 parent
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not change to "	TokenNameStringLiteral	could not change to 
+	TokenNamePLUS	
"directory: "	TokenNameStringLiteral	directory: 
+	TokenNamePLUS	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyString	TokenNameIdentifier	 get Reply String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
while	TokenNamewhile	
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
>=	TokenNameGREATER_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
dir	TokenNameIdentifier	 dir
=	TokenNameEQUAL	
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
)	TokenNameRPAREN	
parents	TokenNameIdentifier	 parents
.	TokenNameDOT	
elementAt	TokenNameIdentifier	 element At
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
--	TokenNameMINUS_MINUS	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// check if dir exists by trying to change into it. 	TokenNameCOMMENT_LINE	check if dir exists by trying to change into it. 
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// could not change to it - try to create it 	TokenNameCOMMENT_LINE	could not change to it - try to create it 
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"creating remote directory "	TokenNameStringLiteral	creating remote directory 
+	TokenNamePLUS	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
.	TokenNameDOT	
getPath	TokenNameIdentifier	 get Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
makeDirectory	TokenNameIdentifier	 make Directory
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
handleMkDirFailure	TokenNameIdentifier	 handle Mk Dir Failure
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not change to "	TokenNameStringLiteral	could not change to 
+	TokenNamePLUS	
"directory: "	TokenNameStringLiteral	directory: 
+	TokenNamePLUS	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyString	TokenNameIdentifier	 get Reply String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
dirCache	TokenNameIdentifier	 dir Cache
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
cwd	TokenNameIdentifier	 cwd
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * auto find the time difference between local and remote * @param ftp handle to ftp client * @return number of millis to add to remote time to make it comparable to local time * @since ant 1.6 */	TokenNameCOMMENT_JAVADOC	 auto find the time difference between local and remote @param ftp handle to ftp client @return number of millis to add to remote time to make it comparable to local time @since ant 1.6 
private	TokenNameprivate	
long	TokenNamelong	
getTimeDiff	TokenNameIdentifier	 get Time Diff
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
)	TokenNameRPAREN	
{	TokenNameLBRACE	
long	TokenNamelong	
returnValue	TokenNameIdentifier	 return Value
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
File	TokenNameIdentifier	 File
tempFile	TokenNameIdentifier	 temp File
=	TokenNameEQUAL	
findFileName	TokenNameIdentifier	 find File Name
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
// create a local temporary file 	TokenNameCOMMENT_LINE	create a local temporary file 
FILE_UTILS	TokenNameIdentifier	 FILE  UTILS
.	TokenNameDOT	
createNewFile	TokenNameIdentifier	 create New File
(	TokenNameLPAREN	
tempFile	TokenNameIdentifier	 temp File
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
long	TokenNamelong	
localTimeStamp	TokenNameIdentifier	 local Time Stamp
=	TokenNameEQUAL	
tempFile	TokenNameIdentifier	 temp File
.	TokenNameDOT	
lastModified	TokenNameIdentifier	 last Modified
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
BufferedInputStream	TokenNameIdentifier	 Buffered Input Stream
instream	TokenNameIdentifier	 instream
=	TokenNameEQUAL	
new	TokenNamenew	
BufferedInputStream	TokenNameIdentifier	 Buffered Input Stream
(	TokenNameLPAREN	
new	TokenNamenew	
FileInputStream	TokenNameIdentifier	 File Input Stream
(	TokenNameLPAREN	
tempFile	TokenNameIdentifier	 temp File
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
storeFile	TokenNameIdentifier	 store File
(	TokenNameLPAREN	
tempFile	TokenNameIdentifier	 temp File
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
instream	TokenNameIdentifier	 instream
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
instream	TokenNameIdentifier	 instream
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
success	TokenNameIdentifier	 success
=	TokenNameEQUAL	
FTPReply	TokenNameIdentifier	 FTP Reply
.	TokenNameDOT	
isPositiveCompletion	TokenNameIdentifier	 is Positive Completion
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyCode	TokenNameIdentifier	 get Reply Code
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
success	TokenNameIdentifier	 success
)	TokenNameRPAREN	
{	TokenNameLBRACE	
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
ftpFiles	TokenNameIdentifier	 ftp Files
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
listFiles	TokenNameIdentifier	 list Files
(	TokenNameLPAREN	
tempFile	TokenNameIdentifier	 temp File
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
ftpFiles	TokenNameIdentifier	 ftp Files
.	TokenNameDOT	
length	TokenNameIdentifier	 length
==	TokenNameEQUAL_EQUAL	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
long	TokenNamelong	
remoteTimeStamp	TokenNameIdentifier	 remote Time Stamp
=	TokenNameEQUAL	
ftpFiles	TokenNameIdentifier	 ftp Files
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
.	TokenNameDOT	
getTimestamp	TokenNameIdentifier	 get Timestamp
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getTime	TokenNameIdentifier	 get Time
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getTime	TokenNameIdentifier	 get Time
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
returnValue	TokenNameIdentifier	 return Value
=	TokenNameEQUAL	
localTimeStamp	TokenNameIdentifier	 local Time Stamp
-	TokenNameMINUS	
remoteTimeStamp	TokenNameIdentifier	 remote Time Stamp
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
deleteFile	TokenNameIdentifier	 delete File
(	TokenNameLPAREN	
ftpFiles	TokenNameIdentifier	 ftp Files
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// delegate the deletion of the local temp file to the delete task 	TokenNameCOMMENT_LINE	delegate the deletion of the local temp file to the delete task 
// because of race conditions occuring on Windows 	TokenNameCOMMENT_LINE	because of race conditions occuring on Windows 
Delete	TokenNameIdentifier	 Delete
mydelete	TokenNameIdentifier	 mydelete
=	TokenNameEQUAL	
new	TokenNamenew	
Delete	TokenNameIdentifier	 Delete
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
mydelete	TokenNameIdentifier	 mydelete
.	TokenNameDOT	
bindToOwner	TokenNameIdentifier	 bind To Owner
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
mydelete	TokenNameIdentifier	 mydelete
.	TokenNameDOT	
setFile	TokenNameIdentifier	 set File
(	TokenNameLPAREN	
tempFile	TokenNameIdentifier	 temp File
.	TokenNameDOT	
getCanonicalFile	TokenNameIdentifier	 get Canonical File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
mydelete	TokenNameIdentifier	 mydelete
.	TokenNameDOT	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
Exception	TokenNameIdentifier	 Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
e	TokenNameIdentifier	 e
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
returnValue	TokenNameIdentifier	 return Value
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * find a suitable name for local and remote temporary file */	TokenNameCOMMENT_JAVADOC	 find a suitable name for local and remote temporary file 
private	TokenNameprivate	
File	TokenNameIdentifier	 File
findFileName	TokenNameIdentifier	 find File Name
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
)	TokenNameRPAREN	
{	TokenNameLBRACE	
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
theFiles	TokenNameIdentifier	 the Files
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
int	TokenNameint	
maxIterations	TokenNameIdentifier	 max Iterations
=	TokenNameEQUAL	
1000	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
counter	TokenNameIdentifier	 counter
=	TokenNameEQUAL	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
counter	TokenNameIdentifier	 counter
<	TokenNameLESS	
maxIterations	TokenNameIdentifier	 max Iterations
;	TokenNameSEMICOLON	
counter	TokenNameIdentifier	 counter
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
localFile	TokenNameIdentifier	 local File
=	TokenNameEQUAL	
FILE_UTILS	TokenNameIdentifier	 FILE  UTILS
.	TokenNameDOT	
createTempFile	TokenNameIdentifier	 create Temp File
(	TokenNameLPAREN	
"ant"	TokenNameStringLiteral	ant
+	TokenNamePLUS	
Integer	TokenNameIdentifier	 Integer
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
counter	TokenNameIdentifier	 counter
)	TokenNameRPAREN	
,	TokenNameCOMMA	
".tmp"	TokenNameStringLiteral	.tmp
,	TokenNameCOMMA	
null	TokenNamenull	
,	TokenNameCOMMA	
false	TokenNamefalse	
,	TokenNameCOMMA	
false	TokenNamefalse	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
fileName	TokenNameIdentifier	 file Name
=	TokenNameEQUAL	
localFile	TokenNameIdentifier	 local File
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
found	TokenNameIdentifier	 found
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
theFiles	TokenNameIdentifier	 the Files
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
theFiles	TokenNameIdentifier	 the Files
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
listFiles	TokenNameIdentifier	 list Files
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
counter2	TokenNameIdentifier	 counter2
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
counter2	TokenNameIdentifier	 counter2
<	TokenNameLESS	
theFiles	TokenNameIdentifier	 the Files
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
counter2	TokenNameIdentifier	 counter2
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
theFiles	TokenNameIdentifier	 the Files
[	TokenNameLBRACKET	
counter2	TokenNameIdentifier	 counter2
]	TokenNameRBRACKET	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
theFiles	TokenNameIdentifier	 the Files
[	TokenNameLBRACKET	
counter2	TokenNameIdentifier	 counter2
]	TokenNameRBRACKET	
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
fileName	TokenNameIdentifier	 file Name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
found	TokenNameIdentifier	 found
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
ioe	TokenNameIdentifier	 ioe
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
found	TokenNameIdentifier	 found
)	TokenNameRPAREN	
{	TokenNameLBRACE	
localFile	TokenNameIdentifier	 local File
.	TokenNameDOT	
deleteOnExit	TokenNameIdentifier	 delete On Exit
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
localFile	TokenNameIdentifier	 local File
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Checks to see if the remote file is current as compared with the local * file. Returns true if the target file is up to date. * @param ftp ftpclient * @param localFile local file * @param remoteFile remote file * @return true if the target file is up to date * @throws IOException in unknown circumstances * @throws BuildException if the date of the remote files cannot be found and the action is * GET_FILES */	TokenNameCOMMENT_JAVADOC	 Checks to see if the remote file is current as compared with the local file. Returns true if the target file is up to date. @param ftp ftpclient @param localFile local file @param remoteFile remote file @return true if the target file is up to date @throws IOException in unknown circumstances @throws BuildException if the date of the remote files cannot be found and the action is GET_FILES 
protected	TokenNameprotected	
boolean	TokenNameboolean	
isUpToDate	TokenNameIdentifier	 is Up To Date
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
File	TokenNameIdentifier	 File
localFile	TokenNameIdentifier	 local File
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
remoteFile	TokenNameIdentifier	 remote File
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"checking date for "	TokenNameStringLiteral	checking date for 
+	TokenNamePLUS	
remoteFile	TokenNameIdentifier	 remote File
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
files	TokenNameIdentifier	 files
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
listFiles	TokenNameIdentifier	 list Files
(	TokenNameLPAREN	
remoteFile	TokenNameIdentifier	 remote File
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// For Microsoft's Ftp-Service an Array with length 0 is 	TokenNameCOMMENT_LINE	For Microsoft's Ftp-Service an Array with length 0 is 
// returned if configured to return listings in "MS-DOS"-Format 	TokenNameCOMMENT_LINE	returned if configured to return listings in "MS-DOS"-Format 
if	TokenNameif	
(	TokenNameLPAREN	
files	TokenNameIdentifier	 files
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
||	TokenNameOR_OR	
files	TokenNameIdentifier	 files
.	TokenNameDOT	
length	TokenNameIdentifier	 length
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// If we are sending files, then assume out of date. 	TokenNameCOMMENT_LINE	If we are sending files, then assume out of date. 
// If we are getting files, then throw an error 	TokenNameCOMMENT_LINE	If we are getting files, then throw an error 
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
SEND_FILES	TokenNameIdentifier	 SEND  FILES
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Could not date test remote file: "	TokenNameStringLiteral	Could not date test remote file: 
+	TokenNamePLUS	
remoteFile	TokenNameIdentifier	 remote File
+	TokenNamePLUS	
"assuming out of date."	TokenNameStringLiteral	assuming out of date.
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not date test remote file: "	TokenNameStringLiteral	could not date test remote file: 
+	TokenNamePLUS	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyString	TokenNameIdentifier	 get Reply String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
long	TokenNamelong	
remoteTimestamp	TokenNameIdentifier	 remote Timestamp
=	TokenNameEQUAL	
files	TokenNameIdentifier	 files
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
.	TokenNameDOT	
getTimestamp	TokenNameIdentifier	 get Timestamp
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getTime	TokenNameIdentifier	 get Time
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getTime	TokenNameIdentifier	 get Time
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
long	TokenNamelong	
localTimestamp	TokenNameIdentifier	 local Timestamp
=	TokenNameEQUAL	
localFile	TokenNameIdentifier	 local File
.	TokenNameDOT	
lastModified	TokenNameIdentifier	 last Modified
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
long	TokenNamelong	
adjustedRemoteTimestamp	TokenNameIdentifier	 adjusted Remote Timestamp
=	TokenNameEQUAL	
remoteTimestamp	TokenNameIdentifier	 remote Timestamp
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getTimeDiffMillis	TokenNameIdentifier	 get Time Diff Millis
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getGranularityMillis	TokenNameIdentifier	 get Granularity Millis
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
StringBuffer	TokenNameIdentifier	 String Buffer
msg	TokenNameIdentifier	 msg
;	TokenNameSEMICOLON	
synchronized	TokenNamesynchronized	
(	TokenNameLPAREN	
TIMESTAMP_LOGGING_SDF	TokenNameIdentifier	 TIMESTAMP  LOGGING  SDF
)	TokenNameRPAREN	
{	TokenNameLBRACE	
msg	TokenNameIdentifier	 msg
=	TokenNameEQUAL	
new	TokenNamenew	
StringBuffer	TokenNameIdentifier	 String Buffer
(	TokenNameLPAREN	
" ["	TokenNameStringLiteral	 [
)	TokenNameRPAREN	
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
TIMESTAMP_LOGGING_SDF	TokenNameIdentifier	 TIMESTAMP  LOGGING  SDF
.	TokenNameDOT	
format	TokenNameIdentifier	 format
(	TokenNameLPAREN	
new	TokenNamenew	
Date	TokenNameIdentifier	 Date
(	TokenNameLPAREN	
localTimestamp	TokenNameIdentifier	 local Timestamp
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
"] local"	TokenNameStringLiteral	] local
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
msg	TokenNameIdentifier	 msg
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
synchronized	TokenNamesynchronized	
(	TokenNameLPAREN	
TIMESTAMP_LOGGING_SDF	TokenNameIdentifier	 TIMESTAMP  LOGGING  SDF
)	TokenNameRPAREN	
{	TokenNameLBRACE	
msg	TokenNameIdentifier	 msg
=	TokenNameEQUAL	
new	TokenNamenew	
StringBuffer	TokenNameIdentifier	 String Buffer
(	TokenNameLPAREN	
" ["	TokenNameStringLiteral	 [
)	TokenNameRPAREN	
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
TIMESTAMP_LOGGING_SDF	TokenNameIdentifier	 TIMESTAMP  LOGGING  SDF
.	TokenNameDOT	
format	TokenNameIdentifier	 format
(	TokenNameLPAREN	
new	TokenNamenew	
Date	TokenNameIdentifier	 Date
(	TokenNameLPAREN	
adjustedRemoteTimestamp	TokenNameIdentifier	 adjusted Remote Timestamp
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
"] remote"	TokenNameStringLiteral	] remote
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
remoteTimestamp	TokenNameIdentifier	 remote Timestamp
!=	TokenNameNOT_EQUAL	
adjustedRemoteTimestamp	TokenNameIdentifier	 adjusted Remote Timestamp
)	TokenNameRPAREN	
{	TokenNameLBRACE	
synchronized	TokenNamesynchronized	
(	TokenNameLPAREN	
TIMESTAMP_LOGGING_SDF	TokenNameIdentifier	 TIMESTAMP  LOGGING  SDF
)	TokenNameRPAREN	
{	TokenNameLBRACE	
msg	TokenNameIdentifier	 msg
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
" - (raw: "	TokenNameStringLiteral	 - (raw: 
)	TokenNameRPAREN	
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
TIMESTAMP_LOGGING_SDF	TokenNameIdentifier	 TIMESTAMP  LOGGING  SDF
.	TokenNameDOT	
format	TokenNameIdentifier	 format
(	TokenNameLPAREN	
new	TokenNamenew	
Date	TokenNameIdentifier	 Date
(	TokenNameLPAREN	
remoteTimestamp	TokenNameIdentifier	 remote Timestamp
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
")"	TokenNameStringLiteral	)
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
msg	TokenNameIdentifier	 msg
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
SEND_FILES	TokenNameIdentifier	 SEND  FILES
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
adjustedRemoteTimestamp	TokenNameIdentifier	 adjusted Remote Timestamp
>=	TokenNameGREATER_EQUAL	
localTimestamp	TokenNameIdentifier	 local Timestamp
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
return	TokenNamereturn	
localTimestamp	TokenNameIdentifier	 local Timestamp
>=	TokenNameGREATER_EQUAL	
adjustedRemoteTimestamp	TokenNameIdentifier	 adjusted Remote Timestamp
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Sends a site command to the ftp server * @param ftp ftp client * @param theCMD command to execute * @throws IOException in unknown circumstances * @throws BuildException in unknown circumstances */	TokenNameCOMMENT_JAVADOC	 Sends a site command to the ftp server @param ftp ftp client @param theCMD command to execute @throws IOException in unknown circumstances @throws BuildException in unknown circumstances 
protected	TokenNameprotected	
void	TokenNamevoid	
doSiteCommand	TokenNameIdentifier	 do Site Command
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
theCMD	TokenNameIdentifier	 the CMD
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
boolean	TokenNameboolean	
rc	TokenNameIdentifier	 rc
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
myReply	TokenNameIdentifier	 my Reply
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Doing Site Command: "	TokenNameStringLiteral	Doing Site Command: 
+	TokenNamePLUS	
theCMD	TokenNameIdentifier	 the CMD
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
rc	TokenNameIdentifier	 rc
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
sendSiteCommand	TokenNameIdentifier	 send Site Command
(	TokenNameLPAREN	
theCMD	TokenNameIdentifier	 the CMD
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
rc	TokenNameIdentifier	 rc
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Failed to issue Site Command: "	TokenNameStringLiteral	Failed to issue Site Command: 
+	TokenNamePLUS	
theCMD	TokenNameIdentifier	 the CMD
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_WARN	TokenNameIdentifier	 MSG  WARN
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
myReply	TokenNameIdentifier	 my Reply
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyStrings	TokenNameIdentifier	 get Reply Strings
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
x	TokenNameIdentifier	 x
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
x	TokenNameIdentifier	 x
<	TokenNameLESS	
myReply	TokenNameIdentifier	 my Reply
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
x	TokenNameIdentifier	 x
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
myReply	TokenNameIdentifier	 my Reply
[	TokenNameLBRACKET	
x	TokenNameIdentifier	 x
]	TokenNameRBRACKET	
.	TokenNameDOT	
indexOf	TokenNameIdentifier	 index Of
(	TokenNameLPAREN	
"200"	TokenNameStringLiteral	200
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
myReply	TokenNameIdentifier	 my Reply
[	TokenNameLBRACKET	
x	TokenNameIdentifier	 x
]	TokenNameRBRACKET	
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_WARN	TokenNameIdentifier	 MSG  WARN
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Sends a single file to the remote host. <code>filename</code> may * contain a relative path specification. When this is the case, <code>sendFile</code> * will attempt to create any necessary parent directories before sending * the file. The file will then be sent using the entire relative path * spec - no attempt is made to change directories. It is anticipated that * this may eventually cause problems with some FTP servers, but it * simplifies the coding. * @param ftp ftp client * @param dir base directory of the file to be sent (local) * @param filename relative path of the file to be send * locally relative to dir * remotely relative to the remotedir attribute * @throws IOException in unknown circumstances * @throws BuildException in unknown circumstances */	TokenNameCOMMENT_JAVADOC	 Sends a single file to the remote host. <code>filename</code> may contain a relative path specification. When this is the case, <code>sendFile</code> will attempt to create any necessary parent directories before sending the file. The file will then be sent using the entire relative path spec - no attempt is made to change directories. It is anticipated that this may eventually cause problems with some FTP servers, but it simplifies the coding. @param ftp ftp client @param dir base directory of the file to be sent (local) @param filename relative path of the file to be send locally relative to dir remotely relative to the remotedir attribute @throws IOException in unknown circumstances @throws BuildException in unknown circumstances 
protected	TokenNameprotected	
void	TokenNamevoid	
sendFile	TokenNameIdentifier	 send File
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
InputStream	TokenNameIdentifier	 Input Stream
instream	TokenNameIdentifier	 instream
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
// XXX - why not simply new File(dir, filename)? 	TokenNameCOMMENT_LINE	XXX - why not simply new File(dir, filename)? 
File	TokenNameIdentifier	 File
file	TokenNameIdentifier	 file
=	TokenNameEQUAL	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getProject	TokenNameIdentifier	 get Project
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
.	TokenNameDOT	
getPath	TokenNameIdentifier	 get Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isNewer	TokenNameIdentifier	 is Newer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
isUpToDate	TokenNameIdentifier	 is Up To Date
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
file	TokenNameIdentifier	 file
,	TokenNameCOMMA	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isVerbose	TokenNameIdentifier	 is Verbose
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"transferring "	TokenNameStringLiteral	transferring 
+	TokenNamePLUS	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
instream	TokenNameIdentifier	 instream
=	TokenNameEQUAL	
new	TokenNamenew	
BufferedInputStream	TokenNameIdentifier	 Buffered Input Stream
(	TokenNameLPAREN	
new	TokenNamenew	
FileInputStream	TokenNameIdentifier	 File Input Stream
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
createParents	TokenNameIdentifier	 create Parents
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
storeFile	TokenNameIdentifier	 store File
(	TokenNameLPAREN	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
,	TokenNameCOMMA	
instream	TokenNameIdentifier	 instream
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
boolean	TokenNameboolean	
success	TokenNameIdentifier	 success
=	TokenNameEQUAL	
FTPReply	TokenNameIdentifier	 FTP Reply
.	TokenNameDOT	
isPositiveCompletion	TokenNameIdentifier	 is Positive Completion
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyCode	TokenNameIdentifier	 get Reply Code
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
success	TokenNameIdentifier	 success
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
s	TokenNameIdentifier	 s
=	TokenNameEQUAL	
"could not put file: "	TokenNameStringLiteral	could not put file: 
+	TokenNamePLUS	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyString	TokenNameIdentifier	 get Reply String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isSkipFailedTransfers	TokenNameIdentifier	 is Skip Failed Transfers
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_WARN	TokenNameIdentifier	 MSG  WARN
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
skipped	TokenNameIdentifier	 skipped
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
// see if we should issue a chmod command 	TokenNameCOMMENT_LINE	see if we should issue a chmod command 
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getChmod	TokenNameIdentifier	 get Chmod
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
doSiteCommand	TokenNameIdentifier	 do Site Command
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
"chmod "	TokenNameStringLiteral	chmod 
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getChmod	TokenNameIdentifier	 get Chmod
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" "	TokenNameStringLiteral	 
+	TokenNamePLUS	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"File "	TokenNameStringLiteral	File 
+	TokenNamePLUS	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" copied to "	TokenNameStringLiteral	 copied to 
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getServer	TokenNameIdentifier	 get Server
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
transferred	TokenNameIdentifier	 transferred
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
instream	TokenNameIdentifier	 instream
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
instream	TokenNameIdentifier	 instream
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ex	TokenNameIdentifier	 ex
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// ignore it 	TokenNameCOMMENT_LINE	ignore it 
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Delete a file from the remote host. * @param ftp ftp client * @param filename file to delete * @throws IOException in unknown circumstances * @throws BuildException if skipFailedTransfers is set to false * and the deletion could not be done */	TokenNameCOMMENT_JAVADOC	 Delete a file from the remote host. @param ftp ftp client @param filename file to delete @throws IOException in unknown circumstances @throws BuildException if skipFailedTransfers is set to false and the deletion could not be done 
protected	TokenNameprotected	
void	TokenNamevoid	
delFile	TokenNameIdentifier	 del File
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isVerbose	TokenNameIdentifier	 is Verbose
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"deleting "	TokenNameStringLiteral	deleting 
+	TokenNamePLUS	
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
deleteFile	TokenNameIdentifier	 delete File
(	TokenNameLPAREN	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
s	TokenNameIdentifier	 s
=	TokenNameEQUAL	
"could not delete file: "	TokenNameStringLiteral	could not delete file: 
+	TokenNamePLUS	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyString	TokenNameIdentifier	 get Reply String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isSkipFailedTransfers	TokenNameIdentifier	 is Skip Failed Transfers
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_WARN	TokenNameIdentifier	 MSG  WARN
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
skipped	TokenNameIdentifier	 skipped
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"File "	TokenNameStringLiteral	File 
+	TokenNamePLUS	
filename	TokenNameIdentifier	 filename
+	TokenNamePLUS	
" deleted from "	TokenNameStringLiteral	 deleted from 
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getServer	TokenNameIdentifier	 get Server
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
transferred	TokenNameIdentifier	 transferred
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Delete a directory, if empty, from the remote host. * @param ftp ftp client * @param dirname directory to delete * @throws IOException in unknown circumstances * @throws BuildException if skipFailedTransfers is set to false * and the deletion could not be done */	TokenNameCOMMENT_JAVADOC	 Delete a directory, if empty, from the remote host. @param ftp ftp client @param dirname directory to delete @throws IOException in unknown circumstances @throws BuildException if skipFailedTransfers is set to false and the deletion could not be done 
protected	TokenNameprotected	
void	TokenNamevoid	
rmDir	TokenNameIdentifier	 rm Dir
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
dirname	TokenNameIdentifier	 dirname
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isVerbose	TokenNameIdentifier	 is Verbose
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"removing "	TokenNameStringLiteral	removing 
+	TokenNamePLUS	
dirname	TokenNameIdentifier	 dirname
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
removeDirectory	TokenNameIdentifier	 remove Directory
(	TokenNameLPAREN	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
dirname	TokenNameIdentifier	 dirname
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
s	TokenNameIdentifier	 s
=	TokenNameEQUAL	
"could not remove directory: "	TokenNameStringLiteral	could not remove directory: 
+	TokenNamePLUS	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyString	TokenNameIdentifier	 get Reply String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isSkipFailedTransfers	TokenNameIdentifier	 is Skip Failed Transfers
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_WARN	TokenNameIdentifier	 MSG  WARN
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
skipped	TokenNameIdentifier	 skipped
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Directory "	TokenNameStringLiteral	Directory 
+	TokenNamePLUS	
dirname	TokenNameIdentifier	 dirname
+	TokenNamePLUS	
" removed from "	TokenNameStringLiteral	 removed from 
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getServer	TokenNameIdentifier	 get Server
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
transferred	TokenNameIdentifier	 transferred
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Retrieve a single file from the remote host. <code>filename</code> may * contain a relative path specification. <p> * * The file will then be retreived using the entire relative path spec - * no attempt is made to change directories. It is anticipated that this * may eventually cause problems with some FTP servers, but it simplifies * the coding.</p> * @param ftp the ftp client * @param dir local base directory to which the file should go back * @param filename relative path of the file based upon the ftp remote directory * and/or the local base directory (dir) * @throws IOException in unknown circumstances * @throws BuildException if skipFailedTransfers is false * and the file cannot be retrieved. */	TokenNameCOMMENT_JAVADOC	 Retrieve a single file from the remote host. <code>filename</code> may contain a relative path specification. <p> * The file will then be retreived using the entire relative path spec - no attempt is made to change directories. It is anticipated that this may eventually cause problems with some FTP servers, but it simplifies the coding.</p> @param ftp the ftp client @param dir local base directory to which the file should go back @param filename relative path of the file based upon the ftp remote directory and/or the local base directory (dir) @throws IOException in unknown circumstances @throws BuildException if skipFailedTransfers is false and the file cannot be retrieved. 
protected	TokenNameprotected	
void	TokenNamevoid	
getFile	TokenNameIdentifier	 get File
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
OutputStream	TokenNameIdentifier	 Output Stream
outstream	TokenNameIdentifier	 outstream
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
file	TokenNameIdentifier	 file
=	TokenNameEQUAL	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getProject	TokenNameIdentifier	 get Project
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
.	TokenNameDOT	
getPath	TokenNameIdentifier	 get Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isNewer	TokenNameIdentifier	 is Newer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
isUpToDate	TokenNameIdentifier	 is Up To Date
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
file	TokenNameIdentifier	 file
,	TokenNameCOMMA	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isVerbose	TokenNameIdentifier	 is Verbose
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"transferring "	TokenNameStringLiteral	transferring 
+	TokenNamePLUS	
filename	TokenNameIdentifier	 filename
+	TokenNamePLUS	
" to "	TokenNameStringLiteral	 to 
+	TokenNamePLUS	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
File	TokenNameIdentifier	 File
pdir	TokenNameIdentifier	 pdir
=	TokenNameEQUAL	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getParentFile	TokenNameIdentifier	 get Parent File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
pdir	TokenNameIdentifier	 pdir
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
pdir	TokenNameIdentifier	 pdir
.	TokenNameDOT	
mkdirs	TokenNameIdentifier	 mkdirs
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
outstream	TokenNameIdentifier	 outstream
=	TokenNameEQUAL	
new	TokenNamenew	
BufferedOutputStream	TokenNameIdentifier	 Buffered Output Stream
(	TokenNameLPAREN	
new	TokenNamenew	
FileOutputStream	TokenNameIdentifier	 File Output Stream
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
retrieveFile	TokenNameIdentifier	 retrieve File
(	TokenNameLPAREN	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
,	TokenNameCOMMA	
outstream	TokenNameIdentifier	 outstream
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
FTPReply	TokenNameIdentifier	 FTP Reply
.	TokenNameDOT	
isPositiveCompletion	TokenNameIdentifier	 is Positive Completion
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyCode	TokenNameIdentifier	 get Reply Code
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
s	TokenNameIdentifier	 s
=	TokenNameEQUAL	
"could not get file: "	TokenNameStringLiteral	could not get file: 
+	TokenNamePLUS	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyString	TokenNameIdentifier	 get Reply String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isSkipFailedTransfers	TokenNameIdentifier	 is Skip Failed Transfers
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_WARN	TokenNameIdentifier	 MSG  WARN
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
skipped	TokenNameIdentifier	 skipped
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"File "	TokenNameStringLiteral	File 
+	TokenNamePLUS	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" copied from "	TokenNameStringLiteral	 copied from 
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getServer	TokenNameIdentifier	 get Server
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
transferred	TokenNameIdentifier	 transferred
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isPreserveLastModified	TokenNameIdentifier	 is Preserve Last Modified
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
outstream	TokenNameIdentifier	 outstream
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
outstream	TokenNameIdentifier	 outstream
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
remote	TokenNameIdentifier	 remote
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
listFiles	TokenNameIdentifier	 list Files
(	TokenNameLPAREN	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
remote	TokenNameIdentifier	 remote
.	TokenNameDOT	
length	TokenNameIdentifier	 length
>	TokenNameGREATER	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
FILE_UTILS	TokenNameIdentifier	 FILE  UTILS
.	TokenNameDOT	
setFileLastModified	TokenNameIdentifier	 set File Last Modified
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
,	TokenNameCOMMA	
remote	TokenNameIdentifier	 remote
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
.	TokenNameDOT	
getTimestamp	TokenNameIdentifier	 get Timestamp
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getTime	TokenNameIdentifier	 get Time
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getTime	TokenNameIdentifier	 get Time
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
outstream	TokenNameIdentifier	 outstream
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
outstream	TokenNameIdentifier	 outstream
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ex	TokenNameIdentifier	 ex
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// ignore it 	TokenNameCOMMENT_LINE	ignore it 
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * List information about a single file from the remote host. <code>filename</code> * may contain a relative path specification. <p> * * The file listing will then be retrieved using the entire relative path * spec - no attempt is made to change directories. It is anticipated that * this may eventually cause problems with some FTP servers, but it * simplifies the coding.</p> * @param ftp ftp client * @param bw buffered writer * @param filename the directory one wants to list * @throws IOException in unknown circumstances * @throws BuildException in unknown circumstances */	TokenNameCOMMENT_JAVADOC	 List information about a single file from the remote host. <code>filename</code> may contain a relative path specification. <p> * The file listing will then be retrieved using the entire relative path spec - no attempt is made to change directories. It is anticipated that this may eventually cause problems with some FTP servers, but it simplifies the coding.</p> @param ftp ftp client @param bw buffered writer @param filename the directory one wants to list @throws IOException in unknown circumstances @throws BuildException in unknown circumstances 
protected	TokenNameprotected	
void	TokenNamevoid	
listFile	TokenNameIdentifier	 list File
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
BufferedWriter	TokenNameIdentifier	 Buffered Writer
bw	TokenNameIdentifier	 bw
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isVerbose	TokenNameIdentifier	 is Verbose
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"listing "	TokenNameStringLiteral	listing 
+	TokenNamePLUS	
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
FTPFile	TokenNameIdentifier	 FTP File
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
ftpfiles	TokenNameIdentifier	 ftpfiles
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
listFiles	TokenNameIdentifier	 list Files
(	TokenNameLPAREN	
resolveFile	TokenNameIdentifier	 resolve File
(	TokenNameLPAREN	
filename	TokenNameIdentifier	 filename
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
ftpfiles	TokenNameIdentifier	 ftpfiles
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
ftpfiles	TokenNameIdentifier	 ftpfiles
.	TokenNameDOT	
length	TokenNameIdentifier	 length
>	TokenNameGREATER	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
bw	TokenNameIdentifier	 bw
.	TokenNameDOT	
write	TokenNameIdentifier	 write
(	TokenNameLPAREN	
ftpfiles	TokenNameIdentifier	 ftpfiles
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
bw	TokenNameIdentifier	 bw
.	TokenNameDOT	
newLine	TokenNameIdentifier	 new Line
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
transferred	TokenNameIdentifier	 transferred
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Create the specified directory on the remote host. * * @param ftp The FTP client connection * @param dir The directory to create (format must be correct for host * type) * @throws IOException in unknown circumstances * @throws BuildException if ignoreNoncriticalErrors has not been set to true * and a directory could not be created, for instance because it was * already existing. Precisely, the codes 521, 550 and 553 will trigger * a BuildException */	TokenNameCOMMENT_JAVADOC	 Create the specified directory on the remote host. * @param ftp The FTP client connection @param dir The directory to create (format must be correct for host type) @throws IOException in unknown circumstances @throws BuildException if ignoreNoncriticalErrors has not been set to true and a directory could not be created, for instance because it was already existing. Precisely, the codes 521, 550 and 553 will trigger a BuildException 
protected	TokenNameprotected	
void	TokenNamevoid	
makeRemoteDir	TokenNameIdentifier	 make Remote Dir
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
dir	TokenNameIdentifier	 dir
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
workingDirectory	TokenNameIdentifier	 working Directory
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
printWorkingDirectory	TokenNameIdentifier	 print Working Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isVerbose	TokenNameIdentifier	 is Verbose
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
.	TokenNameDOT	
indexOf	TokenNameIdentifier	 index Of
(	TokenNameLPAREN	
"/"	TokenNameStringLiteral	/
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
||	TokenNameOR_OR	
workingDirectory	TokenNameIdentifier	 working Directory
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Creating directory: "	TokenNameStringLiteral	Creating directory: 
+	TokenNamePLUS	
dir	TokenNameIdentifier	 dir
+	TokenNamePLUS	
" in /"	TokenNameStringLiteral	 in /
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Creating directory: "	TokenNameStringLiteral	Creating directory: 
+	TokenNamePLUS	
dir	TokenNameIdentifier	 dir
+	TokenNamePLUS	
" in "	TokenNameStringLiteral	 in 
+	TokenNamePLUS	
workingDirectory	TokenNameIdentifier	 working Directory
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
.	TokenNameDOT	
indexOf	TokenNameIdentifier	 index Of
(	TokenNameLPAREN	
"/"	TokenNameStringLiteral	/
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
"/"	TokenNameStringLiteral	/
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
String	TokenNameIdentifier	 String
subdir	TokenNameIdentifier	 subdir
=	TokenNameEQUAL	
""	TokenNameStringLiteral	 
;	TokenNameSEMICOLON	
StringTokenizer	TokenNameIdentifier	 String Tokenizer
st	TokenNameIdentifier	 st
=	TokenNameEQUAL	
new	TokenNamenew	
StringTokenizer	TokenNameIdentifier	 String Tokenizer
(	TokenNameLPAREN	
dir	TokenNameIdentifier	 dir
,	TokenNameCOMMA	
"/"	TokenNameStringLiteral	/
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
st	TokenNameIdentifier	 st
.	TokenNameDOT	
hasMoreTokens	TokenNameIdentifier	 has More Tokens
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
subdir	TokenNameIdentifier	 subdir
=	TokenNameEQUAL	
st	TokenNameIdentifier	 st
.	TokenNameDOT	
nextToken	TokenNameIdentifier	 next Token
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Checking "	TokenNameStringLiteral	Checking 
+	TokenNamePLUS	
subdir	TokenNameIdentifier	 subdir
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_DEBUG	TokenNameIdentifier	 MSG  DEBUG
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
subdir	TokenNameIdentifier	 subdir
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
makeDirectory	TokenNameIdentifier	 make Directory
(	TokenNameLPAREN	
subdir	TokenNameIdentifier	 subdir
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// codes 521, 550 and 553 can be produced by FTP Servers 	TokenNameCOMMENT_LINE	codes 521, 550 and 553 can be produced by FTP Servers 
// to indicate that an attempt to create a directory has 	TokenNameCOMMENT_LINE	to indicate that an attempt to create a directory has 
// failed because the directory already exists. 	TokenNameCOMMENT_LINE	failed because the directory already exists. 
int	TokenNameint	
rc	TokenNameIdentifier	 rc
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyCode	TokenNameIdentifier	 get Reply Code
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isIgnoreNoncriticalErrors	TokenNameIdentifier	 is Ignore Noncritical Errors
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
(	TokenNameLPAREN	
rc	TokenNameIdentifier	 rc
==	TokenNameEQUAL_EQUAL	
CODE_550	TokenNameIdentifier	 CODE 550
||	TokenNameOR_OR	
rc	TokenNameIdentifier	 rc
==	TokenNameEQUAL_EQUAL	
CODE_553	TokenNameIdentifier	 CODE 553
||	TokenNameOR_OR	
rc	TokenNameIdentifier	 rc
==	TokenNameEQUAL_EQUAL	
CODE_521	TokenNameIdentifier	 CODE 521
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not create directory: "	TokenNameStringLiteral	could not create directory: 
+	TokenNamePLUS	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyString	TokenNameIdentifier	 get Reply String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isVerbose	TokenNameIdentifier	 is Verbose
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Directory already exists"	TokenNameStringLiteral	Directory already exists
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isVerbose	TokenNameIdentifier	 is Verbose
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Directory created OK"	TokenNameStringLiteral	Directory created OK
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
subdir	TokenNameIdentifier	 subdir
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
workingDirectory	TokenNameIdentifier	 working Directory
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
workingDirectory	TokenNameIdentifier	 working Directory
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * look at the response for a failed mkdir action, decide whether * it matters or not. If it does, we throw an exception * @param ftp current ftp connection * @throws BuildException if this is an error to signal */	TokenNameCOMMENT_JAVADOC	 look at the response for a failed mkdir action, decide whether it matters or not. If it does, we throw an exception @param ftp current ftp connection @throws BuildException if this is an error to signal 
private	TokenNameprivate	
void	TokenNamevoid	
handleMkDirFailure	TokenNameIdentifier	 handle Mk Dir Failure
(	TokenNameLPAREN	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
int	TokenNameint	
rc	TokenNameIdentifier	 rc
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyCode	TokenNameIdentifier	 get Reply Code
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isIgnoreNoncriticalErrors	TokenNameIdentifier	 is Ignore Noncritical Errors
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
(	TokenNameLPAREN	
rc	TokenNameIdentifier	 rc
==	TokenNameEQUAL_EQUAL	
CODE_550	TokenNameIdentifier	 CODE 550
||	TokenNameOR_OR	
rc	TokenNameIdentifier	 rc
==	TokenNameEQUAL_EQUAL	
CODE_553	TokenNameIdentifier	 CODE 553
||	TokenNameOR_OR	
rc	TokenNameIdentifier	 rc
==	TokenNameEQUAL_EQUAL	
CODE_521	TokenNameIdentifier	 CODE 521
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not create directory: "	TokenNameStringLiteral	could not create directory: 
+	TokenNamePLUS	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyString	TokenNameIdentifier	 get Reply String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
public	TokenNamepublic	
void	TokenNamevoid	
doFTP	TokenNameIdentifier	 do FTP
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
FTPClient	TokenNameIdentifier	 FTP Client
ftp	TokenNameIdentifier	 ftp
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Opening FTP connection to "	TokenNameStringLiteral	Opening FTP connection to 
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getServer	TokenNameIdentifier	 get Server
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ftp	TokenNameIdentifier	 ftp
=	TokenNameEQUAL	
new	TokenNamenew	
FTPClient	TokenNameIdentifier	 FTP Client
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isConfigurationSet	TokenNameIdentifier	 is Configuration Set
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ftp	TokenNameIdentifier	 ftp
=	TokenNameEQUAL	
FTPConfigurator	TokenNameIdentifier	 FTP Configurator
.	TokenNameDOT	
configure	TokenNameIdentifier	 configure
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
setRemoteVerificationEnabled	TokenNameIdentifier	 set Remote Verification Enabled
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getEnableRemoteVerification	TokenNameIdentifier	 get Enable Remote Verification
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
connect	TokenNameIdentifier	 connect
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getServer	TokenNameIdentifier	 get Server
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getPort	TokenNameIdentifier	 get Port
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
FTPReply	TokenNameIdentifier	 FTP Reply
.	TokenNameDOT	
isPositiveCompletion	TokenNameIdentifier	 is Positive Completion
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyCode	TokenNameIdentifier	 get Reply Code
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"FTP connection failed: "	TokenNameStringLiteral	FTP connection failed: 
+	TokenNamePLUS	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyString	TokenNameIdentifier	 get Reply String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"connected"	TokenNameStringLiteral	connected
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"logging in to FTP server"	TokenNameStringLiteral	logging in to FTP server
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAccount	TokenNameIdentifier	 get Account
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
!	TokenNameNOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
login	TokenNameIdentifier	 login
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getUserid	TokenNameIdentifier	 get Userid
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getPassword	TokenNameIdentifier	 get Password
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAccount	TokenNameIdentifier	 get Account
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
||	TokenNameOR_OR	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAccount	TokenNameIdentifier	 get Account
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
!	TokenNameNOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
login	TokenNameIdentifier	 login
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getUserid	TokenNameIdentifier	 get Userid
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getPassword	TokenNameIdentifier	 get Password
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"Could not login to FTP server"	TokenNameStringLiteral	Could not login to FTP server
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"login succeeded"	TokenNameStringLiteral	login succeeded
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isBinary	TokenNameIdentifier	 is Binary
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
setFileType	TokenNameIdentifier	 set File Type
(	TokenNameLPAREN	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
commons	TokenNameIdentifier	 commons
.	TokenNameDOT	
net	TokenNameIdentifier	 net
.	TokenNameDOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
FTP	TokenNameIdentifier	 FTP
.	TokenNameDOT	
BINARY_FILE_TYPE	TokenNameIdentifier	 BINARY  FILE  TYPE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
FTPReply	TokenNameIdentifier	 FTP Reply
.	TokenNameDOT	
isPositiveCompletion	TokenNameIdentifier	 is Positive Completion
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyCode	TokenNameIdentifier	 get Reply Code
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not set transfer type: "	TokenNameStringLiteral	could not set transfer type: 
+	TokenNamePLUS	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyString	TokenNameIdentifier	 get Reply String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
setFileType	TokenNameIdentifier	 set File Type
(	TokenNameLPAREN	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
commons	TokenNameIdentifier	 commons
.	TokenNameDOT	
net	TokenNameIdentifier	 net
.	TokenNameDOT	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
FTP	TokenNameIdentifier	 FTP
.	TokenNameDOT	
ASCII_FILE_TYPE	TokenNameIdentifier	 ASCII  FILE  TYPE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
FTPReply	TokenNameIdentifier	 FTP Reply
.	TokenNameDOT	
isPositiveCompletion	TokenNameIdentifier	 is Positive Completion
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyCode	TokenNameIdentifier	 get Reply Code
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not set transfer type: "	TokenNameStringLiteral	could not set transfer type: 
+	TokenNamePLUS	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyString	TokenNameIdentifier	 get Reply String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isPassive	TokenNameIdentifier	 is Passive
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"entering passive mode"	TokenNameStringLiteral	entering passive mode
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
enterLocalPassiveMode	TokenNameIdentifier	 enter Local Passive Mode
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
FTPReply	TokenNameIdentifier	 FTP Reply
.	TokenNameDOT	
isPositiveCompletion	TokenNameIdentifier	 is Positive Completion
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyCode	TokenNameIdentifier	 get Reply Code
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not enter into passive "	TokenNameStringLiteral	could not enter into passive 
+	TokenNamePLUS	
"mode: "	TokenNameStringLiteral	mode: 
+	TokenNamePLUS	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyString	TokenNameIdentifier	 get Reply String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// If an initial command was configured then send it. 	TokenNameCOMMENT_LINE	If an initial command was configured then send it. 
// Some FTP servers offer different modes of operation, 	TokenNameCOMMENT_LINE	Some FTP servers offer different modes of operation, 
// E.G. switching between a UNIX file system mode and 	TokenNameCOMMENT_LINE	E.G. switching between a UNIX file system mode and 
// a legacy file system. 	TokenNameCOMMENT_LINE	a legacy file system. 
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getInitialSiteCommand	TokenNameIdentifier	 get Initial Site Command
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
RetryHandler	TokenNameIdentifier	 Retry Handler
h	TokenNameIdentifier	 h
=	TokenNameEQUAL	
new	TokenNamenew	
RetryHandler	TokenNameIdentifier	 Retry Handler
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getRetriesAllowed	TokenNameIdentifier	 get Retries Allowed
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
FTPClient	TokenNameIdentifier	 FTP Client
lftp	TokenNameIdentifier	 lftp
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
;	TokenNameSEMICOLON	
executeRetryable	TokenNameIdentifier	 execute Retryable
(	TokenNameLPAREN	
h	TokenNameIdentifier	 h
,	TokenNameCOMMA	
new	TokenNamenew	
Retryable	TokenNameIdentifier	 Retryable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
public	TokenNamepublic	
void	TokenNamevoid	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
doSiteCommand	TokenNameIdentifier	 do Site Command
(	TokenNameLPAREN	
lftp	TokenNameIdentifier	 lftp
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getInitialSiteCommand	TokenNameIdentifier	 get Initial Site Command
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
,	TokenNameCOMMA	
"initial site command: "	TokenNameStringLiteral	initial site command: 
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getInitialSiteCommand	TokenNameIdentifier	 get Initial Site Command
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// For a unix ftp server you can set the default mask for all files 	TokenNameCOMMENT_LINE	For a unix ftp server you can set the default mask for all files 
// created. 	TokenNameCOMMENT_LINE	created. 
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getUmask	TokenNameIdentifier	 get Umask
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
RetryHandler	TokenNameIdentifier	 Retry Handler
h	TokenNameIdentifier	 h
=	TokenNameEQUAL	
new	TokenNamenew	
RetryHandler	TokenNameIdentifier	 Retry Handler
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getRetriesAllowed	TokenNameIdentifier	 get Retries Allowed
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
FTPClient	TokenNameIdentifier	 FTP Client
lftp	TokenNameIdentifier	 lftp
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
;	TokenNameSEMICOLON	
executeRetryable	TokenNameIdentifier	 execute Retryable
(	TokenNameLPAREN	
h	TokenNameIdentifier	 h
,	TokenNameCOMMA	
new	TokenNamenew	
Retryable	TokenNameIdentifier	 Retryable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
public	TokenNamepublic	
void	TokenNamevoid	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
doSiteCommand	TokenNameIdentifier	 do Site Command
(	TokenNameLPAREN	
lftp	TokenNameIdentifier	 lftp
,	TokenNameCOMMA	
"umask "	TokenNameStringLiteral	umask 
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getUmask	TokenNameIdentifier	 get Umask
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
,	TokenNameCOMMA	
"umask "	TokenNameStringLiteral	umask 
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getUmask	TokenNameIdentifier	 get Umask
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// If the action is MK_DIR, then the specified remote 	TokenNameCOMMENT_LINE	If the action is MK_DIR, then the specified remote 
// directory is the directory to create. 	TokenNameCOMMENT_LINE	directory is the directory to create. 
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
MK_DIR	TokenNameIdentifier	 MK  DIR
)	TokenNameRPAREN	
{	TokenNameLBRACE	
RetryHandler	TokenNameIdentifier	 Retry Handler
h	TokenNameIdentifier	 h
=	TokenNameEQUAL	
new	TokenNamenew	
RetryHandler	TokenNameIdentifier	 Retry Handler
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getRetriesAllowed	TokenNameIdentifier	 get Retries Allowed
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
FTPClient	TokenNameIdentifier	 FTP Client
lftp	TokenNameIdentifier	 lftp
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
;	TokenNameSEMICOLON	
executeRetryable	TokenNameIdentifier	 execute Retryable
(	TokenNameLPAREN	
h	TokenNameIdentifier	 h
,	TokenNameCOMMA	
new	TokenNamenew	
Retryable	TokenNameIdentifier	 Retryable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
public	TokenNamepublic	
void	TokenNamevoid	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
makeRemoteDir	TokenNameIdentifier	 make Remote Dir
(	TokenNameLPAREN	
lftp	TokenNameIdentifier	 lftp
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getRemotedir	TokenNameIdentifier	 get Remotedir
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getRemotedir	TokenNameIdentifier	 get Remotedir
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
SITE_CMD	TokenNameIdentifier	 SITE  CMD
)	TokenNameRPAREN	
{	TokenNameLBRACE	
RetryHandler	TokenNameIdentifier	 Retry Handler
h	TokenNameIdentifier	 h
=	TokenNameEQUAL	
new	TokenNamenew	
RetryHandler	TokenNameIdentifier	 Retry Handler
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getRetriesAllowed	TokenNameIdentifier	 get Retries Allowed
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
FTPClient	TokenNameIdentifier	 FTP Client
lftp	TokenNameIdentifier	 lftp
=	TokenNameEQUAL	
ftp	TokenNameIdentifier	 ftp
;	TokenNameSEMICOLON	
executeRetryable	TokenNameIdentifier	 execute Retryable
(	TokenNameLPAREN	
h	TokenNameIdentifier	 h
,	TokenNameCOMMA	
new	TokenNamenew	
Retryable	TokenNameIdentifier	 Retryable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
public	TokenNamepublic	
void	TokenNamevoid	
execute	TokenNameIdentifier	 execute
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
doSiteCommand	TokenNameIdentifier	 do Site Command
(	TokenNameLPAREN	
lftp	TokenNameIdentifier	 lftp
,	TokenNameCOMMA	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getSiteCommand	TokenNameIdentifier	 get Site Command
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
,	TokenNameCOMMA	
"Site Command: "	TokenNameStringLiteral	Site Command: 
+	TokenNamePLUS	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getSiteCommand	TokenNameIdentifier	 get Site Command
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getRemotedir	TokenNameIdentifier	 get Remotedir
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"changing the remote directory"	TokenNameStringLiteral	changing the remote directory
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
changeWorkingDirectory	TokenNameIdentifier	 change Working Directory
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getRemotedir	TokenNameIdentifier	 get Remotedir
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
FTPReply	TokenNameIdentifier	 FTP Reply
.	TokenNameDOT	
isPositiveCompletion	TokenNameIdentifier	 is Positive Completion
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyCode	TokenNameIdentifier	 get Reply Code
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not change remote "	TokenNameStringLiteral	could not change remote 
+	TokenNamePLUS	
"directory: "	TokenNameStringLiteral	directory: 
+	TokenNamePLUS	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
getReplyString	TokenNameIdentifier	 get Reply String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isNewer	TokenNameIdentifier	 is Newer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
isTimeDiffAuto	TokenNameIdentifier	 is Time Diff Auto
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// in this case we want to find how much time span there is between local 	TokenNameCOMMENT_LINE	in this case we want to find how much time span there is between local 
// and remote 	TokenNameCOMMENT_LINE	and remote 
task	TokenNameIdentifier	 task
.	TokenNameDOT	
setTimeDiffMillis	TokenNameIdentifier	 set Time Diff Millis
(	TokenNameLPAREN	
getTimeDiff	TokenNameIdentifier	 get Time Diff
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
ACTION_STRS	TokenNameIdentifier	 ACTION  STRS
[	TokenNameLBRACKET	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
]	TokenNameRBRACKET	
+	TokenNamePLUS	
" "	TokenNameStringLiteral	 
+	TokenNamePLUS	
FTPTask	TokenNameIdentifier	 FTP Task
.	TokenNameDOT	
ACTION_TARGET_STRS	TokenNameIdentifier	 ACTION  TARGET  STRS
[	TokenNameLBRACKET	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getAction	TokenNameIdentifier	 get Action
(	TokenNameLPAREN	
)	TokenNameRPAREN	
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
transferFiles	TokenNameIdentifier	 transfer Files
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ex	TokenNameIdentifier	 ex
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"error during FTP transfer: "	TokenNameStringLiteral	error during FTP transfer: 
+	TokenNamePLUS	
ex	TokenNameIdentifier	 ex
,	TokenNameCOMMA	
ex	TokenNameIdentifier	 ex
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
ftp	TokenNameIdentifier	 ftp
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
isConnected	TokenNameIdentifier	 is Connected
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"disconnecting"	TokenNameStringLiteral	disconnecting
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
logout	TokenNameIdentifier	 logout
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ftp	TokenNameIdentifier	 ftp
.	TokenNameDOT	
disconnect	TokenNameIdentifier	 disconnect
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ex	TokenNameIdentifier	 ex
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// ignore it 	TokenNameCOMMENT_LINE	ignore it 
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
