/* Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
renderable	TokenNameIdentifier	 renderable
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
RenderingHints	TokenNameIdentifier	 Rendering Hints
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
Shape	TokenNameIdentifier	 Shape
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
geom	TokenNameIdentifier	 geom
.	TokenNameDOT	
AffineTransform	TokenNameIdentifier	 Affine Transform
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
geom	TokenNameIdentifier	 geom
.	TokenNameDOT	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
RenderedImage	TokenNameIdentifier	 Rendered Image
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
renderable	TokenNameIdentifier	 renderable
.	TokenNameDOT	
RenderContext	TokenNameIdentifier	 Render Context
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
List	TokenNameIdentifier	 List
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
ARGBChannel	TokenNameIdentifier	 ARGB Channel
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
GraphicsUtil	TokenNameIdentifier	 Graphics Util
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
rendered	TokenNameIdentifier	 rendered
.	TokenNameDOT	
AffineRed	TokenNameIdentifier	 Affine Red
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
rendered	TokenNameIdentifier	 rendered
.	TokenNameDOT	
CachableRed	TokenNameIdentifier	 Cachable Red
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
rendered	TokenNameIdentifier	 rendered
.	TokenNameDOT	
DisplacementMapRed	TokenNameIdentifier	 Displacement Map Red
;	TokenNameSEMICOLON	
/** * Implements a DisplacementMap operation, which takes pixel values from * another image to spatially displace the input image * * @author <a href="mailto:sheng.pei@eng.sun.com">Sheng Pei</a> * @version $Id: DisplacementMapRable8Bit.java 479564 2006-11-27 09:56:57Z dvholten $ */	TokenNameCOMMENT_JAVADOC	 Implements a DisplacementMap operation, which takes pixel values from another image to spatially displace the input image * @author <a href="mailto:sheng.pei@eng.sun.com">Sheng Pei</a> @version $Id: DisplacementMapRable8Bit.java 479564 2006-11-27 09:56:57Z dvholten $ 
public	TokenNamepublic	
class	TokenNameclass	
DisplacementMapRable8Bit	TokenNameIdentifier	 Displacement Map Rable8 Bit
extends	TokenNameextends	
AbstractColorInterpolationRable	TokenNameIdentifier	 Abstract Color Interpolation Rable
implements	TokenNameimplements	
DisplacementMapRable	TokenNameIdentifier	 Displacement Map Rable
{	TokenNameLBRACE	
/** * Displacement scale factor */	TokenNameCOMMENT_JAVADOC	 Displacement scale factor 
private	TokenNameprivate	
double	TokenNamedouble	
scale	TokenNameIdentifier	 scale
;	TokenNameSEMICOLON	
/** * Defines which channel in the second source is used * to displace along the x axis */	TokenNameCOMMENT_JAVADOC	 Defines which channel in the second source is used to displace along the x axis 
private	TokenNameprivate	
ARGBChannel	TokenNameIdentifier	 ARGB Channel
xChannelSelector	TokenNameIdentifier	 x Channel Selector
;	TokenNameSEMICOLON	
/** * Defines which channel in the second source is used * to displace along the y axis. */	TokenNameCOMMENT_JAVADOC	 Defines which channel in the second source is used to displace along the y axis. 
private	TokenNameprivate	
ARGBChannel	TokenNameIdentifier	 ARGB Channel
yChannelSelector	TokenNameIdentifier	 y Channel Selector
;	TokenNameSEMICOLON	
public	TokenNamepublic	
DisplacementMapRable8Bit	TokenNameIdentifier	 Displacement Map Rable8 Bit
(	TokenNameLPAREN	
List	TokenNameIdentifier	 List
sources	TokenNameIdentifier	 sources
,	TokenNameCOMMA	
double	TokenNamedouble	
scale	TokenNameIdentifier	 scale
,	TokenNameCOMMA	
ARGBChannel	TokenNameIdentifier	 ARGB Channel
xChannelSelector	TokenNameIdentifier	 x Channel Selector
,	TokenNameCOMMA	
ARGBChannel	TokenNameIdentifier	 ARGB Channel
yChannelSelector	TokenNameIdentifier	 y Channel Selector
)	TokenNameRPAREN	
{	TokenNameLBRACE	
setSources	TokenNameIdentifier	 set Sources
(	TokenNameLPAREN	
sources	TokenNameIdentifier	 sources
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
setScale	TokenNameIdentifier	 set Scale
(	TokenNameLPAREN	
scale	TokenNameIdentifier	 scale
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
setXChannelSelector	TokenNameIdentifier	 set X Channel Selector
(	TokenNameLPAREN	
xChannelSelector	TokenNameIdentifier	 x Channel Selector
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
setYChannelSelector	TokenNameIdentifier	 set Y Channel Selector
(	TokenNameLPAREN	
yChannelSelector	TokenNameIdentifier	 y Channel Selector
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
Filter	TokenNameIdentifier	 Filter
)	TokenNameRPAREN	
(	TokenNameLPAREN	
getSources	TokenNameIdentifier	 get Sources
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * The displacement scale factor * @param scale can be any number. */	TokenNameCOMMENT_JAVADOC	 The displacement scale factor @param scale can be any number. 
public	TokenNamepublic	
void	TokenNamevoid	
setScale	TokenNameIdentifier	 set Scale
(	TokenNameLPAREN	
double	TokenNamedouble	
scale	TokenNameIdentifier	 scale
)	TokenNameRPAREN	
{	TokenNameLBRACE	
touch	TokenNameIdentifier	 touch
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
scale	TokenNameIdentifier	 scale
=	TokenNameEQUAL	
scale	TokenNameIdentifier	 scale
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the displacement scale factor */	TokenNameCOMMENT_JAVADOC	 Returns the displacement scale factor 
public	TokenNamepublic	
double	TokenNamedouble	
getScale	TokenNameIdentifier	 get Scale
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
scale	TokenNameIdentifier	 scale
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Sets this filter sources. */	TokenNameCOMMENT_JAVADOC	 Sets this filter sources. 
public	TokenNamepublic	
void	TokenNamevoid	
setSources	TokenNameIdentifier	 set Sources
(	TokenNameLPAREN	
List	TokenNameIdentifier	 List
sources	TokenNameIdentifier	 sources
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
sources	TokenNameIdentifier	 sources
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
2	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
init	TokenNameIdentifier	 init
(	TokenNameLPAREN	
sources	TokenNameIdentifier	 sources
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Select which component values will be used * for displacement along the X axis * @param xChannelSelector value is among R, * G, B and A. */	TokenNameCOMMENT_JAVADOC	 Select which component values will be used for displacement along the X axis @param xChannelSelector value is among R, G, B and A. 
public	TokenNamepublic	
void	TokenNamevoid	
setXChannelSelector	TokenNameIdentifier	 set X Channel Selector
(	TokenNameLPAREN	
ARGBChannel	TokenNameIdentifier	 ARGB Channel
xChannelSelector	TokenNameIdentifier	 x Channel Selector
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
xChannelSelector	TokenNameIdentifier	 x Channel Selector
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
touch	TokenNameIdentifier	 touch
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
xChannelSelector	TokenNameIdentifier	 x Channel Selector
=	TokenNameEQUAL	
xChannelSelector	TokenNameIdentifier	 x Channel Selector
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the xChannelSelector */	TokenNameCOMMENT_JAVADOC	 Returns the xChannelSelector 
public	TokenNamepublic	
ARGBChannel	TokenNameIdentifier	 ARGB Channel
getXChannelSelector	TokenNameIdentifier	 get X Channel Selector
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
xChannelSelector	TokenNameIdentifier	 x Channel Selector
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Select which component values will be used * for displacement along the Y axis * @param yChannelSelector value is among R, * G, B and A. */	TokenNameCOMMENT_JAVADOC	 Select which component values will be used for displacement along the Y axis @param yChannelSelector value is among R, G, B and A. 
public	TokenNamepublic	
void	TokenNamevoid	
setYChannelSelector	TokenNameIdentifier	 set Y Channel Selector
(	TokenNameLPAREN	
ARGBChannel	TokenNameIdentifier	 ARGB Channel
yChannelSelector	TokenNameIdentifier	 y Channel Selector
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
yChannelSelector	TokenNameIdentifier	 y Channel Selector
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
touch	TokenNameIdentifier	 touch
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
yChannelSelector	TokenNameIdentifier	 y Channel Selector
=	TokenNameEQUAL	
yChannelSelector	TokenNameIdentifier	 y Channel Selector
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the yChannelSelector */	TokenNameCOMMENT_JAVADOC	 Returns the yChannelSelector 
public	TokenNamepublic	
ARGBChannel	TokenNameIdentifier	 ARGB Channel
getYChannelSelector	TokenNameIdentifier	 get Y Channel Selector
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
yChannelSelector	TokenNameIdentifier	 y Channel Selector
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
RenderedImage	TokenNameIdentifier	 Rendered Image
createRendering	TokenNameIdentifier	 create Rendering
(	TokenNameLPAREN	
RenderContext	TokenNameIdentifier	 Render Context
rc	TokenNameIdentifier	 rc
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// The source image to be displaced. 	TokenNameCOMMENT_LINE	The source image to be displaced. 
Filter	TokenNameIdentifier	 Filter
displaced	TokenNameIdentifier	 displaced
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Filter	TokenNameIdentifier	 Filter
)	TokenNameRPAREN	
getSources	TokenNameIdentifier	 get Sources
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// The map giving the displacement. 	TokenNameCOMMENT_LINE	The map giving the displacement. 
Filter	TokenNameIdentifier	 Filter
map	TokenNameIdentifier	 map
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Filter	TokenNameIdentifier	 Filter
)	TokenNameRPAREN	
getSources	TokenNameIdentifier	 get Sources
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
RenderingHints	TokenNameIdentifier	 Rendering Hints
rh	TokenNameIdentifier	 rh
=	TokenNameEQUAL	
rc	TokenNameIdentifier	 rc
.	TokenNameDOT	
getRenderingHints	TokenNameIdentifier	 get Rendering Hints
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
rh	TokenNameIdentifier	 rh
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
rh	TokenNameIdentifier	 rh
=	TokenNameEQUAL	
new	TokenNamenew	
RenderingHints	TokenNameIdentifier	 Rendering Hints
(	TokenNameLPAREN	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// update the current affine transform 	TokenNameCOMMENT_LINE	update the current affine transform 
AffineTransform	TokenNameIdentifier	 Affine Transform
at	TokenNameIdentifier	 at
=	TokenNameEQUAL	
rc	TokenNameIdentifier	 rc
.	TokenNameDOT	
getTransform	TokenNameIdentifier	 get Transform
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// This splits out the scale from the rest of 	TokenNameCOMMENT_LINE	This splits out the scale from the rest of 
// the transformation. 	TokenNameCOMMENT_LINE	the transformation. 
double	TokenNamedouble	
sx	TokenNameIdentifier	 sx
=	TokenNameEQUAL	
at	TokenNameIdentifier	 at
.	TokenNameDOT	
getScaleX	TokenNameIdentifier	 get Scale X
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
double	TokenNamedouble	
sy	TokenNameIdentifier	 sy
=	TokenNameEQUAL	
at	TokenNameIdentifier	 at
.	TokenNameDOT	
getScaleY	TokenNameIdentifier	 get Scale Y
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
double	TokenNamedouble	
shx	TokenNameIdentifier	 shx
=	TokenNameEQUAL	
at	TokenNameIdentifier	 at
.	TokenNameDOT	
getShearX	TokenNameIdentifier	 get Shear X
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
double	TokenNamedouble	
shy	TokenNameIdentifier	 shy
=	TokenNameEQUAL	
at	TokenNameIdentifier	 at
.	TokenNameDOT	
getShearY	TokenNameIdentifier	 get Shear Y
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
double	TokenNamedouble	
tx	TokenNameIdentifier	 tx
=	TokenNameEQUAL	
at	TokenNameIdentifier	 at
.	TokenNameDOT	
getTranslateX	TokenNameIdentifier	 get Translate X
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
double	TokenNamedouble	
ty	TokenNameIdentifier	 ty
=	TokenNameEQUAL	
at	TokenNameIdentifier	 at
.	TokenNameDOT	
getTranslateY	TokenNameIdentifier	 get Translate Y
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// The Scale is the "hypotonose" of the matrix vectors. 	TokenNameCOMMENT_LINE	The Scale is the "hypotonose" of the matrix vectors. 
double	TokenNamedouble	
atScaleX	TokenNameIdentifier	 at Scale X
=	TokenNameEQUAL	
Math	TokenNameIdentifier	 Math
.	TokenNameDOT	
sqrt	TokenNameIdentifier	 sqrt
(	TokenNameLPAREN	
sx	TokenNameIdentifier	 sx
*	TokenNameMULTIPLY	
sx	TokenNameIdentifier	 sx
+	TokenNamePLUS	
shy	TokenNameIdentifier	 shy
*	TokenNameMULTIPLY	
shy	TokenNameIdentifier	 shy
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
double	TokenNamedouble	
atScaleY	TokenNameIdentifier	 at Scale Y
=	TokenNameEQUAL	
Math	TokenNameIdentifier	 Math
.	TokenNameDOT	
sqrt	TokenNameIdentifier	 sqrt
(	TokenNameLPAREN	
sy	TokenNameIdentifier	 sy
*	TokenNameMULTIPLY	
sy	TokenNameIdentifier	 sy
+	TokenNamePLUS	
shx	TokenNameIdentifier	 shx
*	TokenNameMULTIPLY	
shx	TokenNameIdentifier	 shx
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Now, apply the filter 	TokenNameCOMMENT_LINE	Now, apply the filter 
// 	TokenNameCOMMENT_LINE	 
float	TokenNamefloat	
scaleX	TokenNameIdentifier	 scale X
=	TokenNameEQUAL	
(	TokenNameLPAREN	
float	TokenNamefloat	
)	TokenNameRPAREN	
(	TokenNameLPAREN	
scale	TokenNameIdentifier	 scale
*	TokenNameMULTIPLY	
atScaleX	TokenNameIdentifier	 at Scale X
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
float	TokenNamefloat	
scaleY	TokenNameIdentifier	 scale Y
=	TokenNameEQUAL	
(	TokenNameLPAREN	
float	TokenNamefloat	
)	TokenNameRPAREN	
(	TokenNameLPAREN	
scale	TokenNameIdentifier	 scale
*	TokenNameMULTIPLY	
atScaleY	TokenNameIdentifier	 at Scale Y
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// If both scale factors are zero then we don't 	TokenNameCOMMENT_LINE	If both scale factors are zero then we don't 
// affect the source image so just return it... 	TokenNameCOMMENT_LINE	affect the source image so just return it... 
if	TokenNameif	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
scaleX	TokenNameIdentifier	 scale X
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
(	TokenNameLPAREN	
scaleY	TokenNameIdentifier	 scale Y
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
return	TokenNamereturn	
displaced	TokenNameIdentifier	 displaced
.	TokenNameDOT	
createRendering	TokenNameIdentifier	 create Rendering
(	TokenNameLPAREN	
rc	TokenNameIdentifier	 rc
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// if ((scaleX > 255) || (scaleY > 255)) { 	TokenNameCOMMENT_LINE	if ((scaleX > 255) || (scaleY > 255)) { 
// System.out.println("Scales: [" + scaleX + ", " + scaleY + "]"); 	TokenNameCOMMENT_LINE	System.out.println("Scales: [" + scaleX + ", " + scaleY + "]"); 
// } 	TokenNameCOMMENT_LINE	} 
AffineTransform	TokenNameIdentifier	 Affine Transform
srcAt	TokenNameIdentifier	 src At
=	TokenNameEQUAL	
AffineTransform	TokenNameIdentifier	 Affine Transform
.	TokenNameDOT	
getScaleInstance	TokenNameIdentifier	 get Scale Instance
(	TokenNameLPAREN	
atScaleX	TokenNameIdentifier	 at Scale X
,	TokenNameCOMMA	
atScaleY	TokenNameIdentifier	 at Scale Y
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Shape	TokenNameIdentifier	 Shape
origAOI	TokenNameIdentifier	 orig AOI
=	TokenNameEQUAL	
rc	TokenNameIdentifier	 rc
.	TokenNameDOT	
getAreaOfInterest	TokenNameIdentifier	 get Area Of Interest
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
origAOI	TokenNameIdentifier	 orig AOI
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
origAOI	TokenNameIdentifier	 orig AOI
=	TokenNameEQUAL	
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
aoiR	TokenNameIdentifier	 aoi R
=	TokenNameEQUAL	
origAOI	TokenNameIdentifier	 orig AOI
.	TokenNameDOT	
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
RenderContext	TokenNameIdentifier	 Render Context
srcRc	TokenNameIdentifier	 src Rc
=	TokenNameEQUAL	
new	TokenNamenew	
RenderContext	TokenNameIdentifier	 Render Context
(	TokenNameLPAREN	
srcAt	TokenNameIdentifier	 src At
,	TokenNameCOMMA	
aoiR	TokenNameIdentifier	 aoi R
,	TokenNameCOMMA	
rh	TokenNameIdentifier	 rh
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
RenderedImage	TokenNameIdentifier	 Rendered Image
mapRed	TokenNameIdentifier	 map Red
=	TokenNameEQUAL	
map	TokenNameIdentifier	 map
.	TokenNameDOT	
createRendering	TokenNameIdentifier	 create Rendering
(	TokenNameLPAREN	
srcRc	TokenNameIdentifier	 src Rc
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
mapRed	TokenNameIdentifier	 map Red
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
// Grow the area of interest in user space. to account for 	TokenNameCOMMENT_LINE	Grow the area of interest in user space. to account for 
// the max surround needs of displacement map. 	TokenNameCOMMENT_LINE	the max surround needs of displacement map. 
aoiR	TokenNameIdentifier	 aoi R
=	TokenNameEQUAL	
new	TokenNamenew	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
.	TokenNameDOT	
Double	TokenNameIdentifier	 Double
(	TokenNameLPAREN	
aoiR	TokenNameIdentifier	 aoi R
.	TokenNameDOT	
getX	TokenNameIdentifier	 get X
(	TokenNameLPAREN	
)	TokenNameRPAREN	
-	TokenNameMINUS	
scale	TokenNameIdentifier	 scale
/	TokenNameDIVIDE	
2	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
aoiR	TokenNameIdentifier	 aoi R
.	TokenNameDOT	
getY	TokenNameIdentifier	 get Y
(	TokenNameLPAREN	
)	TokenNameRPAREN	
-	TokenNameMINUS	
scale	TokenNameIdentifier	 scale
/	TokenNameDIVIDE	
2	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
aoiR	TokenNameIdentifier	 aoi R
.	TokenNameDOT	
getWidth	TokenNameIdentifier	 get Width
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
scale	TokenNameIdentifier	 scale
,	TokenNameCOMMA	
aoiR	TokenNameIdentifier	 aoi R
.	TokenNameDOT	
getHeight	TokenNameIdentifier	 get Height
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
scale	TokenNameIdentifier	 scale
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
displacedRect	TokenNameIdentifier	 displaced Rect
=	TokenNameEQUAL	
displaced	TokenNameIdentifier	 displaced
.	TokenNameDOT	
getBounds2D	TokenNameIdentifier	 get Bounds2 D
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
aoiR	TokenNameIdentifier	 aoi R
.	TokenNameDOT	
intersects	TokenNameIdentifier	 intersects
(	TokenNameLPAREN	
displacedRect	TokenNameIdentifier	 displaced Rect
)	TokenNameRPAREN	
)	TokenNameRPAREN	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
aoiR	TokenNameIdentifier	 aoi R
=	TokenNameEQUAL	
aoiR	TokenNameIdentifier	 aoi R
.	TokenNameDOT	
createIntersection	TokenNameIdentifier	 create Intersection
(	TokenNameLPAREN	
displacedRect	TokenNameIdentifier	 displaced Rect
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
srcRc	TokenNameIdentifier	 src Rc
=	TokenNameEQUAL	
new	TokenNamenew	
RenderContext	TokenNameIdentifier	 Render Context
(	TokenNameLPAREN	
srcAt	TokenNameIdentifier	 src At
,	TokenNameCOMMA	
aoiR	TokenNameIdentifier	 aoi R
,	TokenNameCOMMA	
rh	TokenNameIdentifier	 rh
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
RenderedImage	TokenNameIdentifier	 Rendered Image
displacedRed	TokenNameIdentifier	 displaced Red
=	TokenNameEQUAL	
displaced	TokenNameIdentifier	 displaced
.	TokenNameDOT	
createRendering	TokenNameIdentifier	 create Rendering
(	TokenNameLPAREN	
srcRc	TokenNameIdentifier	 src Rc
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
displacedRed	TokenNameIdentifier	 displaced Red
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
mapRed	TokenNameIdentifier	 map Red
=	TokenNameEQUAL	
convertSourceCS	TokenNameIdentifier	 convert Source CS
(	TokenNameLPAREN	
mapRed	TokenNameIdentifier	 map Red
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// 	TokenNameCOMMENT_LINE	 
// Build a Displacement Map Red from the two sources 	TokenNameCOMMENT_LINE	Build a Displacement Map Red from the two sources 
// 	TokenNameCOMMENT_LINE	 
CachableRed	TokenNameIdentifier	 Cachable Red
cr	TokenNameIdentifier	 cr
=	TokenNameEQUAL	
new	TokenNamenew	
DisplacementMapRed	TokenNameIdentifier	 Displacement Map Red
(	TokenNameLPAREN	
GraphicsUtil	TokenNameIdentifier	 Graphics Util
.	TokenNameDOT	
wrap	TokenNameIdentifier	 wrap
(	TokenNameLPAREN	
displacedRed	TokenNameIdentifier	 displaced Red
)	TokenNameRPAREN	
,	TokenNameCOMMA	
GraphicsUtil	TokenNameIdentifier	 Graphics Util
.	TokenNameDOT	
wrap	TokenNameIdentifier	 wrap
(	TokenNameLPAREN	
mapRed	TokenNameIdentifier	 map Red
)	TokenNameRPAREN	
,	TokenNameCOMMA	
xChannelSelector	TokenNameIdentifier	 x Channel Selector
,	TokenNameCOMMA	
yChannelSelector	TokenNameIdentifier	 y Channel Selector
,	TokenNameCOMMA	
scaleX	TokenNameIdentifier	 scale X
,	TokenNameCOMMA	
scaleY	TokenNameIdentifier	 scale Y
,	TokenNameCOMMA	
rh	TokenNameIdentifier	 rh
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// 	TokenNameCOMMENT_LINE	 
// Apply the non scaling part of the transform now, 	TokenNameCOMMENT_LINE	Apply the non scaling part of the transform now, 
// if different from identity. 	TokenNameCOMMENT_LINE	if different from identity. 
// 	TokenNameCOMMENT_LINE	 
AffineTransform	TokenNameIdentifier	 Affine Transform
resAt	TokenNameIdentifier	 res At
=	TokenNameEQUAL	
new	TokenNamenew	
AffineTransform	TokenNameIdentifier	 Affine Transform
(	TokenNameLPAREN	
sx	TokenNameIdentifier	 sx
/	TokenNameDIVIDE	
atScaleX	TokenNameIdentifier	 at Scale X
,	TokenNameCOMMA	
shy	TokenNameIdentifier	 shy
/	TokenNameDIVIDE	
atScaleX	TokenNameIdentifier	 at Scale X
,	TokenNameCOMMA	
shx	TokenNameIdentifier	 shx
/	TokenNameDIVIDE	
atScaleY	TokenNameIdentifier	 at Scale Y
,	TokenNameCOMMA	
sy	TokenNameIdentifier	 sy
/	TokenNameDIVIDE	
atScaleY	TokenNameIdentifier	 at Scale Y
,	TokenNameCOMMA	
tx	TokenNameIdentifier	 tx
,	TokenNameCOMMA	
ty	TokenNameIdentifier	 ty
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
resAt	TokenNameIdentifier	 res At
.	TokenNameDOT	
isIdentity	TokenNameIdentifier	 is Identity
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
cr	TokenNameIdentifier	 cr
=	TokenNameEQUAL	
new	TokenNamenew	
AffineRed	TokenNameIdentifier	 Affine Red
(	TokenNameLPAREN	
cr	TokenNameIdentifier	 cr
,	TokenNameCOMMA	
resAt	TokenNameIdentifier	 res At
,	TokenNameCOMMA	
rh	TokenNameIdentifier	 rh
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
cr	TokenNameIdentifier	 cr
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the region of input data is is required to generate * outputRgn. * @param srcIndex The source to do the dependency calculation for. * @param outputRgn The region of output you are interested in * generating dependencies for. The is given in the user coordiate * system for this node. * @return The region of input required. This is in the user * coordinate system for the source indicated by srcIndex. */	TokenNameCOMMENT_JAVADOC	 Returns the region of input data is is required to generate outputRgn. @param srcIndex The source to do the dependency calculation for. @param outputRgn The region of output you are interested in generating dependencies for. The is given in the user coordiate system for this node. @return The region of input required. This is in the user coordinate system for the source indicated by srcIndex. 
public	TokenNamepublic	
Shape	TokenNameIdentifier	 Shape
getDependencyRegion	TokenNameIdentifier	 get Dependency Region
(	TokenNameLPAREN	
int	TokenNameint	
srcIndex	TokenNameIdentifier	 src Index
,	TokenNameCOMMA	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
outputRgn	TokenNameIdentifier	 output Rgn
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// NOTE: This needs to grow the region!!! 	TokenNameCOMMENT_LINE	NOTE: This needs to grow the region!!! 
// Morphology actually needs a larger area of input than 	TokenNameCOMMENT_LINE	Morphology actually needs a larger area of input than 
// it outputs. 	TokenNameCOMMENT_LINE	it outputs. 
return	TokenNamereturn	
super	TokenNamesuper	
.	TokenNameDOT	
getDependencyRegion	TokenNameIdentifier	 get Dependency Region
(	TokenNameLPAREN	
srcIndex	TokenNameIdentifier	 src Index
,	TokenNameCOMMA	
outputRgn	TokenNameIdentifier	 output Rgn
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * This calculates the region of output that is affected by a change * in a region of input. * @param srcIndex The input that inputRgn reflects changes in. * @param inputRgn the region of input that has changed, used to * calculate the returned shape. This is given in the user * coordinate system of the source indicated by srcIndex. * @return The region of output that would be invalid given * a change to inputRgn of the source selected by srcIndex. * this is in the user coordinate system of this node. */	TokenNameCOMMENT_JAVADOC	 This calculates the region of output that is affected by a change in a region of input. @param srcIndex The input that inputRgn reflects changes in. @param inputRgn the region of input that has changed, used to calculate the returned shape. This is given in the user coordinate system of the source indicated by srcIndex. @return The region of output that would be invalid given a change to inputRgn of the source selected by srcIndex. this is in the user coordinate system of this node. 
public	TokenNamepublic	
Shape	TokenNameIdentifier	 Shape
getDirtyRegion	TokenNameIdentifier	 get Dirty Region
(	TokenNameLPAREN	
int	TokenNameint	
srcIndex	TokenNameIdentifier	 src Index
,	TokenNameCOMMA	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
inputRgn	TokenNameIdentifier	 input Rgn
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// NOTE: This needs to grow the region!!! 	TokenNameCOMMENT_LINE	NOTE: This needs to grow the region!!! 
// Changes in the input region affect a larger area of 	TokenNameCOMMENT_LINE	Changes in the input region affect a larger area of 
// output than the input. 	TokenNameCOMMENT_LINE	output than the input. 
return	TokenNamereturn	
super	TokenNamesuper	
.	TokenNameDOT	
getDirtyRegion	TokenNameIdentifier	 get Dirty Region
(	TokenNameLPAREN	
srcIndex	TokenNameIdentifier	 src Index
,	TokenNameCOMMA	
inputRgn	TokenNameIdentifier	 input Rgn
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
