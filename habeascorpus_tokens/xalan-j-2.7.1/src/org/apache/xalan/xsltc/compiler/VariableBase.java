/* * Licensed to the Apache Software Foundation (ASF) under one * or more contributor license agreements. See the NOTICE file * distributed with this work for additional information * regarding copyright ownership. The ASF licenses this file * to you under the Apache License, Version 2.0 (the "License"); * you may not use this file except in compliance with the License. * You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to you under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
/* * $Id: VariableBase.java 528589 2007-04-13 18:50:56Z zongaro $ */	TokenNameCOMMENT_BLOCK	 $Id: VariableBase.java 528589 2007-04-13 18:50:56Z zongaro $ 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Vector	TokenNameIdentifier	 Vector
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
ConstantPoolGen	TokenNameIdentifier	 Constant Pool Gen
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
Instruction	TokenNameIdentifier	 Instruction
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
InstructionList	TokenNameIdentifier	 Instruction List
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
INVOKESPECIAL	TokenNameIdentifier	 INVOKESPECIAL
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
LocalVariableGen	TokenNameIdentifier	 Local Variable Gen
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
NEW	TokenNameIdentifier	 NEW
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
PUSH	TokenNameIdentifier	 PUSH
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ClassGenerator	TokenNameIdentifier	 Class Generator
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ErrorMsg	TokenNameIdentifier	 Error Msg
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
MethodGenerator	TokenNameIdentifier	 Method Generator
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
NodeSetType	TokenNameIdentifier	 Node Set Type
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Type	TokenNameIdentifier	 Type
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Util	TokenNameIdentifier	 Util
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
utils	TokenNameIdentifier	 utils
.	TokenNameDOT	
XML11Char	TokenNameIdentifier	 XM L11 Char
;	TokenNameSEMICOLON	
/** * @author Jacek Ambroziak * @author Santiago Pericas-Geertsen * @author Morten Jorgensen * @author Erwin Bolwidt <ejb@klomp.org> * @author John Howard <JohnH@schemasoft.com> */	TokenNameCOMMENT_JAVADOC	 @author Jacek Ambroziak @author Santiago Pericas-Geertsen @author Morten Jorgensen @author Erwin Bolwidt <ejb@klomp.org> @author John Howard <JohnH@schemasoft.com> 
class	TokenNameclass	
VariableBase	TokenNameIdentifier	 Variable Base
extends	TokenNameextends	
TopLevelElement	TokenNameIdentifier	 Top Level Element
{	TokenNameLBRACE	
protected	TokenNameprotected	
QName	TokenNameIdentifier	 Q Name
_name	TokenNameIdentifier	 name
;	TokenNameSEMICOLON	
// The name of the variable. 	TokenNameCOMMENT_LINE	The name of the variable. 
protected	TokenNameprotected	
String	TokenNameIdentifier	 String
_escapedName	TokenNameIdentifier	 escaped Name
;	TokenNameSEMICOLON	
// The escaped qname of the variable. 	TokenNameCOMMENT_LINE	The escaped qname of the variable. 
protected	TokenNameprotected	
Type	TokenNameIdentifier	 Type
_type	TokenNameIdentifier	 type
;	TokenNameSEMICOLON	
// The type of this variable. 	TokenNameCOMMENT_LINE	The type of this variable. 
protected	TokenNameprotected	
boolean	TokenNameboolean	
_isLocal	TokenNameIdentifier	 is Local
;	TokenNameSEMICOLON	
// True if the variable is local. 	TokenNameCOMMENT_LINE	True if the variable is local. 
protected	TokenNameprotected	
LocalVariableGen	TokenNameIdentifier	 Local Variable Gen
_local	TokenNameIdentifier	 local
;	TokenNameSEMICOLON	
// Reference to JVM variable 	TokenNameCOMMENT_LINE	Reference to JVM variable 
protected	TokenNameprotected	
Instruction	TokenNameIdentifier	 Instruction
_loadInstruction	TokenNameIdentifier	 load Instruction
;	TokenNameSEMICOLON	
// Instruction to load JVM variable 	TokenNameCOMMENT_LINE	Instruction to load JVM variable 
protected	TokenNameprotected	
Instruction	TokenNameIdentifier	 Instruction
_storeInstruction	TokenNameIdentifier	 store Instruction
;	TokenNameSEMICOLON	
// Instruction to load JVM variable 	TokenNameCOMMENT_LINE	Instruction to load JVM variable 
protected	TokenNameprotected	
Expression	TokenNameIdentifier	 Expression
_select	TokenNameIdentifier	 select
;	TokenNameSEMICOLON	
// Reference to variable expression 	TokenNameCOMMENT_LINE	Reference to variable expression 
protected	TokenNameprotected	
String	TokenNameIdentifier	 String
select	TokenNameIdentifier	 select
;	TokenNameSEMICOLON	
// Textual repr. of variable expr. 	TokenNameCOMMENT_LINE	Textual repr. of variable expr. 
// References to this variable (when local) 	TokenNameCOMMENT_LINE	References to this variable (when local) 
protected	TokenNameprotected	
Vector	TokenNameIdentifier	 Vector
_refs	TokenNameIdentifier	 refs
=	TokenNameEQUAL	
new	TokenNamenew	
Vector	TokenNameIdentifier	 Vector
(	TokenNameLPAREN	
2	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Dependencies to other variables/parameters (for globals only) 	TokenNameCOMMENT_LINE	Dependencies to other variables/parameters (for globals only) 
protected	TokenNameprotected	
Vector	TokenNameIdentifier	 Vector
_dependencies	TokenNameIdentifier	 dependencies
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
// Used to make sure parameter field is not added twice 	TokenNameCOMMENT_LINE	Used to make sure parameter field is not added twice 
protected	TokenNameprotected	
boolean	TokenNameboolean	
_ignore	TokenNameIdentifier	 ignore
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
/** * Disable this variable/parameter */	TokenNameCOMMENT_JAVADOC	 Disable this variable/parameter 
public	TokenNamepublic	
void	TokenNamevoid	
disable	TokenNameIdentifier	 disable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_ignore	TokenNameIdentifier	 ignore
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Add a reference to this variable. Called by VariableRef when an * expression contains a reference to this variable. */	TokenNameCOMMENT_JAVADOC	 Add a reference to this variable. Called by VariableRef when an expression contains a reference to this variable. 
public	TokenNamepublic	
void	TokenNamevoid	
addReference	TokenNameIdentifier	 add Reference
(	TokenNameLPAREN	
VariableRefBase	TokenNameIdentifier	 Variable Ref Base
vref	TokenNameIdentifier	 vref
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_refs	TokenNameIdentifier	 refs
.	TokenNameDOT	
addElement	TokenNameIdentifier	 add Element
(	TokenNameLPAREN	
vref	TokenNameIdentifier	 vref
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Map this variable to a register */	TokenNameCOMMENT_JAVADOC	 Map this variable to a register 
public	TokenNamepublic	
void	TokenNamevoid	
mapRegister	TokenNameIdentifier	 map Register
(	TokenNameLPAREN	
MethodGenerator	TokenNameIdentifier	 Method Generator
methodGen	TokenNameIdentifier	 method Gen
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
_local	TokenNameIdentifier	 local
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
name	TokenNameIdentifier	 name
=	TokenNameEQUAL	
getEscapedName	TokenNameIdentifier	 get Escaped Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// TODO: namespace ? 	TokenNameCOMMENT_LINE	TODO: namespace ? 
final	TokenNamefinal	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
Type	TokenNameIdentifier	 Type
varType	TokenNameIdentifier	 var Type
=	TokenNameEQUAL	
_type	TokenNameIdentifier	 type
.	TokenNameDOT	
toJCType	TokenNameIdentifier	 to JC Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
_local	TokenNameIdentifier	 local
=	TokenNameEQUAL	
methodGen	TokenNameIdentifier	 method Gen
.	TokenNameDOT	
addLocalVariable2	TokenNameIdentifier	 add Local Variable2
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
,	TokenNameCOMMA	
varType	TokenNameIdentifier	 var Type
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Remove the mapping of this variable to a register. * Called when we leave the AST scope of the variable's declaration */	TokenNameCOMMENT_JAVADOC	 Remove the mapping of this variable to a register. Called when we leave the AST scope of the variable's declaration 
public	TokenNamepublic	
void	TokenNamevoid	
unmapRegister	TokenNameIdentifier	 unmap Register
(	TokenNameLPAREN	
MethodGenerator	TokenNameIdentifier	 Method Generator
methodGen	TokenNameIdentifier	 method Gen
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
_local	TokenNameIdentifier	 local
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_local	TokenNameIdentifier	 local
.	TokenNameDOT	
setEnd	TokenNameIdentifier	 set End
(	TokenNameLPAREN	
methodGen	TokenNameIdentifier	 method Gen
.	TokenNameDOT	
getInstructionList	TokenNameIdentifier	 get Instruction List
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getEnd	TokenNameIdentifier	 get End
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
methodGen	TokenNameIdentifier	 method Gen
.	TokenNameDOT	
removeLocalVariable	TokenNameIdentifier	 remove Local Variable
(	TokenNameLPAREN	
_local	TokenNameIdentifier	 local
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
_refs	TokenNameIdentifier	 refs
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
_local	TokenNameIdentifier	 local
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Returns an instruction for loading the value of this variable onto * the JVM stack. */	TokenNameCOMMENT_JAVADOC	 Returns an instruction for loading the value of this variable onto the JVM stack. 
public	TokenNamepublic	
Instruction	TokenNameIdentifier	 Instruction
loadInstruction	TokenNameIdentifier	 load Instruction
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
final	TokenNamefinal	
Instruction	TokenNameIdentifier	 Instruction
instr	TokenNameIdentifier	 instr
=	TokenNameEQUAL	
_loadInstruction	TokenNameIdentifier	 load Instruction
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
_loadInstruction	TokenNameIdentifier	 load Instruction
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_loadInstruction	TokenNameIdentifier	 load Instruction
=	TokenNameEQUAL	
_type	TokenNameIdentifier	 type
.	TokenNameDOT	
LOAD	TokenNameIdentifier	 LOAD
(	TokenNameLPAREN	
_local	TokenNameIdentifier	 local
.	TokenNameDOT	
getIndex	TokenNameIdentifier	 get Index
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
_loadInstruction	TokenNameIdentifier	 load Instruction
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns an instruction for storing a value from the JVM stack * into this variable. */	TokenNameCOMMENT_JAVADOC	 Returns an instruction for storing a value from the JVM stack into this variable. 
public	TokenNamepublic	
Instruction	TokenNameIdentifier	 Instruction
storeInstruction	TokenNameIdentifier	 store Instruction
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
final	TokenNamefinal	
Instruction	TokenNameIdentifier	 Instruction
instr	TokenNameIdentifier	 instr
=	TokenNameEQUAL	
_storeInstruction	TokenNameIdentifier	 store Instruction
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
_storeInstruction	TokenNameIdentifier	 store Instruction
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_storeInstruction	TokenNameIdentifier	 store Instruction
=	TokenNameEQUAL	
_type	TokenNameIdentifier	 type
.	TokenNameDOT	
STORE	TokenNameIdentifier	 STORE
(	TokenNameLPAREN	
_local	TokenNameIdentifier	 local
.	TokenNameDOT	
getIndex	TokenNameIdentifier	 get Index
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
_storeInstruction	TokenNameIdentifier	 store Instruction
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the expression from this variable's select attribute (if any) */	TokenNameCOMMENT_JAVADOC	 Returns the expression from this variable's select attribute (if any) 
public	TokenNamepublic	
Expression	TokenNameIdentifier	 Expression
getExpression	TokenNameIdentifier	 get Expression
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
(	TokenNameLPAREN	
_select	TokenNameIdentifier	 select
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Display variable as single string */	TokenNameCOMMENT_JAVADOC	 Display variable as single string 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
(	TokenNameLPAREN	
"variable("	TokenNameStringLiteral	variable(
+	TokenNamePLUS	
_name	TokenNameIdentifier	 name
+	TokenNamePLUS	
")"	TokenNameStringLiteral	)
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Display variable in a full AST dump */	TokenNameCOMMENT_JAVADOC	 Display variable in a full AST dump 
public	TokenNamepublic	
void	TokenNamevoid	
display	TokenNameIdentifier	 display
(	TokenNameLPAREN	
int	TokenNameint	
indent	TokenNameIdentifier	 indent
)	TokenNameRPAREN	
{	TokenNameLBRACE	
indent	TokenNameIdentifier	 indent
(	TokenNameLPAREN	
indent	TokenNameIdentifier	 indent
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
println	TokenNameIdentifier	 println
(	TokenNameLPAREN	
"Variable "	TokenNameStringLiteral	Variable 
+	TokenNamePLUS	
_name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
_select	TokenNameIdentifier	 select
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
indent	TokenNameIdentifier	 indent
(	TokenNameLPAREN	
indent	TokenNameIdentifier	 indent
+	TokenNamePLUS	
IndentIncrement	TokenNameIdentifier	 Indent Increment
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
println	TokenNameIdentifier	 println
(	TokenNameLPAREN	
"select "	TokenNameStringLiteral	select 
+	TokenNamePLUS	
_select	TokenNameIdentifier	 select
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
displayContents	TokenNameIdentifier	 display Contents
(	TokenNameLPAREN	
indent	TokenNameIdentifier	 indent
+	TokenNamePLUS	
IndentIncrement	TokenNameIdentifier	 Indent Increment
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the type of the variable */	TokenNameCOMMENT_JAVADOC	 Returns the type of the variable 
public	TokenNamepublic	
Type	TokenNameIdentifier	 Type
getType	TokenNameIdentifier	 get Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
_type	TokenNameIdentifier	 type
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the name of the variable or parameter as it will occur in the * compiled translet. */	TokenNameCOMMENT_JAVADOC	 Returns the name of the variable or parameter as it will occur in the compiled translet. 
public	TokenNamepublic	
QName	TokenNameIdentifier	 Q Name
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
_name	TokenNameIdentifier	 name
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the escaped qname of the variable or parameter */	TokenNameCOMMENT_JAVADOC	 Returns the escaped qname of the variable or parameter 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getEscapedName	TokenNameIdentifier	 get Escaped Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
_escapedName	TokenNameIdentifier	 escaped Name
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Set the name of the variable or paremeter. Escape all special chars. */	TokenNameCOMMENT_JAVADOC	 Set the name of the variable or paremeter. Escape all special chars. 
public	TokenNamepublic	
void	TokenNamevoid	
setName	TokenNameIdentifier	 set Name
(	TokenNameLPAREN	
QName	TokenNameIdentifier	 Q Name
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_name	TokenNameIdentifier	 name
=	TokenNameEQUAL	
name	TokenNameIdentifier	 name
;	TokenNameSEMICOLON	
_escapedName	TokenNameIdentifier	 escaped Name
=	TokenNameEQUAL	
Util	TokenNameIdentifier	 Util
.	TokenNameDOT	
escape	TokenNameIdentifier	 escape
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
.	TokenNameDOT	
getStringRep	TokenNameIdentifier	 get String Rep
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the true if the variable is local */	TokenNameCOMMENT_JAVADOC	 Returns the true if the variable is local 
public	TokenNamepublic	
boolean	TokenNameboolean	
isLocal	TokenNameIdentifier	 is Local
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
_isLocal	TokenNameIdentifier	 is Local
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Parse the contents of the <xsl:decimal-format> element. */	TokenNameCOMMENT_JAVADOC	 Parse the contents of the <xsl:decimal-format> element. 
public	TokenNamepublic	
void	TokenNamevoid	
parseContents	TokenNameIdentifier	 parse Contents
(	TokenNameLPAREN	
Parser	TokenNameIdentifier	 Parser
parser	TokenNameIdentifier	 parser
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Get the 'name attribute 	TokenNameCOMMENT_LINE	Get the 'name attribute 
String	TokenNameIdentifier	 String
name	TokenNameIdentifier	 name
=	TokenNameEQUAL	
getAttribute	TokenNameIdentifier	 get Attribute
(	TokenNameLPAREN	
"name"	TokenNameStringLiteral	name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
>	TokenNameGREATER	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
XML11Char	TokenNameIdentifier	 XM L11 Char
.	TokenNameDOT	
isXML11ValidQName	TokenNameIdentifier	 is XM L11 Valid Q Name
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ErrorMsg	TokenNameIdentifier	 Error Msg
err	TokenNameIdentifier	 err
=	TokenNameEQUAL	
new	TokenNamenew	
ErrorMsg	TokenNameIdentifier	 Error Msg
(	TokenNameLPAREN	
ErrorMsg	TokenNameIdentifier	 Error Msg
.	TokenNameDOT	
INVALID_QNAME_ERR	TokenNameIdentifier	 INVALID  QNAME  ERR
,	TokenNameCOMMA	
name	TokenNameIdentifier	 name
,	TokenNameCOMMA	
this	TokenNamethis	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
parser	TokenNameIdentifier	 parser
.	TokenNameDOT	
reportError	TokenNameIdentifier	 report Error
(	TokenNameLPAREN	
Constants	TokenNameIdentifier	 Constants
.	TokenNameDOT	
ERROR	TokenNameIdentifier	 ERROR
,	TokenNameCOMMA	
err	TokenNameIdentifier	 err
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
setName	TokenNameIdentifier	 set Name
(	TokenNameLPAREN	
parser	TokenNameIdentifier	 parser
.	TokenNameDOT	
getQNameIgnoreDefaultNs	TokenNameIdentifier	 get Q Name Ignore Default Ns
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
reportError	TokenNameIdentifier	 report Error
(	TokenNameLPAREN	
this	TokenNamethis	
,	TokenNameCOMMA	
parser	TokenNameIdentifier	 parser
,	TokenNameCOMMA	
ErrorMsg	TokenNameIdentifier	 Error Msg
.	TokenNameDOT	
REQUIRED_ATTR_ERR	TokenNameIdentifier	 REQUIRED  ATTR  ERR
,	TokenNameCOMMA	
"name"	TokenNameStringLiteral	name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Check whether variable/param of the same name is already in scope 	TokenNameCOMMENT_LINE	Check whether variable/param of the same name is already in scope 
VariableBase	TokenNameIdentifier	 Variable Base
other	TokenNameIdentifier	 other
=	TokenNameEQUAL	
parser	TokenNameIdentifier	 parser
.	TokenNameDOT	
lookupVariable	TokenNameIdentifier	 lookup Variable
(	TokenNameLPAREN	
_name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
other	TokenNameIdentifier	 other
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
(	TokenNameLPAREN	
other	TokenNameIdentifier	 other
.	TokenNameDOT	
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
reportError	TokenNameIdentifier	 report Error
(	TokenNameLPAREN	
this	TokenNamethis	
,	TokenNameCOMMA	
parser	TokenNameIdentifier	 parser
,	TokenNameCOMMA	
ErrorMsg	TokenNameIdentifier	 Error Msg
.	TokenNameDOT	
VARIABLE_REDEF_ERR	TokenNameIdentifier	 VARIABLE  REDEF  ERR
,	TokenNameCOMMA	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
select	TokenNameIdentifier	 select
=	TokenNameEQUAL	
getAttribute	TokenNameIdentifier	 get Attribute
(	TokenNameLPAREN	
"select"	TokenNameStringLiteral	select
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
select	TokenNameIdentifier	 select
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
>	TokenNameGREATER	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_select	TokenNameIdentifier	 select
=	TokenNameEQUAL	
getParser	TokenNameIdentifier	 get Parser
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
parseExpression	TokenNameIdentifier	 parse Expression
(	TokenNameLPAREN	
this	TokenNamethis	
,	TokenNameCOMMA	
"select"	TokenNameStringLiteral	select
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
_select	TokenNameIdentifier	 select
.	TokenNameDOT	
isDummy	TokenNameIdentifier	 is Dummy
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
reportError	TokenNameIdentifier	 report Error
(	TokenNameLPAREN	
this	TokenNamethis	
,	TokenNameCOMMA	
parser	TokenNameIdentifier	 parser
,	TokenNameCOMMA	
ErrorMsg	TokenNameIdentifier	 Error Msg
.	TokenNameDOT	
REQUIRED_ATTR_ERR	TokenNameIdentifier	 REQUIRED  ATTR  ERR
,	TokenNameCOMMA	
"select"	TokenNameStringLiteral	select
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// Children must be parsed first -> static scoping 	TokenNameCOMMENT_LINE	Children must be parsed first -> static scoping 
parseChildren	TokenNameIdentifier	 parse Children
(	TokenNameLPAREN	
parser	TokenNameIdentifier	 parser
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Compile the value of the variable, which is either in an expression in * a 'select' attribute, or in the variable elements body */	TokenNameCOMMENT_JAVADOC	 Compile the value of the variable, which is either in an expression in a 'select' attribute, or in the variable elements body 
public	TokenNamepublic	
void	TokenNamevoid	
translateValue	TokenNameIdentifier	 translate Value
(	TokenNameLPAREN	
ClassGenerator	TokenNameIdentifier	 Class Generator
classGen	TokenNameIdentifier	 class Gen
,	TokenNameCOMMA	
MethodGenerator	TokenNameIdentifier	 Method Generator
methodGen	TokenNameIdentifier	 method Gen
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Compile expression is 'select' attribute if present 	TokenNameCOMMENT_LINE	Compile expression is 'select' attribute if present 
if	TokenNameif	
(	TokenNameLPAREN	
_select	TokenNameIdentifier	 select
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_select	TokenNameIdentifier	 select
.	TokenNameDOT	
translate	TokenNameIdentifier	 translate
(	TokenNameLPAREN	
classGen	TokenNameIdentifier	 class Gen
,	TokenNameCOMMA	
methodGen	TokenNameIdentifier	 method Gen
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Create a CachedNodeListIterator for select expressions 	TokenNameCOMMENT_LINE	Create a CachedNodeListIterator for select expressions 
// in a variable or parameter. 	TokenNameCOMMENT_LINE	in a variable or parameter. 
if	TokenNameif	
(	TokenNameLPAREN	
_select	TokenNameIdentifier	 select
.	TokenNameDOT	
getType	TokenNameIdentifier	 get Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
instanceof	TokenNameinstanceof	
NodeSetType	TokenNameIdentifier	 Node Set Type
)	TokenNameRPAREN	
{	TokenNameLBRACE	
final	TokenNamefinal	
ConstantPoolGen	TokenNameIdentifier	 Constant Pool Gen
cpg	TokenNameIdentifier	 cpg
=	TokenNameEQUAL	
classGen	TokenNameIdentifier	 class Gen
.	TokenNameDOT	
getConstantPool	TokenNameIdentifier	 get Constant Pool
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
InstructionList	TokenNameIdentifier	 Instruction List
il	TokenNameIdentifier	 il
=	TokenNameEQUAL	
methodGen	TokenNameIdentifier	 method Gen
.	TokenNameDOT	
getInstructionList	TokenNameIdentifier	 get Instruction List
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
int	TokenNameint	
initCNI	TokenNameIdentifier	 init CNI
=	TokenNameEQUAL	
cpg	TokenNameIdentifier	 cpg
.	TokenNameDOT	
addMethodref	TokenNameIdentifier	 add Methodref
(	TokenNameLPAREN	
CACHED_NODE_LIST_ITERATOR_CLASS	TokenNameIdentifier	 CACHED  NODE  LIST  ITERATOR  CLASS
,	TokenNameCOMMA	
"<init>"	TokenNameStringLiteral	<init>
,	TokenNameCOMMA	
"("	TokenNameStringLiteral	(
+	TokenNamePLUS	
NODE_ITERATOR_SIG	TokenNameIdentifier	 NODE  ITERATOR  SIG
+	TokenNamePLUS	
")V"	TokenNameStringLiteral	)V
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
new	TokenNamenew	
NEW	TokenNameIdentifier	 NEW
(	TokenNameLPAREN	
cpg	TokenNameIdentifier	 cpg
.	TokenNameDOT	
addClass	TokenNameIdentifier	 add Class
(	TokenNameLPAREN	
CACHED_NODE_LIST_ITERATOR_CLASS	TokenNameIdentifier	 CACHED  NODE  LIST  ITERATOR  CLASS
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
DUP_X1	TokenNameIdentifier	 DUP  X1
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
SWAP	TokenNameIdentifier	 SWAP
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
new	TokenNamenew	
INVOKESPECIAL	TokenNameIdentifier	 INVOKESPECIAL
(	TokenNameLPAREN	
initCNI	TokenNameIdentifier	 init CNI
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
_select	TokenNameIdentifier	 select
.	TokenNameDOT	
startIterator	TokenNameIdentifier	 start Iterator
(	TokenNameLPAREN	
classGen	TokenNameIdentifier	 class Gen
,	TokenNameCOMMA	
methodGen	TokenNameIdentifier	 method Gen
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// If not, compile result tree from parameter body if present. 	TokenNameCOMMENT_LINE	If not, compile result tree from parameter body if present. 
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
hasContents	TokenNameIdentifier	 has Contents
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
compileResultTree	TokenNameIdentifier	 compile Result Tree
(	TokenNameLPAREN	
classGen	TokenNameIdentifier	 class Gen
,	TokenNameCOMMA	
methodGen	TokenNameIdentifier	 method Gen
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// If neither are present then store empty string in variable 	TokenNameCOMMENT_LINE	If neither are present then store empty string in variable 
else	TokenNameelse	
{	TokenNameLBRACE	
final	TokenNamefinal	
ConstantPoolGen	TokenNameIdentifier	 Constant Pool Gen
cpg	TokenNameIdentifier	 cpg
=	TokenNameEQUAL	
classGen	TokenNameIdentifier	 class Gen
.	TokenNameDOT	
getConstantPool	TokenNameIdentifier	 get Constant Pool
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
InstructionList	TokenNameIdentifier	 Instruction List
il	TokenNameIdentifier	 il
=	TokenNameEQUAL	
methodGen	TokenNameIdentifier	 method Gen
.	TokenNameDOT	
getInstructionList	TokenNameIdentifier	 get Instruction List
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
new	TokenNamenew	
PUSH	TokenNameIdentifier	 PUSH
(	TokenNameLPAREN	
cpg	TokenNameIdentifier	 cpg
,	TokenNameCOMMA	
Constants	TokenNameIdentifier	 Constants
.	TokenNameDOT	
EMPTYSTRING	TokenNameIdentifier	 EMPTYSTRING
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
