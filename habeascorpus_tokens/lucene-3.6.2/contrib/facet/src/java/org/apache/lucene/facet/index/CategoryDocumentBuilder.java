package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
index	TokenNameIdentifier	 index
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
IOException	TokenNameIdentifier	 IO Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ArrayList	TokenNameIdentifier	 Array List
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
HashMap	TokenNameIdentifier	 Hash Map
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
List	TokenNameIdentifier	 List
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Map	TokenNameIdentifier	 Map
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Map	TokenNameIdentifier	 Map
.	TokenNameDOT	
Entry	TokenNameIdentifier	 Entry
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
analysis	TokenNameIdentifier	 analysis
.	TokenNameDOT	
TokenStream	TokenNameIdentifier	 Token Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
document	TokenNameIdentifier	 document
.	TokenNameDOT	
Document	TokenNameIdentifier	 Document
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
document	TokenNameIdentifier	 document
.	TokenNameDOT	
Field	TokenNameIdentifier	 Field
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
attributes	TokenNameIdentifier	 attributes
.	TokenNameDOT	
CategoryAttribute	TokenNameIdentifier	 Category Attribute
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
attributes	TokenNameIdentifier	 attributes
.	TokenNameDOT	
CategoryAttributesIterable	TokenNameIdentifier	 Category Attributes Iterable
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
categorypolicy	TokenNameIdentifier	 categorypolicy
.	TokenNameDOT	
OrdinalPolicy	TokenNameIdentifier	 Ordinal Policy
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
categorypolicy	TokenNameIdentifier	 categorypolicy
.	TokenNameDOT	
PathPolicy	TokenNameIdentifier	 Path Policy
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
params	TokenNameIdentifier	 params
.	TokenNameDOT	
DefaultFacetIndexingParams	TokenNameIdentifier	 Default Facet Indexing Params
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
params	TokenNameIdentifier	 params
.	TokenNameDOT	
FacetIndexingParams	TokenNameIdentifier	 Facet Indexing Params
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
streaming	TokenNameIdentifier	 streaming
.	TokenNameDOT	
CategoryAttributesStream	TokenNameIdentifier	 Category Attributes Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
streaming	TokenNameIdentifier	 streaming
.	TokenNameDOT	
CategoryListTokenizer	TokenNameIdentifier	 Category List Tokenizer
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
streaming	TokenNameIdentifier	 streaming
.	TokenNameDOT	
CategoryParentsStream	TokenNameIdentifier	 Category Parents Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
streaming	TokenNameIdentifier	 streaming
.	TokenNameDOT	
CategoryTokenizer	TokenNameIdentifier	 Category Tokenizer
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
index	TokenNameIdentifier	 index
.	TokenNameDOT	
streaming	TokenNameIdentifier	 streaming
.	TokenNameDOT	
CountingListTokenizer	TokenNameIdentifier	 Counting List Tokenizer
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
taxonomy	TokenNameIdentifier	 taxonomy
.	TokenNameDOT	
CategoryPath	TokenNameIdentifier	 Category Path
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
facet	TokenNameIdentifier	 facet
.	TokenNameDOT	
taxonomy	TokenNameIdentifier	 taxonomy
.	TokenNameDOT	
TaxonomyWriter	TokenNameIdentifier	 Taxonomy Writer
;	TokenNameSEMICOLON	
/** * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the "License"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */	TokenNameCOMMENT_JAVADOC	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
/** * A utility class which allows attachment of {@link CategoryPath}s or * {@link CategoryAttribute}s to a given document using a taxonomy.<br> * Construction could be done with either a given {@link FacetIndexingParams} or * the default implementation {@link DefaultFacetIndexingParams}.<br> * A CategoryDocumentBuilder can be reused by repeatedly setting the categories * and building the document. Categories are provided either as * {@link CategoryAttribute} elements through {@link #setCategories(Iterable)}, * or as {@link CategoryPath} elements through * {@link #setCategoryPaths(Iterable)}. * <p> * Note that both {@link #setCategories(Iterable)} and * {@link #setCategoryPaths(Iterable)} return this * {@link CategoryDocumentBuilder}, allowing the following pattern: {@code new * CategoryDocumentBuilder(taxonomy, * params).setCategories(categories).build(doc)}. * * @lucene.experimental */	TokenNameCOMMENT_JAVADOC	 A utility class which allows attachment of {@link CategoryPath}s or {@link CategoryAttribute}s to a given document using a taxonomy.<br> Construction could be done with either a given {@link FacetIndexingParams} or the default implementation {@link DefaultFacetIndexingParams}.<br> A CategoryDocumentBuilder can be reused by repeatedly setting the categories and building the document. Categories are provided either as {@link CategoryAttribute} elements through {@link #setCategories(Iterable)}, or as {@link CategoryPath} elements through {@link #setCategoryPaths(Iterable)}. <p> Note that both {@link #setCategories(Iterable)} and {@link #setCategoryPaths(Iterable)} return this {@link CategoryDocumentBuilder}, allowing the following pattern: {@code new CategoryDocumentBuilder(taxonomy, params).setCategories(categories).build(doc)}. * @lucene.experimental 
public	TokenNamepublic	
class	TokenNameclass	
CategoryDocumentBuilder	TokenNameIdentifier	 Category Document Builder
{	TokenNameLBRACE	
/** * A {@link TaxonomyWriter} for adding categories and retrieving their * ordinals. */	TokenNameCOMMENT_JAVADOC	 A {@link TaxonomyWriter} for adding categories and retrieving their ordinals. 
protected	TokenNameprotected	
final	TokenNamefinal	
TaxonomyWriter	TokenNameIdentifier	 Taxonomy Writer
taxonomyWriter	TokenNameIdentifier	 taxonomy Writer
;	TokenNameSEMICOLON	
/** * Parameters to be used when indexing categories. */	TokenNameCOMMENT_JAVADOC	 Parameters to be used when indexing categories. 
protected	TokenNameprotected	
final	TokenNamefinal	
FacetIndexingParams	TokenNameIdentifier	 Facet Indexing Params
indexingParams	TokenNameIdentifier	 indexing Params
;	TokenNameSEMICOLON	
/** * A list of fields which is filled at ancestors' construction and used * during {@link CategoryDocumentBuilder#build(Document)}. */	TokenNameCOMMENT_JAVADOC	 A list of fields which is filled at ancestors' construction and used during {@link CategoryDocumentBuilder#build(Document)}. 
protected	TokenNameprotected	
final	TokenNamefinal	
ArrayList	TokenNameIdentifier	 Array List
<	TokenNameLESS	
Field	TokenNameIdentifier	 Field
>	TokenNameGREATER	
fieldList	TokenNameIdentifier	 field List
=	TokenNameEQUAL	
new	TokenNamenew	
ArrayList	TokenNameIdentifier	 Array List
<	TokenNameLESS	
Field	TokenNameIdentifier	 Field
>	TokenNameGREATER	
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
protected	TokenNameprotected	
Map	TokenNameIdentifier	 Map
<	TokenNameLESS	
String	TokenNameIdentifier	 String
,	TokenNameCOMMA	
List	TokenNameIdentifier	 List
<	TokenNameLESS	
CategoryAttribute	TokenNameIdentifier	 Category Attribute
>>	TokenNameRIGHT_SHIFT	
categoriesMap	TokenNameIdentifier	 categories Map
;	TokenNameSEMICOLON	
/** * Creating a facets document builder with default facet indexing * parameters.<br> * See: * {@link #CategoryDocumentBuilder(TaxonomyWriter, FacetIndexingParams)} * * @param taxonomyWriter * to which new categories will be added, as well as translating * known categories to ordinals * @throws IOException * */	TokenNameCOMMENT_JAVADOC	 Creating a facets document builder with default facet indexing parameters.<br> See: {@link #CategoryDocumentBuilder(TaxonomyWriter, FacetIndexingParams)} * @param taxonomyWriter to which new categories will be added, as well as translating known categories to ordinals @throws IOException 
public	TokenNamepublic	
CategoryDocumentBuilder	TokenNameIdentifier	 Category Document Builder
(	TokenNameLPAREN	
TaxonomyWriter	TokenNameIdentifier	 Taxonomy Writer
taxonomyWriter	TokenNameIdentifier	 taxonomy Writer
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
this	TokenNamethis	
(	TokenNameLPAREN	
taxonomyWriter	TokenNameIdentifier	 taxonomy Writer
,	TokenNameCOMMA	
new	TokenNamenew	
DefaultFacetIndexingParams	TokenNameIdentifier	 Default Facet Indexing Params
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Creating a facets document builder with a given facet indexing parameters * object.<br> * * @param taxonomyWriter * to which new categories will be added, as well as translating * known categories to ordinals * @param params * holds all parameters the indexing process should use such as * category-list parameters * @throws IOException */	TokenNameCOMMENT_JAVADOC	 Creating a facets document builder with a given facet indexing parameters object.<br> * @param taxonomyWriter to which new categories will be added, as well as translating known categories to ordinals @param params holds all parameters the indexing process should use such as category-list parameters @throws IOException 
public	TokenNamepublic	
CategoryDocumentBuilder	TokenNameIdentifier	 Category Document Builder
(	TokenNameLPAREN	
TaxonomyWriter	TokenNameIdentifier	 Taxonomy Writer
taxonomyWriter	TokenNameIdentifier	 taxonomy Writer
,	TokenNameCOMMA	
FacetIndexingParams	TokenNameIdentifier	 Facet Indexing Params
params	TokenNameIdentifier	 params
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
taxonomyWriter	TokenNameIdentifier	 taxonomy Writer
=	TokenNameEQUAL	
taxonomyWriter	TokenNameIdentifier	 taxonomy Writer
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
indexingParams	TokenNameIdentifier	 indexing Params
=	TokenNameEQUAL	
params	TokenNameIdentifier	 params
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
categoriesMap	TokenNameIdentifier	 categories Map
=	TokenNameEQUAL	
new	TokenNamenew	
HashMap	TokenNameIdentifier	 Hash Map
<	TokenNameLESS	
String	TokenNameIdentifier	 String
,	TokenNameCOMMA	
List	TokenNameIdentifier	 List
<	TokenNameLESS	
CategoryAttribute	TokenNameIdentifier	 Category Attribute
>>	TokenNameRIGHT_SHIFT	
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Set the categories of the document builder from an {@link Iterable} of * {@link CategoryPath} objects. * * @param categoryPaths * An iterable of CategoryPath objects which holds the categories * (facets) which will be added to the document at * {@link #build(Document)} * @return This CategoryDocumentBuilder, to enable this one line call: * {@code new} {@link #CategoryDocumentBuilder(TaxonomyWriter)}. * {@link #setCategoryPaths(Iterable)}.{@link #build(Document)}. * @throws IOException */	TokenNameCOMMENT_JAVADOC	 Set the categories of the document builder from an {@link Iterable} of {@link CategoryPath} objects. * @param categoryPaths An iterable of CategoryPath objects which holds the categories (facets) which will be added to the document at {@link #build(Document)} @return This CategoryDocumentBuilder, to enable this one line call: {@code new} {@link #CategoryDocumentBuilder(TaxonomyWriter)}. {@link #setCategoryPaths(Iterable)}.{@link #build(Document)}. @throws IOException 
public	TokenNamepublic	
CategoryDocumentBuilder	TokenNameIdentifier	 Category Document Builder
setCategoryPaths	TokenNameIdentifier	 set Category Paths
(	TokenNameLPAREN	
Iterable	TokenNameIdentifier	 Iterable
<	TokenNameLESS	
CategoryPath	TokenNameIdentifier	 Category Path
>	TokenNameGREATER	
categoryPaths	TokenNameIdentifier	 category Paths
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
categoryPaths	TokenNameIdentifier	 category Paths
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
fieldList	TokenNameIdentifier	 field List
.	TokenNameDOT	
clear	TokenNameIdentifier	 clear
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
this	TokenNamethis	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
setCategories	TokenNameIdentifier	 set Categories
(	TokenNameLPAREN	
new	TokenNamenew	
CategoryAttributesIterable	TokenNameIdentifier	 Category Attributes Iterable
(	TokenNameLPAREN	
categoryPaths	TokenNameIdentifier	 category Paths
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Set the categories of the document builder from an {@link Iterable} of * {@link CategoryAttribute} objects. * * @param categories * An iterable of {@link CategoryAttribute} objects which holds * the categories (facets) which will be added to the document at * {@link #build(Document)} * @return This CategoryDocumentBuilder, to enable this one line call: * {@code new} {@link #CategoryDocumentBuilder(TaxonomyWriter)}. * {@link #setCategories(Iterable)}.{@link #build(Document)}. * @throws IOException */	TokenNameCOMMENT_JAVADOC	 Set the categories of the document builder from an {@link Iterable} of {@link CategoryAttribute} objects. * @param categories An iterable of {@link CategoryAttribute} objects which holds the categories (facets) which will be added to the document at {@link #build(Document)} @return This CategoryDocumentBuilder, to enable this one line call: {@code new} {@link #CategoryDocumentBuilder(TaxonomyWriter)}. {@link #setCategories(Iterable)}.{@link #build(Document)}. @throws IOException 
public	TokenNamepublic	
CategoryDocumentBuilder	TokenNameIdentifier	 Category Document Builder
setCategories	TokenNameIdentifier	 set Categories
(	TokenNameLPAREN	
Iterable	TokenNameIdentifier	 Iterable
<	TokenNameLESS	
CategoryAttribute	TokenNameIdentifier	 Category Attribute
>	TokenNameGREATER	
categories	TokenNameIdentifier	 categories
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
fieldList	TokenNameIdentifier	 field List
.	TokenNameDOT	
clear	TokenNameIdentifier	 clear
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
categories	TokenNameIdentifier	 categories
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
this	TokenNamethis	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// get field-name to a list of facets mapping as different facets could 	TokenNameCOMMENT_LINE	get field-name to a list of facets mapping as different facets could 
// be added to different category-lists on different fields 	TokenNameCOMMENT_LINE	be added to different category-lists on different fields 
fillCategoriesMap	TokenNameIdentifier	 fill Categories Map
(	TokenNameLPAREN	
categories	TokenNameIdentifier	 categories
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// creates a different stream for each different field 	TokenNameCOMMENT_LINE	creates a different stream for each different field 
for	TokenNamefor	
(	TokenNameLPAREN	
Entry	TokenNameIdentifier	 Entry
<	TokenNameLESS	
String	TokenNameIdentifier	 String
,	TokenNameCOMMA	
List	TokenNameIdentifier	 List
<	TokenNameLESS	
CategoryAttribute	TokenNameIdentifier	 Category Attribute
>>	TokenNameRIGHT_SHIFT	
e	TokenNameIdentifier	 e
:	TokenNameCOLON	
categoriesMap	TokenNameIdentifier	 categories Map
.	TokenNameDOT	
entrySet	TokenNameIdentifier	 entry Set
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// create a category attributes stream for the array of facets 	TokenNameCOMMENT_LINE	create a category attributes stream for the array of facets 
CategoryAttributesStream	TokenNameIdentifier	 Category Attributes Stream
categoryAttributesStream	TokenNameIdentifier	 category Attributes Stream
=	TokenNameEQUAL	
new	TokenNamenew	
CategoryAttributesStream	TokenNameIdentifier	 Category Attributes Stream
(	TokenNameLPAREN	
e	TokenNameIdentifier	 e
.	TokenNameDOT	
getValue	TokenNameIdentifier	 get Value
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Set a suitable {@link TokenStream} using 	TokenNameCOMMENT_LINE	Set a suitable {@link TokenStream} using 
// CategoryParentsStream, followed by CategoryListTokenizer and 	TokenNameCOMMENT_LINE	CategoryParentsStream, followed by CategoryListTokenizer and 
// CategoryTokenizer composition (the ordering of the last two is 	TokenNameCOMMENT_LINE	CategoryTokenizer composition (the ordering of the last two is 
// not mandatory). 	TokenNameCOMMENT_LINE	not mandatory). 
CategoryParentsStream	TokenNameIdentifier	 Category Parents Stream
parentsStream	TokenNameIdentifier	 parents Stream
=	TokenNameEQUAL	
(	TokenNameLPAREN	
CategoryParentsStream	TokenNameIdentifier	 Category Parents Stream
)	TokenNameRPAREN	
getParentsStream	TokenNameIdentifier	 get Parents Stream
(	TokenNameLPAREN	
categoryAttributesStream	TokenNameIdentifier	 category Attributes Stream
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
CategoryListTokenizer	TokenNameIdentifier	 Category List Tokenizer
categoryListTokenizer	TokenNameIdentifier	 category List Tokenizer
=	TokenNameEQUAL	
getCategoryListTokenizer	TokenNameIdentifier	 get Category List Tokenizer
(	TokenNameLPAREN	
parentsStream	TokenNameIdentifier	 parents Stream
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
CategoryTokenizer	TokenNameIdentifier	 Category Tokenizer
stream	TokenNameIdentifier	 stream
=	TokenNameEQUAL	
getCategoryTokenizer	TokenNameIdentifier	 get Category Tokenizer
(	TokenNameLPAREN	
categoryListTokenizer	TokenNameIdentifier	 category List Tokenizer
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Finally creating a suitable field with stream and adding it to a 	TokenNameCOMMENT_LINE	Finally creating a suitable field with stream and adding it to a 
// master field-list, used during the build process (see 	TokenNameCOMMENT_LINE	master field-list, used during the build process (see 
// super.build()) 	TokenNameCOMMENT_LINE	super.build()) 
fieldList	TokenNameIdentifier	 field List
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
new	TokenNamenew	
Field	TokenNameIdentifier	 Field
(	TokenNameLPAREN	
e	TokenNameIdentifier	 e
.	TokenNameDOT	
getKey	TokenNameIdentifier	 get Key
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
stream	TokenNameIdentifier	 stream
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
this	TokenNamethis	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Get a stream of categories which includes the parents, according to * policies defined in indexing parameters. * * @param categoryAttributesStream * The input stream * @return The parents stream. * @see OrdinalPolicy OrdinalPolicy (for policy of adding category tokens for parents) * @see PathPolicy PathPolicy (for policy of adding category <b>list</b> tokens for parents) */	TokenNameCOMMENT_JAVADOC	 Get a stream of categories which includes the parents, according to policies defined in indexing parameters. * @param categoryAttributesStream The input stream @return The parents stream. @see OrdinalPolicy OrdinalPolicy (for policy of adding category tokens for parents) @see PathPolicy PathPolicy (for policy of adding category <b>list</b> tokens for parents) 
protected	TokenNameprotected	
TokenStream	TokenNameIdentifier	 Token Stream
getParentsStream	TokenNameIdentifier	 get Parents Stream
(	TokenNameLPAREN	
CategoryAttributesStream	TokenNameIdentifier	 Category Attributes Stream
categoryAttributesStream	TokenNameIdentifier	 category Attributes Stream
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
new	TokenNamenew	
CategoryParentsStream	TokenNameIdentifier	 Category Parents Stream
(	TokenNameLPAREN	
categoryAttributesStream	TokenNameIdentifier	 category Attributes Stream
,	TokenNameCOMMA	
taxonomyWriter	TokenNameIdentifier	 taxonomy Writer
,	TokenNameCOMMA	
indexingParams	TokenNameIdentifier	 indexing Params
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Fills the categories mapping between a field name and a list of * categories that belongs to it according to this builder's * {@link FacetIndexingParams} object * * @param categories * Iterable over the category attributes */	TokenNameCOMMENT_JAVADOC	 Fills the categories mapping between a field name and a list of categories that belongs to it according to this builder's {@link FacetIndexingParams} object * @param categories Iterable over the category attributes 
protected	TokenNameprotected	
void	TokenNamevoid	
fillCategoriesMap	TokenNameIdentifier	 fill Categories Map
(	TokenNameLPAREN	
Iterable	TokenNameIdentifier	 Iterable
<	TokenNameLESS	
CategoryAttribute	TokenNameIdentifier	 Category Attribute
>	TokenNameGREATER	
categories	TokenNameIdentifier	 categories
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
categoriesMap	TokenNameIdentifier	 categories Map
.	TokenNameDOT	
clear	TokenNameIdentifier	 clear
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// for-each category 	TokenNameCOMMENT_LINE	for-each category 
for	TokenNamefor	
(	TokenNameLPAREN	
CategoryAttribute	TokenNameIdentifier	 Category Attribute
category	TokenNameIdentifier	 category
:	TokenNameCOLON	
categories	TokenNameIdentifier	 categories
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// extracting the field-name to which this category belongs 	TokenNameCOMMENT_LINE	extracting the field-name to which this category belongs 
String	TokenNameIdentifier	 String
fieldName	TokenNameIdentifier	 field Name
=	TokenNameEQUAL	
indexingParams	TokenNameIdentifier	 indexing Params
.	TokenNameDOT	
getCategoryListParams	TokenNameIdentifier	 get Category List Params
(	TokenNameLPAREN	
category	TokenNameIdentifier	 category
.	TokenNameDOT	
getCategoryPath	TokenNameIdentifier	 get Category Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getTerm	TokenNameIdentifier	 get Term
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
field	TokenNameIdentifier	 field
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// getting the list of categories which belongs to that field 	TokenNameCOMMENT_LINE	getting the list of categories which belongs to that field 
List	TokenNameIdentifier	 List
<	TokenNameLESS	
CategoryAttribute	TokenNameIdentifier	 Category Attribute
>	TokenNameGREATER	
list	TokenNameIdentifier	 list
=	TokenNameEQUAL	
categoriesMap	TokenNameIdentifier	 categories Map
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
fieldName	TokenNameIdentifier	 field Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// if no such list exists 	TokenNameCOMMENT_LINE	if no such list exists 
if	TokenNameif	
(	TokenNameLPAREN	
list	TokenNameIdentifier	 list
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// adding a new one to the map 	TokenNameCOMMENT_LINE	adding a new one to the map 
list	TokenNameIdentifier	 list
=	TokenNameEQUAL	
new	TokenNamenew	
ArrayList	TokenNameIdentifier	 Array List
<	TokenNameLESS	
CategoryAttribute	TokenNameIdentifier	 Category Attribute
>	TokenNameGREATER	
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
categoriesMap	TokenNameIdentifier	 categories Map
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
fieldName	TokenNameIdentifier	 field Name
,	TokenNameCOMMA	
list	TokenNameIdentifier	 list
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// adding the new category to the list 	TokenNameCOMMENT_LINE	adding the new category to the list 
list	TokenNameIdentifier	 list
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
category	TokenNameIdentifier	 category
.	TokenNameDOT	
clone	TokenNameIdentifier	 clone
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Get a category list tokenizer (or a series of such tokenizers) to create * the <b>category list tokens</b>. * * @param categoryStream * A stream containing {@link CategoryAttribute} with the * relevant data. * @return The category list tokenizer (or series of tokenizers) to be used * in creating category list tokens. */	TokenNameCOMMENT_JAVADOC	 Get a category list tokenizer (or a series of such tokenizers) to create the <b>category list tokens</b>. * @param categoryStream A stream containing {@link CategoryAttribute} with the relevant data. @return The category list tokenizer (or series of tokenizers) to be used in creating category list tokens. 
protected	TokenNameprotected	
CategoryListTokenizer	TokenNameIdentifier	 Category List Tokenizer
getCategoryListTokenizer	TokenNameIdentifier	 get Category List Tokenizer
(	TokenNameLPAREN	
TokenStream	TokenNameIdentifier	 Token Stream
categoryStream	TokenNameIdentifier	 category Stream
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
getCountingListTokenizer	TokenNameIdentifier	 get Counting List Tokenizer
(	TokenNameLPAREN	
categoryStream	TokenNameIdentifier	 category Stream
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Get a {@link CountingListTokenizer} for creating counting list token. * * @param categoryStream * A stream containing {@link CategoryAttribute}s with the * relevant data. * @return A counting list tokenizer to be used in creating counting list * token. */	TokenNameCOMMENT_JAVADOC	 Get a {@link CountingListTokenizer} for creating counting list token. * @param categoryStream A stream containing {@link CategoryAttribute}s with the relevant data. @return A counting list tokenizer to be used in creating counting list token. 
protected	TokenNameprotected	
CountingListTokenizer	TokenNameIdentifier	 Counting List Tokenizer
getCountingListTokenizer	TokenNameIdentifier	 get Counting List Tokenizer
(	TokenNameLPAREN	
TokenStream	TokenNameIdentifier	 Token Stream
categoryStream	TokenNameIdentifier	 category Stream
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
new	TokenNamenew	
CountingListTokenizer	TokenNameIdentifier	 Counting List Tokenizer
(	TokenNameLPAREN	
categoryStream	TokenNameIdentifier	 category Stream
,	TokenNameCOMMA	
indexingParams	TokenNameIdentifier	 indexing Params
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Get a {@link CategoryTokenizer} to create the <b>category tokens</b>. * This method can be overridden for adding more attributes to the category * tokens. * * @param categoryStream * A stream containing {@link CategoryAttribute} with the * relevant data. * @return The {@link CategoryTokenizer} to be used in creating category * tokens. * @throws IOException */	TokenNameCOMMENT_JAVADOC	 Get a {@link CategoryTokenizer} to create the <b>category tokens</b>. This method can be overridden for adding more attributes to the category tokens. * @param categoryStream A stream containing {@link CategoryAttribute} with the relevant data. @return The {@link CategoryTokenizer} to be used in creating category tokens. @throws IOException 
protected	TokenNameprotected	
CategoryTokenizer	TokenNameIdentifier	 Category Tokenizer
getCategoryTokenizer	TokenNameIdentifier	 get Category Tokenizer
(	TokenNameLPAREN	
TokenStream	TokenNameIdentifier	 Token Stream
categoryStream	TokenNameIdentifier	 category Stream
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
return	TokenNamereturn	
new	TokenNamenew	
CategoryTokenizer	TokenNameIdentifier	 Category Tokenizer
(	TokenNameLPAREN	
categoryStream	TokenNameIdentifier	 category Stream
,	TokenNameCOMMA	
indexingParams	TokenNameIdentifier	 indexing Params
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** Adds the fields created in one of the "set" methods to the document */	TokenNameCOMMENT_JAVADOC	 Adds the fields created in one of the "set" methods to the document 
public	TokenNamepublic	
Document	TokenNameIdentifier	 Document
build	TokenNameIdentifier	 build
(	TokenNameLPAREN	
Document	TokenNameIdentifier	 Document
doc	TokenNameIdentifier	 doc
)	TokenNameRPAREN	
{	TokenNameLBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
Field	TokenNameIdentifier	 Field
f	TokenNameIdentifier	 f
:	TokenNameCOLON	
fieldList	TokenNameIdentifier	 field List
)	TokenNameRPAREN	
{	TokenNameLBRACE	
f	TokenNameIdentifier	 f
.	TokenNameDOT	
setOmitNorms	TokenNameIdentifier	 set Omit Norms
(	TokenNameLPAREN	
true	TokenNametrue	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
doc	TokenNameIdentifier	 doc
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
f	TokenNameIdentifier	 f
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
doc	TokenNameIdentifier	 doc
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
