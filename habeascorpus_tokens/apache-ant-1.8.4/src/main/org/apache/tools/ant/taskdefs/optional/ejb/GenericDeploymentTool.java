/* * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the "License"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. * */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
taskdefs	TokenNameIdentifier	 taskdefs
.	TokenNameDOT	
optional	TokenNameIdentifier	 optional
.	TokenNameDOT	
ejb	TokenNameIdentifier	 ejb
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
File	TokenNameIdentifier	 File
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
FileInputStream	TokenNameIdentifier	 File Input Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
FileOutputStream	TokenNameIdentifier	 File Output Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
IOException	TokenNameIdentifier	 IO Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
InputStream	TokenNameIdentifier	 Input Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Enumeration	TokenNameIdentifier	 Enumeration
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
HashSet	TokenNameIdentifier	 Hash Set
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Hashtable	TokenNameIdentifier	 Hashtable
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Iterator	TokenNameIdentifier	 Iterator
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Set	TokenNameIdentifier	 Set
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
jar	TokenNameIdentifier	 jar
.	TokenNameDOT	
JarOutputStream	TokenNameIdentifier	 Jar Output Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
jar	TokenNameIdentifier	 jar
.	TokenNameDOT	
Manifest	TokenNameIdentifier	 Manifest
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
zip	TokenNameIdentifier	 zip
.	TokenNameDOT	
ZipEntry	TokenNameIdentifier	 Zip Entry
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
parsers	TokenNameIdentifier	 parsers
.	TokenNameDOT	
SAXParser	TokenNameIdentifier	 SAX Parser
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
BuildException	TokenNameIdentifier	 Build Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
DirectoryScanner	TokenNameIdentifier	 Directory Scanner
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
Location	TokenNameIdentifier	 Location
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
Project	TokenNameIdentifier	 Project
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
Task	TokenNameIdentifier	 Task
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
FileSet	TokenNameIdentifier	 File Set
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
types	TokenNameIdentifier	 types
.	TokenNameDOT	
Path	TokenNameIdentifier	 Path
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
depend	TokenNameIdentifier	 depend
.	TokenNameDOT	
DependencyAnalyzer	TokenNameIdentifier	 Dependency Analyzer
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
sax	TokenNameIdentifier	 sax
.	TokenNameDOT	
InputSource	TokenNameIdentifier	 Input Source
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
xml	TokenNameIdentifier	 xml
.	TokenNameDOT	
sax	TokenNameIdentifier	 sax
.	TokenNameDOT	
SAXException	TokenNameIdentifier	 SAX Exception
;	TokenNameSEMICOLON	
/** * A deployment tool which creates generic EJB jars. Generic jars contains * only those classes and META-INF entries specified in the EJB 1.1 standard * * This class is also used as a framework for the creation of vendor specific * deployment tools. A number of template methods are provided through which the * vendor specific tool can hook into the EJB creation process. * */	TokenNameCOMMENT_JAVADOC	 A deployment tool which creates generic EJB jars. Generic jars contains only those classes and META-INF entries specified in the EJB 1.1 standard * This class is also used as a framework for the creation of vendor specific deployment tools. A number of template methods are provided through which the vendor specific tool can hook into the EJB creation process. 
public	TokenNamepublic	
class	TokenNameclass	
GenericDeploymentTool	TokenNameIdentifier	 Generic Deployment Tool
implements	TokenNameimplements	
EJBDeploymentTool	TokenNameIdentifier	 EJB Deployment Tool
{	TokenNameLBRACE	
/** The default buffer byte size to use for IO */	TokenNameCOMMENT_JAVADOC	 The default buffer byte size to use for IO 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
int	TokenNameint	
DEFAULT_BUFFER_SIZE	TokenNameIdentifier	 DEFAULT  BUFFER  SIZE
=	TokenNameEQUAL	
1024	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
/** The level to use for compression */	TokenNameCOMMENT_JAVADOC	 The level to use for compression 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
int	TokenNameint	
JAR_COMPRESS_LEVEL	TokenNameIdentifier	 JAR  COMPRESS  LEVEL
=	TokenNameEQUAL	
9	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
/** The standard META-INF directory in jar files */	TokenNameCOMMENT_JAVADOC	 The standard META-INF directory in jar files 
protected	TokenNameprotected	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
META_DIR	TokenNameIdentifier	 META  DIR
=	TokenNameEQUAL	
"META-INF/"	TokenNameStringLiteral	META-INF/
;	TokenNameSEMICOLON	
/** The standard MANIFEST file */	TokenNameCOMMENT_JAVADOC	 The standard MANIFEST file 
protected	TokenNameprotected	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
MANIFEST	TokenNameIdentifier	 MANIFEST
=	TokenNameEQUAL	
META_DIR	TokenNameIdentifier	 META  DIR
+	TokenNamePLUS	
"MANIFEST.MF"	TokenNameStringLiteral	MANIFEST.MF
;	TokenNameSEMICOLON	
/** Name for EJB Deployment descriptor within EJB jars */	TokenNameCOMMENT_JAVADOC	 Name for EJB Deployment descriptor within EJB jars 
protected	TokenNameprotected	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
EJB_DD	TokenNameIdentifier	 EJB  DD
=	TokenNameEQUAL	
"ejb-jar.xml"	TokenNameStringLiteral	ejb-jar.xml
;	TokenNameSEMICOLON	
/** A dependency analyzer name to find ancestor classes */	TokenNameCOMMENT_JAVADOC	 A dependency analyzer name to find ancestor classes 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
ANALYZER_SUPER	TokenNameIdentifier	 ANALYZER  SUPER
=	TokenNameEQUAL	
"super"	TokenNameStringLiteral	super
;	TokenNameSEMICOLON	
/** A dependency analyzer name to find all related classes */	TokenNameCOMMENT_JAVADOC	 A dependency analyzer name to find all related classes 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
ANALYZER_FULL	TokenNameIdentifier	 ANALYZER  FULL
=	TokenNameEQUAL	
"full"	TokenNameStringLiteral	full
;	TokenNameSEMICOLON	
/** A dependency analyzer name for no analyzer */	TokenNameCOMMENT_JAVADOC	 A dependency analyzer name for no analyzer 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
ANALYZER_NONE	TokenNameIdentifier	 ANALYZER  NONE
=	TokenNameEQUAL	
"none"	TokenNameStringLiteral	none
;	TokenNameSEMICOLON	
/** The default analyzer */	TokenNameCOMMENT_JAVADOC	 The default analyzer 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
DEFAULT_ANALYZER	TokenNameIdentifier	 DEFAULT  ANALYZER
=	TokenNameEQUAL	
ANALYZER_SUPER	TokenNameIdentifier	 ANALYZER  SUPER
;	TokenNameSEMICOLON	
/** The analyzer class for the super analyzer */	TokenNameCOMMENT_JAVADOC	 The analyzer class for the super analyzer 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
ANALYZER_CLASS_SUPER	TokenNameIdentifier	 ANALYZER  CLASS  SUPER
=	TokenNameEQUAL	
"org.apache.tools.ant.util.depend.bcel.AncestorAnalyzer"	TokenNameStringLiteral	org.apache.tools.ant.util.depend.bcel.AncestorAnalyzer
;	TokenNameSEMICOLON	
/** The analyzer class for the super analyzer */	TokenNameCOMMENT_JAVADOC	 The analyzer class for the super analyzer 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
ANALYZER_CLASS_FULL	TokenNameIdentifier	 ANALYZER  CLASS  FULL
=	TokenNameEQUAL	
"org.apache.tools.ant.util.depend.bcel.FullAnalyzer"	TokenNameStringLiteral	org.apache.tools.ant.util.depend.bcel.FullAnalyzer
;	TokenNameSEMICOLON	
/** * The configuration from the containing task. This config combined * with the settings of the individual attributes here constitues the * complete config for this deployment tool. */	TokenNameCOMMENT_JAVADOC	 The configuration from the containing task. This config combined with the settings of the individual attributes here constitues the complete config for this deployment tool. 
private	TokenNameprivate	
EjbJar	TokenNameIdentifier	 Ejb Jar
.	TokenNameDOT	
Config	TokenNameIdentifier	 Config
config	TokenNameIdentifier	 config
;	TokenNameSEMICOLON	
/** Stores a handle to the directory to put the Jar files in */	TokenNameCOMMENT_JAVADOC	 Stores a handle to the directory to put the Jar files in 
private	TokenNameprivate	
File	TokenNameIdentifier	 File
destDir	TokenNameIdentifier	 dest Dir
;	TokenNameSEMICOLON	
/** The classpath to use with this deployment tool. This is appended to any paths from the ejbjar task itself.*/	TokenNameCOMMENT_JAVADOC	 The classpath to use with this deployment tool. This is appended to any paths from the ejbjar task itself.
private	TokenNameprivate	
Path	TokenNameIdentifier	 Path
classpath	TokenNameIdentifier	 classpath
;	TokenNameSEMICOLON	
/** Instance variable that stores the suffix for the generated jarfile. */	TokenNameCOMMENT_JAVADOC	 Instance variable that stores the suffix for the generated jarfile. 
private	TokenNameprivate	
String	TokenNameIdentifier	 String
genericJarSuffix	TokenNameIdentifier	 generic Jar Suffix
=	TokenNameEQUAL	
"-generic.jar"	TokenNameStringLiteral	-generic.jar
;	TokenNameSEMICOLON	
/** * The task to which this tool belongs. This is used to access services * provided by the ant core, such as logging. */	TokenNameCOMMENT_JAVADOC	 The task to which this tool belongs. This is used to access services provided by the ant core, such as logging. 
private	TokenNameprivate	
Task	TokenNameIdentifier	 Task
task	TokenNameIdentifier	 task
;	TokenNameSEMICOLON	
/** * The classloader generated from the given classpath to load * the super classes and super interfaces. */	TokenNameCOMMENT_JAVADOC	 The classloader generated from the given classpath to load the super classes and super interfaces. 
private	TokenNameprivate	
ClassLoader	TokenNameIdentifier	 Class Loader
classpathLoader	TokenNameIdentifier	 classpath Loader
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
/** * Set of files have been loaded into the EJB jar */	TokenNameCOMMENT_JAVADOC	 Set of files have been loaded into the EJB jar 
private	TokenNameprivate	
Set	TokenNameIdentifier	 Set
addedfiles	TokenNameIdentifier	 addedfiles
;	TokenNameSEMICOLON	
/** * Handler used to parse the EJB XML descriptor */	TokenNameCOMMENT_JAVADOC	 Handler used to parse the EJB XML descriptor 
private	TokenNameprivate	
DescriptorHandler	TokenNameIdentifier	 Descriptor Handler
handler	TokenNameIdentifier	 handler
;	TokenNameSEMICOLON	
/** * Dependency analyzer used to collect class dependencies */	TokenNameCOMMENT_JAVADOC	 Dependency analyzer used to collect class dependencies 
private	TokenNameprivate	
DependencyAnalyzer	TokenNameIdentifier	 Dependency Analyzer
dependencyAnalyzer	TokenNameIdentifier	 dependency Analyzer
;	TokenNameSEMICOLON	
/** No arg constructor */	TokenNameCOMMENT_JAVADOC	 No arg constructor 
public	TokenNamepublic	
GenericDeploymentTool	TokenNameIdentifier	 Generic Deployment Tool
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
}	TokenNameRBRACE	
/** * Set the destination directory; required. * @param inDir the destination directory. */	TokenNameCOMMENT_JAVADOC	 Set the destination directory; required. @param inDir the destination directory. 
public	TokenNamepublic	
void	TokenNamevoid	
setDestdir	TokenNameIdentifier	 set Destdir
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
inDir	TokenNameIdentifier	 in Dir
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
destDir	TokenNameIdentifier	 dest Dir
=	TokenNameEQUAL	
inDir	TokenNameIdentifier	 in Dir
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Get the destination directory. * * @return the destination directory into which EJB jars are to be written */	TokenNameCOMMENT_JAVADOC	 Get the destination directory. * @return the destination directory into which EJB jars are to be written 
protected	TokenNameprotected	
File	TokenNameIdentifier	 File
getDestDir	TokenNameIdentifier	 get Dest Dir
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
destDir	TokenNameIdentifier	 dest Dir
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Set the task which owns this tool * * @param task the Task to which this deployment tool is associated. */	TokenNameCOMMENT_JAVADOC	 Set the task which owns this tool * @param task the Task to which this deployment tool is associated. 
public	TokenNamepublic	
void	TokenNamevoid	
setTask	TokenNameIdentifier	 set Task
(	TokenNameLPAREN	
Task	TokenNameIdentifier	 Task
task	TokenNameIdentifier	 task
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
task	TokenNameIdentifier	 task
=	TokenNameEQUAL	
task	TokenNameIdentifier	 task
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Get the task for this tool. * * @return the Task instance this tool is associated with. */	TokenNameCOMMENT_JAVADOC	 Get the task for this tool. * @return the Task instance this tool is associated with. 
protected	TokenNameprotected	
Task	TokenNameIdentifier	 Task
getTask	TokenNameIdentifier	 get Task
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
task	TokenNameIdentifier	 task
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Get the basename terminator. * * @return an ejbjar task configuration */	TokenNameCOMMENT_JAVADOC	 Get the basename terminator. * @return an ejbjar task configuration 
protected	TokenNameprotected	
EjbJar	TokenNameIdentifier	 Ejb Jar
.	TokenNameDOT	
Config	TokenNameIdentifier	 Config
getConfig	TokenNameIdentifier	 get Config
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
config	TokenNameIdentifier	 config
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Indicate if this build is using the base jar name. * * @return true if the name of the generated jar is coming from the * basejarname attribute */	TokenNameCOMMENT_JAVADOC	 Indicate if this build is using the base jar name. * @return true if the name of the generated jar is coming from the basejarname attribute 
protected	TokenNameprotected	
boolean	TokenNameboolean	
usingBaseJarName	TokenNameIdentifier	 using Base Jar Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
baseJarName	TokenNameIdentifier	 base Jar Name
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Set the suffix for the generated jar file. * @param inString the string to use as the suffix. */	TokenNameCOMMENT_JAVADOC	 Set the suffix for the generated jar file. @param inString the string to use as the suffix. 
public	TokenNamepublic	
void	TokenNamevoid	
setGenericJarSuffix	TokenNameIdentifier	 set Generic Jar Suffix
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
inString	TokenNameIdentifier	 in String
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
genericJarSuffix	TokenNameIdentifier	 generic Jar Suffix
=	TokenNameEQUAL	
inString	TokenNameIdentifier	 in String
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Add the classpath for the user classes * * @return a Path instance to be configured by Ant. */	TokenNameCOMMENT_JAVADOC	 Add the classpath for the user classes * @return a Path instance to be configured by Ant. 
public	TokenNamepublic	
Path	TokenNameIdentifier	 Path
createClasspath	TokenNameIdentifier	 create Classpath
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
classpath	TokenNameIdentifier	 classpath
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
classpath	TokenNameIdentifier	 classpath
=	TokenNameEQUAL	
new	TokenNamenew	
Path	TokenNameIdentifier	 Path
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getProject	TokenNameIdentifier	 get Project
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
classpath	TokenNameIdentifier	 classpath
.	TokenNameDOT	
createPath	TokenNameIdentifier	 create Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Set the classpath to be used for this compilation. * * @param classpath the classpath to be used for this build. */	TokenNameCOMMENT_JAVADOC	 Set the classpath to be used for this compilation. * @param classpath the classpath to be used for this build. 
public	TokenNamepublic	
void	TokenNamevoid	
setClasspath	TokenNameIdentifier	 set Classpath
(	TokenNameLPAREN	
Path	TokenNameIdentifier	 Path
classpath	TokenNameIdentifier	 classpath
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
classpath	TokenNameIdentifier	 classpath
=	TokenNameEQUAL	
classpath	TokenNameIdentifier	 classpath
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Get the classpath by combining the one from the surrounding task, if any * and the one from this tool. * * @return the combined classpath */	TokenNameCOMMENT_JAVADOC	 Get the classpath by combining the one from the surrounding task, if any and the one from this tool. * @return the combined classpath 
protected	TokenNameprotected	
Path	TokenNameIdentifier	 Path
getCombinedClasspath	TokenNameIdentifier	 get Combined Classpath
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Path	TokenNameIdentifier	 Path
combinedPath	TokenNameIdentifier	 combined Path
=	TokenNameEQUAL	
classpath	TokenNameIdentifier	 classpath
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
classpath	TokenNameIdentifier	 classpath
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
combinedPath	TokenNameIdentifier	 combined Path
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
combinedPath	TokenNameIdentifier	 combined Path
=	TokenNameEQUAL	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
classpath	TokenNameIdentifier	 classpath
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
combinedPath	TokenNameIdentifier	 combined Path
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
classpath	TokenNameIdentifier	 classpath
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
combinedPath	TokenNameIdentifier	 combined Path
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Log a message to the Ant output. * * @param message the message to be logged. * @param level the severity of this message. */	TokenNameCOMMENT_JAVADOC	 Log a message to the Ant output. * @param message the message to be logged. @param level the severity of this message. 
protected	TokenNameprotected	
void	TokenNamevoid	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
message	TokenNameIdentifier	 message
,	TokenNameCOMMA	
int	TokenNameint	
level	TokenNameIdentifier	 level
)	TokenNameRPAREN	
{	TokenNameLBRACE	
getTask	TokenNameIdentifier	 get Task
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
message	TokenNameIdentifier	 message
,	TokenNameCOMMA	
level	TokenNameIdentifier	 level
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Get the build file location associated with this element's task. * * @return the task's location instance. */	TokenNameCOMMENT_JAVADOC	 Get the build file location associated with this element's task. * @return the task's location instance. 
protected	TokenNameprotected	
Location	TokenNameIdentifier	 Location
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
getTask	TokenNameIdentifier	 get Task
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
void	TokenNamevoid	
createAnalyzer	TokenNameIdentifier	 create Analyzer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
analyzer	TokenNameIdentifier	 analyzer
=	TokenNameEQUAL	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
analyzer	TokenNameIdentifier	 analyzer
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
analyzer	TokenNameIdentifier	 analyzer
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
analyzer	TokenNameIdentifier	 analyzer
=	TokenNameEQUAL	
DEFAULT_ANALYZER	TokenNameIdentifier	 DEFAULT  ANALYZER
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
analyzer	TokenNameIdentifier	 analyzer
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
ANALYZER_NONE	TokenNameIdentifier	 ANALYZER  NONE
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
String	TokenNameIdentifier	 String
analyzerClassName	TokenNameIdentifier	 analyzer Class Name
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
analyzer	TokenNameIdentifier	 analyzer
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
ANALYZER_SUPER	TokenNameIdentifier	 ANALYZER  SUPER
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
analyzerClassName	TokenNameIdentifier	 analyzer Class Name
=	TokenNameEQUAL	
ANALYZER_CLASS_SUPER	TokenNameIdentifier	 ANALYZER  CLASS  SUPER
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
analyzer	TokenNameIdentifier	 analyzer
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
ANALYZER_FULL	TokenNameIdentifier	 ANALYZER  FULL
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
analyzerClassName	TokenNameIdentifier	 analyzer Class Name
=	TokenNameEQUAL	
ANALYZER_CLASS_FULL	TokenNameIdentifier	 ANALYZER  CLASS  FULL
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
analyzerClassName	TokenNameIdentifier	 analyzer Class Name
=	TokenNameEQUAL	
analyzer	TokenNameIdentifier	 analyzer
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
Class	TokenNameIdentifier	 Class
analyzerClass	TokenNameIdentifier	 analyzer Class
=	TokenNameEQUAL	
Class	TokenNameIdentifier	 Class
.	TokenNameDOT	
forName	TokenNameIdentifier	 for Name
(	TokenNameLPAREN	
analyzerClassName	TokenNameIdentifier	 analyzer Class Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dependencyAnalyzer	TokenNameIdentifier	 dependency Analyzer
=	TokenNameEQUAL	
(	TokenNameLPAREN	
DependencyAnalyzer	TokenNameIdentifier	 Dependency Analyzer
)	TokenNameRPAREN	
analyzerClass	TokenNameIdentifier	 analyzer Class
.	TokenNameDOT	
newInstance	TokenNameIdentifier	 new Instance
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dependencyAnalyzer	TokenNameIdentifier	 dependency Analyzer
.	TokenNameDOT	
addClassPath	TokenNameIdentifier	 add Class Path
(	TokenNameLPAREN	
new	TokenNamenew	
Path	TokenNameIdentifier	 Path
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getProject	TokenNameIdentifier	 get Project
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
srcDir	TokenNameIdentifier	 src Dir
.	TokenNameDOT	
getPath	TokenNameIdentifier	 get Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dependencyAnalyzer	TokenNameIdentifier	 dependency Analyzer
.	TokenNameDOT	
addClassPath	TokenNameIdentifier	 add Class Path
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
classpath	TokenNameIdentifier	 classpath
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
NoClassDefFoundError	TokenNameIdentifier	 No Class Def Found Error
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
dependencyAnalyzer	TokenNameIdentifier	 dependency Analyzer
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Unable to load dependency analyzer: "	TokenNameStringLiteral	Unable to load dependency analyzer: 
+	TokenNamePLUS	
analyzerClassName	TokenNameIdentifier	 analyzer Class Name
+	TokenNamePLUS	
" - dependent class not found: "	TokenNameStringLiteral	 - dependent class not found: 
+	TokenNamePLUS	
e	TokenNameIdentifier	 e
.	TokenNameDOT	
getMessage	TokenNameIdentifier	 get Message
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_WARN	TokenNameIdentifier	 MSG  WARN
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
Exception	TokenNameIdentifier	 Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
dependencyAnalyzer	TokenNameIdentifier	 dependency Analyzer
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Unable to load dependency analyzer: "	TokenNameStringLiteral	Unable to load dependency analyzer: 
+	TokenNamePLUS	
analyzerClassName	TokenNameIdentifier	 analyzer Class Name
+	TokenNamePLUS	
" - exception: "	TokenNameStringLiteral	 - exception: 
+	TokenNamePLUS	
e	TokenNameIdentifier	 e
.	TokenNameDOT	
getMessage	TokenNameIdentifier	 get Message
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_WARN	TokenNameIdentifier	 MSG  WARN
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Configure this tool for use in the ejbjar task. * * @param config the configuration from the surrounding ejbjar task. */	TokenNameCOMMENT_JAVADOC	 Configure this tool for use in the ejbjar task. * @param config the configuration from the surrounding ejbjar task. 
public	TokenNamepublic	
void	TokenNamevoid	
configure	TokenNameIdentifier	 configure
(	TokenNameLPAREN	
EjbJar	TokenNameIdentifier	 Ejb Jar
.	TokenNameDOT	
Config	TokenNameIdentifier	 Config
config	TokenNameIdentifier	 config
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
config	TokenNameIdentifier	 config
=	TokenNameEQUAL	
config	TokenNameIdentifier	 config
;	TokenNameSEMICOLON	
createAnalyzer	TokenNameIdentifier	 create Analyzer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
classpathLoader	TokenNameIdentifier	 classpath Loader
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Utility method that encapsulates the logic of adding a file entry to * a .jar file. Used by execute() to add entries to the jar file as it is * constructed. * @param jStream A JarOutputStream into which to write the * jar entry. * @param inputFile A File from which to read the * contents the file being added. * @param logicalFilename A String representing the name, including * all relevant path information, that should be stored for the entry * being added. * @throws BuildException if there is a problem. */	TokenNameCOMMENT_JAVADOC	 Utility method that encapsulates the logic of adding a file entry to a .jar file. Used by execute() to add entries to the jar file as it is constructed. @param jStream A JarOutputStream into which to write the jar entry. @param inputFile A File from which to read the contents the file being added. @param logicalFilename A String representing the name, including all relevant path information, that should be stored for the entry being added. @throws BuildException if there is a problem. 
protected	TokenNameprotected	
void	TokenNamevoid	
addFileToJar	TokenNameIdentifier	 add File To Jar
(	TokenNameLPAREN	
JarOutputStream	TokenNameIdentifier	 Jar Output Stream
jStream	TokenNameIdentifier	 j Stream
,	TokenNameCOMMA	
File	TokenNameIdentifier	 File
inputFile	TokenNameIdentifier	 input File
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
logicalFilename	TokenNameIdentifier	 logical Filename
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
FileInputStream	TokenNameIdentifier	 File Input Stream
iStream	TokenNameIdentifier	 i Stream
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
addedfiles	TokenNameIdentifier	 addedfiles
.	TokenNameDOT	
contains	TokenNameIdentifier	 contains
(	TokenNameLPAREN	
logicalFilename	TokenNameIdentifier	 logical Filename
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
iStream	TokenNameIdentifier	 i Stream
=	TokenNameEQUAL	
new	TokenNamenew	
FileInputStream	TokenNameIdentifier	 File Input Stream
(	TokenNameLPAREN	
inputFile	TokenNameIdentifier	 input File
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Create the zip entry and add it to the jar file 	TokenNameCOMMENT_LINE	Create the zip entry and add it to the jar file 
ZipEntry	TokenNameIdentifier	 Zip Entry
zipEntry	TokenNameIdentifier	 zip Entry
=	TokenNameEQUAL	
new	TokenNamenew	
ZipEntry	TokenNameIdentifier	 Zip Entry
(	TokenNameLPAREN	
logicalFilename	TokenNameIdentifier	 logical Filename
.	TokenNameDOT	
replace	TokenNameIdentifier	 replace
(	TokenNameLPAREN	
'\\'	TokenNameCharacterLiteral	
,	TokenNameCOMMA	
'/'	TokenNameCharacterLiteral	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
jStream	TokenNameIdentifier	 j Stream
.	TokenNameDOT	
putNextEntry	TokenNameIdentifier	 put Next Entry
(	TokenNameLPAREN	
zipEntry	TokenNameIdentifier	 zip Entry
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Create the file input stream, and buffer everything over 	TokenNameCOMMENT_LINE	Create the file input stream, and buffer everything over 
// to the jar output stream 	TokenNameCOMMENT_LINE	to the jar output stream 
byte	TokenNamebyte	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
byteBuffer	TokenNameIdentifier	 byte Buffer
=	TokenNameEQUAL	
new	TokenNamenew	
byte	TokenNamebyte	
[	TokenNameLBRACKET	
2	TokenNameIntegerLiteral	
*	TokenNameMULTIPLY	
DEFAULT_BUFFER_SIZE	TokenNameIdentifier	 DEFAULT  BUFFER  SIZE
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
int	TokenNameint	
count	TokenNameIdentifier	 count
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
do	TokenNamedo	
{	TokenNameLBRACE	
jStream	TokenNameIdentifier	 j Stream
.	TokenNameDOT	
write	TokenNameIdentifier	 write
(	TokenNameLPAREN	
byteBuffer	TokenNameIdentifier	 byte Buffer
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
count	TokenNameIdentifier	 count
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
count	TokenNameIdentifier	 count
=	TokenNameEQUAL	
iStream	TokenNameIdentifier	 i Stream
.	TokenNameDOT	
read	TokenNameIdentifier	 read
(	TokenNameLPAREN	
byteBuffer	TokenNameIdentifier	 byte Buffer
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
byteBuffer	TokenNameIdentifier	 byte Buffer
.	TokenNameDOT	
length	TokenNameIdentifier	 length
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
while	TokenNamewhile	
(	TokenNameLPAREN	
count	TokenNameIdentifier	 count
!=	TokenNameNOT_EQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
//add it to list of files in jar 	TokenNameCOMMENT_LINE	add it to list of files in jar 
addedfiles	TokenNameIdentifier	 addedfiles
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
logicalFilename	TokenNameIdentifier	 logical Filename
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"WARNING: IOException while adding entry "	TokenNameStringLiteral	WARNING: IOException while adding entry 
+	TokenNamePLUS	
logicalFilename	TokenNameIdentifier	 logical Filename
+	TokenNamePLUS	
" to jarfile from "	TokenNameStringLiteral	 to jarfile from 
+	TokenNamePLUS	
inputFile	TokenNameIdentifier	 input File
.	TokenNameDOT	
getPath	TokenNameIdentifier	 get Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" "	TokenNameStringLiteral	 
+	TokenNamePLUS	
ioe	TokenNameIdentifier	 ioe
.	TokenNameDOT	
getClass	TokenNameIdentifier	 get Class
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
"-"	TokenNameStringLiteral	-
+	TokenNamePLUS	
ioe	TokenNameIdentifier	 ioe
.	TokenNameDOT	
getMessage	TokenNameIdentifier	 get Message
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_WARN	TokenNameIdentifier	 MSG  WARN
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
// Close up the file input stream for the class file 	TokenNameCOMMENT_LINE	Close up the file input stream for the class file 
if	TokenNameif	
(	TokenNameLPAREN	
iStream	TokenNameIdentifier	 i Stream
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
iStream	TokenNameIdentifier	 i Stream
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
closeException	TokenNameIdentifier	 close Exception
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// ignore 	TokenNameCOMMENT_LINE	ignore 
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Get a descriptionHandler. * @param srcDir the source directory. * @return a handler. */	TokenNameCOMMENT_JAVADOC	 Get a descriptionHandler. @param srcDir the source directory. @return a handler. 
protected	TokenNameprotected	
DescriptorHandler	TokenNameIdentifier	 Descriptor Handler
getDescriptorHandler	TokenNameIdentifier	 get Descriptor Handler
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
srcDir	TokenNameIdentifier	 src Dir
)	TokenNameRPAREN	
{	TokenNameLBRACE	
DescriptorHandler	TokenNameIdentifier	 Descriptor Handler
h	TokenNameIdentifier	 h
=	TokenNameEQUAL	
new	TokenNamenew	
DescriptorHandler	TokenNameIdentifier	 Descriptor Handler
(	TokenNameLPAREN	
getTask	TokenNameIdentifier	 get Task
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
srcDir	TokenNameIdentifier	 src Dir
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
registerKnownDTDs	TokenNameIdentifier	 register Known DT Ds
(	TokenNameLPAREN	
h	TokenNameIdentifier	 h
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// register any DTDs supplied by the user 	TokenNameCOMMENT_LINE	register any DTDs supplied by the user 
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
getConfig	TokenNameIdentifier	 get Config
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
dtdLocations	TokenNameIdentifier	 dtd Locations
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
EjbJar	TokenNameIdentifier	 Ejb Jar
.	TokenNameDOT	
DTDLocation	TokenNameIdentifier	 DTD Location
dtdLocation	TokenNameIdentifier	 dtd Location
=	TokenNameEQUAL	
(	TokenNameLPAREN	
EjbJar	TokenNameIdentifier	 Ejb Jar
.	TokenNameDOT	
DTDLocation	TokenNameIdentifier	 DTD Location
)	TokenNameRPAREN	
i	TokenNameIdentifier	 i
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
h	TokenNameIdentifier	 h
.	TokenNameDOT	
registerDTD	TokenNameIdentifier	 register DTD
(	TokenNameLPAREN	
dtdLocation	TokenNameIdentifier	 dtd Location
.	TokenNameDOT	
getPublicId	TokenNameIdentifier	 get Public Id
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
dtdLocation	TokenNameIdentifier	 dtd Location
.	TokenNameDOT	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
h	TokenNameIdentifier	 h
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Register the locations of all known DTDs. * * vendor-specific subclasses should override this method to define * the vendor-specific locations of the EJB DTDs * @param handler no used in this class. */	TokenNameCOMMENT_JAVADOC	 Register the locations of all known DTDs. * vendor-specific subclasses should override this method to define the vendor-specific locations of the EJB DTDs @param handler no used in this class. 
protected	TokenNameprotected	
void	TokenNamevoid	
registerKnownDTDs	TokenNameIdentifier	 register Known DT Ds
(	TokenNameLPAREN	
DescriptorHandler	TokenNameIdentifier	 Descriptor Handler
handler	TokenNameIdentifier	 handler
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// none to register for generic 	TokenNameCOMMENT_LINE	none to register for generic 
}	TokenNameRBRACE	
/** {@inheritDoc}. */	TokenNameCOMMENT_JAVADOC	 {@inheritDoc}. 
public	TokenNamepublic	
void	TokenNamevoid	
processDescriptor	TokenNameIdentifier	 process Descriptor
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
descriptorFileName	TokenNameIdentifier	 descriptor File Name
,	TokenNameCOMMA	
SAXParser	TokenNameIdentifier	 SAX Parser
saxParser	TokenNameIdentifier	 sax Parser
)	TokenNameRPAREN	
{	TokenNameLBRACE	
checkConfiguration	TokenNameIdentifier	 check Configuration
(	TokenNameLPAREN	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
,	TokenNameCOMMA	
saxParser	TokenNameIdentifier	 sax Parser
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
handler	TokenNameIdentifier	 handler
=	TokenNameEQUAL	
getDescriptorHandler	TokenNameIdentifier	 get Descriptor Handler
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
srcDir	TokenNameIdentifier	 src Dir
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Retrive the files to be added to JAR from EJB descriptor 	TokenNameCOMMENT_LINE	Retrive the files to be added to JAR from EJB descriptor 
Hashtable	TokenNameIdentifier	 Hashtable
ejbFiles	TokenNameIdentifier	 ejb Files
=	TokenNameEQUAL	
parseEjbFiles	TokenNameIdentifier	 parse Ejb Files
(	TokenNameLPAREN	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
,	TokenNameCOMMA	
saxParser	TokenNameIdentifier	 sax Parser
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Add any support classes specified in the build file 	TokenNameCOMMENT_LINE	Add any support classes specified in the build file 
addSupportClasses	TokenNameIdentifier	 add Support Classes
(	TokenNameLPAREN	
ejbFiles	TokenNameIdentifier	 ejb Files
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Determine the JAR filename (without filename extension) 	TokenNameCOMMENT_LINE	Determine the JAR filename (without filename extension) 
String	TokenNameIdentifier	 String
baseName	TokenNameIdentifier	 base Name
=	TokenNameEQUAL	
getJarBaseName	TokenNameIdentifier	 get Jar Base Name
(	TokenNameLPAREN	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
ddPrefix	TokenNameIdentifier	 dd Prefix
=	TokenNameEQUAL	
getVendorDDPrefix	TokenNameIdentifier	 get Vendor DD Prefix
(	TokenNameLPAREN	
baseName	TokenNameIdentifier	 base Name
,	TokenNameCOMMA	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
File	TokenNameIdentifier	 File
manifestFile	TokenNameIdentifier	 manifest File
=	TokenNameEQUAL	
getManifestFile	TokenNameIdentifier	 get Manifest File
(	TokenNameLPAREN	
ddPrefix	TokenNameIdentifier	 dd Prefix
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
manifestFile	TokenNameIdentifier	 manifest File
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ejbFiles	TokenNameIdentifier	 ejb Files
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
MANIFEST	TokenNameIdentifier	 MANIFEST
,	TokenNameCOMMA	
manifestFile	TokenNameIdentifier	 manifest File
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// First the regular deployment descriptor 	TokenNameCOMMENT_LINE	First the regular deployment descriptor 
ejbFiles	TokenNameIdentifier	 ejb Files
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
META_DIR	TokenNameIdentifier	 META  DIR
+	TokenNamePLUS	
EJB_DD	TokenNameIdentifier	 EJB  DD
,	TokenNameCOMMA	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
descriptorDir	TokenNameIdentifier	 descriptor Dir
,	TokenNameCOMMA	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// now the vendor specific files, if any 	TokenNameCOMMENT_LINE	now the vendor specific files, if any 
addVendorFiles	TokenNameIdentifier	 add Vendor Files
(	TokenNameLPAREN	
ejbFiles	TokenNameIdentifier	 ejb Files
,	TokenNameCOMMA	
ddPrefix	TokenNameIdentifier	 dd Prefix
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// add any dependent files 	TokenNameCOMMENT_LINE	add any dependent files 
checkAndAddDependants	TokenNameIdentifier	 check And Add Dependants
(	TokenNameLPAREN	
ejbFiles	TokenNameIdentifier	 ejb Files
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Lastly create File object for the Jar files. If we are using 	TokenNameCOMMENT_LINE	Lastly create File object for the Jar files. If we are using 
// a flat destination dir, then we need to redefine baseName! 	TokenNameCOMMENT_LINE	a flat destination dir, then we need to redefine baseName! 
if	TokenNameif	
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
flatDestDir	TokenNameIdentifier	 flat Dest Dir
&&	TokenNameAND_AND	
baseName	TokenNameIdentifier	 base Name
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
int	TokenNameint	
startName	TokenNameIdentifier	 start Name
=	TokenNameEQUAL	
baseName	TokenNameIdentifier	 base Name
.	TokenNameDOT	
lastIndexOf	TokenNameIdentifier	 last Index Of
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separator	TokenNameIdentifier	 separator
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
startName	TokenNameIdentifier	 start Name
==	TokenNameEQUAL_EQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
startName	TokenNameIdentifier	 start Name
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
int	TokenNameint	
endName	TokenNameIdentifier	 end Name
=	TokenNameEQUAL	
baseName	TokenNameIdentifier	 base Name
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
baseName	TokenNameIdentifier	 base Name
=	TokenNameEQUAL	
baseName	TokenNameIdentifier	 base Name
.	TokenNameDOT	
substring	TokenNameIdentifier	 substring
(	TokenNameLPAREN	
startName	TokenNameIdentifier	 start Name
,	TokenNameCOMMA	
endName	TokenNameIdentifier	 end Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
File	TokenNameIdentifier	 File
jarFile	TokenNameIdentifier	 jar File
=	TokenNameEQUAL	
getVendorOutputJarFile	TokenNameIdentifier	 get Vendor Output Jar File
(	TokenNameLPAREN	
baseName	TokenNameIdentifier	 base Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Check to see if we need a build and start doing the work! 	TokenNameCOMMENT_LINE	Check to see if we need a build and start doing the work! 
if	TokenNameif	
(	TokenNameLPAREN	
needToRebuild	TokenNameIdentifier	 need To Rebuild
(	TokenNameLPAREN	
ejbFiles	TokenNameIdentifier	 ejb Files
,	TokenNameCOMMA	
jarFile	TokenNameIdentifier	 jar File
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Log that we are going to build... 	TokenNameCOMMENT_LINE	Log that we are going to build... 
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"building "	TokenNameStringLiteral	building 
+	TokenNamePLUS	
jarFile	TokenNameIdentifier	 jar File
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" with "	TokenNameStringLiteral	 with 
+	TokenNamePLUS	
String	TokenNameIdentifier	 String
.	TokenNameDOT	
valueOf	TokenNameIdentifier	 value Of
(	TokenNameLPAREN	
ejbFiles	TokenNameIdentifier	 ejb Files
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" files"	TokenNameStringLiteral	 files
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_INFO	TokenNameIdentifier	 MSG  INFO
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Use helper method to write the jarfile 	TokenNameCOMMENT_LINE	Use helper method to write the jarfile 
String	TokenNameIdentifier	 String
publicId	TokenNameIdentifier	 public Id
=	TokenNameEQUAL	
getPublicId	TokenNameIdentifier	 get Public Id
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
writeJar	TokenNameIdentifier	 write Jar
(	TokenNameLPAREN	
baseName	TokenNameIdentifier	 base Name
,	TokenNameCOMMA	
jarFile	TokenNameIdentifier	 jar File
,	TokenNameCOMMA	
ejbFiles	TokenNameIdentifier	 ejb Files
,	TokenNameCOMMA	
publicId	TokenNameIdentifier	 public Id
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
// Log that the file is up to date... 	TokenNameCOMMENT_LINE	Log that the file is up to date... 
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
jarFile	TokenNameIdentifier	 jar File
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" is up to date."	TokenNameStringLiteral	 is up to date.
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
SAXException	TokenNameIdentifier	 SAX Exception
se	TokenNameIdentifier	 se
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
msg	TokenNameIdentifier	 msg
=	TokenNameEQUAL	
"SAXException while parsing '"	TokenNameStringLiteral	SAXException while parsing '
+	TokenNamePLUS	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
+	TokenNamePLUS	
"'. This probably indicates badly-formed XML."	TokenNameStringLiteral	'. This probably indicates badly-formed XML.
+	TokenNamePLUS	
" Details: "	TokenNameStringLiteral	 Details: 
+	TokenNamePLUS	
se	TokenNameIdentifier	 se
.	TokenNameDOT	
getMessage	TokenNameIdentifier	 get Message
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
msg	TokenNameIdentifier	 msg
,	TokenNameCOMMA	
se	TokenNameIdentifier	 se
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
msg	TokenNameIdentifier	 msg
=	TokenNameEQUAL	
"IOException while parsing'"	TokenNameStringLiteral	IOException while parsing'
+	TokenNamePLUS	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
+	TokenNamePLUS	
"'. This probably indicates that the descriptor"	TokenNameStringLiteral	'. This probably indicates that the descriptor
+	TokenNamePLUS	
" doesn't exist. Details: "	TokenNameStringLiteral	 doesn't exist. Details: 
+	TokenNamePLUS	
ioe	TokenNameIdentifier	 ioe
.	TokenNameDOT	
getMessage	TokenNameIdentifier	 get Message
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
msg	TokenNameIdentifier	 msg
,	TokenNameCOMMA	
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * This method is called as the first step in the processDescriptor method * to allow vendor-specific subclasses to validate the task configuration * prior to processing the descriptor. If the configuration is invalid, * a BuildException should be thrown. * * @param descriptorFileName String representing the file name of an EJB * descriptor to be processed * @param saxParser SAXParser which may be used to parse the XML * descriptor * @throws BuildException if there is a problem. */	TokenNameCOMMENT_JAVADOC	 This method is called as the first step in the processDescriptor method to allow vendor-specific subclasses to validate the task configuration prior to processing the descriptor. If the configuration is invalid, a BuildException should be thrown. * @param descriptorFileName String representing the file name of an EJB descriptor to be processed @param saxParser SAXParser which may be used to parse the XML descriptor @throws BuildException if there is a problem. 
protected	TokenNameprotected	
void	TokenNamevoid	
checkConfiguration	TokenNameIdentifier	 check Configuration
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
descriptorFileName	TokenNameIdentifier	 descriptor File Name
,	TokenNameCOMMA	
SAXParser	TokenNameIdentifier	 SAX Parser
saxParser	TokenNameIdentifier	 sax Parser
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
/* * For the GenericDeploymentTool, do nothing. Vendor specific * subclasses should throw a BuildException if the configuration is * invalid for their server. */	TokenNameCOMMENT_BLOCK	 For the GenericDeploymentTool, do nothing. Vendor specific subclasses should throw a BuildException if the configuration is invalid for their server. 
}	TokenNameRBRACE	
/** * This method returns a list of EJB files found when the specified EJB * descriptor is parsed and processed. * * @param descriptorFileName String representing the file name of an EJB * descriptor to be processed * @param saxParser SAXParser which may be used to parse the XML * descriptor * @return Hashtable of EJB class (and other) files to be * added to the completed JAR file * @throws SAXException Any SAX exception, possibly wrapping another * exception * @throws IOException An IOException from the parser, possibly from a * the byte stream or character stream */	TokenNameCOMMENT_JAVADOC	 This method returns a list of EJB files found when the specified EJB descriptor is parsed and processed. * @param descriptorFileName String representing the file name of an EJB descriptor to be processed @param saxParser SAXParser which may be used to parse the XML descriptor @return Hashtable of EJB class (and other) files to be added to the completed JAR file @throws SAXException Any SAX exception, possibly wrapping another exception @throws IOException An IOException from the parser, possibly from a the byte stream or character stream 
protected	TokenNameprotected	
Hashtable	TokenNameIdentifier	 Hashtable
parseEjbFiles	TokenNameIdentifier	 parse Ejb Files
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
descriptorFileName	TokenNameIdentifier	 descriptor File Name
,	TokenNameCOMMA	
SAXParser	TokenNameIdentifier	 SAX Parser
saxParser	TokenNameIdentifier	 sax Parser
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
SAXException	TokenNameIdentifier	 SAX Exception
{	TokenNameLBRACE	
FileInputStream	TokenNameIdentifier	 File Input Stream
descriptorStream	TokenNameIdentifier	 descriptor Stream
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
Hashtable	TokenNameIdentifier	 Hashtable
ejbFiles	TokenNameIdentifier	 ejb Files
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
/* Parse the ejb deployment descriptor. While it may not * look like much, we use a SAXParser and an inner class to * get hold of all the classfile names for the descriptor. */	TokenNameCOMMENT_BLOCK	 Parse the ejb deployment descriptor. While it may not look like much, we use a SAXParser and an inner class to get hold of all the classfile names for the descriptor. 
descriptorStream	TokenNameIdentifier	 descriptor Stream
=	TokenNameEQUAL	
new	TokenNamenew	
FileInputStream	TokenNameIdentifier	 File Input Stream
(	TokenNameLPAREN	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
descriptorDir	TokenNameIdentifier	 descriptor Dir
,	TokenNameCOMMA	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
saxParser	TokenNameIdentifier	 sax Parser
.	TokenNameDOT	
parse	TokenNameIdentifier	 parse
(	TokenNameLPAREN	
new	TokenNamenew	
InputSource	TokenNameIdentifier	 Input Source
(	TokenNameLPAREN	
descriptorStream	TokenNameIdentifier	 descriptor Stream
)	TokenNameRPAREN	
,	TokenNameCOMMA	
handler	TokenNameIdentifier	 handler
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ejbFiles	TokenNameIdentifier	 ejb Files
=	TokenNameEQUAL	
handler	TokenNameIdentifier	 handler
.	TokenNameDOT	
getFiles	TokenNameIdentifier	 get Files
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
descriptorStream	TokenNameIdentifier	 descriptor Stream
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
descriptorStream	TokenNameIdentifier	 descriptor Stream
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
closeException	TokenNameIdentifier	 close Exception
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// ignore 	TokenNameCOMMENT_LINE	ignore 
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
ejbFiles	TokenNameIdentifier	 ejb Files
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Adds any classes the user specifies using <i>support</i> nested elements * to the <code>ejbFiles</code> Hashtable. * * @param ejbFiles Hashtable of EJB classes (and other) files that will be * added to the completed JAR file */	TokenNameCOMMENT_JAVADOC	 Adds any classes the user specifies using <i>support</i> nested elements to the <code>ejbFiles</code> Hashtable. * @param ejbFiles Hashtable of EJB classes (and other) files that will be added to the completed JAR file 
protected	TokenNameprotected	
void	TokenNamevoid	
addSupportClasses	TokenNameIdentifier	 add Support Classes
(	TokenNameLPAREN	
Hashtable	TokenNameIdentifier	 Hashtable
ejbFiles	TokenNameIdentifier	 ejb Files
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// add in support classes if any 	TokenNameCOMMENT_LINE	add in support classes if any 
Project	TokenNameIdentifier	 Project
project	TokenNameIdentifier	 project
=	TokenNameEQUAL	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
getProject	TokenNameIdentifier	 get Project
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
supportFileSets	TokenNameIdentifier	 support File Sets
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
FileSet	TokenNameIdentifier	 File Set
supportFileSet	TokenNameIdentifier	 support File Set
=	TokenNameEQUAL	
(	TokenNameLPAREN	
FileSet	TokenNameIdentifier	 File Set
)	TokenNameRPAREN	
i	TokenNameIdentifier	 i
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
File	TokenNameIdentifier	 File
supportBaseDir	TokenNameIdentifier	 support Base Dir
=	TokenNameEQUAL	
supportFileSet	TokenNameIdentifier	 support File Set
.	TokenNameDOT	
getDir	TokenNameIdentifier	 get Dir
(	TokenNameLPAREN	
project	TokenNameIdentifier	 project
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
DirectoryScanner	TokenNameIdentifier	 Directory Scanner
supportScanner	TokenNameIdentifier	 support Scanner
=	TokenNameEQUAL	
supportFileSet	TokenNameIdentifier	 support File Set
.	TokenNameDOT	
getDirectoryScanner	TokenNameIdentifier	 get Directory Scanner
(	TokenNameLPAREN	
project	TokenNameIdentifier	 project
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
supportScanner	TokenNameIdentifier	 support Scanner
.	TokenNameDOT	
scan	TokenNameIdentifier	 scan
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
supportFiles	TokenNameIdentifier	 support Files
=	TokenNameEQUAL	
supportScanner	TokenNameIdentifier	 support Scanner
.	TokenNameDOT	
getIncludedFiles	TokenNameIdentifier	 get Included Files
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
j	TokenNameIdentifier	 j
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
j	TokenNameIdentifier	 j
<	TokenNameLESS	
supportFiles	TokenNameIdentifier	 support Files
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
++	TokenNamePLUS_PLUS	
j	TokenNameIdentifier	 j
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ejbFiles	TokenNameIdentifier	 ejb Files
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
supportFiles	TokenNameIdentifier	 support Files
[	TokenNameLBRACKET	
j	TokenNameIdentifier	 j
]	TokenNameRBRACKET	
,	TokenNameCOMMA	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
supportBaseDir	TokenNameIdentifier	 support Base Dir
,	TokenNameCOMMA	
supportFiles	TokenNameIdentifier	 support Files
[	TokenNameLBRACKET	
j	TokenNameIdentifier	 j
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Using the EJB descriptor file name passed from the <code>ejbjar</code> * task, this method returns the "basename" which will be used to name the * completed JAR file. * * @param descriptorFileName String representing the file name of an EJB * descriptor to be processed * @return The "basename" which will be used to name the * completed JAR file */	TokenNameCOMMENT_JAVADOC	 Using the EJB descriptor file name passed from the <code>ejbjar</code> task, this method returns the "basename" which will be used to name the completed JAR file. * @param descriptorFileName String representing the file name of an EJB descriptor to be processed @return The "basename" which will be used to name the completed JAR file 
protected	TokenNameprotected	
String	TokenNameIdentifier	 String
getJarBaseName	TokenNameIdentifier	 get Jar Base Name
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
descriptorFileName	TokenNameIdentifier	 descriptor File Name
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
baseName	TokenNameIdentifier	 base Name
=	TokenNameEQUAL	
""	TokenNameStringLiteral	 
;	TokenNameSEMICOLON	
// Work out what the base name is 	TokenNameCOMMENT_LINE	Work out what the base name is 
if	TokenNameif	
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
namingScheme	TokenNameIdentifier	 naming Scheme
.	TokenNameDOT	
getValue	TokenNameIdentifier	 get Value
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
EjbJar	TokenNameIdentifier	 Ejb Jar
.	TokenNameDOT	
NamingScheme	TokenNameIdentifier	 Naming Scheme
.	TokenNameDOT	
BASEJARNAME	TokenNameIdentifier	 BASEJARNAME
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
canonicalDescriptor	TokenNameIdentifier	 canonical Descriptor
=	TokenNameEQUAL	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
.	TokenNameDOT	
replace	TokenNameIdentifier	 replace
(	TokenNameLPAREN	
'\\'	TokenNameCharacterLiteral	
,	TokenNameCOMMA	
'/'	TokenNameCharacterLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
index	TokenNameIdentifier	 index
=	TokenNameEQUAL	
canonicalDescriptor	TokenNameIdentifier	 canonical Descriptor
.	TokenNameDOT	
lastIndexOf	TokenNameIdentifier	 last Index Of
(	TokenNameLPAREN	
'/'	TokenNameCharacterLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
index	TokenNameIdentifier	 index
!=	TokenNameNOT_EQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
baseName	TokenNameIdentifier	 base Name
=	TokenNameEQUAL	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
.	TokenNameDOT	
substring	TokenNameIdentifier	 substring
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
index	TokenNameIdentifier	 index
+	TokenNamePLUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
baseName	TokenNameIdentifier	 base Name
+=	TokenNamePLUS_EQUAL	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
baseJarName	TokenNameIdentifier	 base Jar Name
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
namingScheme	TokenNameIdentifier	 naming Scheme
.	TokenNameDOT	
getValue	TokenNameIdentifier	 get Value
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
EjbJar	TokenNameIdentifier	 Ejb Jar
.	TokenNameDOT	
NamingScheme	TokenNameIdentifier	 Naming Scheme
.	TokenNameDOT	
DESCRIPTOR	TokenNameIdentifier	 DESCRIPTOR
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
int	TokenNameint	
lastSeparatorIndex	TokenNameIdentifier	 last Separator Index
=	TokenNameEQUAL	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
.	TokenNameDOT	
lastIndexOf	TokenNameIdentifier	 last Index Of
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separator	TokenNameIdentifier	 separator
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
endBaseName	TokenNameIdentifier	 end Base Name
=	TokenNameEQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
lastSeparatorIndex	TokenNameIdentifier	 last Separator Index
!=	TokenNameNOT_EQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
endBaseName	TokenNameIdentifier	 end Base Name
=	TokenNameEQUAL	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
.	TokenNameDOT	
indexOf	TokenNameIdentifier	 index Of
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
baseNameTerminator	TokenNameIdentifier	 base Name Terminator
,	TokenNameCOMMA	
lastSeparatorIndex	TokenNameIdentifier	 last Separator Index
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
endBaseName	TokenNameIdentifier	 end Base Name
=	TokenNameEQUAL	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
.	TokenNameDOT	
indexOf	TokenNameIdentifier	 index Of
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
baseNameTerminator	TokenNameIdentifier	 base Name Terminator
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
endBaseName	TokenNameIdentifier	 end Base Name
!=	TokenNameNOT_EQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
baseName	TokenNameIdentifier	 base Name
=	TokenNameEQUAL	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
.	TokenNameDOT	
substring	TokenNameIdentifier	 substring
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
endBaseName	TokenNameIdentifier	 end Base Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"Unable to determine jar name "	TokenNameStringLiteral	Unable to determine jar name 
+	TokenNamePLUS	
"from descriptor ""	TokenNameStringLiteral	from descriptor "
+	TokenNamePLUS	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
+	TokenNamePLUS	
"""	TokenNameStringLiteral	"
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
namingScheme	TokenNameIdentifier	 naming Scheme
.	TokenNameDOT	
getValue	TokenNameIdentifier	 get Value
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
EjbJar	TokenNameIdentifier	 Ejb Jar
.	TokenNameDOT	
NamingScheme	TokenNameIdentifier	 Naming Scheme
.	TokenNameDOT	
DIRECTORY	TokenNameIdentifier	 DIRECTORY
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
descriptorFile	TokenNameIdentifier	 descriptor File
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
descriptorDir	TokenNameIdentifier	 descriptor Dir
,	TokenNameCOMMA	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
path	TokenNameIdentifier	 path
=	TokenNameEQUAL	
descriptorFile	TokenNameIdentifier	 descriptor File
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
lastSeparatorIndex	TokenNameIdentifier	 last Separator Index
=	TokenNameEQUAL	
path	TokenNameIdentifier	 path
.	TokenNameDOT	
lastIndexOf	TokenNameIdentifier	 last Index Of
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separator	TokenNameIdentifier	 separator
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
lastSeparatorIndex	TokenNameIdentifier	 last Separator Index
==	TokenNameEQUAL_EQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"Unable to determine directory name holding descriptor"	TokenNameStringLiteral	Unable to determine directory name holding descriptor
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
String	TokenNameIdentifier	 String
dirName	TokenNameIdentifier	 dir Name
=	TokenNameEQUAL	
path	TokenNameIdentifier	 path
.	TokenNameDOT	
substring	TokenNameIdentifier	 substring
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
lastSeparatorIndex	TokenNameIdentifier	 last Separator Index
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
dirSeparatorIndex	TokenNameIdentifier	 dir Separator Index
=	TokenNameEQUAL	
dirName	TokenNameIdentifier	 dir Name
.	TokenNameDOT	
lastIndexOf	TokenNameIdentifier	 last Index Of
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separator	TokenNameIdentifier	 separator
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
dirSeparatorIndex	TokenNameIdentifier	 dir Separator Index
!=	TokenNameNOT_EQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
dirName	TokenNameIdentifier	 dir Name
=	TokenNameEQUAL	
dirName	TokenNameIdentifier	 dir Name
.	TokenNameDOT	
substring	TokenNameIdentifier	 substring
(	TokenNameLPAREN	
dirSeparatorIndex	TokenNameIdentifier	 dir Separator Index
+	TokenNamePLUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
baseName	TokenNameIdentifier	 base Name
=	TokenNameEQUAL	
dirName	TokenNameIdentifier	 dir Name
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
namingScheme	TokenNameIdentifier	 naming Scheme
.	TokenNameDOT	
getValue	TokenNameIdentifier	 get Value
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
EjbJar	TokenNameIdentifier	 Ejb Jar
.	TokenNameDOT	
NamingScheme	TokenNameIdentifier	 Naming Scheme
.	TokenNameDOT	
EJB_NAME	TokenNameIdentifier	 EJB  NAME
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
baseName	TokenNameIdentifier	 base Name
=	TokenNameEQUAL	
handler	TokenNameIdentifier	 handler
.	TokenNameDOT	
getEjbName	TokenNameIdentifier	 get Ejb Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
baseName	TokenNameIdentifier	 base Name
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Get the prefix for vendor deployment descriptors. * * This will contain the path and the start of the descriptor name, * depending on the naming scheme * @param baseName the base name to use. * @param descriptorFileName the file name to use. * @return the prefix. */	TokenNameCOMMENT_JAVADOC	 Get the prefix for vendor deployment descriptors. * This will contain the path and the start of the descriptor name, depending on the naming scheme @param baseName the base name to use. @param descriptorFileName the file name to use. @return the prefix. 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getVendorDDPrefix	TokenNameIdentifier	 get Vendor DD Prefix
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
baseName	TokenNameIdentifier	 base Name
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
descriptorFileName	TokenNameIdentifier	 descriptor File Name
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
ddPrefix	TokenNameIdentifier	 dd Prefix
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
namingScheme	TokenNameIdentifier	 naming Scheme
.	TokenNameDOT	
getValue	TokenNameIdentifier	 get Value
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
EjbJar	TokenNameIdentifier	 Ejb Jar
.	TokenNameDOT	
NamingScheme	TokenNameIdentifier	 Naming Scheme
.	TokenNameDOT	
DESCRIPTOR	TokenNameIdentifier	 DESCRIPTOR
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ddPrefix	TokenNameIdentifier	 dd Prefix
=	TokenNameEQUAL	
baseName	TokenNameIdentifier	 base Name
+	TokenNamePLUS	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
baseNameTerminator	TokenNameIdentifier	 base Name Terminator
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
namingScheme	TokenNameIdentifier	 naming Scheme
.	TokenNameDOT	
getValue	TokenNameIdentifier	 get Value
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
EjbJar	TokenNameIdentifier	 Ejb Jar
.	TokenNameDOT	
NamingScheme	TokenNameIdentifier	 Naming Scheme
.	TokenNameDOT	
BASEJARNAME	TokenNameIdentifier	 BASEJARNAME
)	TokenNameRPAREN	
||	TokenNameOR_OR	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
namingScheme	TokenNameIdentifier	 naming Scheme
.	TokenNameDOT	
getValue	TokenNameIdentifier	 get Value
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
EjbJar	TokenNameIdentifier	 Ejb Jar
.	TokenNameDOT	
NamingScheme	TokenNameIdentifier	 Naming Scheme
.	TokenNameDOT	
EJB_NAME	TokenNameIdentifier	 EJB  NAME
)	TokenNameRPAREN	
||	TokenNameOR_OR	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
namingScheme	TokenNameIdentifier	 naming Scheme
.	TokenNameDOT	
getValue	TokenNameIdentifier	 get Value
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
EjbJar	TokenNameIdentifier	 Ejb Jar
.	TokenNameDOT	
NamingScheme	TokenNameIdentifier	 Naming Scheme
.	TokenNameDOT	
DIRECTORY	TokenNameIdentifier	 DIRECTORY
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
canonicalDescriptor	TokenNameIdentifier	 canonical Descriptor
=	TokenNameEQUAL	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
.	TokenNameDOT	
replace	TokenNameIdentifier	 replace
(	TokenNameLPAREN	
'\\'	TokenNameCharacterLiteral	
,	TokenNameCOMMA	
'/'	TokenNameCharacterLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
int	TokenNameint	
index	TokenNameIdentifier	 index
=	TokenNameEQUAL	
canonicalDescriptor	TokenNameIdentifier	 canonical Descriptor
.	TokenNameDOT	
lastIndexOf	TokenNameIdentifier	 last Index Of
(	TokenNameLPAREN	
'/'	TokenNameCharacterLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
index	TokenNameIdentifier	 index
==	TokenNameEQUAL_EQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
ddPrefix	TokenNameIdentifier	 dd Prefix
=	TokenNameEQUAL	
""	TokenNameStringLiteral	 
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
ddPrefix	TokenNameIdentifier	 dd Prefix
=	TokenNameEQUAL	
descriptorFileName	TokenNameIdentifier	 descriptor File Name
.	TokenNameDOT	
substring	TokenNameIdentifier	 substring
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
index	TokenNameIdentifier	 index
+	TokenNamePLUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
ddPrefix	TokenNameIdentifier	 dd Prefix
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Add any vendor specific files which should be included in the * EJB Jar. * @param ejbFiles a hashtable entryname -> file. * @param ddPrefix a prefix to use. */	TokenNameCOMMENT_JAVADOC	 Add any vendor specific files which should be included in the EJB Jar. @param ejbFiles a hashtable entryname -> file. @param ddPrefix a prefix to use. 
protected	TokenNameprotected	
void	TokenNamevoid	
addVendorFiles	TokenNameIdentifier	 add Vendor Files
(	TokenNameLPAREN	
Hashtable	TokenNameIdentifier	 Hashtable
ejbFiles	TokenNameIdentifier	 ejb Files
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
ddPrefix	TokenNameIdentifier	 dd Prefix
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// nothing to add for generic tool. 	TokenNameCOMMENT_LINE	nothing to add for generic tool. 
}	TokenNameRBRACE	
/** * Get the vendor specific name of the Jar that will be output. The modification date * of this jar will be checked against the dependent bean classes. * @param baseName the basename to use. */	TokenNameCOMMENT_JAVADOC	 Get the vendor specific name of the Jar that will be output. The modification date of this jar will be checked against the dependent bean classes. @param baseName the basename to use. 
File	TokenNameIdentifier	 File
getVendorOutputJarFile	TokenNameIdentifier	 get Vendor Output Jar File
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
baseName	TokenNameIdentifier	 base Name
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
destDir	TokenNameIdentifier	 dest Dir
,	TokenNameCOMMA	
baseName	TokenNameIdentifier	 base Name
+	TokenNamePLUS	
genericJarSuffix	TokenNameIdentifier	 generic Jar Suffix
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * This method checks the timestamp on each file listed in the <code> * ejbFiles</code> and compares them to the timestamp on the <code>jarFile * </code>. If the <code>jarFile</code>'s timestamp is more recent than * each EJB file, <code>true</code> is returned. Otherwise, <code>false * </code> is returned. * TODO: find a way to check the manifest-file, that is found by naming convention * * @param ejbFiles Hashtable of EJB classes (and other) files that will be * added to the completed JAR file * @param jarFile JAR file which will contain all of the EJB classes (and * other) files * @return boolean indicating whether or not the <code>jarFile</code> * is up to date */	TokenNameCOMMENT_JAVADOC	 This method checks the timestamp on each file listed in the <code> ejbFiles</code> and compares them to the timestamp on the <code>jarFile </code>. If the <code>jarFile</code>'s timestamp is more recent than each EJB file, <code>true</code> is returned. Otherwise, <code>false </code> is returned. TODO: find a way to check the manifest-file, that is found by naming convention * @param ejbFiles Hashtable of EJB classes (and other) files that will be added to the completed JAR file @param jarFile JAR file which will contain all of the EJB classes (and other) files @return boolean indicating whether or not the <code>jarFile</code> is up to date 
protected	TokenNameprotected	
boolean	TokenNameboolean	
needToRebuild	TokenNameIdentifier	 need To Rebuild
(	TokenNameLPAREN	
Hashtable	TokenNameIdentifier	 Hashtable
ejbFiles	TokenNameIdentifier	 ejb Files
,	TokenNameCOMMA	
File	TokenNameIdentifier	 File
jarFile	TokenNameIdentifier	 jar File
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
jarFile	TokenNameIdentifier	 jar File
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
long	TokenNamelong	
lastBuild	TokenNameIdentifier	 last Build
=	TokenNameEQUAL	
jarFile	TokenNameIdentifier	 jar File
.	TokenNameDOT	
lastModified	TokenNameIdentifier	 last Modified
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Iterator	TokenNameIdentifier	 Iterator
fileIter	TokenNameIdentifier	 file Iter
=	TokenNameEQUAL	
ejbFiles	TokenNameIdentifier	 ejb Files
.	TokenNameDOT	
values	TokenNameIdentifier	 values
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Loop through the files seeing if any has been touched 	TokenNameCOMMENT_LINE	Loop through the files seeing if any has been touched 
// more recently than the destination jar. 	TokenNameCOMMENT_LINE	more recently than the destination jar. 
while	TokenNamewhile	
(	TokenNameLPAREN	
fileIter	TokenNameIdentifier	 file Iter
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
currentFile	TokenNameIdentifier	 current File
=	TokenNameEQUAL	
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
)	TokenNameRPAREN	
fileIter	TokenNameIdentifier	 file Iter
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
lastBuild	TokenNameIdentifier	 last Build
<	TokenNameLESS	
currentFile	TokenNameIdentifier	 current File
.	TokenNameDOT	
lastModified	TokenNameIdentifier	 last Modified
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"Build needed because "	TokenNameStringLiteral	Build needed because 
+	TokenNamePLUS	
currentFile	TokenNameIdentifier	 current File
.	TokenNameDOT	
getPath	TokenNameIdentifier	 get Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" is out of date"	TokenNameStringLiteral	 is out of date
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
true	TokenNametrue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the Public ID of the DTD specified in the EJB descriptor. Not * every vendor-specific <code>DeploymentTool</code> will need to reference * this value or may want to determine this value in a vendor-specific way. * * @return Public ID of the DTD specified in the EJB descriptor. */	TokenNameCOMMENT_JAVADOC	 Returns the Public ID of the DTD specified in the EJB descriptor. Not every vendor-specific <code>DeploymentTool</code> will need to reference this value or may want to determine this value in a vendor-specific way. * @return Public ID of the DTD specified in the EJB descriptor. 
protected	TokenNameprotected	
String	TokenNameIdentifier	 String
getPublicId	TokenNameIdentifier	 get Public Id
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
handler	TokenNameIdentifier	 handler
.	TokenNameDOT	
getPublicId	TokenNameIdentifier	 get Public Id
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Get the manifets file to use for building the generic jar. * * If the file does not exist the global manifest from the config is used * otherwise the default Ant manifest will be used. * * @param prefix the prefix where to llook for the manifest file based on * the naming convention. * * @return the manifest file or null if the manifest file does not exist */	TokenNameCOMMENT_JAVADOC	 Get the manifets file to use for building the generic jar. * If the file does not exist the global manifest from the config is used otherwise the default Ant manifest will be used. * @param prefix the prefix where to llook for the manifest file based on the naming convention. * @return the manifest file or null if the manifest file does not exist 
protected	TokenNameprotected	
File	TokenNameIdentifier	 File
getManifestFile	TokenNameIdentifier	 get Manifest File
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
prefix	TokenNameIdentifier	 prefix
)	TokenNameRPAREN	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
manifestFile	TokenNameIdentifier	 manifest File
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
getConfig	TokenNameIdentifier	 get Config
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
descriptorDir	TokenNameIdentifier	 descriptor Dir
,	TokenNameCOMMA	
prefix	TokenNameIdentifier	 prefix
+	TokenNamePLUS	
"manifest.mf"	TokenNameStringLiteral	manifest.mf
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
manifestFile	TokenNameIdentifier	 manifest File
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
manifestFile	TokenNameIdentifier	 manifest File
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
manifest	TokenNameIdentifier	 manifest
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
manifest	TokenNameIdentifier	 manifest
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Method used to encapsulate the writing of the JAR file. Iterates over the * filenames/java.io.Files in the Hashtable stored on the instance variable * ejbFiles. * @param baseName the base name to use. * @param jarfile the jar file to write to. * @param files the files to write to the jar. * @param publicId the id to use. * @throws BuildException if there is a problem. */	TokenNameCOMMENT_JAVADOC	 Method used to encapsulate the writing of the JAR file. Iterates over the filenames/java.io.Files in the Hashtable stored on the instance variable ejbFiles. @param baseName the base name to use. @param jarfile the jar file to write to. @param files the files to write to the jar. @param publicId the id to use. @throws BuildException if there is a problem. 
protected	TokenNameprotected	
void	TokenNamevoid	
writeJar	TokenNameIdentifier	 write Jar
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
baseName	TokenNameIdentifier	 base Name
,	TokenNameCOMMA	
File	TokenNameIdentifier	 File
jarfile	TokenNameIdentifier	 jarfile
,	TokenNameCOMMA	
Hashtable	TokenNameIdentifier	 Hashtable
files	TokenNameIdentifier	 files
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
publicId	TokenNameIdentifier	 public Id
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
JarOutputStream	TokenNameIdentifier	 Jar Output Stream
jarStream	TokenNameIdentifier	 jar Stream
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
// clean the addedfiles set 	TokenNameCOMMENT_LINE	clean the addedfiles set 
if	TokenNameif	
(	TokenNameLPAREN	
addedfiles	TokenNameIdentifier	 addedfiles
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
addedfiles	TokenNameIdentifier	 addedfiles
=	TokenNameEQUAL	
new	TokenNamenew	
HashSet	TokenNameIdentifier	 Hash Set
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
addedfiles	TokenNameIdentifier	 addedfiles
.	TokenNameDOT	
clear	TokenNameIdentifier	 clear
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/* If the jarfile already exists then whack it and recreate it. * Should probably think of a more elegant way to handle this * so that in case of errors we don't leave people worse off * than when we started =) */	TokenNameCOMMENT_BLOCK	 If the jarfile already exists then whack it and recreate it. Should probably think of a more elegant way to handle this so that in case of errors we don't leave people worse off than when we started =) 
if	TokenNameif	
(	TokenNameLPAREN	
jarfile	TokenNameIdentifier	 jarfile
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
jarfile	TokenNameIdentifier	 jarfile
.	TokenNameDOT	
delete	TokenNameIdentifier	 delete
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
jarfile	TokenNameIdentifier	 jarfile
.	TokenNameDOT	
getParentFile	TokenNameIdentifier	 get Parent File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
mkdirs	TokenNameIdentifier	 mkdirs
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
jarfile	TokenNameIdentifier	 jarfile
.	TokenNameDOT	
createNewFile	TokenNameIdentifier	 create New File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
InputStream	TokenNameIdentifier	 Input Stream
in	TokenNameIdentifier	 in
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
Manifest	TokenNameIdentifier	 Manifest
manifest	TokenNameIdentifier	 manifest
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
manifestFile	TokenNameIdentifier	 manifest File
=	TokenNameEQUAL	
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
)	TokenNameRPAREN	
files	TokenNameIdentifier	 files
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
MANIFEST	TokenNameIdentifier	 MANIFEST
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
manifestFile	TokenNameIdentifier	 manifest File
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
manifestFile	TokenNameIdentifier	 manifest File
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
in	TokenNameIdentifier	 in
=	TokenNameEQUAL	
new	TokenNamenew	
FileInputStream	TokenNameIdentifier	 File Input Stream
(	TokenNameLPAREN	
manifestFile	TokenNameIdentifier	 manifest File
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
defaultManifest	TokenNameIdentifier	 default Manifest
=	TokenNameEQUAL	
"/org/apache/tools/ant/defaultManifest.mf"	TokenNameStringLiteral	/org/apache/tools/ant/defaultManifest.mf
;	TokenNameSEMICOLON	
in	TokenNameIdentifier	 in
=	TokenNameEQUAL	
this	TokenNamethis	
.	TokenNameDOT	
getClass	TokenNameIdentifier	 get Class
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getResourceAsStream	TokenNameIdentifier	 get Resource As Stream
(	TokenNameLPAREN	
defaultManifest	TokenNameIdentifier	 default Manifest
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
in	TokenNameIdentifier	 in
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"Could not find "	TokenNameStringLiteral	Could not find 
+	TokenNamePLUS	
"default manifest: "	TokenNameStringLiteral	default manifest: 
+	TokenNamePLUS	
defaultManifest	TokenNameIdentifier	 default Manifest
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
manifest	TokenNameIdentifier	 manifest
=	TokenNameEQUAL	
new	TokenNamenew	
Manifest	TokenNameIdentifier	 Manifest
(	TokenNameLPAREN	
in	TokenNameIdentifier	 in
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"Unable to read manifest"	TokenNameStringLiteral	Unable to read manifest
,	TokenNameCOMMA	
e	TokenNameIdentifier	 e
,	TokenNameCOMMA	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
in	TokenNameIdentifier	 in
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
in	TokenNameIdentifier	 in
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// Create the streams necessary to write the jarfile 	TokenNameCOMMENT_LINE	Create the streams necessary to write the jarfile 
jarStream	TokenNameIdentifier	 jar Stream
=	TokenNameEQUAL	
new	TokenNamenew	
JarOutputStream	TokenNameIdentifier	 Jar Output Stream
(	TokenNameLPAREN	
new	TokenNamenew	
FileOutputStream	TokenNameIdentifier	 File Output Stream
(	TokenNameLPAREN	
jarfile	TokenNameIdentifier	 jarfile
)	TokenNameRPAREN	
,	TokenNameCOMMA	
manifest	TokenNameIdentifier	 manifest
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
jarStream	TokenNameIdentifier	 jar Stream
.	TokenNameDOT	
setMethod	TokenNameIdentifier	 set Method
(	TokenNameLPAREN	
JarOutputStream	TokenNameIdentifier	 Jar Output Stream
.	TokenNameDOT	
DEFLATED	TokenNameIdentifier	 DEFLATED
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Loop through all the class files found and add them to the jar 	TokenNameCOMMENT_LINE	Loop through all the class files found and add them to the jar 
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
entryIterator	TokenNameIdentifier	 entry Iterator
=	TokenNameEQUAL	
files	TokenNameIdentifier	 files
.	TokenNameDOT	
keySet	TokenNameIdentifier	 key Set
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
entryIterator	TokenNameIdentifier	 entry Iterator
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
entryName	TokenNameIdentifier	 entry Name
=	TokenNameEQUAL	
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
entryIterator	TokenNameIdentifier	 entry Iterator
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
entryName	TokenNameIdentifier	 entry Name
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
MANIFEST	TokenNameIdentifier	 MANIFEST
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
continue	TokenNamecontinue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
File	TokenNameIdentifier	 File
entryFile	TokenNameIdentifier	 entry File
=	TokenNameEQUAL	
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
)	TokenNameRPAREN	
files	TokenNameIdentifier	 files
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
entryName	TokenNameIdentifier	 entry Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"adding file '"	TokenNameStringLiteral	adding file '
+	TokenNamePLUS	
entryName	TokenNameIdentifier	 entry Name
+	TokenNamePLUS	
"'"	TokenNameStringLiteral	'
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
addFileToJar	TokenNameIdentifier	 add File To Jar
(	TokenNameLPAREN	
jarStream	TokenNameIdentifier	 jar Stream
,	TokenNameCOMMA	
entryFile	TokenNameIdentifier	 entry File
,	TokenNameCOMMA	
entryName	TokenNameIdentifier	 entry Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// See if there are any inner classes for this class and add them in if there are 	TokenNameCOMMENT_LINE	See if there are any inner classes for this class and add them in if there are 
InnerClassFilenameFilter	TokenNameIdentifier	 Inner Class Filename Filter
flt	TokenNameIdentifier	 flt
=	TokenNameEQUAL	
new	TokenNamenew	
InnerClassFilenameFilter	TokenNameIdentifier	 Inner Class Filename Filter
(	TokenNameLPAREN	
entryFile	TokenNameIdentifier	 entry File
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
File	TokenNameIdentifier	 File
entryDir	TokenNameIdentifier	 entry Dir
=	TokenNameEQUAL	
entryFile	TokenNameIdentifier	 entry File
.	TokenNameDOT	
getParentFile	TokenNameIdentifier	 get Parent File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
innerfiles	TokenNameIdentifier	 innerfiles
=	TokenNameEQUAL	
entryDir	TokenNameIdentifier	 entry Dir
.	TokenNameDOT	
list	TokenNameIdentifier	 list
(	TokenNameLPAREN	
flt	TokenNameIdentifier	 flt
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
innerfiles	TokenNameIdentifier	 innerfiles
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
n	TokenNameIdentifier	 n
=	TokenNameEQUAL	
innerfiles	TokenNameIdentifier	 innerfiles
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
n	TokenNameIdentifier	 n
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
//get and clean up innerclass name 	TokenNameCOMMENT_LINE	get and clean up innerclass name 
int	TokenNameint	
entryIndex	TokenNameIdentifier	 entry Index
=	TokenNameEQUAL	
entryName	TokenNameIdentifier	 entry Name
.	TokenNameDOT	
lastIndexOf	TokenNameIdentifier	 last Index Of
(	TokenNameLPAREN	
entryFile	TokenNameIdentifier	 entry File
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
entryIndex	TokenNameIdentifier	 entry Index
<	TokenNameLESS	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
entryName	TokenNameIdentifier	 entry Name
=	TokenNameEQUAL	
innerfiles	TokenNameIdentifier	 innerfiles
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
entryName	TokenNameIdentifier	 entry Name
=	TokenNameEQUAL	
entryName	TokenNameIdentifier	 entry Name
.	TokenNameDOT	
substring	TokenNameIdentifier	 substring
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
entryIndex	TokenNameIdentifier	 entry Index
)	TokenNameRPAREN	
+	TokenNamePLUS	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separatorChar	TokenNameIdentifier	 separator Char
+	TokenNamePLUS	
innerfiles	TokenNameIdentifier	 innerfiles
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// link the file 	TokenNameCOMMENT_LINE	link the file 
entryFile	TokenNameIdentifier	 entry File
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
srcDir	TokenNameIdentifier	 src Dir
,	TokenNameCOMMA	
entryName	TokenNameIdentifier	 entry Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"adding innerclass file '"	TokenNameStringLiteral	adding innerclass file '
+	TokenNamePLUS	
entryName	TokenNameIdentifier	 entry Name
+	TokenNamePLUS	
"'"	TokenNameStringLiteral	'
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
addFileToJar	TokenNameIdentifier	 add File To Jar
(	TokenNameLPAREN	
jarStream	TokenNameIdentifier	 jar Stream
,	TokenNameCOMMA	
entryFile	TokenNameIdentifier	 entry File
,	TokenNameCOMMA	
entryName	TokenNameIdentifier	 entry Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
msg	TokenNameIdentifier	 msg
=	TokenNameEQUAL	
"IOException while processing ejb-jar file '"	TokenNameStringLiteral	IOException while processing ejb-jar file '
+	TokenNamePLUS	
jarfile	TokenNameIdentifier	 jarfile
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
"'. Details: "	TokenNameStringLiteral	'. Details: 
+	TokenNamePLUS	
ioe	TokenNameIdentifier	 ioe
.	TokenNameDOT	
getMessage	TokenNameIdentifier	 get Message
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
msg	TokenNameIdentifier	 msg
,	TokenNameCOMMA	
ioe	TokenNameIdentifier	 ioe
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
finally	TokenNamefinally	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
jarStream	TokenNameIdentifier	 jar Stream
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
jarStream	TokenNameIdentifier	 jar Stream
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
closeException	TokenNameIdentifier	 close Exception
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// ignore 	TokenNameCOMMENT_LINE	ignore 
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// end of writeJar 	TokenNameCOMMENT_LINE	end of writeJar 
/** * Add all available classes, that depend on Remote, Home, Bean, PK * @param checkEntries files, that are extracted from the deployment descriptor * @throws BuildException if there is a problem. */	TokenNameCOMMENT_JAVADOC	 Add all available classes, that depend on Remote, Home, Bean, PK @param checkEntries files, that are extracted from the deployment descriptor @throws BuildException if there is a problem. 
protected	TokenNameprotected	
void	TokenNamevoid	
checkAndAddDependants	TokenNameIdentifier	 check And Add Dependants
(	TokenNameLPAREN	
Hashtable	TokenNameIdentifier	 Hashtable
checkEntries	TokenNameIdentifier	 check Entries
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
dependencyAnalyzer	TokenNameIdentifier	 dependency Analyzer
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
dependencyAnalyzer	TokenNameIdentifier	 dependency Analyzer
.	TokenNameDOT	
reset	TokenNameIdentifier	 reset
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Iterator	TokenNameIdentifier	 Iterator
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
checkEntries	TokenNameIdentifier	 check Entries
.	TokenNameDOT	
keySet	TokenNameIdentifier	 key Set
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
entryName	TokenNameIdentifier	 entry Name
=	TokenNameEQUAL	
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
i	TokenNameIdentifier	 i
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
entryName	TokenNameIdentifier	 entry Name
.	TokenNameDOT	
endsWith	TokenNameIdentifier	 ends With
(	TokenNameLPAREN	
".class"	TokenNameStringLiteral	.class
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
className	TokenNameIdentifier	 class Name
=	TokenNameEQUAL	
entryName	TokenNameIdentifier	 entry Name
.	TokenNameDOT	
substring	TokenNameIdentifier	 substring
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
entryName	TokenNameIdentifier	 entry Name
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
-	TokenNameMINUS	
".class"	TokenNameStringLiteral	.class
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
className	TokenNameIdentifier	 class Name
=	TokenNameEQUAL	
className	TokenNameIdentifier	 class Name
.	TokenNameDOT	
replace	TokenNameIdentifier	 replace
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separatorChar	TokenNameIdentifier	 separator Char
,	TokenNameCOMMA	
'/'	TokenNameCharacterLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
className	TokenNameIdentifier	 class Name
=	TokenNameEQUAL	
className	TokenNameIdentifier	 class Name
.	TokenNameDOT	
replace	TokenNameIdentifier	 replace
(	TokenNameLPAREN	
'/'	TokenNameCharacterLiteral	
,	TokenNameCOMMA	
'.'	TokenNameCharacterLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dependencyAnalyzer	TokenNameIdentifier	 dependency Analyzer
.	TokenNameDOT	
addRootClass	TokenNameIdentifier	 add Root Class
(	TokenNameLPAREN	
className	TokenNameIdentifier	 class Name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
Enumeration	TokenNameIdentifier	 Enumeration
e	TokenNameIdentifier	 e
=	TokenNameEQUAL	
dependencyAnalyzer	TokenNameIdentifier	 dependency Analyzer
.	TokenNameDOT	
getClassDependencies	TokenNameIdentifier	 get Class Dependencies
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
e	TokenNameIdentifier	 e
.	TokenNameDOT	
hasMoreElements	TokenNameIdentifier	 has More Elements
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
classname	TokenNameIdentifier	 classname
=	TokenNameEQUAL	
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
e	TokenNameIdentifier	 e
.	TokenNameDOT	
nextElement	TokenNameIdentifier	 next Element
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
location	TokenNameIdentifier	 location
=	TokenNameEQUAL	
classname	TokenNameIdentifier	 classname
.	TokenNameDOT	
replace	TokenNameIdentifier	 replace
(	TokenNameLPAREN	
'.'	TokenNameCharacterLiteral	
,	TokenNameCOMMA	
File	TokenNameIdentifier	 File
.	TokenNameDOT	
separatorChar	TokenNameIdentifier	 separator Char
)	TokenNameRPAREN	
+	TokenNamePLUS	
".class"	TokenNameStringLiteral	.class
;	TokenNameSEMICOLON	
File	TokenNameIdentifier	 File
classFile	TokenNameIdentifier	 class File
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
srcDir	TokenNameIdentifier	 src Dir
,	TokenNameCOMMA	
location	TokenNameIdentifier	 location
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
classFile	TokenNameIdentifier	 class File
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
checkEntries	TokenNameIdentifier	 check Entries
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
location	TokenNameIdentifier	 location
,	TokenNameCOMMA	
classFile	TokenNameIdentifier	 class File
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
"dependent class: "	TokenNameStringLiteral	dependent class: 
+	TokenNamePLUS	
classname	TokenNameIdentifier	 classname
+	TokenNamePLUS	
" - "	TokenNameStringLiteral	 - 
+	TokenNamePLUS	
classFile	TokenNameIdentifier	 class File
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_VERBOSE	TokenNameIdentifier	 MSG  VERBOSE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Returns a Classloader object which parses the passed in generic EjbJar classpath. * The loader is used to dynamically load classes from javax.ejb.* and the classes * being added to the jar. * @return a classloader. */	TokenNameCOMMENT_JAVADOC	 Returns a Classloader object which parses the passed in generic EjbJar classpath. The loader is used to dynamically load classes from javax.ejb.* and the classes being added to the jar. @return a classloader. 
protected	TokenNameprotected	
ClassLoader	TokenNameIdentifier	 Class Loader
getClassLoaderForBuild	TokenNameIdentifier	 get Class Loader For Build
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
classpathLoader	TokenNameIdentifier	 classpath Loader
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
classpathLoader	TokenNameIdentifier	 classpath Loader
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
Path	TokenNameIdentifier	 Path
combinedClasspath	TokenNameIdentifier	 combined Classpath
=	TokenNameEQUAL	
getCombinedClasspath	TokenNameIdentifier	 get Combined Classpath
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// only generate a new ClassLoader if we have a classpath 	TokenNameCOMMENT_LINE	only generate a new ClassLoader if we have a classpath 
if	TokenNameif	
(	TokenNameLPAREN	
combinedClasspath	TokenNameIdentifier	 combined Classpath
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
classpathLoader	TokenNameIdentifier	 classpath Loader
=	TokenNameEQUAL	
getClass	TokenNameIdentifier	 get Class
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getClassLoader	TokenNameIdentifier	 get Class Loader
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
// Memory leak in line below 	TokenNameCOMMENT_LINE	Memory leak in line below 
classpathLoader	TokenNameIdentifier	 classpath Loader
=	TokenNameEQUAL	
getTask	TokenNameIdentifier	 get Task
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getProject	TokenNameIdentifier	 get Project
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
createClassLoader	TokenNameIdentifier	 create Class Loader
(	TokenNameLPAREN	
combinedClasspath	TokenNameIdentifier	 combined Classpath
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
classpathLoader	TokenNameIdentifier	 classpath Loader
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Called to validate that the tool parameters have been configured. * * @throws BuildException If the Deployment Tool's configuration isn't * valid */	TokenNameCOMMENT_JAVADOC	 Called to validate that the tool parameters have been configured. * @throws BuildException If the Deployment Tool's configuration isn't valid 
public	TokenNamepublic	
void	TokenNamevoid	
validateConfigured	TokenNameIdentifier	 validate Configured
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
BuildException	TokenNameIdentifier	 Build Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
destDir	TokenNameIdentifier	 dest Dir
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
||	TokenNameOR_OR	
(	TokenNameLPAREN	
!	TokenNameNOT	
destDir	TokenNameIdentifier	 dest Dir
.	TokenNameDOT	
isDirectory	TokenNameIdentifier	 is Directory
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
msg	TokenNameIdentifier	 msg
=	TokenNameEQUAL	
"A valid destination directory must be specified "	TokenNameStringLiteral	A valid destination directory must be specified 
+	TokenNamePLUS	
"using the "destdir" attribute."	TokenNameStringLiteral	using the "destdir" attribute.
;	TokenNameSEMICOLON	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
msg	TokenNameIdentifier	 msg
,	TokenNameCOMMA	
getLocation	TokenNameIdentifier	 get Location
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
