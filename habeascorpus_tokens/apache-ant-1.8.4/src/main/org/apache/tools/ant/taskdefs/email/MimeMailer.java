/* * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the "License"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. * */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
taskdefs	TokenNameIdentifier	 taskdefs
.	TokenNameDOT	
email	TokenNameIdentifier	 email
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
File	TokenNameIdentifier	 File
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
InputStream	TokenNameIdentifier	 Input Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
IOException	TokenNameIdentifier	 IO Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
PrintStream	TokenNameIdentifier	 Print Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
OutputStream	TokenNameIdentifier	 Output Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
ByteArrayInputStream	TokenNameIdentifier	 Byte Array Input Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
ByteArrayOutputStream	TokenNameIdentifier	 Byte Array Output Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
UnsupportedEncodingException	TokenNameIdentifier	 Unsupported Encoding Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Enumeration	TokenNameIdentifier	 Enumeration
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Iterator	TokenNameIdentifier	 Iterator
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Locale	TokenNameIdentifier	 Locale
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Properties	TokenNameIdentifier	 Properties
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
StringTokenizer	TokenNameIdentifier	 String Tokenizer
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Vector	TokenNameIdentifier	 Vector
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
security	TokenNameIdentifier	 security
.	TokenNameDOT	
Provider	TokenNameIdentifier	 Provider
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
security	TokenNameIdentifier	 security
.	TokenNameDOT	
Security	TokenNameIdentifier	 Security
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
activation	TokenNameIdentifier	 activation
.	TokenNameDOT	
DataHandler	TokenNameIdentifier	 Data Handler
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
activation	TokenNameIdentifier	 activation
.	TokenNameDOT	
FileDataSource	TokenNameIdentifier	 File Data Source
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
mail	TokenNameIdentifier	 mail
.	TokenNameDOT	
Authenticator	TokenNameIdentifier	 Authenticator
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
mail	TokenNameIdentifier	 mail
.	TokenNameDOT	
Address	TokenNameIdentifier	 Address
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
mail	TokenNameIdentifier	 mail
.	TokenNameDOT	
Message	TokenNameIdentifier	 Message
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
mail	TokenNameIdentifier	 mail
.	TokenNameDOT	
MessagingException	TokenNameIdentifier	 Messaging Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
mail	TokenNameIdentifier	 mail
.	TokenNameDOT	
PasswordAuthentication	TokenNameIdentifier	 Password Authentication
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
mail	TokenNameIdentifier	 mail
.	TokenNameDOT	
SendFailedException	TokenNameIdentifier	 Send Failed Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
mail	TokenNameIdentifier	 mail
.	TokenNameDOT	
Session	TokenNameIdentifier	 Session
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
mail	TokenNameIdentifier	 mail
.	TokenNameDOT	
Transport	TokenNameIdentifier	 Transport
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
mail	TokenNameIdentifier	 mail
.	TokenNameDOT	
internet	TokenNameIdentifier	 internet
.	TokenNameDOT	
AddressException	TokenNameIdentifier	 Address Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
mail	TokenNameIdentifier	 mail
.	TokenNameDOT	
internet	TokenNameIdentifier	 internet
.	TokenNameDOT	
InternetAddress	TokenNameIdentifier	 Internet Address
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
mail	TokenNameIdentifier	 mail
.	TokenNameDOT	
internet	TokenNameIdentifier	 internet
.	TokenNameDOT	
MimeBodyPart	TokenNameIdentifier	 Mime Body Part
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
mail	TokenNameIdentifier	 mail
.	TokenNameDOT	
internet	TokenNameIdentifier	 internet
.	TokenNameDOT	
MimeMessage	TokenNameIdentifier	 Mime Message
;	TokenNameSEMICOLON	
import	TokenNameimport	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
mail	TokenNameIdentifier	 mail
.	TokenNameDOT	
internet	TokenNameIdentifier	 internet
.	TokenNameDOT	
MimeMultipart	TokenNameIdentifier	 Mime Multipart
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
BuildException	TokenNameIdentifier	 Build Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
tools	TokenNameIdentifier	 tools
.	TokenNameDOT	
ant	TokenNameIdentifier	 ant
.	TokenNameDOT	
Project	TokenNameIdentifier	 Project
;	TokenNameSEMICOLON	
/** * Uses the JavaMail classes to send Mime format email. * * @since Ant 1.5 */	TokenNameCOMMENT_JAVADOC	 Uses the JavaMail classes to send Mime format email. * @since Ant 1.5 
public	TokenNamepublic	
class	TokenNameclass	
MimeMailer	TokenNameIdentifier	 Mime Mailer
extends	TokenNameextends	
Mailer	TokenNameIdentifier	 Mailer
{	TokenNameLBRACE	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
SSL_FACTORY	TokenNameIdentifier	 SSL  FACTORY
=	TokenNameEQUAL	
"javax.net.ssl.SSLSocketFactory"	TokenNameStringLiteral	javax.net.ssl.SSLSocketFactory
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
GENERIC_ERROR	TokenNameIdentifier	 GENERIC  ERROR
=	TokenNameEQUAL	
"Problem while sending mime mail:"	TokenNameStringLiteral	Problem while sending mime mail:
;	TokenNameSEMICOLON	
/** Default character set */	TokenNameCOMMENT_JAVADOC	 Default character set 
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
DEFAULT_CHARSET	TokenNameIdentifier	 DEFAULT  CHARSET
=	TokenNameEQUAL	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
getProperty	TokenNameIdentifier	 get Property
(	TokenNameLPAREN	
"file.encoding"	TokenNameStringLiteral	file.encoding
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// To work properly with national charsets we have to use 	TokenNameCOMMENT_LINE	To work properly with national charsets we have to use 
// implementation of interface javax.activation.DataSource 	TokenNameCOMMENT_LINE	implementation of interface javax.activation.DataSource 
/** * String data source implementation. * @since Ant 1.6 */	TokenNameCOMMENT_JAVADOC	 String data source implementation. @since Ant 1.6 
class	TokenNameclass	
StringDataSource	TokenNameIdentifier	 String Data Source
implements	TokenNameimplements	
javax	TokenNameIdentifier	 javax
.	TokenNameDOT	
activation	TokenNameIdentifier	 activation
.	TokenNameDOT	
DataSource	TokenNameIdentifier	 Data Source
{	TokenNameLBRACE	
private	TokenNameprivate	
String	TokenNameIdentifier	 String
data	TokenNameIdentifier	 data
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
String	TokenNameIdentifier	 String
type	TokenNameIdentifier	 type
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
String	TokenNameIdentifier	 String
charset	TokenNameIdentifier	 charset
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
ByteArrayOutputStream	TokenNameIdentifier	 Byte Array Output Stream
out	TokenNameIdentifier	 out
;	TokenNameSEMICOLON	
public	TokenNamepublic	
InputStream	TokenNameIdentifier	 Input Stream
getInputStream	TokenNameIdentifier	 get Input Stream
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
data	TokenNameIdentifier	 data
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
out	TokenNameIdentifier	 out
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
IOException	TokenNameIdentifier	 IO Exception
(	TokenNameLPAREN	
"No data"	TokenNameStringLiteral	No data
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
out	TokenNameIdentifier	 out
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
encodedOut	TokenNameIdentifier	 encoded Out
=	TokenNameEQUAL	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
charset	TokenNameIdentifier	 charset
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
data	TokenNameIdentifier	 data
=	TokenNameEQUAL	
(	TokenNameLPAREN	
data	TokenNameIdentifier	 data
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
?	TokenNameQUESTION	
data	TokenNameIdentifier	 data
.	TokenNameDOT	
concat	TokenNameIdentifier	 concat
(	TokenNameLPAREN	
encodedOut	TokenNameIdentifier	 encoded Out
)	TokenNameRPAREN	
:	TokenNameCOLON	
encodedOut	TokenNameIdentifier	 encoded Out
;	TokenNameSEMICOLON	
out	TokenNameIdentifier	 out
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
new	TokenNamenew	
ByteArrayInputStream	TokenNameIdentifier	 Byte Array Input Stream
(	TokenNameLPAREN	
data	TokenNameIdentifier	 data
.	TokenNameDOT	
getBytes	TokenNameIdentifier	 get Bytes
(	TokenNameLPAREN	
charset	TokenNameIdentifier	 charset
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
OutputStream	TokenNameIdentifier	 Output Stream
getOutputStream	TokenNameIdentifier	 get Output Stream
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
out	TokenNameIdentifier	 out
=	TokenNameEQUAL	
(	TokenNameLPAREN	
out	TokenNameIdentifier	 out
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
?	TokenNameQUESTION	
new	TokenNamenew	
ByteArrayOutputStream	TokenNameIdentifier	 Byte Array Output Stream
(	TokenNameLPAREN	
)	TokenNameRPAREN	
:	TokenNameCOLON	
out	TokenNameIdentifier	 out
;	TokenNameSEMICOLON	
return	TokenNamereturn	
out	TokenNameIdentifier	 out
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
void	TokenNamevoid	
setContentType	TokenNameIdentifier	 set Content Type
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
type	TokenNameIdentifier	 type
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
type	TokenNameIdentifier	 type
=	TokenNameEQUAL	
type	TokenNameIdentifier	 type
.	TokenNameDOT	
toLowerCase	TokenNameIdentifier	 to Lower Case
(	TokenNameLPAREN	
Locale	TokenNameIdentifier	 Locale
.	TokenNameDOT	
ENGLISH	TokenNameIdentifier	 ENGLISH
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getContentType	TokenNameIdentifier	 get Content Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
type	TokenNameIdentifier	 type
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
type	TokenNameIdentifier	 type
.	TokenNameDOT	
indexOf	TokenNameIdentifier	 index Of
(	TokenNameLPAREN	
"charset"	TokenNameStringLiteral	charset
)	TokenNameRPAREN	
>	TokenNameGREATER	
0	TokenNameIntegerLiteral	
&&	TokenNameAND_AND	
type	TokenNameIdentifier	 type
.	TokenNameDOT	
startsWith	TokenNameIdentifier	 starts With
(	TokenNameLPAREN	
"text/"	TokenNameStringLiteral	text/
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
type	TokenNameIdentifier	 type
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Must be like "text/plain; charset=windows-1251" 	TokenNameCOMMENT_LINE	Must be like "text/plain; charset=windows-1251" 
return	TokenNamereturn	
new	TokenNamenew	
StringBuffer	TokenNameIdentifier	 String Buffer
(	TokenNameLPAREN	
type	TokenNameIdentifier	 type
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
?	TokenNameQUESTION	
type	TokenNameIdentifier	 type
:	TokenNameCOLON	
"text/plain"	TokenNameStringLiteral	text/plain
)	TokenNameRPAREN	
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
"; charset="	TokenNameStringLiteral	; charset=
)	TokenNameRPAREN	
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
charset	TokenNameIdentifier	 charset
)	TokenNameRPAREN	
.	TokenNameDOT	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
"StringDataSource"	TokenNameStringLiteral	StringDataSource
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
void	TokenNamevoid	
setCharset	TokenNameIdentifier	 set Charset
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
charset	TokenNameIdentifier	 charset
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
charset	TokenNameIdentifier	 charset
=	TokenNameEQUAL	
charset	TokenNameIdentifier	 charset
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getCharset	TokenNameIdentifier	 get Charset
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
charset	TokenNameIdentifier	 charset
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Send the email. * * @throws BuildException if the email can't be sent. */	TokenNameCOMMENT_JAVADOC	 Send the email. * @throws BuildException if the email can't be sent. 
public	TokenNamepublic	
void	TokenNamevoid	
send	TokenNameIdentifier	 send
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
Properties	TokenNameIdentifier	 Properties
props	TokenNameIdentifier	 props
=	TokenNameEQUAL	
new	TokenNamenew	
Properties	TokenNameIdentifier	 Properties
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
props	TokenNameIdentifier	 props
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
"mail.smtp.host"	TokenNameStringLiteral	mail.smtp.host
,	TokenNameCOMMA	
host	TokenNameIdentifier	 host
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
props	TokenNameIdentifier	 props
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
"mail.smtp.port"	TokenNameStringLiteral	mail.smtp.port
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
.	TokenNameDOT	
valueOf	TokenNameIdentifier	 value Of
(	TokenNameLPAREN	
port	TokenNameIdentifier	 port
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Aside, the JDK is clearly unaware of the Scottish 	TokenNameCOMMENT_LINE	Aside, the JDK is clearly unaware of the Scottish 
// 'session', which involves excessive quantities of 	TokenNameCOMMENT_LINE	'session', which involves excessive quantities of 
// alcohol :-) 	TokenNameCOMMENT_LINE	alcohol :-) 
Session	TokenNameIdentifier	 Session
sesh	TokenNameIdentifier	 sesh
;	TokenNameSEMICOLON	
Authenticator	TokenNameIdentifier	 Authenticator
auth	TokenNameIdentifier	 auth
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
SSL	TokenNameIdentifier	 SSL
)	TokenNameRPAREN	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
Provider	TokenNameIdentifier	 Provider
p	TokenNameIdentifier	 p
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Provider	TokenNameIdentifier	 Provider
)	TokenNameRPAREN	
Class	TokenNameIdentifier	 Class
.	TokenNameDOT	
forName	TokenNameIdentifier	 for Name
(	TokenNameLPAREN	
"com.sun.net.ssl.internal.ssl.Provider"	TokenNameStringLiteral	com.sun.net.ssl.internal.ssl.Provider
)	TokenNameRPAREN	
.	TokenNameDOT	
newInstance	TokenNameIdentifier	 new Instance
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Security	TokenNameIdentifier	 Security
.	TokenNameDOT	
addProvider	TokenNameIdentifier	 add Provider
(	TokenNameLPAREN	
p	TokenNameIdentifier	 p
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
Exception	TokenNameIdentifier	 Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"could not instantiate ssl "	TokenNameStringLiteral	could not instantiate ssl 
+	TokenNamePLUS	
"security provider, check that you have JSSE in "	TokenNameStringLiteral	security provider, check that you have JSSE in 
+	TokenNamePLUS	
"your classpath"	TokenNameStringLiteral	your classpath
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// SMTP provider 	TokenNameCOMMENT_LINE	SMTP provider 
props	TokenNameIdentifier	 props
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
"mail.smtp.socketFactory.class"	TokenNameStringLiteral	mail.smtp.socketFactory.class
,	TokenNameCOMMA	
SSL_FACTORY	TokenNameIdentifier	 SSL  FACTORY
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
props	TokenNameIdentifier	 props
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
"mail.smtp.socketFactory.fallback"	TokenNameStringLiteral	mail.smtp.socketFactory.fallback
,	TokenNameCOMMA	
"false"	TokenNameStringLiteral	false
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
isPortExplicitlySpecified	TokenNameIdentifier	 is Port Explicitly Specified
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
props	TokenNameIdentifier	 props
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
"mail.smtp.socketFactory.port"	TokenNameStringLiteral	mail.smtp.socketFactory.port
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
.	TokenNameDOT	
valueOf	TokenNameIdentifier	 value Of
(	TokenNameLPAREN	
port	TokenNameIdentifier	 port
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
user	TokenNameIdentifier	 user
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
||	TokenNameOR_OR	
password	TokenNameIdentifier	 password
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
props	TokenNameIdentifier	 props
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
"mail.smtp.auth"	TokenNameStringLiteral	mail.smtp.auth
,	TokenNameCOMMA	
"true"	TokenNameStringLiteral	true
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
auth	TokenNameIdentifier	 auth
=	TokenNameEQUAL	
new	TokenNamenew	
SimpleAuthenticator	TokenNameIdentifier	 Simple Authenticator
(	TokenNameLPAREN	
user	TokenNameIdentifier	 user
,	TokenNameCOMMA	
password	TokenNameIdentifier	 password
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
isStartTLSEnabled	TokenNameIdentifier	 is Start TLS Enabled
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
props	TokenNameIdentifier	 props
.	TokenNameDOT	
put	TokenNameIdentifier	 put
(	TokenNameLPAREN	
"mail.smtp.starttls.enable"	TokenNameStringLiteral	mail.smtp.starttls.enable
,	TokenNameCOMMA	
"true"	TokenNameStringLiteral	true
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
sesh	TokenNameIdentifier	 sesh
=	TokenNameEQUAL	
Session	TokenNameIdentifier	 Session
.	TokenNameDOT	
getInstance	TokenNameIdentifier	 get Instance
(	TokenNameLPAREN	
props	TokenNameIdentifier	 props
,	TokenNameCOMMA	
auth	TokenNameIdentifier	 auth
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
//create the message 	TokenNameCOMMENT_LINE	create the message 
MimeMessage	TokenNameIdentifier	 Mime Message
msg	TokenNameIdentifier	 msg
=	TokenNameEQUAL	
new	TokenNamenew	
MimeMessage	TokenNameIdentifier	 Mime Message
(	TokenNameLPAREN	
sesh	TokenNameIdentifier	 sesh
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
MimeMultipart	TokenNameIdentifier	 Mime Multipart
attachments	TokenNameIdentifier	 attachments
=	TokenNameEQUAL	
new	TokenNamenew	
MimeMultipart	TokenNameIdentifier	 Mime Multipart
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
//set the sender 	TokenNameCOMMENT_LINE	set the sender 
if	TokenNameif	
(	TokenNameLPAREN	
from	TokenNameIdentifier	 from
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
msg	TokenNameIdentifier	 msg
.	TokenNameDOT	
setFrom	TokenNameIdentifier	 set From
(	TokenNameLPAREN	
new	TokenNamenew	
InternetAddress	TokenNameIdentifier	 Internet Address
(	TokenNameLPAREN	
from	TokenNameIdentifier	 from
.	TokenNameDOT	
getAddress	TokenNameIdentifier	 get Address
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
msg	TokenNameIdentifier	 msg
.	TokenNameDOT	
setFrom	TokenNameIdentifier	 set From
(	TokenNameLPAREN	
new	TokenNamenew	
InternetAddress	TokenNameIdentifier	 Internet Address
(	TokenNameLPAREN	
from	TokenNameIdentifier	 from
.	TokenNameDOT	
getAddress	TokenNameIdentifier	 get Address
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
from	TokenNameIdentifier	 from
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// set the reply to addresses 	TokenNameCOMMENT_LINE	set the reply to addresses 
msg	TokenNameIdentifier	 msg
.	TokenNameDOT	
setReplyTo	TokenNameIdentifier	 set Reply To
(	TokenNameLPAREN	
internetAddresses	TokenNameIdentifier	 internet Addresses
(	TokenNameLPAREN	
replyToList	TokenNameIdentifier	 reply To List
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
msg	TokenNameIdentifier	 msg
.	TokenNameDOT	
setRecipients	TokenNameIdentifier	 set Recipients
(	TokenNameLPAREN	
Message	TokenNameIdentifier	 Message
.	TokenNameDOT	
RecipientType	TokenNameIdentifier	 Recipient Type
.	TokenNameDOT	
TO	TokenNameIdentifier	 TO
,	TokenNameCOMMA	
internetAddresses	TokenNameIdentifier	 internet Addresses
(	TokenNameLPAREN	
toList	TokenNameIdentifier	 to List
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
msg	TokenNameIdentifier	 msg
.	TokenNameDOT	
setRecipients	TokenNameIdentifier	 set Recipients
(	TokenNameLPAREN	
Message	TokenNameIdentifier	 Message
.	TokenNameDOT	
RecipientType	TokenNameIdentifier	 Recipient Type
.	TokenNameDOT	
CC	TokenNameIdentifier	 CC
,	TokenNameCOMMA	
internetAddresses	TokenNameIdentifier	 internet Addresses
(	TokenNameLPAREN	
ccList	TokenNameIdentifier	 cc List
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
msg	TokenNameIdentifier	 msg
.	TokenNameDOT	
setRecipients	TokenNameIdentifier	 set Recipients
(	TokenNameLPAREN	
Message	TokenNameIdentifier	 Message
.	TokenNameDOT	
RecipientType	TokenNameIdentifier	 Recipient Type
.	TokenNameDOT	
BCC	TokenNameIdentifier	 BCC
,	TokenNameCOMMA	
internetAddresses	TokenNameIdentifier	 internet Addresses
(	TokenNameLPAREN	
bccList	TokenNameIdentifier	 bcc List
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Choosing character set of the mail message 	TokenNameCOMMENT_LINE	Choosing character set of the mail message 
// First: looking it from MimeType 	TokenNameCOMMENT_LINE	First: looking it from MimeType 
String	TokenNameIdentifier	 String
charset	TokenNameIdentifier	 charset
=	TokenNameEQUAL	
parseCharSetFromMimeType	TokenNameIdentifier	 parse Char Set From Mime Type
(	TokenNameLPAREN	
message	TokenNameIdentifier	 message
.	TokenNameDOT	
getMimeType	TokenNameIdentifier	 get Mime Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
charset	TokenNameIdentifier	 charset
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Assign/reassign message charset from MimeType 	TokenNameCOMMENT_LINE	Assign/reassign message charset from MimeType 
message	TokenNameIdentifier	 message
.	TokenNameDOT	
setCharset	TokenNameIdentifier	 set Charset
(	TokenNameLPAREN	
charset	TokenNameIdentifier	 charset
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
// Next: looking if charset having explicit definition 	TokenNameCOMMENT_LINE	Next: looking if charset having explicit definition 
charset	TokenNameIdentifier	 charset
=	TokenNameEQUAL	
message	TokenNameIdentifier	 message
.	TokenNameDOT	
getCharset	TokenNameIdentifier	 get Charset
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
charset	TokenNameIdentifier	 charset
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Using default 	TokenNameCOMMENT_LINE	Using default 
charset	TokenNameIdentifier	 charset
=	TokenNameEQUAL	
DEFAULT_CHARSET	TokenNameIdentifier	 DEFAULT  CHARSET
;	TokenNameSEMICOLON	
message	TokenNameIdentifier	 message
.	TokenNameDOT	
setCharset	TokenNameIdentifier	 set Charset
(	TokenNameLPAREN	
charset	TokenNameIdentifier	 charset
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// Using javax.activation.DataSource paradigm 	TokenNameCOMMENT_LINE	Using javax.activation.DataSource paradigm 
StringDataSource	TokenNameIdentifier	 String Data Source
sds	TokenNameIdentifier	 sds
=	TokenNameEQUAL	
new	TokenNamenew	
StringDataSource	TokenNameIdentifier	 String Data Source
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
sds	TokenNameIdentifier	 sds
.	TokenNameDOT	
setContentType	TokenNameIdentifier	 set Content Type
(	TokenNameLPAREN	
message	TokenNameIdentifier	 message
.	TokenNameDOT	
getMimeType	TokenNameIdentifier	 get Mime Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
sds	TokenNameIdentifier	 sds
.	TokenNameDOT	
setCharset	TokenNameIdentifier	 set Charset
(	TokenNameLPAREN	
charset	TokenNameIdentifier	 charset
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
subject	TokenNameIdentifier	 subject
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
msg	TokenNameIdentifier	 msg
.	TokenNameDOT	
setSubject	TokenNameIdentifier	 set Subject
(	TokenNameLPAREN	
subject	TokenNameIdentifier	 subject
,	TokenNameCOMMA	
charset	TokenNameIdentifier	 charset
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
msg	TokenNameIdentifier	 msg
.	TokenNameDOT	
addHeader	TokenNameIdentifier	 add Header
(	TokenNameLPAREN	
"Date"	TokenNameStringLiteral	Date
,	TokenNameCOMMA	
getDate	TokenNameIdentifier	 get Date
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
headers	TokenNameIdentifier	 headers
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
Iterator	TokenNameIdentifier	 Iterator
iter	TokenNameIdentifier	 iter
=	TokenNameEQUAL	
headers	TokenNameIdentifier	 headers
.	TokenNameDOT	
iterator	TokenNameIdentifier	 iterator
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
hasNext	TokenNameIdentifier	 has Next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
Header	TokenNameIdentifier	 Header
h	TokenNameIdentifier	 h
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Header	TokenNameIdentifier	 Header
)	TokenNameRPAREN	
iter	TokenNameIdentifier	 iter
.	TokenNameDOT	
next	TokenNameIdentifier	 next
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
msg	TokenNameIdentifier	 msg
.	TokenNameDOT	
addHeader	TokenNameIdentifier	 add Header
(	TokenNameLPAREN	
h	TokenNameIdentifier	 h
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
h	TokenNameIdentifier	 h
.	TokenNameDOT	
getValue	TokenNameIdentifier	 get Value
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
PrintStream	TokenNameIdentifier	 Print Stream
out	TokenNameIdentifier	 out
=	TokenNameEQUAL	
new	TokenNamenew	
PrintStream	TokenNameIdentifier	 Print Stream
(	TokenNameLPAREN	
sds	TokenNameIdentifier	 sds
.	TokenNameDOT	
getOutputStream	TokenNameIdentifier	 get Output Stream
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
message	TokenNameIdentifier	 message
.	TokenNameDOT	
print	TokenNameIdentifier	 print
(	TokenNameLPAREN	
out	TokenNameIdentifier	 out
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
MimeBodyPart	TokenNameIdentifier	 Mime Body Part
textbody	TokenNameIdentifier	 textbody
=	TokenNameEQUAL	
new	TokenNamenew	
MimeBodyPart	TokenNameIdentifier	 Mime Body Part
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
textbody	TokenNameIdentifier	 textbody
.	TokenNameDOT	
setDataHandler	TokenNameIdentifier	 set Data Handler
(	TokenNameLPAREN	
new	TokenNamenew	
DataHandler	TokenNameIdentifier	 Data Handler
(	TokenNameLPAREN	
sds	TokenNameIdentifier	 sds
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
attachments	TokenNameIdentifier	 attachments
.	TokenNameDOT	
addBodyPart	TokenNameIdentifier	 add Body Part
(	TokenNameLPAREN	
textbody	TokenNameIdentifier	 textbody
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Enumeration	TokenNameIdentifier	 Enumeration
e	TokenNameIdentifier	 e
=	TokenNameEQUAL	
files	TokenNameIdentifier	 files
.	TokenNameDOT	
elements	TokenNameIdentifier	 elements
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
e	TokenNameIdentifier	 e
.	TokenNameDOT	
hasMoreElements	TokenNameIdentifier	 has More Elements
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
File	TokenNameIdentifier	 File
file	TokenNameIdentifier	 file
=	TokenNameEQUAL	
(	TokenNameLPAREN	
File	TokenNameIdentifier	 File
)	TokenNameRPAREN	
e	TokenNameIdentifier	 e
.	TokenNameDOT	
nextElement	TokenNameIdentifier	 next Element
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
MimeBodyPart	TokenNameIdentifier	 Mime Body Part
body	TokenNameIdentifier	 body
;	TokenNameSEMICOLON	
body	TokenNameIdentifier	 body
=	TokenNameEQUAL	
new	TokenNamenew	
MimeBodyPart	TokenNameIdentifier	 Mime Body Part
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
exists	TokenNameIdentifier	 exists
(	TokenNameLPAREN	
)	TokenNameRPAREN	
||	TokenNameOR_OR	
!	TokenNameNOT	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
canRead	TokenNameIdentifier	 can Read
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"File ""	TokenNameStringLiteral	File "
+	TokenNamePLUS	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
"" does not exist or is not "	TokenNameStringLiteral	" does not exist or is not 
+	TokenNamePLUS	
"readable."	TokenNameStringLiteral	readable.
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
FileDataSource	TokenNameIdentifier	 File Data Source
fileData	TokenNameIdentifier	 file Data
=	TokenNameEQUAL	
new	TokenNamenew	
FileDataSource	TokenNameIdentifier	 File Data Source
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
DataHandler	TokenNameIdentifier	 Data Handler
fileDataHandler	TokenNameIdentifier	 file Data Handler
=	TokenNameEQUAL	
new	TokenNamenew	
DataHandler	TokenNameIdentifier	 Data Handler
(	TokenNameLPAREN	
fileData	TokenNameIdentifier	 file Data
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
body	TokenNameIdentifier	 body
.	TokenNameDOT	
setDataHandler	TokenNameIdentifier	 set Data Handler
(	TokenNameLPAREN	
fileDataHandler	TokenNameIdentifier	 file Data Handler
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
body	TokenNameIdentifier	 body
.	TokenNameDOT	
setFileName	TokenNameIdentifier	 set File Name
(	TokenNameLPAREN	
file	TokenNameIdentifier	 file
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
attachments	TokenNameIdentifier	 attachments
.	TokenNameDOT	
addBodyPart	TokenNameIdentifier	 add Body Part
(	TokenNameLPAREN	
body	TokenNameIdentifier	 body
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
msg	TokenNameIdentifier	 msg
.	TokenNameDOT	
setContent	TokenNameIdentifier	 set Content
(	TokenNameLPAREN	
attachments	TokenNameIdentifier	 attachments
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
try	TokenNametry	
{	TokenNameLBRACE	
// Send the message using SMTP, or SMTPS if the host uses SSL 	TokenNameCOMMENT_LINE	Send the message using SMTP, or SMTPS if the host uses SSL 
Transport	TokenNameIdentifier	 Transport
transport	TokenNameIdentifier	 transport
=	TokenNameEQUAL	
sesh	TokenNameIdentifier	 sesh
.	TokenNameDOT	
getTransport	TokenNameIdentifier	 get Transport
(	TokenNameLPAREN	
SSL	TokenNameIdentifier	 SSL
?	TokenNameQUESTION	
"smtps"	TokenNameStringLiteral	smtps
:	TokenNameCOLON	
"smtp"	TokenNameStringLiteral	smtp
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
transport	TokenNameIdentifier	 transport
.	TokenNameDOT	
connect	TokenNameIdentifier	 connect
(	TokenNameLPAREN	
host	TokenNameIdentifier	 host
,	TokenNameCOMMA	
user	TokenNameIdentifier	 user
,	TokenNameCOMMA	
password	TokenNameIdentifier	 password
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
transport	TokenNameIdentifier	 transport
.	TokenNameDOT	
sendMessage	TokenNameIdentifier	 send Message
(	TokenNameLPAREN	
msg	TokenNameIdentifier	 msg
,	TokenNameCOMMA	
msg	TokenNameIdentifier	 msg
.	TokenNameDOT	
getAllRecipients	TokenNameIdentifier	 get All Recipients
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
SendFailedException	TokenNameIdentifier	 Send Failed Exception
sfe	TokenNameIdentifier	 sfe
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
shouldIgnoreInvalidRecipients	TokenNameIdentifier	 should Ignore Invalid Recipients
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
GENERIC_ERROR	TokenNameIdentifier	 GENERIC  ERROR
,	TokenNameCOMMA	
sfe	TokenNameIdentifier	 sfe
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
sfe	TokenNameIdentifier	 sfe
.	TokenNameDOT	
getValidSentAddresses	TokenNameIdentifier	 get Valid Sent Addresses
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
||	TokenNameOR_OR	
sfe	TokenNameIdentifier	 sfe
.	TokenNameDOT	
getValidSentAddresses	TokenNameIdentifier	 get Valid Sent Addresses
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
length	TokenNameIdentifier	 length
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
"Couldn't reach any recipient"	TokenNameStringLiteral	Couldn't reach any recipient
,	TokenNameCOMMA	
sfe	TokenNameIdentifier	 sfe
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
Address	TokenNameIdentifier	 Address
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
invalid	TokenNameIdentifier	 invalid
=	TokenNameEQUAL	
sfe	TokenNameIdentifier	 sfe
.	TokenNameDOT	
getInvalidAddresses	TokenNameIdentifier	 get Invalid Addresses
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
invalid	TokenNameIdentifier	 invalid
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
invalid	TokenNameIdentifier	 invalid
=	TokenNameEQUAL	
new	TokenNamenew	
Address	TokenNameIdentifier	 Address
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
invalid	TokenNameIdentifier	 invalid
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
didntReach	TokenNameIdentifier	 didnt Reach
(	TokenNameLPAREN	
invalid	TokenNameIdentifier	 invalid
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
,	TokenNameCOMMA	
"invalid"	TokenNameStringLiteral	invalid
,	TokenNameCOMMA	
sfe	TokenNameIdentifier	 sfe
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
Address	TokenNameIdentifier	 Address
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
validUnsent	TokenNameIdentifier	 valid Unsent
=	TokenNameEQUAL	
sfe	TokenNameIdentifier	 sfe
.	TokenNameDOT	
getValidUnsentAddresses	TokenNameIdentifier	 get Valid Unsent Addresses
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
validUnsent	TokenNameIdentifier	 valid Unsent
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
validUnsent	TokenNameIdentifier	 valid Unsent
=	TokenNameEQUAL	
new	TokenNamenew	
Address	TokenNameIdentifier	 Address
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
validUnsent	TokenNameIdentifier	 valid Unsent
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
didntReach	TokenNameIdentifier	 didnt Reach
(	TokenNameLPAREN	
validUnsent	TokenNameIdentifier	 valid Unsent
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
,	TokenNameCOMMA	
"valid"	TokenNameStringLiteral	valid
,	TokenNameCOMMA	
sfe	TokenNameIdentifier	 sfe
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
MessagingException	TokenNameIdentifier	 Messaging Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
GENERIC_ERROR	TokenNameIdentifier	 GENERIC  ERROR
,	TokenNameCOMMA	
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BuildException	TokenNameIdentifier	 Build Exception
(	TokenNameLPAREN	
GENERIC_ERROR	TokenNameIdentifier	 GENERIC  ERROR
,	TokenNameCOMMA	
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
private	TokenNameprivate	
static	TokenNamestatic	
InternetAddress	TokenNameIdentifier	 Internet Address
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
internetAddresses	TokenNameIdentifier	 internet Addresses
(	TokenNameLPAREN	
Vector	TokenNameIdentifier	 Vector
list	TokenNameIdentifier	 list
)	TokenNameRPAREN	
throws	TokenNamethrows	
AddressException	TokenNameIdentifier	 Address Exception
,	TokenNameCOMMA	
UnsupportedEncodingException	TokenNameIdentifier	 Unsupported Encoding Exception
{	TokenNameLBRACE	
final	TokenNamefinal	
int	TokenNameint	
size	TokenNameIdentifier	 size
=	TokenNameEQUAL	
list	TokenNameIdentifier	 list
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
InternetAddress	TokenNameIdentifier	 Internet Address
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
addrs	TokenNameIdentifier	 addrs
=	TokenNameEQUAL	
new	TokenNamenew	
InternetAddress	TokenNameIdentifier	 Internet Address
[	TokenNameLBRACKET	
size	TokenNameIdentifier	 size
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
size	TokenNameIdentifier	 size
;	TokenNameSEMICOLON	
++	TokenNamePLUS_PLUS	
i	TokenNameIdentifier	 i
)	TokenNameRPAREN	
{	TokenNameLBRACE	
EmailAddress	TokenNameIdentifier	 Email Address
addr	TokenNameIdentifier	 addr
=	TokenNameEQUAL	
(	TokenNameLPAREN	
EmailAddress	TokenNameIdentifier	 Email Address
)	TokenNameRPAREN	
list	TokenNameIdentifier	 list
.	TokenNameDOT	
elementAt	TokenNameIdentifier	 element At
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
name	TokenNameIdentifier	 name
=	TokenNameEQUAL	
addr	TokenNameIdentifier	 addr
.	TokenNameDOT	
getName	TokenNameIdentifier	 get Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
addrs	TokenNameIdentifier	 addrs
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
=	TokenNameEQUAL	
(	TokenNameLPAREN	
name	TokenNameIdentifier	 name
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
?	TokenNameQUESTION	
new	TokenNamenew	
InternetAddress	TokenNameIdentifier	 Internet Address
(	TokenNameLPAREN	
addr	TokenNameIdentifier	 addr
.	TokenNameDOT	
getAddress	TokenNameIdentifier	 get Address
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
:	TokenNameCOLON	
new	TokenNamenew	
InternetAddress	TokenNameIdentifier	 Internet Address
(	TokenNameLPAREN	
addr	TokenNameIdentifier	 addr
.	TokenNameDOT	
getAddress	TokenNameIdentifier	 get Address
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
name	TokenNameIdentifier	 name
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
addrs	TokenNameIdentifier	 addrs
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
String	TokenNameIdentifier	 String
parseCharSetFromMimeType	TokenNameIdentifier	 parse Char Set From Mime Type
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
type	TokenNameIdentifier	 type
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
type	TokenNameIdentifier	 type
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
int	TokenNameint	
pos	TokenNameIdentifier	 pos
=	TokenNameEQUAL	
type	TokenNameIdentifier	 type
.	TokenNameDOT	
indexOf	TokenNameIdentifier	 index Of
(	TokenNameLPAREN	
"charset"	TokenNameStringLiteral	charset
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
pos	TokenNameIdentifier	 pos
<	TokenNameLESS	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Assuming mime type in form "text/XXXX; charset=XXXXXX" 	TokenNameCOMMENT_LINE	Assuming mime type in form "text/XXXX; charset=XXXXXX" 
StringTokenizer	TokenNameIdentifier	 String Tokenizer
token	TokenNameIdentifier	 token
=	TokenNameEQUAL	
new	TokenNamenew	
StringTokenizer	TokenNameIdentifier	 String Tokenizer
(	TokenNameLPAREN	
type	TokenNameIdentifier	 type
.	TokenNameDOT	
substring	TokenNameIdentifier	 substring
(	TokenNameLPAREN	
pos	TokenNameIdentifier	 pos
)	TokenNameRPAREN	
,	TokenNameCOMMA	
"=; "	TokenNameStringLiteral	=; 
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
token	TokenNameIdentifier	 token
.	TokenNameDOT	
nextToken	TokenNameIdentifier	 next Token
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Skip 'charset=' 	TokenNameCOMMENT_LINE	Skip 'charset=' 
return	TokenNamereturn	
token	TokenNameIdentifier	 token
.	TokenNameDOT	
nextToken	TokenNameIdentifier	 next Token
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
void	TokenNamevoid	
didntReach	TokenNameIdentifier	 didnt Reach
(	TokenNameLPAREN	
Address	TokenNameIdentifier	 Address
addr	TokenNameIdentifier	 addr
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
category	TokenNameIdentifier	 category
,	TokenNameCOMMA	
MessagingException	TokenNameIdentifier	 Messaging Exception
ex	TokenNameIdentifier	 ex
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
msg	TokenNameIdentifier	 msg
=	TokenNameEQUAL	
"Failed to send mail to "	TokenNameStringLiteral	Failed to send mail to 
+	TokenNamePLUS	
category	TokenNameIdentifier	 category
+	TokenNamePLUS	
" address "	TokenNameStringLiteral	 address 
+	TokenNamePLUS	
addr	TokenNameIdentifier	 addr
+	TokenNamePLUS	
" because of "	TokenNameStringLiteral	 because of 
+	TokenNamePLUS	
ex	TokenNameIdentifier	 ex
.	TokenNameDOT	
getMessage	TokenNameIdentifier	 get Message
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
task	TokenNameIdentifier	 task
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
task	TokenNameIdentifier	 task
.	TokenNameDOT	
log	TokenNameIdentifier	 log
(	TokenNameLPAREN	
msg	TokenNameIdentifier	 msg
,	TokenNameCOMMA	
Project	TokenNameIdentifier	 Project
.	TokenNameDOT	
MSG_WARN	TokenNameIdentifier	 MSG  WARN
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
err	TokenNameIdentifier	 err
.	TokenNameDOT	
println	TokenNameIdentifier	 println
(	TokenNameLPAREN	
msg	TokenNameIdentifier	 msg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
static	TokenNamestatic	
class	TokenNameclass	
SimpleAuthenticator	TokenNameIdentifier	 Simple Authenticator
extends	TokenNameextends	
Authenticator	TokenNameIdentifier	 Authenticator
{	TokenNameLBRACE	
private	TokenNameprivate	
String	TokenNameIdentifier	 String
user	TokenNameIdentifier	 user
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
String	TokenNameIdentifier	 String
password	TokenNameIdentifier	 password
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
public	TokenNamepublic	
SimpleAuthenticator	TokenNameIdentifier	 Simple Authenticator
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
user	TokenNameIdentifier	 user
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
password	TokenNameIdentifier	 password
)	TokenNameRPAREN	
{	TokenNameLBRACE	
this	TokenNamethis	
.	TokenNameDOT	
user	TokenNameIdentifier	 user
=	TokenNameEQUAL	
user	TokenNameIdentifier	 user
;	TokenNameSEMICOLON	
this	TokenNamethis	
.	TokenNameDOT	
password	TokenNameIdentifier	 password
=	TokenNameEQUAL	
password	TokenNameIdentifier	 password
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
PasswordAuthentication	TokenNameIdentifier	 Password Authentication
getPasswordAuthentication	TokenNameIdentifier	 get Password Authentication
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
new	TokenNamenew	
PasswordAuthentication	TokenNameIdentifier	 Password Authentication
(	TokenNameLPAREN	
user	TokenNameIdentifier	 user
,	TokenNameCOMMA	
password	TokenNameIdentifier	 password
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
