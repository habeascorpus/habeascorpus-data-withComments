package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
benchmark	TokenNameIdentifier	 benchmark
.	TokenNameDOT	
byTask	TokenNameIdentifier	 by Task
.	TokenNameDOT	
feeds	TokenNameIdentifier	 feeds
;	TokenNameSEMICOLON	
/** * Licensed to the Apache Software Foundation (ASF) under one or more * contributor license agreements. See the NOTICE file distributed with * this work for additional information regarding copyright ownership. * The ASF licenses this file to You under the Apache License, Version 2.0 * (the "License"); you may not use this file except in compliance with * the License. You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */	TokenNameCOMMENT_JAVADOC	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
BufferedReader	TokenNameIdentifier	 Buffered Reader
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
File	TokenNameIdentifier	 File
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
IOException	TokenNameIdentifier	 IO Exception
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
InputStream	TokenNameIdentifier	 Input Stream
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
InputStreamReader	TokenNameIdentifier	 Input Stream Reader
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
io	TokenNameIdentifier	 io
.	TokenNameDOT	
Reader	TokenNameIdentifier	 Reader
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
text	TokenNameIdentifier	 text
.	TokenNameDOT	
DateFormat	TokenNameIdentifier	 Date Format
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
text	TokenNameIdentifier	 text
.	TokenNameDOT	
ParsePosition	TokenNameIdentifier	 Parse Position
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
text	TokenNameIdentifier	 text
.	TokenNameDOT	
SimpleDateFormat	TokenNameIdentifier	 Simple Date Format
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ArrayList	TokenNameIdentifier	 Array List
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Date	TokenNameIdentifier	 Date
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Locale	TokenNameIdentifier	 Locale
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
benchmark	TokenNameIdentifier	 benchmark
.	TokenNameDOT	
byTask	TokenNameIdentifier	 by Task
.	TokenNameDOT	
feeds	TokenNameIdentifier	 feeds
.	TokenNameDOT	
TrecDocParser	TokenNameIdentifier	 Trec Doc Parser
.	TokenNameDOT	
ParsePathType	TokenNameIdentifier	 Parse Path Type
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
benchmark	TokenNameIdentifier	 benchmark
.	TokenNameDOT	
byTask	TokenNameIdentifier	 by Task
.	TokenNameDOT	
utils	TokenNameIdentifier	 utils
.	TokenNameDOT	
Config	TokenNameIdentifier	 Config
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
benchmark	TokenNameIdentifier	 benchmark
.	TokenNameDOT	
byTask	TokenNameIdentifier	 by Task
.	TokenNameDOT	
utils	TokenNameIdentifier	 utils
.	TokenNameDOT	
StreamUtils	TokenNameIdentifier	 Stream Utils
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
benchmark	TokenNameIdentifier	 benchmark
.	TokenNameDOT	
byTask	TokenNameIdentifier	 by Task
.	TokenNameDOT	
utils	TokenNameIdentifier	 utils
.	TokenNameDOT	
StringBuilderReader	TokenNameIdentifier	 String Builder Reader
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
lucene	TokenNameIdentifier	 lucene
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ThreadInterruptedException	TokenNameIdentifier	 Thread Interrupted Exception
;	TokenNameSEMICOLON	
/** * Implements a {@link ContentSource} over the TREC collection. * <p> * Supports the following configuration parameters (on top of * {@link ContentSource}): * <ul> * <li><b>work.dir</b> - specifies the working directory. Required if "docs.dir" * denotes a relative path (<b>default=work</b>). * <li><b>docs.dir</b> - specifies the directory where the TREC files reside. * Can be set to a relative path if "work.dir" is also specified * (<b>default=trec</b>). * <li><b>trec.doc.parser</b> - specifies the {@link TrecDocParser} class to use for * parsing the TREC documents content (<b>default=TrecGov2Parser</b>). * <li><b>html.parser</b> - specifies the {@link HTMLParser} class to use for * parsing the HTML parts of the TREC documents content (<b>default=DemoHTMLParser</b>). * <li><b>content.source.encoding</b> - if not specified, ISO-8859-1 is used. * <li><b>content.source.excludeIteration</b> - if true, do not append iteration number to docname * </ul> */	TokenNameCOMMENT_JAVADOC	 Implements a {@link ContentSource} over the TREC collection. <p> Supports the following configuration parameters (on top of {@link ContentSource}): <ul> <li><b>work.dir</b> - specifies the working directory. Required if "docs.dir" denotes a relative path (<b>default=work</b>). <li><b>docs.dir</b> - specifies the directory where the TREC files reside. Can be set to a relative path if "work.dir" is also specified (<b>default=trec</b>). <li><b>trec.doc.parser</b> - specifies the {@link TrecDocParser} class to use for parsing the TREC documents content (<b>default=TrecGov2Parser</b>). <li><b>html.parser</b> - specifies the {@link HTMLParser} class to use for parsing the HTML parts of the TREC documents content (<b>default=DemoHTMLParser</b>). <li><b>content.source.encoding</b> - if not specified, ISO-8859-1 is used. <li><b>content.source.excludeIteration</b> - if true, do not append iteration number to docname </ul> 
public	TokenNamepublic	
class	TokenNameclass	
TrecContentSource	TokenNameIdentifier	 Trec Content Source
extends	TokenNameextends	
ContentSource	TokenNameIdentifier	 Content Source
{	TokenNameLBRACE	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
class	TokenNameclass	
DateFormatInfo	TokenNameIdentifier	 Date Format Info
{	TokenNameLBRACE	
DateFormatInfo	TokenNameIdentifier	 Date Format Info
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
}	TokenNameRBRACE	
DateFormat	TokenNameIdentifier	 Date Format
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
dfs	TokenNameIdentifier	 dfs
;	TokenNameSEMICOLON	
ParsePosition	TokenNameIdentifier	 Parse Position
pos	TokenNameIdentifier	 pos
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
DOCNO	TokenNameIdentifier	 DOCNO
=	TokenNameEQUAL	
"<DOCNO>"	TokenNameStringLiteral	<DOCNO>
;	TokenNameSEMICOLON	
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
TERMINATING_DOCNO	TokenNameIdentifier	 TERMINATING  DOCNO
=	TokenNameEQUAL	
"</DOCNO>"	TokenNameStringLiteral	</DOCNO>
;	TokenNameSEMICOLON	
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
DOC	TokenNameIdentifier	 DOC
=	TokenNameEQUAL	
"<DOC>"	TokenNameStringLiteral	<DOC>
;	TokenNameSEMICOLON	
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
TERMINATING_DOC	TokenNameIdentifier	 TERMINATING  DOC
=	TokenNameEQUAL	
"</DOC>"	TokenNameStringLiteral	</DOC>
;	TokenNameSEMICOLON	
/** separator between lines in the byffer */	TokenNameCOMMENT_JAVADOC	 separator between lines in the byffer 
public	TokenNamepublic	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
NEW_LINE	TokenNameIdentifier	 NEW  LINE
=	TokenNameEQUAL	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
getProperty	TokenNameIdentifier	 get Property
(	TokenNameLPAREN	
"line.separator"	TokenNameStringLiteral	line.separator
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
static	TokenNamestatic	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
DATE_FORMATS	TokenNameIdentifier	 DATE  FORMATS
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
=	TokenNameEQUAL	
{	TokenNameLBRACE	
"EEE, dd MMM yyyy kk:mm:ss z"	TokenNameStringLiteral	EEE, dd MMM yyyy kk:mm:ss z
,	TokenNameCOMMA	
// Tue, 09 Dec 2003 22:39:08 GMT 	TokenNameCOMMENT_LINE	Tue, 09 Dec 2003 22:39:08 GMT 
"EEE MMM dd kk:mm:ss yyyy z"	TokenNameStringLiteral	EEE MMM dd kk:mm:ss yyyy z
,	TokenNameCOMMA	
// Tue Dec 09 16:45:08 2003 EST 	TokenNameCOMMENT_LINE	Tue Dec 09 16:45:08 2003 EST 
"EEE, dd-MMM-':'y kk:mm:ss z"	TokenNameStringLiteral	EEE, dd-MMM-':'y kk:mm:ss z
,	TokenNameCOMMA	
// Tue, 09 Dec 2003 22:39:08 GMT 	TokenNameCOMMENT_LINE	Tue, 09 Dec 2003 22:39:08 GMT 
"EEE, dd-MMM-yyy kk:mm:ss z"	TokenNameStringLiteral	EEE, dd-MMM-yyy kk:mm:ss z
,	TokenNameCOMMA	
// Tue, 09 Dec 2003 22:39:08 GMT 	TokenNameCOMMENT_LINE	Tue, 09 Dec 2003 22:39:08 GMT 
"EEE MMM dd kk:mm:ss yyyy"	TokenNameStringLiteral	EEE MMM dd kk:mm:ss yyyy
,	TokenNameCOMMA	
// Tue Dec 09 16:45:08 2003 	TokenNameCOMMENT_LINE	Tue Dec 09 16:45:08 2003 
"dd MMM yyyy"	TokenNameStringLiteral	dd MMM yyyy
,	TokenNameCOMMA	
// 1 March 1994 	TokenNameCOMMENT_LINE	1 March 1994 
"MMM dd, yyyy"	TokenNameStringLiteral	MMM dd, yyyy
,	TokenNameCOMMA	
// February 3, 1994 	TokenNameCOMMENT_LINE	February 3, 1994 
"yyMMdd"	TokenNameStringLiteral	yyMMdd
,	TokenNameCOMMA	
// 910513 	TokenNameCOMMENT_LINE	910513 
"hhmm z.z.z. MMM dd, yyyy"	TokenNameStringLiteral	hhmm z.z.z. MMM dd, yyyy
,	TokenNameCOMMA	
// 0901 u.t.c. April 28, 1994 	TokenNameCOMMENT_LINE	0901 u.t.c. April 28, 1994 
}	TokenNameRBRACE	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
ThreadLocal	TokenNameIdentifier	 Thread Local
<	TokenNameLESS	
DateFormatInfo	TokenNameIdentifier	 Date Format Info
>	TokenNameGREATER	
dateFormats	TokenNameIdentifier	 date Formats
=	TokenNameEQUAL	
new	TokenNamenew	
ThreadLocal	TokenNameIdentifier	 Thread Local
<	TokenNameLESS	
DateFormatInfo	TokenNameIdentifier	 Date Format Info
>	TokenNameGREATER	
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
ThreadLocal	TokenNameIdentifier	 Thread Local
<	TokenNameLESS	
StringBuilderReader	TokenNameIdentifier	 String Builder Reader
>	TokenNameGREATER	
trecDocReader	TokenNameIdentifier	 trec Doc Reader
=	TokenNameEQUAL	
new	TokenNamenew	
ThreadLocal	TokenNameIdentifier	 Thread Local
<	TokenNameLESS	
StringBuilderReader	TokenNameIdentifier	 String Builder Reader
>	TokenNameGREATER	
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
ThreadLocal	TokenNameIdentifier	 Thread Local
<	TokenNameLESS	
StringBuilder	TokenNameIdentifier	 String Builder
>	TokenNameGREATER	
trecDocBuffer	TokenNameIdentifier	 trec Doc Buffer
=	TokenNameEQUAL	
new	TokenNamenew	
ThreadLocal	TokenNameIdentifier	 Thread Local
<	TokenNameLESS	
StringBuilder	TokenNameIdentifier	 String Builder
>	TokenNameGREATER	
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
File	TokenNameIdentifier	 File
dataDir	TokenNameIdentifier	 data Dir
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
ArrayList	TokenNameIdentifier	 Array List
<	TokenNameLESS	
File	TokenNameIdentifier	 File
>	TokenNameGREATER	
inputFiles	TokenNameIdentifier	 input Files
=	TokenNameEQUAL	
new	TokenNamenew	
ArrayList	TokenNameIdentifier	 Array List
<	TokenNameLESS	
File	TokenNameIdentifier	 File
>	TokenNameGREATER	
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
int	TokenNameint	
nextFile	TokenNameIdentifier	 next File
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
private	TokenNameprivate	
int	TokenNameint	
rawDocSize	TokenNameIdentifier	 raw Doc Size
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
// Use to synchronize threads on reading from the TREC documents. 	TokenNameCOMMENT_LINE	Use to synchronize threads on reading from the TREC documents. 
private	TokenNameprivate	
Object	TokenNameIdentifier	 Object
lock	TokenNameIdentifier	 lock
=	TokenNameEQUAL	
new	TokenNamenew	
Object	TokenNameIdentifier	 Object
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Required for test 	TokenNameCOMMENT_LINE	Required for test 
BufferedReader	TokenNameIdentifier	 Buffered Reader
reader	TokenNameIdentifier	 reader
;	TokenNameSEMICOLON	
int	TokenNameint	
iteration	TokenNameIdentifier	 iteration
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
HTMLParser	TokenNameIdentifier	 HTML Parser
htmlParser	TokenNameIdentifier	 html Parser
;	TokenNameSEMICOLON	
private	TokenNameprivate	
boolean	TokenNameboolean	
excludeDocnameIteration	TokenNameIdentifier	 exclude Docname Iteration
;	TokenNameSEMICOLON	
private	TokenNameprivate	
TrecDocParser	TokenNameIdentifier	 Trec Doc Parser
trecDocParser	TokenNameIdentifier	 trec Doc Parser
=	TokenNameEQUAL	
new	TokenNamenew	
TrecGov2Parser	TokenNameIdentifier	 Trec Gov2 Parser
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// default 	TokenNameCOMMENT_LINE	default 
ParsePathType	TokenNameIdentifier	 Parse Path Type
currPathType	TokenNameIdentifier	 curr Path Type
;	TokenNameSEMICOLON	
// not private for tests 	TokenNameCOMMENT_LINE	not private for tests 
private	TokenNameprivate	
DateFormatInfo	TokenNameIdentifier	 Date Format Info
getDateFormatInfo	TokenNameIdentifier	 get Date Format Info
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
DateFormatInfo	TokenNameIdentifier	 Date Format Info
dfi	TokenNameIdentifier	 dfi
=	TokenNameEQUAL	
dateFormats	TokenNameIdentifier	 date Formats
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
dfi	TokenNameIdentifier	 dfi
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
dfi	TokenNameIdentifier	 dfi
=	TokenNameEQUAL	
new	TokenNamenew	
DateFormatInfo	TokenNameIdentifier	 Date Format Info
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dfi	TokenNameIdentifier	 dfi
.	TokenNameDOT	
dfs	TokenNameIdentifier	 dfs
=	TokenNameEQUAL	
new	TokenNamenew	
SimpleDateFormat	TokenNameIdentifier	 Simple Date Format
[	TokenNameLBRACKET	
DATE_FORMATS	TokenNameIdentifier	 DATE  FORMATS
.	TokenNameDOT	
length	TokenNameIdentifier	 length
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
dfi	TokenNameIdentifier	 dfi
.	TokenNameDOT	
dfs	TokenNameIdentifier	 dfs
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
dfi	TokenNameIdentifier	 dfi
.	TokenNameDOT	
dfs	TokenNameIdentifier	 dfs
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
=	TokenNameEQUAL	
new	TokenNamenew	
SimpleDateFormat	TokenNameIdentifier	 Simple Date Format
(	TokenNameLPAREN	
DATE_FORMATS	TokenNameIdentifier	 DATE  FORMATS
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
,	TokenNameCOMMA	
Locale	TokenNameIdentifier	 Locale
.	TokenNameDOT	
US	TokenNameIdentifier	 US
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dfi	TokenNameIdentifier	 dfi
.	TokenNameDOT	
dfs	TokenNameIdentifier	 dfs
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
.	TokenNameDOT	
setLenient	TokenNameIdentifier	 set Lenient
(	TokenNameLPAREN	
true	TokenNametrue	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
dfi	TokenNameIdentifier	 dfi
.	TokenNameDOT	
pos	TokenNameIdentifier	 pos
=	TokenNameEQUAL	
new	TokenNamenew	
ParsePosition	TokenNameIdentifier	 Parse Position
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dateFormats	TokenNameIdentifier	 date Formats
.	TokenNameDOT	
set	TokenNameIdentifier	 set
(	TokenNameLPAREN	
dfi	TokenNameIdentifier	 dfi
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
dfi	TokenNameIdentifier	 dfi
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
private	TokenNameprivate	
StringBuilder	TokenNameIdentifier	 String Builder
getDocBuffer	TokenNameIdentifier	 get Doc Buffer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
StringBuilder	TokenNameIdentifier	 String Builder
sb	TokenNameIdentifier	 sb
=	TokenNameEQUAL	
trecDocBuffer	TokenNameIdentifier	 trec Doc Buffer
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
sb	TokenNameIdentifier	 sb
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
sb	TokenNameIdentifier	 sb
=	TokenNameEQUAL	
new	TokenNamenew	
StringBuilder	TokenNameIdentifier	 String Builder
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
trecDocBuffer	TokenNameIdentifier	 trec Doc Buffer
.	TokenNameDOT	
set	TokenNameIdentifier	 set
(	TokenNameLPAREN	
sb	TokenNameIdentifier	 sb
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
sb	TokenNameIdentifier	 sb
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
Reader	TokenNameIdentifier	 Reader
getTrecDocReader	TokenNameIdentifier	 get Trec Doc Reader
(	TokenNameLPAREN	
StringBuilder	TokenNameIdentifier	 String Builder
docBuffer	TokenNameIdentifier	 doc Buffer
)	TokenNameRPAREN	
{	TokenNameLBRACE	
StringBuilderReader	TokenNameIdentifier	 String Builder Reader
r	TokenNameIdentifier	 r
=	TokenNameEQUAL	
trecDocReader	TokenNameIdentifier	 trec Doc Reader
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
r	TokenNameIdentifier	 r
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
r	TokenNameIdentifier	 r
=	TokenNameEQUAL	
new	TokenNamenew	
StringBuilderReader	TokenNameIdentifier	 String Builder Reader
(	TokenNameLPAREN	
docBuffer	TokenNameIdentifier	 doc Buffer
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
trecDocReader	TokenNameIdentifier	 trec Doc Reader
.	TokenNameDOT	
set	TokenNameIdentifier	 set
(	TokenNameLPAREN	
r	TokenNameIdentifier	 r
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
r	TokenNameIdentifier	 r
.	TokenNameDOT	
set	TokenNameIdentifier	 set
(	TokenNameLPAREN	
docBuffer	TokenNameIdentifier	 doc Buffer
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
r	TokenNameIdentifier	 r
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
HTMLParser	TokenNameIdentifier	 HTML Parser
getHtmlParser	TokenNameIdentifier	 get Html Parser
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
htmlParser	TokenNameIdentifier	 html Parser
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Read until a line starting with the specified <code>lineStart</code>. * @param buf buffer for collecting the data if so specified/ * @param lineStart line start to look for, must not be null. * @param collectMatchLine whether to collect the matching line into <code>buffer</code>. * @param collectAll whether to collect all lines into <code>buffer</code>. * @throws IOException * @throws NoMoreDataException */	TokenNameCOMMENT_JAVADOC	 Read until a line starting with the specified <code>lineStart</code>. @param buf buffer for collecting the data if so specified/ @param lineStart line start to look for, must not be null. @param collectMatchLine whether to collect the matching line into <code>buffer</code>. @param collectAll whether to collect all lines into <code>buffer</code>. @throws IOException @throws NoMoreDataException 
private	TokenNameprivate	
void	TokenNamevoid	
read	TokenNameIdentifier	 read
(	TokenNameLPAREN	
StringBuilder	TokenNameIdentifier	 String Builder
buf	TokenNameIdentifier	 buf
,	TokenNameCOMMA	
String	TokenNameIdentifier	 String
lineStart	TokenNameIdentifier	 line Start
,	TokenNameCOMMA	
boolean	TokenNameboolean	
collectMatchLine	TokenNameIdentifier	 collect Match Line
,	TokenNameCOMMA	
boolean	TokenNameboolean	
collectAll	TokenNameIdentifier	 collect All
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
,	TokenNameCOMMA	
NoMoreDataException	TokenNameIdentifier	 No More Data Exception
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
sep	TokenNameIdentifier	 sep
=	TokenNameEQUAL	
""	TokenNameStringLiteral	 
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
true	TokenNametrue	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
line	TokenNameIdentifier	 line
=	TokenNameEQUAL	
reader	TokenNameIdentifier	 reader
.	TokenNameDOT	
readLine	TokenNameIdentifier	 read Line
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
line	TokenNameIdentifier	 line
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
openNextFile	TokenNameIdentifier	 open Next File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
continue	TokenNamecontinue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
rawDocSize	TokenNameIdentifier	 raw Doc Size
+=	TokenNamePLUS_EQUAL	
line	TokenNameIdentifier	 line
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
lineStart	TokenNameIdentifier	 line Start
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
line	TokenNameIdentifier	 line
.	TokenNameDOT	
startsWith	TokenNameIdentifier	 starts With
(	TokenNameLPAREN	
lineStart	TokenNameIdentifier	 line Start
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
collectMatchLine	TokenNameIdentifier	 collect Match Line
)	TokenNameRPAREN	
{	TokenNameLBRACE	
buf	TokenNameIdentifier	 buf
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
sep	TokenNameIdentifier	 sep
)	TokenNameRPAREN	
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
line	TokenNameIdentifier	 line
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
sep	TokenNameIdentifier	 sep
=	TokenNameEQUAL	
NEW_LINE	TokenNameIdentifier	 NEW  LINE
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
collectAll	TokenNameIdentifier	 collect All
)	TokenNameRPAREN	
{	TokenNameLBRACE	
buf	TokenNameIdentifier	 buf
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
sep	TokenNameIdentifier	 sep
)	TokenNameRPAREN	
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
line	TokenNameIdentifier	 line
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
sep	TokenNameIdentifier	 sep
=	TokenNameEQUAL	
NEW_LINE	TokenNameIdentifier	 NEW  LINE
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
void	TokenNamevoid	
openNextFile	TokenNameIdentifier	 open Next File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
NoMoreDataException	TokenNameIdentifier	 No More Data Exception
,	TokenNameCOMMA	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
currPathType	TokenNameIdentifier	 curr Path Type
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
true	TokenNametrue	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
nextFile	TokenNameIdentifier	 next File
>=	TokenNameGREATER_EQUAL	
inputFiles	TokenNameIdentifier	 input Files
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// exhausted files, start a new round, unless forever set to false. 	TokenNameCOMMENT_LINE	exhausted files, start a new round, unless forever set to false. 
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
forever	TokenNameIdentifier	 forever
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
NoMoreDataException	TokenNameIdentifier	 No More Data Exception
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
nextFile	TokenNameIdentifier	 next File
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
iteration	TokenNameIdentifier	 iteration
++	TokenNamePLUS_PLUS	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
File	TokenNameIdentifier	 File
f	TokenNameIdentifier	 f
=	TokenNameEQUAL	
inputFiles	TokenNameIdentifier	 input Files
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
nextFile	TokenNameIdentifier	 next File
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
verbose	TokenNameIdentifier	 verbose
)	TokenNameRPAREN	
{	TokenNameLBRACE	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
println	TokenNameIdentifier	 println
(	TokenNameLPAREN	
"opening: "	TokenNameStringLiteral	opening: 
+	TokenNamePLUS	
f	TokenNameIdentifier	 f
+	TokenNamePLUS	
" length: "	TokenNameStringLiteral	 length: 
+	TokenNamePLUS	
f	TokenNameIdentifier	 f
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
InputStream	TokenNameIdentifier	 Input Stream
inputStream	TokenNameIdentifier	 input Stream
=	TokenNameEQUAL	
StreamUtils	TokenNameIdentifier	 Stream Utils
.	TokenNameDOT	
inputStream	TokenNameIdentifier	 input Stream
(	TokenNameLPAREN	
f	TokenNameIdentifier	 f
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// support either gzip, bzip2, or regular text file, by extension 	TokenNameCOMMENT_LINE	support either gzip, bzip2, or regular text file, by extension 
reader	TokenNameIdentifier	 reader
=	TokenNameEQUAL	
new	TokenNamenew	
BufferedReader	TokenNameIdentifier	 Buffered Reader
(	TokenNameLPAREN	
new	TokenNamenew	
InputStreamReader	TokenNameIdentifier	 Input Stream Reader
(	TokenNameLPAREN	
inputStream	TokenNameIdentifier	 input Stream
,	TokenNameCOMMA	
encoding	TokenNameIdentifier	 encoding
)	TokenNameRPAREN	
,	TokenNameCOMMA	
StreamUtils	TokenNameIdentifier	 Stream Utils
.	TokenNameDOT	
BUFFER_SIZE	TokenNameIdentifier	 BUFFER  SIZE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
currPathType	TokenNameIdentifier	 curr Path Type
=	TokenNameEQUAL	
TrecDocParser	TokenNameIdentifier	 Trec Doc Parser
.	TokenNameDOT	
pathType	TokenNameIdentifier	 path Type
(	TokenNameLPAREN	
f	TokenNameIdentifier	 f
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
Exception	TokenNameIdentifier	 Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
verbose	TokenNameIdentifier	 verbose
)	TokenNameRPAREN	
{	TokenNameLBRACE	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
println	TokenNameIdentifier	 println
(	TokenNameLPAREN	
"Skipping 'bad' file "	TokenNameStringLiteral	Skipping 'bad' file 
+	TokenNamePLUS	
f	TokenNameIdentifier	 f
.	TokenNameDOT	
getAbsolutePath	TokenNameIdentifier	 get Absolute Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
+	TokenNamePLUS	
" due to "	TokenNameStringLiteral	 due to 
+	TokenNamePLUS	
e	TokenNameIdentifier	 e
.	TokenNameDOT	
getMessage	TokenNameIdentifier	 get Message
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
continue	TokenNamecontinue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
NoMoreDataException	TokenNameIdentifier	 No More Data Exception
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
public	TokenNamepublic	
Date	TokenNameIdentifier	 Date
parseDate	TokenNameIdentifier	 parse Date
(	TokenNameLPAREN	
String	TokenNameIdentifier	 String
dateStr	TokenNameIdentifier	 date Str
)	TokenNameRPAREN	
{	TokenNameLBRACE	
dateStr	TokenNameIdentifier	 date Str
=	TokenNameEQUAL	
dateStr	TokenNameIdentifier	 date Str
.	TokenNameDOT	
trim	TokenNameIdentifier	 trim
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
DateFormatInfo	TokenNameIdentifier	 Date Format Info
dfi	TokenNameIdentifier	 dfi
=	TokenNameEQUAL	
getDateFormatInfo	TokenNameIdentifier	 get Date Format Info
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
dfi	TokenNameIdentifier	 dfi
.	TokenNameDOT	
dfs	TokenNameIdentifier	 dfs
.	TokenNameDOT	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
DateFormat	TokenNameIdentifier	 Date Format
df	TokenNameIdentifier	 df
=	TokenNameEQUAL	
dfi	TokenNameIdentifier	 dfi
.	TokenNameDOT	
dfs	TokenNameIdentifier	 dfs
[	TokenNameLBRACKET	
i	TokenNameIdentifier	 i
]	TokenNameRBRACKET	
;	TokenNameSEMICOLON	
dfi	TokenNameIdentifier	 dfi
.	TokenNameDOT	
pos	TokenNameIdentifier	 pos
.	TokenNameDOT	
setIndex	TokenNameIdentifier	 set Index
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dfi	TokenNameIdentifier	 dfi
.	TokenNameDOT	
pos	TokenNameIdentifier	 pos
.	TokenNameDOT	
setErrorIndex	TokenNameIdentifier	 set Error Index
(	TokenNameLPAREN	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Date	TokenNameIdentifier	 Date
d	TokenNameIdentifier	 d
=	TokenNameEQUAL	
df	TokenNameIdentifier	 df
.	TokenNameDOT	
parse	TokenNameIdentifier	 parse
(	TokenNameLPAREN	
dateStr	TokenNameIdentifier	 date Str
,	TokenNameCOMMA	
dfi	TokenNameIdentifier	 dfi
.	TokenNameDOT	
pos	TokenNameIdentifier	 pos
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
d	TokenNameIdentifier	 d
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Parse succeeded. 	TokenNameCOMMENT_LINE	Parse succeeded. 
return	TokenNamereturn	
d	TokenNameIdentifier	 d
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// do not fail test just because a date could not be parsed 	TokenNameCOMMENT_LINE	do not fail test just because a date could not be parsed 
if	TokenNameif	
(	TokenNameLPAREN	
verbose	TokenNameIdentifier	 verbose
)	TokenNameRPAREN	
{	TokenNameLBRACE	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
println	TokenNameIdentifier	 println
(	TokenNameLPAREN	
"failed to parse date (assigning 'now') for: "	TokenNameStringLiteral	failed to parse date (assigning 'now') for: 
+	TokenNamePLUS	
dateStr	TokenNameIdentifier	 date Str
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
void	TokenNamevoid	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
reader	TokenNameIdentifier	 reader
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
reader	TokenNameIdentifier	 reader
.	TokenNameDOT	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
IOException	TokenNameIdentifier	 IO Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
verbose	TokenNameIdentifier	 verbose
)	TokenNameRPAREN	
{	TokenNameLBRACE	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
out	TokenNameIdentifier	 out
.	TokenNameDOT	
println	TokenNameIdentifier	 println
(	TokenNameLPAREN	
"failed to close reader !"	TokenNameStringLiteral	failed to close reader !
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
e	TokenNameIdentifier	 e
.	TokenNameDOT	
printStackTrace	TokenNameIdentifier	 print Stack Trace
(	TokenNameLPAREN	
System	TokenNameIdentifier	 System
.	TokenNameDOT	
out	TokenNameIdentifier	 out
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
reader	TokenNameIdentifier	 reader
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
DocData	TokenNameIdentifier	 Doc Data
getNextDocData	TokenNameIdentifier	 get Next Doc Data
(	TokenNameLPAREN	
DocData	TokenNameIdentifier	 Doc Data
docData	TokenNameIdentifier	 doc Data
)	TokenNameRPAREN	
throws	TokenNamethrows	
NoMoreDataException	TokenNameIdentifier	 No More Data Exception
,	TokenNameCOMMA	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
name	TokenNameIdentifier	 name
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
StringBuilder	TokenNameIdentifier	 String Builder
docBuf	TokenNameIdentifier	 doc Buf
=	TokenNameEQUAL	
getDocBuffer	TokenNameIdentifier	 get Doc Buffer
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
ParsePathType	TokenNameIdentifier	 Parse Path Type
parsedPathType	TokenNameIdentifier	 parsed Path Type
;	TokenNameSEMICOLON	
// protect reading from the TREC files by multiple threads. The rest of the 	TokenNameCOMMENT_LINE	protect reading from the TREC files by multiple threads. The rest of the 
// method, i.e., parsing the content and returning the DocData can run unprotected. 	TokenNameCOMMENT_LINE	method, i.e., parsing the content and returning the DocData can run unprotected. 
synchronized	TokenNamesynchronized	
(	TokenNameLPAREN	
lock	TokenNameIdentifier	 lock
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
reader	TokenNameIdentifier	 reader
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
openNextFile	TokenNameIdentifier	 open Next File
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// 1. skip until doc start - required for all TREC formats 	TokenNameCOMMENT_LINE	1. skip until doc start - required for all TREC formats 
docBuf	TokenNameIdentifier	 doc Buf
.	TokenNameDOT	
setLength	TokenNameIdentifier	 set Length
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
read	TokenNameIdentifier	 read
(	TokenNameLPAREN	
docBuf	TokenNameIdentifier	 doc Buf
,	TokenNameCOMMA	
DOC	TokenNameIdentifier	 DOC
,	TokenNameCOMMA	
false	TokenNamefalse	
,	TokenNameCOMMA	
false	TokenNamefalse	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// save parsedFile for passing trecDataParser after the sync block, in 	TokenNameCOMMENT_LINE	save parsedFile for passing trecDataParser after the sync block, in 
// case another thread will open another file in between. 	TokenNameCOMMENT_LINE	case another thread will open another file in between. 
parsedPathType	TokenNameIdentifier	 parsed Path Type
=	TokenNameEQUAL	
currPathType	TokenNameIdentifier	 curr Path Type
;	TokenNameSEMICOLON	
// 2. name - required for all TREC formats 	TokenNameCOMMENT_LINE	2. name - required for all TREC formats 
docBuf	TokenNameIdentifier	 doc Buf
.	TokenNameDOT	
setLength	TokenNameIdentifier	 set Length
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
read	TokenNameIdentifier	 read
(	TokenNameLPAREN	
docBuf	TokenNameIdentifier	 doc Buf
,	TokenNameCOMMA	
DOCNO	TokenNameIdentifier	 DOCNO
,	TokenNameCOMMA	
true	TokenNametrue	
,	TokenNameCOMMA	
false	TokenNamefalse	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
name	TokenNameIdentifier	 name
=	TokenNameEQUAL	
docBuf	TokenNameIdentifier	 doc Buf
.	TokenNameDOT	
substring	TokenNameIdentifier	 substring
(	TokenNameLPAREN	
DOCNO	TokenNameIdentifier	 DOCNO
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
docBuf	TokenNameIdentifier	 doc Buf
.	TokenNameDOT	
indexOf	TokenNameIdentifier	 index Of
(	TokenNameLPAREN	
TERMINATING_DOCNO	TokenNameIdentifier	 TERMINATING  DOCNO
,	TokenNameCOMMA	
DOCNO	TokenNameIdentifier	 DOCNO
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
trim	TokenNameIdentifier	 trim
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
excludeDocnameIteration	TokenNameIdentifier	 exclude Docname Iteration
)	TokenNameRPAREN	
{	TokenNameLBRACE	
name	TokenNameIdentifier	 name
=	TokenNameEQUAL	
name	TokenNameIdentifier	 name
+	TokenNamePLUS	
"_"	TokenNameStringLiteral	_
+	TokenNamePLUS	
iteration	TokenNameIdentifier	 iteration
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// 3. read all until end of doc 	TokenNameCOMMENT_LINE	3. read all until end of doc 
docBuf	TokenNameIdentifier	 doc Buf
.	TokenNameDOT	
setLength	TokenNameIdentifier	 set Length
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
read	TokenNameIdentifier	 read
(	TokenNameLPAREN	
docBuf	TokenNameIdentifier	 doc Buf
,	TokenNameCOMMA	
TERMINATING_DOC	TokenNameIdentifier	 TERMINATING  DOC
,	TokenNameCOMMA	
false	TokenNamefalse	
,	TokenNameCOMMA	
true	TokenNametrue	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// count char length of text to be parsed (may be larger than the resulted plain doc body text). 	TokenNameCOMMENT_LINE	count char length of text to be parsed (may be larger than the resulted plain doc body text). 
addBytes	TokenNameIdentifier	 add Bytes
(	TokenNameLPAREN	
docBuf	TokenNameIdentifier	 doc Buf
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// This code segment relies on HtmlParser being thread safe. When we get 	TokenNameCOMMENT_LINE	This code segment relies on HtmlParser being thread safe. When we get 
// here, everything else is already private to that thread, so we're safe. 	TokenNameCOMMENT_LINE	here, everything else is already private to that thread, so we're safe. 
try	TokenNametry	
{	TokenNameLBRACE	
docData	TokenNameIdentifier	 doc Data
=	TokenNameEQUAL	
trecDocParser	TokenNameIdentifier	 trec Doc Parser
.	TokenNameDOT	
parse	TokenNameIdentifier	 parse
(	TokenNameLPAREN	
docData	TokenNameIdentifier	 doc Data
,	TokenNameCOMMA	
name	TokenNameIdentifier	 name
,	TokenNameCOMMA	
this	TokenNamethis	
,	TokenNameCOMMA	
docBuf	TokenNameIdentifier	 doc Buf
,	TokenNameCOMMA	
parsedPathType	TokenNameIdentifier	 parsed Path Type
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
addItem	TokenNameIdentifier	 add Item
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
InterruptedException	TokenNameIdentifier	 Interrupted Exception
ie	TokenNameIdentifier	 ie
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
ThreadInterruptedException	TokenNameIdentifier	 Thread Interrupted Exception
(	TokenNameLPAREN	
ie	TokenNameIdentifier	 ie
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
docData	TokenNameIdentifier	 doc Data
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
void	TokenNamevoid	
resetInputs	TokenNameIdentifier	 reset Inputs
(	TokenNameLPAREN	
)	TokenNameRPAREN	
throws	TokenNamethrows	
IOException	TokenNameIdentifier	 IO Exception
{	TokenNameLBRACE	
synchronized	TokenNamesynchronized	
(	TokenNameLPAREN	
lock	TokenNameIdentifier	 lock
)	TokenNameRPAREN	
{	TokenNameLBRACE	
super	TokenNamesuper	
.	TokenNameDOT	
resetInputs	TokenNameIdentifier	 reset Inputs
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
close	TokenNameIdentifier	 close
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
nextFile	TokenNameIdentifier	 next File
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
iteration	TokenNameIdentifier	 iteration
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
@	TokenNameAT	
Override	TokenNameIdentifier	 Override
public	TokenNamepublic	
void	TokenNamevoid	
setConfig	TokenNameIdentifier	 set Config
(	TokenNameLPAREN	
Config	TokenNameIdentifier	 Config
config	TokenNameIdentifier	 config
)	TokenNameRPAREN	
{	TokenNameLBRACE	
super	TokenNamesuper	
.	TokenNameDOT	
setConfig	TokenNameIdentifier	 set Config
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// dirs 	TokenNameCOMMENT_LINE	dirs 
File	TokenNameIdentifier	 File
workDir	TokenNameIdentifier	 work Dir
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
"work.dir"	TokenNameStringLiteral	work.dir
,	TokenNameCOMMA	
"work"	TokenNameStringLiteral	work
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
String	TokenNameIdentifier	 String
d	TokenNameIdentifier	 d
=	TokenNameEQUAL	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
"docs.dir"	TokenNameStringLiteral	docs.dir
,	TokenNameCOMMA	
"trec"	TokenNameStringLiteral	trec
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
dataDir	TokenNameIdentifier	 data Dir
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
d	TokenNameIdentifier	 d
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
dataDir	TokenNameIdentifier	 data Dir
.	TokenNameDOT	
isAbsolute	TokenNameIdentifier	 is Absolute
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
dataDir	TokenNameIdentifier	 data Dir
=	TokenNameEQUAL	
new	TokenNamenew	
File	TokenNameIdentifier	 File
(	TokenNameLPAREN	
workDir	TokenNameIdentifier	 work Dir
,	TokenNameCOMMA	
d	TokenNameIdentifier	 d
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// files 	TokenNameCOMMENT_LINE	files 
collectFiles	TokenNameIdentifier	 collect Files
(	TokenNameLPAREN	
dataDir	TokenNameIdentifier	 data Dir
,	TokenNameCOMMA	
inputFiles	TokenNameIdentifier	 input Files
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
inputFiles	TokenNameIdentifier	 input Files
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
IllegalArgumentException	TokenNameIdentifier	 Illegal Argument Exception
(	TokenNameLPAREN	
"No files in dataDir: "	TokenNameStringLiteral	No files in dataDir: 
+	TokenNamePLUS	
dataDir	TokenNameIdentifier	 data Dir
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// trec doc parser 	TokenNameCOMMENT_LINE	trec doc parser 
try	TokenNametry	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
trecDocParserClassName	TokenNameIdentifier	 trec Doc Parser Class Name
=	TokenNameEQUAL	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
"trec.doc.parser"	TokenNameStringLiteral	trec.doc.parser
,	TokenNameCOMMA	
"org.apache.lucene.benchmark.byTask.feeds.TrecGov2Parser"	TokenNameStringLiteral	org.apache.lucene.benchmark.byTask.feeds.TrecGov2Parser
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
trecDocParser	TokenNameIdentifier	 trec Doc Parser
=	TokenNameEQUAL	
Class	TokenNameIdentifier	 Class
.	TokenNameDOT	
forName	TokenNameIdentifier	 for Name
(	TokenNameLPAREN	
trecDocParserClassName	TokenNameIdentifier	 trec Doc Parser Class Name
)	TokenNameRPAREN	
.	TokenNameDOT	
asSubclass	TokenNameIdentifier	 as Subclass
(	TokenNameLPAREN	
TrecDocParser	TokenNameIdentifier	 Trec Doc Parser
.	TokenNameDOT	
class	TokenNameclass	
)	TokenNameRPAREN	
.	TokenNameDOT	
newInstance	TokenNameIdentifier	 new Instance
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
Exception	TokenNameIdentifier	 Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Should not get here. Throw runtime exception. 	TokenNameCOMMENT_LINE	Should not get here. Throw runtime exception. 
throw	TokenNamethrow	
new	TokenNamenew	
RuntimeException	TokenNameIdentifier	 Runtime Exception
(	TokenNameLPAREN	
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// html parser 	TokenNameCOMMENT_LINE	html parser 
try	TokenNametry	
{	TokenNameLBRACE	
String	TokenNameIdentifier	 String
htmlParserClassName	TokenNameIdentifier	 html Parser Class Name
=	TokenNameEQUAL	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
"html.parser"	TokenNameStringLiteral	html.parser
,	TokenNameCOMMA	
"org.apache.lucene.benchmark.byTask.feeds.DemoHTMLParser"	TokenNameStringLiteral	org.apache.lucene.benchmark.byTask.feeds.DemoHTMLParser
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
htmlParser	TokenNameIdentifier	 html Parser
=	TokenNameEQUAL	
Class	TokenNameIdentifier	 Class
.	TokenNameDOT	
forName	TokenNameIdentifier	 for Name
(	TokenNameLPAREN	
htmlParserClassName	TokenNameIdentifier	 html Parser Class Name
)	TokenNameRPAREN	
.	TokenNameDOT	
asSubclass	TokenNameIdentifier	 as Subclass
(	TokenNameLPAREN	
HTMLParser	TokenNameIdentifier	 HTML Parser
.	TokenNameDOT	
class	TokenNameclass	
)	TokenNameRPAREN	
.	TokenNameDOT	
newInstance	TokenNameIdentifier	 new Instance
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
Exception	TokenNameIdentifier	 Exception
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Should not get here. Throw runtime exception. 	TokenNameCOMMENT_LINE	Should not get here. Throw runtime exception. 
throw	TokenNamethrow	
new	TokenNamenew	
RuntimeException	TokenNameIdentifier	 Runtime Exception
(	TokenNameLPAREN	
e	TokenNameIdentifier	 e
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// encoding 	TokenNameCOMMENT_LINE	encoding 
if	TokenNameif	
(	TokenNameLPAREN	
encoding	TokenNameIdentifier	 encoding
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
encoding	TokenNameIdentifier	 encoding
=	TokenNameEQUAL	
"ISO-8859-1"	TokenNameStringLiteral	ISO-8859-1
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// iteration exclusion in doc name 	TokenNameCOMMENT_LINE	iteration exclusion in doc name 
excludeDocnameIteration	TokenNameIdentifier	 exclude Docname Iteration
=	TokenNameEQUAL	
config	TokenNameIdentifier	 config
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
"content.source.excludeIteration"	TokenNameStringLiteral	content.source.excludeIteration
,	TokenNameCOMMA	
false	TokenNamefalse	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
