/* * Licensed to the Apache Software Foundation (ASF) under one * or more contributor license agreements. See the NOTICE file * distributed with this work for additional information * regarding copyright ownership. The ASF licenses this file * to you under the Apache License, Version 2.0 (the "License"); * you may not use this file except in compliance with the License. * You may obtain a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to you under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at * http://www.apache.org/licenses/LICENSE-2.0 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
/* * $Id: Predicate.java 468650 2006-10-28 07:03:30Z minchau $ */	TokenNameCOMMENT_BLOCK	 $Id: Predicate.java 468650 2006-10-28 07:03:30Z minchau $ 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ArrayList	TokenNameIdentifier	 Array List
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
classfile	TokenNameIdentifier	 classfile
.	TokenNameDOT	
Field	TokenNameIdentifier	 Field
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
ASTORE	TokenNameIdentifier	 ASTORE
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
CHECKCAST	TokenNameIdentifier	 CHECKCAST
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
ConstantPoolGen	TokenNameIdentifier	 Constant Pool Gen
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
GETFIELD	TokenNameIdentifier	 GETFIELD
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
INVOKESPECIAL	TokenNameIdentifier	 INVOKESPECIAL
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
InstructionList	TokenNameIdentifier	 Instruction List
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
LocalVariableGen	TokenNameIdentifier	 Local Variable Gen
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
NEW	TokenNameIdentifier	 NEW
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
PUSH	TokenNameIdentifier	 PUSH
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
PUTFIELD	TokenNameIdentifier	 PUTFIELD
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
BooleanType	TokenNameIdentifier	 Boolean Type
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ClassGenerator	TokenNameIdentifier	 Class Generator
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
FilterGenerator	TokenNameIdentifier	 Filter Generator
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
IntType	TokenNameIdentifier	 Int Type
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
MethodGenerator	TokenNameIdentifier	 Method Generator
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
NumberType	TokenNameIdentifier	 Number Type
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ReferenceType	TokenNameIdentifier	 Reference Type
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
ResultTreeType	TokenNameIdentifier	 Result Tree Type
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
TestGenerator	TokenNameIdentifier	 Test Generator
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Type	TokenNameIdentifier	 Type
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
TypeCheckError	TokenNameIdentifier	 Type Check Error
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
compiler	TokenNameIdentifier	 compiler
.	TokenNameDOT	
util	TokenNameIdentifier	 util
.	TokenNameDOT	
Util	TokenNameIdentifier	 Util
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
xalan	TokenNameIdentifier	 xalan
.	TokenNameDOT	
xsltc	TokenNameIdentifier	 xsltc
.	TokenNameDOT	
runtime	TokenNameIdentifier	 runtime
.	TokenNameDOT	
Operators	TokenNameIdentifier	 Operators
;	TokenNameSEMICOLON	
/** * @author Jacek Ambroziak * @author Santiago Pericas-Geertsen * @author Morten Jorgensen */	TokenNameCOMMENT_JAVADOC	 @author Jacek Ambroziak @author Santiago Pericas-Geertsen @author Morten Jorgensen 
final	TokenNamefinal	
class	TokenNameclass	
Predicate	TokenNameIdentifier	 Predicate
extends	TokenNameextends	
Expression	TokenNameIdentifier	 Expression
implements	TokenNameimplements	
Closure	TokenNameIdentifier	 Closure
{	TokenNameLBRACE	
/** * The predicate's expression. */	TokenNameCOMMENT_JAVADOC	 The predicate's expression. 
private	TokenNameprivate	
Expression	TokenNameIdentifier	 Expression
_exp	TokenNameIdentifier	 exp
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
/** * This flag indicates if optimizations are turned on. The * method <code>dontOptimize()</code> can be called to turn * optimizations off. */	TokenNameCOMMENT_JAVADOC	 This flag indicates if optimizations are turned on. The method <code>dontOptimize()</code> can be called to turn optimizations off. 
private	TokenNameprivate	
boolean	TokenNameboolean	
_canOptimize	TokenNameIdentifier	 can Optimize
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
/** * Flag indicatig if the nth position optimization is on. It * is set in <code>typeCheck()</code>. */	TokenNameCOMMENT_JAVADOC	 Flag indicatig if the nth position optimization is on. It is set in <code>typeCheck()</code>. 
private	TokenNameprivate	
boolean	TokenNameboolean	
_nthPositionFilter	TokenNameIdentifier	 nth Position Filter
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
/** * Flag indicatig if the nth position descendant is on. It * is set in <code>typeCheck()</code>. */	TokenNameCOMMENT_JAVADOC	 Flag indicatig if the nth position descendant is on. It is set in <code>typeCheck()</code>. 
private	TokenNameprivate	
boolean	TokenNameboolean	
_nthDescendant	TokenNameIdentifier	 nth Descendant
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
/** * Cached node type of the expression that owns this predicate. */	TokenNameCOMMENT_JAVADOC	 Cached node type of the expression that owns this predicate. 
int	TokenNameint	
_ptype	TokenNameIdentifier	 ptype
=	TokenNameEQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
/** * Name of the inner class. */	TokenNameCOMMENT_JAVADOC	 Name of the inner class. 
private	TokenNameprivate	
String	TokenNameIdentifier	 String
_className	TokenNameIdentifier	 class Name
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
/** * List of variables in closure. */	TokenNameCOMMENT_JAVADOC	 List of variables in closure. 
private	TokenNameprivate	
ArrayList	TokenNameIdentifier	 Array List
_closureVars	TokenNameIdentifier	 closure Vars
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
/** * Reference to parent closure. */	TokenNameCOMMENT_JAVADOC	 Reference to parent closure. 
private	TokenNameprivate	
Closure	TokenNameIdentifier	 Closure
_parentClosure	TokenNameIdentifier	 parent Closure
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
/** * Cached value of method <code>getCompareValue()</code>. */	TokenNameCOMMENT_JAVADOC	 Cached value of method <code>getCompareValue()</code>. 
private	TokenNameprivate	
Expression	TokenNameIdentifier	 Expression
_value	TokenNameIdentifier	 value
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
/** * Cached value of method <code>getCompareValue()</code>. */	TokenNameCOMMENT_JAVADOC	 Cached value of method <code>getCompareValue()</code>. 
private	TokenNameprivate	
Step	TokenNameIdentifier	 Step
_step	TokenNameIdentifier	 step
=	TokenNameEQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
/** * Initializes a predicate. */	TokenNameCOMMENT_JAVADOC	 Initializes a predicate. 
public	TokenNamepublic	
Predicate	TokenNameIdentifier	 Predicate
(	TokenNameLPAREN	
Expression	TokenNameIdentifier	 Expression
exp	TokenNameIdentifier	 exp
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_exp	TokenNameIdentifier	 exp
=	TokenNameEQUAL	
exp	TokenNameIdentifier	 exp
;	TokenNameSEMICOLON	
_exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
setParent	TokenNameIdentifier	 set Parent
(	TokenNameLPAREN	
this	TokenNamethis	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Set the parser for this expression. */	TokenNameCOMMENT_JAVADOC	 Set the parser for this expression. 
public	TokenNamepublic	
void	TokenNamevoid	
setParser	TokenNameIdentifier	 set Parser
(	TokenNameLPAREN	
Parser	TokenNameIdentifier	 Parser
parser	TokenNameIdentifier	 parser
)	TokenNameRPAREN	
{	TokenNameLBRACE	
super	TokenNamesuper	
.	TokenNameDOT	
setParser	TokenNameIdentifier	 set Parser
(	TokenNameLPAREN	
parser	TokenNameIdentifier	 parser
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
_exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
setParser	TokenNameIdentifier	 set Parser
(	TokenNameLPAREN	
parser	TokenNameIdentifier	 parser
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns a boolean value indicating if the nth position optimization * is on. Must be call after type checking! */	TokenNameCOMMENT_JAVADOC	 Returns a boolean value indicating if the nth position optimization is on. Must be call after type checking! 
public	TokenNamepublic	
boolean	TokenNameboolean	
isNthPositionFilter	TokenNameIdentifier	 is Nth Position Filter
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
_nthPositionFilter	TokenNameIdentifier	 nth Position Filter
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns a boolean value indicating if the nth descendant optimization * is on. Must be call after type checking! */	TokenNameCOMMENT_JAVADOC	 Returns a boolean value indicating if the nth descendant optimization is on. Must be call after type checking! 
public	TokenNamepublic	
boolean	TokenNameboolean	
isNthDescendant	TokenNameIdentifier	 is Nth Descendant
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
_nthDescendant	TokenNameIdentifier	 nth Descendant
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Turns off all optimizations for this predicate. */	TokenNameCOMMENT_JAVADOC	 Turns off all optimizations for this predicate. 
public	TokenNamepublic	
void	TokenNamevoid	
dontOptimize	TokenNameIdentifier	 dont Optimize
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_canOptimize	TokenNameIdentifier	 can Optimize
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns true if the expression in this predicate contains a call * to position(). */	TokenNameCOMMENT_JAVADOC	 Returns true if the expression in this predicate contains a call to position(). 
public	TokenNamepublic	
boolean	TokenNameboolean	
hasPositionCall	TokenNameIdentifier	 has Position Call
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
_exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
hasPositionCall	TokenNameIdentifier	 has Position Call
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns true if the expression in this predicate contains a call * to last(). */	TokenNameCOMMENT_JAVADOC	 Returns true if the expression in this predicate contains a call to last(). 
public	TokenNamepublic	
boolean	TokenNameboolean	
hasLastCall	TokenNameIdentifier	 has Last Call
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
_exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
hasLastCall	TokenNameIdentifier	 has Last Call
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// -- Begin Closure interface -------------------- 	TokenNameCOMMENT_LINE	-- Begin Closure interface -------------------- 
/** * Returns true if this closure is compiled in an inner class (i.e. * if this is a real closure). */	TokenNameCOMMENT_JAVADOC	 Returns true if this closure is compiled in an inner class (i.e. if this is a real closure). 
public	TokenNamepublic	
boolean	TokenNameboolean	
inInnerClass	TokenNameIdentifier	 in Inner Class
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
(	TokenNameLPAREN	
_className	TokenNameIdentifier	 class Name
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns a reference to its parent closure or null if outermost. */	TokenNameCOMMENT_JAVADOC	 Returns a reference to its parent closure or null if outermost. 
public	TokenNamepublic	
Closure	TokenNameIdentifier	 Closure
getParentClosure	TokenNameIdentifier	 get Parent Closure
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
_parentClosure	TokenNameIdentifier	 parent Closure
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
SyntaxTreeNode	TokenNameIdentifier	 Syntax Tree Node
node	TokenNameIdentifier	 node
=	TokenNameEQUAL	
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
do	TokenNamedo	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
node	TokenNameIdentifier	 node
instanceof	TokenNameinstanceof	
Closure	TokenNameIdentifier	 Closure
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_parentClosure	TokenNameIdentifier	 parent Closure
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Closure	TokenNameIdentifier	 Closure
)	TokenNameRPAREN	
node	TokenNameIdentifier	 node
;	TokenNameSEMICOLON	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
node	TokenNameIdentifier	 node
instanceof	TokenNameinstanceof	
TopLevelElement	TokenNameIdentifier	 Top Level Element
)	TokenNameRPAREN	
{	TokenNameLBRACE	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
// way up in the tree 	TokenNameCOMMENT_LINE	way up in the tree 
}	TokenNameRBRACE	
node	TokenNameIdentifier	 node
=	TokenNameEQUAL	
node	TokenNameIdentifier	 node
.	TokenNameDOT	
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
while	TokenNamewhile	
(	TokenNameLPAREN	
node	TokenNameIdentifier	 node
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
_parentClosure	TokenNameIdentifier	 parent Closure
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the name of the auxiliary class or null if this predicate * is compiled inside the Translet. */	TokenNameCOMMENT_JAVADOC	 Returns the name of the auxiliary class or null if this predicate is compiled inside the Translet. 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getInnerClassName	TokenNameIdentifier	 get Inner Class Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
_className	TokenNameIdentifier	 class Name
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Add new variable to the closure. */	TokenNameCOMMENT_JAVADOC	 Add new variable to the closure. 
public	TokenNamepublic	
void	TokenNamevoid	
addVariable	TokenNameIdentifier	 add Variable
(	TokenNameLPAREN	
VariableRefBase	TokenNameIdentifier	 Variable Ref Base
variableRef	TokenNameIdentifier	 variable Ref
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
_closureVars	TokenNameIdentifier	 closure Vars
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_closureVars	TokenNameIdentifier	 closure Vars
=	TokenNameEQUAL	
new	TokenNamenew	
ArrayList	TokenNameIdentifier	 Array List
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Only one reference per variable 	TokenNameCOMMENT_LINE	Only one reference per variable 
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
_closureVars	TokenNameIdentifier	 closure Vars
.	TokenNameDOT	
contains	TokenNameIdentifier	 contains
(	TokenNameLPAREN	
variableRef	TokenNameIdentifier	 variable Ref
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_closureVars	TokenNameIdentifier	 closure Vars
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
variableRef	TokenNameIdentifier	 variable Ref
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Add variable to parent closure as well 	TokenNameCOMMENT_LINE	Add variable to parent closure as well 
Closure	TokenNameIdentifier	 Closure
parentClosure	TokenNameIdentifier	 parent Closure
=	TokenNameEQUAL	
getParentClosure	TokenNameIdentifier	 get Parent Closure
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
parentClosure	TokenNameIdentifier	 parent Closure
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
parentClosure	TokenNameIdentifier	 parent Closure
.	TokenNameDOT	
addVariable	TokenNameIdentifier	 add Variable
(	TokenNameLPAREN	
variableRef	TokenNameIdentifier	 variable Ref
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// -- End Closure interface ---------------------- 	TokenNameCOMMENT_LINE	-- End Closure interface ---------------------- 
/** * Returns the node type of the expression owning this predicate. The * return value is cached in <code>_ptype</code>. */	TokenNameCOMMENT_JAVADOC	 Returns the node type of the expression owning this predicate. The return value is cached in <code>_ptype</code>. 
public	TokenNamepublic	
int	TokenNameint	
getPosType	TokenNameIdentifier	 get Pos Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
_ptype	TokenNameIdentifier	 ptype
==	TokenNameEQUAL_EQUAL	
-	TokenNameMINUS	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
SyntaxTreeNode	TokenNameIdentifier	 Syntax Tree Node
parent	TokenNameIdentifier	 parent
=	TokenNameEQUAL	
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
parent	TokenNameIdentifier	 parent
instanceof	TokenNameinstanceof	
StepPattern	TokenNameIdentifier	 Step Pattern
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_ptype	TokenNameIdentifier	 ptype
=	TokenNameEQUAL	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
StepPattern	TokenNameIdentifier	 Step Pattern
)	TokenNameRPAREN	
parent	TokenNameIdentifier	 parent
)	TokenNameRPAREN	
.	TokenNameDOT	
getNodeType	TokenNameIdentifier	 get Node Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
parent	TokenNameIdentifier	 parent
instanceof	TokenNameinstanceof	
AbsoluteLocationPath	TokenNameIdentifier	 Absolute Location Path
)	TokenNameRPAREN	
{	TokenNameLBRACE	
AbsoluteLocationPath	TokenNameIdentifier	 Absolute Location Path
path	TokenNameIdentifier	 path
=	TokenNameEQUAL	
(	TokenNameLPAREN	
AbsoluteLocationPath	TokenNameIdentifier	 Absolute Location Path
)	TokenNameRPAREN	
parent	TokenNameIdentifier	 parent
;	TokenNameSEMICOLON	
Expression	TokenNameIdentifier	 Expression
exp	TokenNameIdentifier	 exp
=	TokenNameEQUAL	
path	TokenNameIdentifier	 path
.	TokenNameDOT	
getPath	TokenNameIdentifier	 get Path
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
exp	TokenNameIdentifier	 exp
instanceof	TokenNameinstanceof	
Step	TokenNameIdentifier	 Step
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_ptype	TokenNameIdentifier	 ptype
=	TokenNameEQUAL	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
Step	TokenNameIdentifier	 Step
)	TokenNameRPAREN	
exp	TokenNameIdentifier	 exp
)	TokenNameRPAREN	
.	TokenNameDOT	
getNodeType	TokenNameIdentifier	 get Node Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
parent	TokenNameIdentifier	 parent
instanceof	TokenNameinstanceof	
VariableRefBase	TokenNameIdentifier	 Variable Ref Base
)	TokenNameRPAREN	
{	TokenNameLBRACE	
final	TokenNamefinal	
VariableRefBase	TokenNameIdentifier	 Variable Ref Base
ref	TokenNameIdentifier	 ref
=	TokenNameEQUAL	
(	TokenNameLPAREN	
VariableRefBase	TokenNameIdentifier	 Variable Ref Base
)	TokenNameRPAREN	
parent	TokenNameIdentifier	 parent
;	TokenNameSEMICOLON	
final	TokenNamefinal	
VariableBase	TokenNameIdentifier	 Variable Base
var	TokenNameIdentifier	 var
=	TokenNameEQUAL	
ref	TokenNameIdentifier	 ref
.	TokenNameDOT	
getVariable	TokenNameIdentifier	 get Variable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
Expression	TokenNameIdentifier	 Expression
exp	TokenNameIdentifier	 exp
=	TokenNameEQUAL	
var	TokenNameIdentifier	 var
.	TokenNameDOT	
getExpression	TokenNameIdentifier	 get Expression
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
exp	TokenNameIdentifier	 exp
instanceof	TokenNameinstanceof	
Step	TokenNameIdentifier	 Step
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_ptype	TokenNameIdentifier	 ptype
=	TokenNameEQUAL	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
Step	TokenNameIdentifier	 Step
)	TokenNameRPAREN	
exp	TokenNameIdentifier	 exp
)	TokenNameRPAREN	
.	TokenNameDOT	
getNodeType	TokenNameIdentifier	 get Node Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
parent	TokenNameIdentifier	 parent
instanceof	TokenNameinstanceof	
Step	TokenNameIdentifier	 Step
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_ptype	TokenNameIdentifier	 ptype
=	TokenNameEQUAL	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
Step	TokenNameIdentifier	 Step
)	TokenNameRPAREN	
parent	TokenNameIdentifier	 parent
)	TokenNameRPAREN	
.	TokenNameDOT	
getNodeType	TokenNameIdentifier	 get Node Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
_ptype	TokenNameIdentifier	 ptype
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
boolean	TokenNameboolean	
parentIsPattern	TokenNameIdentifier	 parent Is Pattern
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
(	TokenNameLPAREN	
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
instanceof	TokenNameinstanceof	
Pattern	TokenNameIdentifier	 Pattern
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
Expression	TokenNameIdentifier	 Expression
getExpr	TokenNameIdentifier	 get Expr
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
_exp	TokenNameIdentifier	 exp
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
public	TokenNamepublic	
String	TokenNameIdentifier	 String
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
"pred("	TokenNameStringLiteral	pred(
+	TokenNamePLUS	
_exp	TokenNameIdentifier	 exp
+	TokenNamePLUS	
')'	TokenNameCharacterLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Type check a predicate expression. If the type of the expression is * number convert it to boolean by adding a comparison with position(). * Note that if the expression is a parameter, we cannot distinguish * at compile time if its type is number or not. Hence, expressions of * reference type are always converted to booleans. * * This method may be called twice, before and after calling * <code>dontOptimize()</code>. If so, the second time it should honor * the new value of <code>_canOptimize</code>. */	TokenNameCOMMENT_JAVADOC	 Type check a predicate expression. If the type of the expression is number convert it to boolean by adding a comparison with position(). Note that if the expression is a parameter, we cannot distinguish at compile time if its type is number or not. Hence, expressions of reference type are always converted to booleans. * This method may be called twice, before and after calling <code>dontOptimize()</code>. If so, the second time it should honor the new value of <code>_canOptimize</code>. 
public	TokenNamepublic	
Type	TokenNameIdentifier	 Type
typeCheck	TokenNameIdentifier	 type Check
(	TokenNameLPAREN	
SymbolTable	TokenNameIdentifier	 Symbol Table
stable	TokenNameIdentifier	 stable
)	TokenNameRPAREN	
throws	TokenNamethrows	
TypeCheckError	TokenNameIdentifier	 Type Check Error
{	TokenNameLBRACE	
Type	TokenNameIdentifier	 Type
texp	TokenNameIdentifier	 texp
=	TokenNameEQUAL	
_exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
typeCheck	TokenNameIdentifier	 type Check
(	TokenNameLPAREN	
stable	TokenNameIdentifier	 stable
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// We need explicit type information for reference types - no good! 	TokenNameCOMMENT_LINE	We need explicit type information for reference types - no good! 
if	TokenNameif	
(	TokenNameLPAREN	
texp	TokenNameIdentifier	 texp
instanceof	TokenNameinstanceof	
ReferenceType	TokenNameIdentifier	 Reference Type
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_exp	TokenNameIdentifier	 exp
=	TokenNameEQUAL	
new	TokenNamenew	
CastExpr	TokenNameIdentifier	 Cast Expr
(	TokenNameLPAREN	
_exp	TokenNameIdentifier	 exp
,	TokenNameCOMMA	
texp	TokenNameIdentifier	 texp
=	TokenNameEQUAL	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
Real	TokenNameIdentifier	 Real
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// A result tree fragment should not be cast directly to a number type, 	TokenNameCOMMENT_LINE	A result tree fragment should not be cast directly to a number type, 
// but rather to a boolean value, and then to a numer (0 or 1). 	TokenNameCOMMENT_LINE	but rather to a boolean value, and then to a numer (0 or 1). 
// Ref. section 11.2 of the XSLT 1.0 spec 	TokenNameCOMMENT_LINE	Ref. section 11.2 of the XSLT 1.0 spec 
if	TokenNameif	
(	TokenNameLPAREN	
texp	TokenNameIdentifier	 texp
instanceof	TokenNameinstanceof	
ResultTreeType	TokenNameIdentifier	 Result Tree Type
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_exp	TokenNameIdentifier	 exp
=	TokenNameEQUAL	
new	TokenNamenew	
CastExpr	TokenNameIdentifier	 Cast Expr
(	TokenNameLPAREN	
_exp	TokenNameIdentifier	 exp
,	TokenNameCOMMA	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
Boolean	TokenNameIdentifier	 Boolean
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
_exp	TokenNameIdentifier	 exp
=	TokenNameEQUAL	
new	TokenNamenew	
CastExpr	TokenNameIdentifier	 Cast Expr
(	TokenNameLPAREN	
_exp	TokenNameIdentifier	 exp
,	TokenNameCOMMA	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
Real	TokenNameIdentifier	 Real
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
texp	TokenNameIdentifier	 texp
=	TokenNameEQUAL	
_exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
typeCheck	TokenNameIdentifier	 type Check
(	TokenNameLPAREN	
stable	TokenNameIdentifier	 stable
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Numerical types will be converted to a position filter 	TokenNameCOMMENT_LINE	Numerical types will be converted to a position filter 
if	TokenNameif	
(	TokenNameLPAREN	
texp	TokenNameIdentifier	 texp
instanceof	TokenNameinstanceof	
NumberType	TokenNameIdentifier	 Number Type
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Cast any numerical types to an integer 	TokenNameCOMMENT_LINE	Cast any numerical types to an integer 
if	TokenNameif	
(	TokenNameLPAREN	
texp	TokenNameIdentifier	 texp
instanceof	TokenNameinstanceof	
IntType	TokenNameIdentifier	 Int Type
==	TokenNameEQUAL_EQUAL	
false	TokenNamefalse	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_exp	TokenNameIdentifier	 exp
=	TokenNameEQUAL	
new	TokenNamenew	
CastExpr	TokenNameIdentifier	 Cast Expr
(	TokenNameLPAREN	
_exp	TokenNameIdentifier	 exp
,	TokenNameCOMMA	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
Int	TokenNameIdentifier	 Int
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
_canOptimize	TokenNameIdentifier	 can Optimize
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Nth position optimization. Expression must not depend on context 	TokenNameCOMMENT_LINE	Nth position optimization. Expression must not depend on context 
_nthPositionFilter	TokenNameIdentifier	 nth Position Filter
=	TokenNameEQUAL	
!	TokenNameNOT	
_exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
hasLastCall	TokenNameIdentifier	 has Last Call
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
!	TokenNameNOT	
_exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
hasPositionCall	TokenNameIdentifier	 has Position Call
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// _nthDescendant optimization - only if _nthPositionFilter is on 	TokenNameCOMMENT_LINE	_nthDescendant optimization - only if _nthPositionFilter is on 
if	TokenNameif	
(	TokenNameLPAREN	
_nthPositionFilter	TokenNameIdentifier	 nth Position Filter
)	TokenNameRPAREN	
{	TokenNameLBRACE	
SyntaxTreeNode	TokenNameIdentifier	 Syntax Tree Node
parent	TokenNameIdentifier	 parent
=	TokenNameEQUAL	
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
_nthDescendant	TokenNameIdentifier	 nth Descendant
=	TokenNameEQUAL	
(	TokenNameLPAREN	
parent	TokenNameIdentifier	 parent
instanceof	TokenNameinstanceof	
Step	TokenNameIdentifier	 Step
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
(	TokenNameLPAREN	
parent	TokenNameIdentifier	 parent
.	TokenNameDOT	
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
instanceof	TokenNameinstanceof	
AbsoluteLocationPath	TokenNameIdentifier	 Absolute Location Path
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
_type	TokenNameIdentifier	 type
=	TokenNameEQUAL	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
NodeSet	TokenNameIdentifier	 Node Set
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// Reset optimization flags 	TokenNameCOMMENT_LINE	Reset optimization flags 
_nthPositionFilter	TokenNameIdentifier	 nth Position Filter
=	TokenNameEQUAL	
_nthDescendant	TokenNameIdentifier	 nth Descendant
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
// Otherwise, expand [e] to [position() = e] 	TokenNameCOMMENT_LINE	Otherwise, expand [e] to [position() = e] 
final	TokenNamefinal	
QName	TokenNameIdentifier	 Q Name
position	TokenNameIdentifier	 position
=	TokenNameEQUAL	
getParser	TokenNameIdentifier	 get Parser
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getQNameIgnoreDefaultNs	TokenNameIdentifier	 get Q Name Ignore Default Ns
(	TokenNameLPAREN	
"position"	TokenNameStringLiteral	position
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
PositionCall	TokenNameIdentifier	 Position Call
positionCall	TokenNameIdentifier	 position Call
=	TokenNameEQUAL	
new	TokenNamenew	
PositionCall	TokenNameIdentifier	 Position Call
(	TokenNameLPAREN	
position	TokenNameIdentifier	 position
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
positionCall	TokenNameIdentifier	 position Call
.	TokenNameDOT	
setParser	TokenNameIdentifier	 set Parser
(	TokenNameLPAREN	
getParser	TokenNameIdentifier	 get Parser
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
positionCall	TokenNameIdentifier	 position Call
.	TokenNameDOT	
setParent	TokenNameIdentifier	 set Parent
(	TokenNameLPAREN	
this	TokenNamethis	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
_exp	TokenNameIdentifier	 exp
=	TokenNameEQUAL	
new	TokenNamenew	
EqualityExpr	TokenNameIdentifier	 Equality Expr
(	TokenNameLPAREN	
Operators	TokenNameIdentifier	 Operators
.	TokenNameDOT	
EQ	TokenNameIdentifier	 EQ
,	TokenNameCOMMA	
positionCall	TokenNameIdentifier	 position Call
,	TokenNameCOMMA	
_exp	TokenNameIdentifier	 exp
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
_exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
typeCheck	TokenNameIdentifier	 type Check
(	TokenNameLPAREN	
stable	TokenNameIdentifier	 stable
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
Boolean	TokenNameIdentifier	 Boolean
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_exp	TokenNameIdentifier	 exp
=	TokenNameEQUAL	
new	TokenNamenew	
CastExpr	TokenNameIdentifier	 Cast Expr
(	TokenNameLPAREN	
_exp	TokenNameIdentifier	 exp
,	TokenNameCOMMA	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
Boolean	TokenNameIdentifier	 Boolean
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
_type	TokenNameIdentifier	 type
=	TokenNameEQUAL	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
Boolean	TokenNameIdentifier	 Boolean
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
// All other types will be handled as boolean values 	TokenNameCOMMENT_LINE	All other types will be handled as boolean values 
if	TokenNameif	
(	TokenNameLPAREN	
texp	TokenNameIdentifier	 texp
instanceof	TokenNameinstanceof	
BooleanType	TokenNameIdentifier	 Boolean Type
==	TokenNameEQUAL_EQUAL	
false	TokenNamefalse	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_exp	TokenNameIdentifier	 exp
=	TokenNameEQUAL	
new	TokenNamenew	
CastExpr	TokenNameIdentifier	 Cast Expr
(	TokenNameLPAREN	
_exp	TokenNameIdentifier	 exp
,	TokenNameCOMMA	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
Boolean	TokenNameIdentifier	 Boolean
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
return	TokenNamereturn	
_type	TokenNameIdentifier	 type
=	TokenNameEQUAL	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
Boolean	TokenNameIdentifier	 Boolean
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Create a new "Filter" class implementing * <code>CurrentNodeListFilter</code>. Allocate registers for local * variables and local parameters passed in the closure to test(). * Notice that local variables need to be "unboxed". */	TokenNameCOMMENT_JAVADOC	 Create a new "Filter" class implementing <code>CurrentNodeListFilter</code>. Allocate registers for local variables and local parameters passed in the closure to test(). Notice that local variables need to be "unboxed". 
private	TokenNameprivate	
void	TokenNamevoid	
compileFilter	TokenNameIdentifier	 compile Filter
(	TokenNameLPAREN	
ClassGenerator	TokenNameIdentifier	 Class Generator
classGen	TokenNameIdentifier	 class Gen
,	TokenNameCOMMA	
MethodGenerator	TokenNameIdentifier	 Method Generator
methodGen	TokenNameIdentifier	 method Gen
)	TokenNameRPAREN	
{	TokenNameLBRACE	
TestGenerator	TokenNameIdentifier	 Test Generator
testGen	TokenNameIdentifier	 test Gen
;	TokenNameSEMICOLON	
LocalVariableGen	TokenNameIdentifier	 Local Variable Gen
local	TokenNameIdentifier	 local
;	TokenNameSEMICOLON	
FilterGenerator	TokenNameIdentifier	 Filter Generator
filterGen	TokenNameIdentifier	 filter Gen
;	TokenNameSEMICOLON	
_className	TokenNameIdentifier	 class Name
=	TokenNameEQUAL	
getXSLTC	TokenNameIdentifier	 get XSLTC
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getHelperClassName	TokenNameIdentifier	 get Helper Class Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
filterGen	TokenNameIdentifier	 filter Gen
=	TokenNameEQUAL	
new	TokenNamenew	
FilterGenerator	TokenNameIdentifier	 Filter Generator
(	TokenNameLPAREN	
_className	TokenNameIdentifier	 class Name
,	TokenNameCOMMA	
"java.lang.Object"	TokenNameStringLiteral	java.lang.Object
,	TokenNameCOMMA	
toString	TokenNameIdentifier	 to String
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
ACC_PUBLIC	TokenNameIdentifier	 ACC  PUBLIC
|	TokenNameOR	
ACC_SUPER	TokenNameIdentifier	 ACC  SUPER
,	TokenNameCOMMA	
new	TokenNamenew	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
CURRENT_NODE_LIST_FILTER	TokenNameIdentifier	 CURRENT  NODE  LIST  FILTER
}	TokenNameRBRACE	
,	TokenNameCOMMA	
classGen	TokenNameIdentifier	 class Gen
.	TokenNameDOT	
getStylesheet	TokenNameIdentifier	 get Stylesheet
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
ConstantPoolGen	TokenNameIdentifier	 Constant Pool Gen
cpg	TokenNameIdentifier	 cpg
=	TokenNameEQUAL	
filterGen	TokenNameIdentifier	 filter Gen
.	TokenNameDOT	
getConstantPool	TokenNameIdentifier	 get Constant Pool
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
int	TokenNameint	
length	TokenNameIdentifier	 length
=	TokenNameEQUAL	
(	TokenNameLPAREN	
_closureVars	TokenNameIdentifier	 closure Vars
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
?	TokenNameQUESTION	
0	TokenNameIntegerLiteral	
:	TokenNameCOLON	
_closureVars	TokenNameIdentifier	 closure Vars
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Add a new instance variable for each var in closure 	TokenNameCOMMENT_LINE	Add a new instance variable for each var in closure 
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
VariableBase	TokenNameIdentifier	 Variable Base
var	TokenNameIdentifier	 var
=	TokenNameEQUAL	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
VariableRefBase	TokenNameIdentifier	 Variable Ref Base
)	TokenNameRPAREN	
_closureVars	TokenNameIdentifier	 closure Vars
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
)	TokenNameRPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
getVariable	TokenNameIdentifier	 get Variable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
filterGen	TokenNameIdentifier	 filter Gen
.	TokenNameDOT	
addField	TokenNameIdentifier	 add Field
(	TokenNameLPAREN	
new	TokenNamenew	
Field	TokenNameIdentifier	 Field
(	TokenNameLPAREN	
ACC_PUBLIC	TokenNameIdentifier	 ACC  PUBLIC
,	TokenNameCOMMA	
cpg	TokenNameIdentifier	 cpg
.	TokenNameDOT	
addUtf8	TokenNameIdentifier	 add Utf8
(	TokenNameLPAREN	
var	TokenNameIdentifier	 var
.	TokenNameDOT	
getEscapedName	TokenNameIdentifier	 get Escaped Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
cpg	TokenNameIdentifier	 cpg
.	TokenNameDOT	
addUtf8	TokenNameIdentifier	 add Utf8
(	TokenNameLPAREN	
var	TokenNameIdentifier	 var
.	TokenNameDOT	
getType	TokenNameIdentifier	 get Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
toSignature	TokenNameIdentifier	 to Signature
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
null	TokenNamenull	
,	TokenNameCOMMA	
cpg	TokenNameIdentifier	 cpg
.	TokenNameDOT	
getConstantPool	TokenNameIdentifier	 get Constant Pool
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
final	TokenNamefinal	
InstructionList	TokenNameIdentifier	 Instruction List
il	TokenNameIdentifier	 il
=	TokenNameEQUAL	
new	TokenNamenew	
InstructionList	TokenNameIdentifier	 Instruction List
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
testGen	TokenNameIdentifier	 test Gen
=	TokenNameEQUAL	
new	TokenNamenew	
TestGenerator	TokenNameIdentifier	 Test Generator
(	TokenNameLPAREN	
ACC_PUBLIC	TokenNameIdentifier	 ACC  PUBLIC
|	TokenNameOR	
ACC_FINAL	TokenNameIdentifier	 ACC  FINAL
,	TokenNameCOMMA	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
BOOLEAN	TokenNameIdentifier	 BOOLEAN
,	TokenNameCOMMA	
new	TokenNamenew	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
Type	TokenNameIdentifier	 Type
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
INT	TokenNameIdentifier	 INT
,	TokenNameCOMMA	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
INT	TokenNameIdentifier	 INT
,	TokenNameCOMMA	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
INT	TokenNameIdentifier	 INT
,	TokenNameCOMMA	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
bcel	TokenNameIdentifier	 bcel
.	TokenNameDOT	
generic	TokenNameIdentifier	 generic
.	TokenNameDOT	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
INT	TokenNameIdentifier	 INT
,	TokenNameCOMMA	
Util	TokenNameIdentifier	 Util
.	TokenNameDOT	
getJCRefType	TokenNameIdentifier	 get JC Ref Type
(	TokenNameLPAREN	
TRANSLET_SIG	TokenNameIdentifier	 TRANSLET  SIG
)	TokenNameRPAREN	
,	TokenNameCOMMA	
Util	TokenNameIdentifier	 Util
.	TokenNameDOT	
getJCRefType	TokenNameIdentifier	 get JC Ref Type
(	TokenNameLPAREN	
NODE_ITERATOR_SIG	TokenNameIdentifier	 NODE  ITERATOR  SIG
)	TokenNameRPAREN	
}	TokenNameRBRACE	
,	TokenNameCOMMA	
new	TokenNamenew	
String	TokenNameIdentifier	 String
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
"node"	TokenNameStringLiteral	node
,	TokenNameCOMMA	
"position"	TokenNameStringLiteral	position
,	TokenNameCOMMA	
"last"	TokenNameStringLiteral	last
,	TokenNameCOMMA	
"current"	TokenNameStringLiteral	current
,	TokenNameCOMMA	
"translet"	TokenNameStringLiteral	translet
,	TokenNameCOMMA	
"iterator"	TokenNameStringLiteral	iterator
}	TokenNameRBRACE	
,	TokenNameCOMMA	
"test"	TokenNameStringLiteral	test
,	TokenNameCOMMA	
_className	TokenNameIdentifier	 class Name
,	TokenNameCOMMA	
il	TokenNameIdentifier	 il
,	TokenNameCOMMA	
cpg	TokenNameIdentifier	 cpg
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Store the dom in a local variable 	TokenNameCOMMENT_LINE	Store the dom in a local variable 
local	TokenNameIdentifier	 local
=	TokenNameEQUAL	
testGen	TokenNameIdentifier	 test Gen
.	TokenNameDOT	
addLocalVariable	TokenNameIdentifier	 add Local Variable
(	TokenNameLPAREN	
"document"	TokenNameStringLiteral	document
,	TokenNameCOMMA	
Util	TokenNameIdentifier	 Util
.	TokenNameDOT	
getJCRefType	TokenNameIdentifier	 get JC Ref Type
(	TokenNameLPAREN	
DOM_INTF_SIG	TokenNameIdentifier	 DOM  INTF  SIG
)	TokenNameRPAREN	
,	TokenNameCOMMA	
null	TokenNamenull	
,	TokenNameCOMMA	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
String	TokenNameIdentifier	 String
className	TokenNameIdentifier	 class Name
=	TokenNameEQUAL	
classGen	TokenNameIdentifier	 class Gen
.	TokenNameDOT	
getClassName	TokenNameIdentifier	 get Class Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
filterGen	TokenNameIdentifier	 filter Gen
.	TokenNameDOT	
loadTranslet	TokenNameIdentifier	 load Translet
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
new	TokenNamenew	
CHECKCAST	TokenNameIdentifier	 CHECKCAST
(	TokenNameLPAREN	
cpg	TokenNameIdentifier	 cpg
.	TokenNameDOT	
addClass	TokenNameIdentifier	 add Class
(	TokenNameLPAREN	
className	TokenNameIdentifier	 class Name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
new	TokenNamenew	
GETFIELD	TokenNameIdentifier	 GETFIELD
(	TokenNameLPAREN	
cpg	TokenNameIdentifier	 cpg
.	TokenNameDOT	
addFieldref	TokenNameIdentifier	 add Fieldref
(	TokenNameLPAREN	
className	TokenNameIdentifier	 class Name
,	TokenNameCOMMA	
DOM_FIELD	TokenNameIdentifier	 DOM  FIELD
,	TokenNameCOMMA	
DOM_INTF_SIG	TokenNameIdentifier	 DOM  INTF  SIG
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
local	TokenNameIdentifier	 local
.	TokenNameDOT	
setStart	TokenNameIdentifier	 set Start
(	TokenNameLPAREN	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
new	TokenNamenew	
ASTORE	TokenNameIdentifier	 ASTORE
(	TokenNameLPAREN	
local	TokenNameIdentifier	 local
.	TokenNameDOT	
getIndex	TokenNameIdentifier	 get Index
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Store the dom index in the test generator 	TokenNameCOMMENT_LINE	Store the dom index in the test generator 
testGen	TokenNameIdentifier	 test Gen
.	TokenNameDOT	
setDomIndex	TokenNameIdentifier	 set Dom Index
(	TokenNameLPAREN	
local	TokenNameIdentifier	 local
.	TokenNameDOT	
getIndex	TokenNameIdentifier	 get Index
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
_exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
translate	TokenNameIdentifier	 translate
(	TokenNameLPAREN	
filterGen	TokenNameIdentifier	 filter Gen
,	TokenNameCOMMA	
testGen	TokenNameIdentifier	 test Gen
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
IRETURN	TokenNameIdentifier	 IRETURN
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
filterGen	TokenNameIdentifier	 filter Gen
.	TokenNameDOT	
addEmptyConstructor	TokenNameIdentifier	 add Empty Constructor
(	TokenNameLPAREN	
ACC_PUBLIC	TokenNameIdentifier	 ACC  PUBLIC
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
filterGen	TokenNameIdentifier	 filter Gen
.	TokenNameDOT	
addMethod	TokenNameIdentifier	 add Method
(	TokenNameLPAREN	
testGen	TokenNameIdentifier	 test Gen
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
getXSLTC	TokenNameIdentifier	 get XSLTC
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
dumpClass	TokenNameIdentifier	 dump Class
(	TokenNameLPAREN	
filterGen	TokenNameIdentifier	 filter Gen
.	TokenNameDOT	
getJavaClass	TokenNameIdentifier	 get Java Class
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns true if the predicate is a test for the existance of an * element or attribute. All we have to do is to get the first node * from the step, check if it is there, and then return true/false. */	TokenNameCOMMENT_JAVADOC	 Returns true if the predicate is a test for the existance of an element or attribute. All we have to do is to get the first node from the step, check if it is there, and then return true/false. 
public	TokenNamepublic	
boolean	TokenNameboolean	
isBooleanTest	TokenNameIdentifier	 is Boolean Test
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
(	TokenNameLPAREN	
_exp	TokenNameIdentifier	 exp
instanceof	TokenNameinstanceof	
BooleanExpr	TokenNameIdentifier	 Boolean Expr
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Method to see if we can optimise the predicate by using a specialised * iterator for expressions like '/foo/bar[@attr = $var]', which are * very common in many stylesheets */	TokenNameCOMMENT_JAVADOC	 Method to see if we can optimise the predicate by using a specialised iterator for expressions like '/foo/bar[@attr = $var]', which are very common in many stylesheets 
public	TokenNamepublic	
boolean	TokenNameboolean	
isNodeValueTest	TokenNameIdentifier	 is Node Value Test
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
_canOptimize	TokenNameIdentifier	 can Optimize
)	TokenNameRPAREN	
return	TokenNamereturn	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
(	TokenNameLPAREN	
getStep	TokenNameIdentifier	 get Step
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
&&	TokenNameAND_AND	
getCompareValue	TokenNameIdentifier	 get Compare Value
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the step in an expression of the form 'step = value'. * Null is returned if the expression is not of the right form. * Optimization if off if null is returned. */	TokenNameCOMMENT_JAVADOC	 Returns the step in an expression of the form 'step = value'. Null is returned if the expression is not of the right form. Optimization if off if null is returned. 
public	TokenNamepublic	
Step	TokenNameIdentifier	 Step
getStep	TokenNameIdentifier	 get Step
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Returned cached value if called more than once 	TokenNameCOMMENT_LINE	Returned cached value if called more than once 
if	TokenNameif	
(	TokenNameLPAREN	
_step	TokenNameIdentifier	 step
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
_step	TokenNameIdentifier	 step
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Nothing to do if _exp is null 	TokenNameCOMMENT_LINE	Nothing to do if _exp is null 
if	TokenNameif	
(	TokenNameLPAREN	
_exp	TokenNameIdentifier	 exp
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Ignore if not equality expression 	TokenNameCOMMENT_LINE	Ignore if not equality expression 
if	TokenNameif	
(	TokenNameLPAREN	
_exp	TokenNameIdentifier	 exp
instanceof	TokenNameinstanceof	
EqualityExpr	TokenNameIdentifier	 Equality Expr
)	TokenNameRPAREN	
{	TokenNameLBRACE	
EqualityExpr	TokenNameIdentifier	 Equality Expr
exp	TokenNameIdentifier	 exp
=	TokenNameEQUAL	
(	TokenNameLPAREN	
EqualityExpr	TokenNameIdentifier	 Equality Expr
)	TokenNameRPAREN	
_exp	TokenNameIdentifier	 exp
;	TokenNameSEMICOLON	
Expression	TokenNameIdentifier	 Expression
left	TokenNameIdentifier	 left
=	TokenNameEQUAL	
exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
getLeft	TokenNameIdentifier	 get Left
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Expression	TokenNameIdentifier	 Expression
right	TokenNameIdentifier	 right
=	TokenNameEQUAL	
exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
getRight	TokenNameIdentifier	 get Right
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Unwrap and set _step if appropriate 	TokenNameCOMMENT_LINE	Unwrap and set _step if appropriate 
if	TokenNameif	
(	TokenNameLPAREN	
left	TokenNameIdentifier	 left
instanceof	TokenNameinstanceof	
CastExpr	TokenNameIdentifier	 Cast Expr
)	TokenNameRPAREN	
{	TokenNameLBRACE	
left	TokenNameIdentifier	 left
=	TokenNameEQUAL	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
CastExpr	TokenNameIdentifier	 Cast Expr
)	TokenNameRPAREN	
left	TokenNameIdentifier	 left
)	TokenNameRPAREN	
.	TokenNameDOT	
getExpr	TokenNameIdentifier	 get Expr
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
left	TokenNameIdentifier	 left
instanceof	TokenNameinstanceof	
Step	TokenNameIdentifier	 Step
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_step	TokenNameIdentifier	 step
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Step	TokenNameIdentifier	 Step
)	TokenNameRPAREN	
left	TokenNameIdentifier	 left
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Unwrap and set _step if appropriate 	TokenNameCOMMENT_LINE	Unwrap and set _step if appropriate 
if	TokenNameif	
(	TokenNameLPAREN	
right	TokenNameIdentifier	 right
instanceof	TokenNameinstanceof	
CastExpr	TokenNameIdentifier	 Cast Expr
)	TokenNameRPAREN	
{	TokenNameLBRACE	
right	TokenNameIdentifier	 right
=	TokenNameEQUAL	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
CastExpr	TokenNameIdentifier	 Cast Expr
)	TokenNameRPAREN	
right	TokenNameIdentifier	 right
)	TokenNameRPAREN	
.	TokenNameDOT	
getExpr	TokenNameIdentifier	 get Expr
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
right	TokenNameIdentifier	 right
instanceof	TokenNameinstanceof	
Step	TokenNameIdentifier	 Step
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_step	TokenNameIdentifier	 step
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Step	TokenNameIdentifier	 Step
)	TokenNameRPAREN	
right	TokenNameIdentifier	 right
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
_step	TokenNameIdentifier	 step
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Returns the value in an expression of the form 'step = value'. * A value may be either a literal string or a variable whose * type is string. Optimization if off if null is returned. */	TokenNameCOMMENT_JAVADOC	 Returns the value in an expression of the form 'step = value'. A value may be either a literal string or a variable whose type is string. Optimization if off if null is returned. 
public	TokenNamepublic	
Expression	TokenNameIdentifier	 Expression
getCompareValue	TokenNameIdentifier	 get Compare Value
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// Returned cached value if called more than once 	TokenNameCOMMENT_LINE	Returned cached value if called more than once 
if	TokenNameif	
(	TokenNameLPAREN	
_value	TokenNameIdentifier	 value
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
_value	TokenNameIdentifier	 value
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Nothing to to do if _exp is null 	TokenNameCOMMENT_LINE	Nothing to to do if _exp is null 
if	TokenNameif	
(	TokenNameLPAREN	
_exp	TokenNameIdentifier	 exp
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Ignore if not an equality expression 	TokenNameCOMMENT_LINE	Ignore if not an equality expression 
if	TokenNameif	
(	TokenNameLPAREN	
_exp	TokenNameIdentifier	 exp
instanceof	TokenNameinstanceof	
EqualityExpr	TokenNameIdentifier	 Equality Expr
)	TokenNameRPAREN	
{	TokenNameLBRACE	
EqualityExpr	TokenNameIdentifier	 Equality Expr
exp	TokenNameIdentifier	 exp
=	TokenNameEQUAL	
(	TokenNameLPAREN	
EqualityExpr	TokenNameIdentifier	 Equality Expr
)	TokenNameRPAREN	
_exp	TokenNameIdentifier	 exp
;	TokenNameSEMICOLON	
Expression	TokenNameIdentifier	 Expression
left	TokenNameIdentifier	 left
=	TokenNameEQUAL	
exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
getLeft	TokenNameIdentifier	 get Left
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Expression	TokenNameIdentifier	 Expression
right	TokenNameIdentifier	 right
=	TokenNameEQUAL	
exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
getRight	TokenNameIdentifier	 get Right
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Return if left is literal string 	TokenNameCOMMENT_LINE	Return if left is literal string 
if	TokenNameif	
(	TokenNameLPAREN	
left	TokenNameIdentifier	 left
instanceof	TokenNameinstanceof	
LiteralExpr	TokenNameIdentifier	 Literal Expr
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_value	TokenNameIdentifier	 value
=	TokenNameEQUAL	
left	TokenNameIdentifier	 left
;	TokenNameSEMICOLON	
return	TokenNamereturn	
_value	TokenNameIdentifier	 value
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Return if left is a variable reference of type string 	TokenNameCOMMENT_LINE	Return if left is a variable reference of type string 
if	TokenNameif	
(	TokenNameLPAREN	
left	TokenNameIdentifier	 left
instanceof	TokenNameinstanceof	
VariableRefBase	TokenNameIdentifier	 Variable Ref Base
&&	TokenNameAND_AND	
left	TokenNameIdentifier	 left
.	TokenNameDOT	
getType	TokenNameIdentifier	 get Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_value	TokenNameIdentifier	 value
=	TokenNameEQUAL	
left	TokenNameIdentifier	 left
;	TokenNameSEMICOLON	
return	TokenNamereturn	
_value	TokenNameIdentifier	 value
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Return if right is literal string 	TokenNameCOMMENT_LINE	Return if right is literal string 
if	TokenNameif	
(	TokenNameLPAREN	
right	TokenNameIdentifier	 right
instanceof	TokenNameinstanceof	
LiteralExpr	TokenNameIdentifier	 Literal Expr
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_value	TokenNameIdentifier	 value
=	TokenNameEQUAL	
right	TokenNameIdentifier	 right
;	TokenNameSEMICOLON	
return	TokenNamereturn	
_value	TokenNameIdentifier	 value
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Return if left is a variable reference whose type is string 	TokenNameCOMMENT_LINE	Return if left is a variable reference whose type is string 
if	TokenNameif	
(	TokenNameLPAREN	
right	TokenNameIdentifier	 right
instanceof	TokenNameinstanceof	
VariableRefBase	TokenNameIdentifier	 Variable Ref Base
&&	TokenNameAND_AND	
right	TokenNameIdentifier	 right
.	TokenNameDOT	
getType	TokenNameIdentifier	 get Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
Type	TokenNameIdentifier	 Type
.	TokenNameDOT	
String	TokenNameIdentifier	 String
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_value	TokenNameIdentifier	 value
=	TokenNameEQUAL	
right	TokenNameIdentifier	 right
;	TokenNameSEMICOLON	
return	TokenNamereturn	
_value	TokenNameIdentifier	 value
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Translate a predicate expression. This translation pushes * two references on the stack: a reference to a newly created * filter object and a reference to the predicate's closure. */	TokenNameCOMMENT_JAVADOC	 Translate a predicate expression. This translation pushes two references on the stack: a reference to a newly created filter object and a reference to the predicate's closure. 
public	TokenNamepublic	
void	TokenNamevoid	
translateFilter	TokenNameIdentifier	 translate Filter
(	TokenNameLPAREN	
ClassGenerator	TokenNameIdentifier	 Class Generator
classGen	TokenNameIdentifier	 class Gen
,	TokenNameCOMMA	
MethodGenerator	TokenNameIdentifier	 Method Generator
methodGen	TokenNameIdentifier	 method Gen
)	TokenNameRPAREN	
{	TokenNameLBRACE	
final	TokenNamefinal	
ConstantPoolGen	TokenNameIdentifier	 Constant Pool Gen
cpg	TokenNameIdentifier	 cpg
=	TokenNameEQUAL	
classGen	TokenNameIdentifier	 class Gen
.	TokenNameDOT	
getConstantPool	TokenNameIdentifier	 get Constant Pool
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
InstructionList	TokenNameIdentifier	 Instruction List
il	TokenNameIdentifier	 il
=	TokenNameEQUAL	
methodGen	TokenNameIdentifier	 method Gen
.	TokenNameDOT	
getInstructionList	TokenNameIdentifier	 get Instruction List
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Compile auxiliary class for filter 	TokenNameCOMMENT_LINE	Compile auxiliary class for filter 
compileFilter	TokenNameIdentifier	 compile Filter
(	TokenNameLPAREN	
classGen	TokenNameIdentifier	 class Gen
,	TokenNameCOMMA	
methodGen	TokenNameIdentifier	 method Gen
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Create new instance of filter 	TokenNameCOMMENT_LINE	Create new instance of filter 
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
new	TokenNamenew	
NEW	TokenNameIdentifier	 NEW
(	TokenNameLPAREN	
cpg	TokenNameIdentifier	 cpg
.	TokenNameDOT	
addClass	TokenNameIdentifier	 add Class
(	TokenNameLPAREN	
_className	TokenNameIdentifier	 class Name
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
DUP	TokenNameIdentifier	 DUP
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
new	TokenNamenew	
INVOKESPECIAL	TokenNameIdentifier	 INVOKESPECIAL
(	TokenNameLPAREN	
cpg	TokenNameIdentifier	 cpg
.	TokenNameDOT	
addMethodref	TokenNameIdentifier	 add Methodref
(	TokenNameLPAREN	
_className	TokenNameIdentifier	 class Name
,	TokenNameCOMMA	
"<init>"	TokenNameStringLiteral	<init>
,	TokenNameCOMMA	
"()V"	TokenNameStringLiteral	()V
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Initialize closure variables 	TokenNameCOMMENT_LINE	Initialize closure variables 
final	TokenNamefinal	
int	TokenNameint	
length	TokenNameIdentifier	 length
=	TokenNameEQUAL	
(	TokenNameLPAREN	
_closureVars	TokenNameIdentifier	 closure Vars
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
?	TokenNameQUESTION	
0	TokenNameIntegerLiteral	
:	TokenNameCOLON	
_closureVars	TokenNameIdentifier	 closure Vars
.	TokenNameDOT	
size	TokenNameIdentifier	 size
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
int	TokenNameint	
i	TokenNameIdentifier	 i
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
<	TokenNameLESS	
length	TokenNameIdentifier	 length
;	TokenNameSEMICOLON	
i	TokenNameIdentifier	 i
++	TokenNamePLUS_PLUS	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
VariableRefBase	TokenNameIdentifier	 Variable Ref Base
varRef	TokenNameIdentifier	 var Ref
=	TokenNameEQUAL	
(	TokenNameLPAREN	
VariableRefBase	TokenNameIdentifier	 Variable Ref Base
)	TokenNameRPAREN	
_closureVars	TokenNameIdentifier	 closure Vars
.	TokenNameDOT	
get	TokenNameIdentifier	 get
(	TokenNameLPAREN	
i	TokenNameIdentifier	 i
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
VariableBase	TokenNameIdentifier	 Variable Base
var	TokenNameIdentifier	 var
=	TokenNameEQUAL	
varRef	TokenNameIdentifier	 var Ref
.	TokenNameDOT	
getVariable	TokenNameIdentifier	 get Variable
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Type	TokenNameIdentifier	 Type
varType	TokenNameIdentifier	 var Type
=	TokenNameEQUAL	
var	TokenNameIdentifier	 var
.	TokenNameDOT	
getType	TokenNameIdentifier	 get Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
DUP	TokenNameIdentifier	 DUP
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// Find nearest closure implemented as an inner class 	TokenNameCOMMENT_LINE	Find nearest closure implemented as an inner class 
Closure	TokenNameIdentifier	 Closure
variableClosure	TokenNameIdentifier	 variable Closure
=	TokenNameEQUAL	
_parentClosure	TokenNameIdentifier	 parent Closure
;	TokenNameSEMICOLON	
while	TokenNamewhile	
(	TokenNameLPAREN	
variableClosure	TokenNameIdentifier	 variable Closure
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
variableClosure	TokenNameIdentifier	 variable Closure
.	TokenNameDOT	
inInnerClass	TokenNameIdentifier	 in Inner Class
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
break	TokenNamebreak	
;	TokenNameSEMICOLON	
variableClosure	TokenNameIdentifier	 variable Closure
=	TokenNameEQUAL	
variableClosure	TokenNameIdentifier	 variable Closure
.	TokenNameDOT	
getParentClosure	TokenNameIdentifier	 get Parent Closure
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Use getfield if in an inner class 	TokenNameCOMMENT_LINE	Use getfield if in an inner class 
if	TokenNameif	
(	TokenNameLPAREN	
variableClosure	TokenNameIdentifier	 variable Closure
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
ALOAD_0	TokenNameIdentifier	 ALOAD 0
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
new	TokenNamenew	
GETFIELD	TokenNameIdentifier	 GETFIELD
(	TokenNameLPAREN	
cpg	TokenNameIdentifier	 cpg
.	TokenNameDOT	
addFieldref	TokenNameIdentifier	 add Fieldref
(	TokenNameLPAREN	
variableClosure	TokenNameIdentifier	 variable Closure
.	TokenNameDOT	
getInnerClassName	TokenNameIdentifier	 get Inner Class Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
var	TokenNameIdentifier	 var
.	TokenNameDOT	
getEscapedName	TokenNameIdentifier	 get Escaped Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
varType	TokenNameIdentifier	 var Type
.	TokenNameDOT	
toSignature	TokenNameIdentifier	 to Signature
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
// Use a load of instruction if in translet class 	TokenNameCOMMENT_LINE	Use a load of instruction if in translet class 
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
var	TokenNameIdentifier	 var
.	TokenNameDOT	
loadInstruction	TokenNameIdentifier	 load Instruction
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// Store variable in new closure 	TokenNameCOMMENT_LINE	Store variable in new closure 
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
new	TokenNamenew	
PUTFIELD	TokenNameIdentifier	 PUTFIELD
(	TokenNameLPAREN	
cpg	TokenNameIdentifier	 cpg
.	TokenNameDOT	
addFieldref	TokenNameIdentifier	 add Fieldref
(	TokenNameLPAREN	
_className	TokenNameIdentifier	 class Name
,	TokenNameCOMMA	
var	TokenNameIdentifier	 var
.	TokenNameDOT	
getEscapedName	TokenNameIdentifier	 get Escaped Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
varType	TokenNameIdentifier	 var Type
.	TokenNameDOT	
toSignature	TokenNameIdentifier	 to Signature
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
/** * Translate a predicate expression. If non of the optimizations apply * then this translation pushes two references on the stack: a reference * to a newly created filter object and a reference to the predicate's * closure. See class <code>Step</code> for further details. */	TokenNameCOMMENT_JAVADOC	 Translate a predicate expression. If non of the optimizations apply then this translation pushes two references on the stack: a reference to a newly created filter object and a reference to the predicate's closure. See class <code>Step</code> for further details. 
public	TokenNamepublic	
void	TokenNamevoid	
translate	TokenNameIdentifier	 translate
(	TokenNameLPAREN	
ClassGenerator	TokenNameIdentifier	 Class Generator
classGen	TokenNameIdentifier	 class Gen
,	TokenNameCOMMA	
MethodGenerator	TokenNameIdentifier	 Method Generator
methodGen	TokenNameIdentifier	 method Gen
)	TokenNameRPAREN	
{	TokenNameLBRACE	
final	TokenNamefinal	
ConstantPoolGen	TokenNameIdentifier	 Constant Pool Gen
cpg	TokenNameIdentifier	 cpg
=	TokenNameEQUAL	
classGen	TokenNameIdentifier	 class Gen
.	TokenNameDOT	
getConstantPool	TokenNameIdentifier	 get Constant Pool
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
final	TokenNamefinal	
InstructionList	TokenNameIdentifier	 Instruction List
il	TokenNameIdentifier	 il
=	TokenNameEQUAL	
methodGen	TokenNameIdentifier	 method Gen
.	TokenNameDOT	
getInstructionList	TokenNameIdentifier	 get Instruction List
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
_nthPositionFilter	TokenNameIdentifier	 nth Position Filter
||	TokenNameOR_OR	
_nthDescendant	TokenNameIdentifier	 nth Descendant
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_exp	TokenNameIdentifier	 exp
.	TokenNameDOT	
translate	TokenNameIdentifier	 translate
(	TokenNameLPAREN	
classGen	TokenNameIdentifier	 class Gen
,	TokenNameCOMMA	
methodGen	TokenNameIdentifier	 method Gen
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
isNodeValueTest	TokenNameIdentifier	 is Node Value Test
(	TokenNameLPAREN	
)	TokenNameRPAREN	
&&	TokenNameAND_AND	
(	TokenNameLPAREN	
getParent	TokenNameIdentifier	 get Parent
(	TokenNameLPAREN	
)	TokenNameRPAREN	
instanceof	TokenNameinstanceof	
Step	TokenNameIdentifier	 Step
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
_value	TokenNameIdentifier	 value
.	TokenNameDOT	
translate	TokenNameIdentifier	 translate
(	TokenNameLPAREN	
classGen	TokenNameIdentifier	 class Gen
,	TokenNameCOMMA	
methodGen	TokenNameIdentifier	 method Gen
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
new	TokenNamenew	
CHECKCAST	TokenNameIdentifier	 CHECKCAST
(	TokenNameLPAREN	
cpg	TokenNameIdentifier	 cpg
.	TokenNameDOT	
addClass	TokenNameIdentifier	 add Class
(	TokenNameLPAREN	
STRING_CLASS	TokenNameIdentifier	 STRING  CLASS
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
il	TokenNameIdentifier	 il
.	TokenNameDOT	
append	TokenNameIdentifier	 append
(	TokenNameLPAREN	
new	TokenNamenew	
PUSH	TokenNameIdentifier	 PUSH
(	TokenNameLPAREN	
cpg	TokenNameIdentifier	 cpg
,	TokenNameCOMMA	
(	TokenNameLPAREN	
(	TokenNameLPAREN	
EqualityExpr	TokenNameIdentifier	 Equality Expr
)	TokenNameRPAREN	
_exp	TokenNameIdentifier	 exp
)	TokenNameRPAREN	
.	TokenNameDOT	
getOp	TokenNameIdentifier	 get Op
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
translateFilter	TokenNameIdentifier	 translate Filter
(	TokenNameLPAREN	
classGen	TokenNameIdentifier	 class Gen
,	TokenNameCOMMA	
methodGen	TokenNameIdentifier	 method Gen
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
