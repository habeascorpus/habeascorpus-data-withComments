/* Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. */	TokenNameCOMMENT_BLOCK	 Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. 
package	TokenNamepackage	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
bridge	TokenNameIdentifier	 bridge
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
geom	TokenNameIdentifier	 geom
.	TokenNameDOT	
AffineTransform	TokenNameIdentifier	 Affine Transform
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
geom	TokenNameIdentifier	 geom
.	TokenNameDOT	
Point2D	TokenNameIdentifier	 Point2 D
;	TokenNameSEMICOLON	
import	TokenNameimport	
java	TokenNameIdentifier	 java
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
geom	TokenNameIdentifier	 geom
.	TokenNameDOT	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
css	TokenNameIdentifier	 css
.	TokenNameDOT	
engine	TokenNameIdentifier	 engine
.	TokenNameDOT	
SVGCSSEngine	TokenNameIdentifier	 SVGCSS Engine
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
css	TokenNameIdentifier	 css
.	TokenNameDOT	
engine	TokenNameIdentifier	 engine
.	TokenNameDOT	
value	TokenNameIdentifier	 value
.	TokenNameDOT	
Value	TokenNameIdentifier	 Value
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
renderable	TokenNameIdentifier	 renderable
.	TokenNameDOT	
ClipRable8Bit	TokenNameIdentifier	 Clip Rable8 Bit
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
ext	TokenNameIdentifier	 ext
.	TokenNameDOT	
awt	TokenNameIdentifier	 awt
.	TokenNameDOT	
image	TokenNameIdentifier	 image
.	TokenNameDOT	
renderable	TokenNameIdentifier	 renderable
.	TokenNameDOT	
Filter	TokenNameIdentifier	 Filter
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
gvt	TokenNameIdentifier	 gvt
.	TokenNameDOT	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
gvt	TokenNameIdentifier	 gvt
.	TokenNameDOT	
GraphicsNode	TokenNameIdentifier	 Graphics Node
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
apache	TokenNameIdentifier	 apache
.	TokenNameDOT	
batik	TokenNameIdentifier	 batik
.	TokenNameDOT	
gvt	TokenNameIdentifier	 gvt
.	TokenNameDOT	
Marker	TokenNameIdentifier	 Marker
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
w3c	TokenNameIdentifier	 w3c
.	TokenNameDOT	
dom	TokenNameIdentifier	 dom
.	TokenNameDOT	
Element	TokenNameIdentifier	 Element
;	TokenNameSEMICOLON	
import	TokenNameimport	
org	TokenNameIdentifier	 org
.	TokenNameDOT	
w3c	TokenNameIdentifier	 w3c
.	TokenNameDOT	
dom	TokenNameIdentifier	 dom
.	TokenNameDOT	
Node	TokenNameIdentifier	 Node
;	TokenNameSEMICOLON	
/** * Bridge class for the &lt;marker> element. * * @author <a href="mailto:tkormann@apache.org">Thierry Kormann</a> * @version $Id: SVGMarkerElementBridge.java 501922 2007-01-31 17:47:47Z dvholten $ */	TokenNameCOMMENT_JAVADOC	 Bridge class for the &lt;marker> element. * @author <a href="mailto:tkormann@apache.org">Thierry Kormann</a> @version $Id: SVGMarkerElementBridge.java 501922 2007-01-31 17:47:47Z dvholten $ 
public	TokenNamepublic	
class	TokenNameclass	
SVGMarkerElementBridge	TokenNameIdentifier	 SVG Marker Element Bridge
extends	TokenNameextends	
AnimatableGenericSVGBridge	TokenNameIdentifier	 Animatable Generic SVG Bridge
implements	TokenNameimplements	
MarkerBridge	TokenNameIdentifier	 Marker Bridge
,	TokenNameCOMMA	
ErrorConstants	TokenNameIdentifier	 Error Constants
{	TokenNameLBRACE	
/** * Constructs a new bridge for the &lt;marker> element. */	TokenNameCOMMENT_JAVADOC	 Constructs a new bridge for the &lt;marker> element. 
protected	TokenNameprotected	
SVGMarkerElementBridge	TokenNameIdentifier	 SVG Marker Element Bridge
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
}	TokenNameRBRACE	
/** * Returns 'marker'. */	TokenNameCOMMENT_JAVADOC	 Returns 'marker'. 
public	TokenNamepublic	
String	TokenNameIdentifier	 String
getLocalName	TokenNameIdentifier	 get Local Name
(	TokenNameLPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
SVG_MARKER_TAG	TokenNameIdentifier	 SVG  MARKER  TAG
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
/** * Creates a <tt>Marker</tt> according to the specified parameters. * * @param ctx the bridge context to use * @param markerElement the element that represents the marker * @param paintedElement the element that references the marker element */	TokenNameCOMMENT_JAVADOC	 Creates a <tt>Marker</tt> according to the specified parameters. * @param ctx the bridge context to use @param markerElement the element that represents the marker @param paintedElement the element that references the marker element 
public	TokenNamepublic	
Marker	TokenNameIdentifier	 Marker
createMarker	TokenNameIdentifier	 create Marker
(	TokenNameLPAREN	
BridgeContext	TokenNameIdentifier	 Bridge Context
ctx	TokenNameIdentifier	 ctx
,	TokenNameCOMMA	
Element	TokenNameIdentifier	 Element
markerElement	TokenNameIdentifier	 marker Element
,	TokenNameCOMMA	
Element	TokenNameIdentifier	 Element
paintedElement	TokenNameIdentifier	 painted Element
)	TokenNameRPAREN	
{	TokenNameLBRACE	
GVTBuilder	TokenNameIdentifier	 GVT Builder
builder	TokenNameIdentifier	 builder
=	TokenNameEQUAL	
ctx	TokenNameIdentifier	 ctx
.	TokenNameDOT	
getGVTBuilder	TokenNameIdentifier	 get GVT Builder
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
markerContentNode	TokenNameIdentifier	 marker Content Node
=	TokenNameEQUAL	
new	TokenNamenew	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// build the GVT tree that represents the marker 	TokenNameCOMMENT_LINE	build the GVT tree that represents the marker 
boolean	TokenNameboolean	
hasChildren	TokenNameIdentifier	 has Children
=	TokenNameEQUAL	
false	TokenNamefalse	
;	TokenNameSEMICOLON	
for	TokenNamefor	
(	TokenNameLPAREN	
Node	TokenNameIdentifier	 Node
n	TokenNameIdentifier	 n
=	TokenNameEQUAL	
markerElement	TokenNameIdentifier	 marker Element
.	TokenNameDOT	
getFirstChild	TokenNameIdentifier	 get First Child
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
n	TokenNameIdentifier	 n
!=	TokenNameNOT_EQUAL	
null	TokenNamenull	
;	TokenNameSEMICOLON	
n	TokenNameIdentifier	 n
=	TokenNameEQUAL	
n	TokenNameIdentifier	 n
.	TokenNameDOT	
getNextSibling	TokenNameIdentifier	 get Next Sibling
(	TokenNameLPAREN	
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// check if the node is a valid Element 	TokenNameCOMMENT_LINE	check if the node is a valid Element 
if	TokenNameif	
(	TokenNameLPAREN	
n	TokenNameIdentifier	 n
.	TokenNameDOT	
getNodeType	TokenNameIdentifier	 get Node Type
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
Node	TokenNameIdentifier	 Node
.	TokenNameDOT	
ELEMENT_NODE	TokenNameIdentifier	 ELEMENT  NODE
)	TokenNameRPAREN	
{	TokenNameLBRACE	
continue	TokenNamecontinue	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
Element	TokenNameIdentifier	 Element
child	TokenNameIdentifier	 child
=	TokenNameEQUAL	
(	TokenNameLPAREN	
Element	TokenNameIdentifier	 Element
)	TokenNameRPAREN	
n	TokenNameIdentifier	 n
;	TokenNameSEMICOLON	
GraphicsNode	TokenNameIdentifier	 Graphics Node
markerNode	TokenNameIdentifier	 marker Node
=	TokenNameEQUAL	
builder	TokenNameIdentifier	 builder
.	TokenNameDOT	
build	TokenNameIdentifier	 build
(	TokenNameLPAREN	
ctx	TokenNameIdentifier	 ctx
,	TokenNameCOMMA	
child	TokenNameIdentifier	 child
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// check if a GVT node has been created 	TokenNameCOMMENT_LINE	check if a GVT node has been created 
if	TokenNameif	
(	TokenNameLPAREN	
markerNode	TokenNameIdentifier	 marker Node
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
continue	TokenNamecontinue	
;	TokenNameSEMICOLON	
// skip element as <marker> can contain <defs>... 	TokenNameCOMMENT_LINE	skip element as <marker> can contain <defs>... 
}	TokenNameRBRACE	
hasChildren	TokenNameIdentifier	 has Children
=	TokenNameEQUAL	
true	TokenNametrue	
;	TokenNameSEMICOLON	
markerContentNode	TokenNameIdentifier	 marker Content Node
.	TokenNameDOT	
getChildren	TokenNameIdentifier	 get Children
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
markerNode	TokenNameIdentifier	 marker Node
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
!	TokenNameNOT	
hasChildren	TokenNameIdentifier	 has Children
)	TokenNameRPAREN	
{	TokenNameLBRACE	
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
// no marker content defined 	TokenNameCOMMENT_LINE	no marker content defined 
}	TokenNameRBRACE	
String	TokenNameIdentifier	 String
s	TokenNameIdentifier	 s
;	TokenNameSEMICOLON	
UnitProcessor	TokenNameIdentifier	 Unit Processor
.	TokenNameDOT	
Context	TokenNameIdentifier	 Context
uctx	TokenNameIdentifier	 uctx
=	TokenNameEQUAL	
UnitProcessor	TokenNameIdentifier	 Unit Processor
.	TokenNameDOT	
createContext	TokenNameIdentifier	 create Context
(	TokenNameLPAREN	
ctx	TokenNameIdentifier	 ctx
,	TokenNameCOMMA	
paintedElement	TokenNameIdentifier	 painted Element
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// 'markerWidth' attribute - default is 3 	TokenNameCOMMENT_LINE	'markerWidth' attribute - default is 3 
float	TokenNamefloat	
markerWidth	TokenNameIdentifier	 marker Width
=	TokenNameEQUAL	
3	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
s	TokenNameIdentifier	 s
=	TokenNameEQUAL	
markerElement	TokenNameIdentifier	 marker Element
.	TokenNameDOT	
getAttributeNS	TokenNameIdentifier	 get Attribute NS
(	TokenNameLPAREN	
null	TokenNamenull	
,	TokenNameCOMMA	
SVG_MARKER_WIDTH_ATTRIBUTE	TokenNameIdentifier	 SVG  MARKER  WIDTH  ATTRIBUTE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
markerWidth	TokenNameIdentifier	 marker Width
=	TokenNameEQUAL	
UnitProcessor	TokenNameIdentifier	 Unit Processor
.	TokenNameDOT	
svgHorizontalLengthToUserSpace	TokenNameIdentifier	 svg Horizontal Length To User Space
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
,	TokenNameCOMMA	
SVG_MARKER_WIDTH_ATTRIBUTE	TokenNameIdentifier	 SVG  MARKER  WIDTH  ATTRIBUTE
,	TokenNameCOMMA	
uctx	TokenNameIdentifier	 uctx
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
markerWidth	TokenNameIdentifier	 marker Width
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// A value of zero disables rendering of the element. 	TokenNameCOMMENT_LINE	A value of zero disables rendering of the element. 
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// 'markerHeight' attribute - default is 3 	TokenNameCOMMENT_LINE	'markerHeight' attribute - default is 3 
float	TokenNamefloat	
markerHeight	TokenNameIdentifier	 marker Height
=	TokenNameEQUAL	
3	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
s	TokenNameIdentifier	 s
=	TokenNameEQUAL	
markerElement	TokenNameIdentifier	 marker Element
.	TokenNameDOT	
getAttributeNS	TokenNameIdentifier	 get Attribute NS
(	TokenNameLPAREN	
null	TokenNamenull	
,	TokenNameCOMMA	
SVG_MARKER_HEIGHT_ATTRIBUTE	TokenNameIdentifier	 SVG  MARKER  HEIGHT  ATTRIBUTE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
markerHeight	TokenNameIdentifier	 marker Height
=	TokenNameEQUAL	
UnitProcessor	TokenNameIdentifier	 Unit Processor
.	TokenNameDOT	
svgVerticalLengthToUserSpace	TokenNameIdentifier	 svg Vertical Length To User Space
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
,	TokenNameCOMMA	
SVG_MARKER_HEIGHT_ATTRIBUTE	TokenNameIdentifier	 SVG  MARKER  HEIGHT  ATTRIBUTE
,	TokenNameCOMMA	
uctx	TokenNameIdentifier	 uctx
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
if	TokenNameif	
(	TokenNameLPAREN	
markerHeight	TokenNameIdentifier	 marker Height
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// A value of zero disables rendering of the element. 	TokenNameCOMMENT_LINE	A value of zero disables rendering of the element. 
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// 'orient' attribute - default is '0' 	TokenNameCOMMENT_LINE	'orient' attribute - default is '0' 
double	TokenNamedouble	
orient	TokenNameIdentifier	 orient
;	TokenNameSEMICOLON	
s	TokenNameIdentifier	 s
=	TokenNameEQUAL	
markerElement	TokenNameIdentifier	 marker Element
.	TokenNameDOT	
getAttributeNS	TokenNameIdentifier	 get Attribute NS
(	TokenNameLPAREN	
null	TokenNamenull	
,	TokenNameCOMMA	
SVG_ORIENT_ATTRIBUTE	TokenNameIdentifier	 SVG  ORIENT  ATTRIBUTE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
orient	TokenNameIdentifier	 orient
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
if	TokenNameif	
(	TokenNameLPAREN	
SVG_AUTO_VALUE	TokenNameIdentifier	 SVG  AUTO  VALUE
.	TokenNameDOT	
equals	TokenNameIdentifier	 equals
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
orient	TokenNameIdentifier	 orient
=	TokenNameEQUAL	
Double	TokenNameIdentifier	 Double
.	TokenNameDOT	
NaN	TokenNameIdentifier	 Na N
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
try	TokenNametry	
{	TokenNameLBRACE	
orient	TokenNameIdentifier	 orient
=	TokenNameEQUAL	
SVGUtilities	TokenNameIdentifier	 SVG Utilities
.	TokenNameDOT	
convertSVGNumber	TokenNameIdentifier	 convert SVG Number
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
catch	TokenNamecatch	
(	TokenNameLPAREN	
NumberFormatException	TokenNameIdentifier	 Number Format Exception
nfEx	TokenNameIdentifier	 nf Ex
)	TokenNameRPAREN	
{	TokenNameLBRACE	
throw	TokenNamethrow	
new	TokenNamenew	
BridgeException	TokenNameIdentifier	 Bridge Exception
(	TokenNameLPAREN	
ctx	TokenNameIdentifier	 ctx
,	TokenNameCOMMA	
markerElement	TokenNameIdentifier	 marker Element
,	TokenNameCOMMA	
nfEx	TokenNameIdentifier	 nf Ex
,	TokenNameCOMMA	
ERR_ATTRIBUTE_VALUE_MALFORMED	TokenNameIdentifier	 ERR  ATTRIBUTE  VALUE  MALFORMED
,	TokenNameCOMMA	
new	TokenNamenew	
Object	TokenNameIdentifier	 Object
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
{	TokenNameLBRACE	
SVG_ORIENT_ATTRIBUTE	TokenNameIdentifier	 SVG  ORIENT  ATTRIBUTE
,	TokenNameCOMMA	
s	TokenNameIdentifier	 s
}	TokenNameRBRACE	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
// 'stroke-width' property 	TokenNameCOMMENT_LINE	'stroke-width' property 
Value	TokenNameIdentifier	 Value
val	TokenNameIdentifier	 val
=	TokenNameEQUAL	
CSSUtilities	TokenNameIdentifier	 CSS Utilities
.	TokenNameDOT	
getComputedStyle	TokenNameIdentifier	 get Computed Style
(	TokenNameLPAREN	
paintedElement	TokenNameIdentifier	 painted Element
,	TokenNameCOMMA	
SVGCSSEngine	TokenNameIdentifier	 SVGCSS Engine
.	TokenNameDOT	
STROKE_WIDTH_INDEX	TokenNameIdentifier	 STROKE  WIDTH  INDEX
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
float	TokenNamefloat	
strokeWidth	TokenNameIdentifier	 stroke Width
=	TokenNameEQUAL	
val	TokenNameIdentifier	 val
.	TokenNameDOT	
getFloatValue	TokenNameIdentifier	 get Float Value
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// 'markerUnits' attribute - default is 'strokeWidth' 	TokenNameCOMMENT_LINE	'markerUnits' attribute - default is 'strokeWidth' 
short	TokenNameshort	
unitsType	TokenNameIdentifier	 units Type
;	TokenNameSEMICOLON	
s	TokenNameIdentifier	 s
=	TokenNameEQUAL	
markerElement	TokenNameIdentifier	 marker Element
.	TokenNameDOT	
getAttributeNS	TokenNameIdentifier	 get Attribute NS
(	TokenNameLPAREN	
null	TokenNamenull	
,	TokenNameCOMMA	
SVG_MARKER_UNITS_ATTRIBUTE	TokenNameIdentifier	 SVG  MARKER  UNITS  ATTRIBUTE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
==	TokenNameEQUAL_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
unitsType	TokenNameIdentifier	 units Type
=	TokenNameEQUAL	
SVGUtilities	TokenNameIdentifier	 SVG Utilities
.	TokenNameDOT	
STROKE_WIDTH	TokenNameIdentifier	 STROKE  WIDTH
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
unitsType	TokenNameIdentifier	 units Type
=	TokenNameEQUAL	
SVGUtilities	TokenNameIdentifier	 SVG Utilities
.	TokenNameDOT	
parseMarkerCoordinateSystem	TokenNameIdentifier	 parse Marker Coordinate System
(	TokenNameLPAREN	
markerElement	TokenNameIdentifier	 marker Element
,	TokenNameCOMMA	
SVG_MARKER_UNITS_ATTRIBUTE	TokenNameIdentifier	 SVG  MARKER  UNITS  ATTRIBUTE
,	TokenNameCOMMA	
s	TokenNameIdentifier	 s
,	TokenNameCOMMA	
ctx	TokenNameIdentifier	 ctx
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// 	TokenNameCOMMENT_LINE	 
// 	TokenNameCOMMENT_LINE	 
// 	TokenNameCOMMENT_LINE	 
// compute an additional transform for 'strokeWidth' coordinate system 	TokenNameCOMMENT_LINE	compute an additional transform for 'strokeWidth' coordinate system 
AffineTransform	TokenNameIdentifier	 Affine Transform
markerTxf	TokenNameIdentifier	 marker Txf
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
unitsType	TokenNameIdentifier	 units Type
==	TokenNameEQUAL_EQUAL	
SVGUtilities	TokenNameIdentifier	 SVG Utilities
.	TokenNameDOT	
STROKE_WIDTH	TokenNameIdentifier	 STROKE  WIDTH
)	TokenNameRPAREN	
{	TokenNameLBRACE	
markerTxf	TokenNameIdentifier	 marker Txf
=	TokenNameEQUAL	
new	TokenNamenew	
AffineTransform	TokenNameIdentifier	 Affine Transform
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
markerTxf	TokenNameIdentifier	 marker Txf
.	TokenNameDOT	
scale	TokenNameIdentifier	 scale
(	TokenNameLPAREN	
strokeWidth	TokenNameIdentifier	 stroke Width
,	TokenNameCOMMA	
strokeWidth	TokenNameIdentifier	 stroke Width
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
markerTxf	TokenNameIdentifier	 marker Txf
=	TokenNameEQUAL	
new	TokenNamenew	
AffineTransform	TokenNameIdentifier	 Affine Transform
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// 'viewBox' and 'preserveAspectRatio' attributes 	TokenNameCOMMENT_LINE	'viewBox' and 'preserveAspectRatio' attributes 
// viewBox -> viewport(0, 0, markerWidth, markerHeight) 	TokenNameCOMMENT_LINE	viewBox -> viewport(0, 0, markerWidth, markerHeight) 
AffineTransform	TokenNameIdentifier	 Affine Transform
preserveAspectRatioTransform	TokenNameIdentifier	 preserve Aspect Ratio Transform
=	TokenNameEQUAL	
ViewBox	TokenNameIdentifier	 View Box
.	TokenNameDOT	
getPreserveAspectRatioTransform	TokenNameIdentifier	 get Preserve Aspect Ratio Transform
(	TokenNameLPAREN	
markerElement	TokenNameIdentifier	 marker Element
,	TokenNameCOMMA	
markerWidth	TokenNameIdentifier	 marker Width
,	TokenNameCOMMA	
markerHeight	TokenNameIdentifier	 marker Height
,	TokenNameCOMMA	
ctx	TokenNameIdentifier	 ctx
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
preserveAspectRatioTransform	TokenNameIdentifier	 preserve Aspect Ratio Transform
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// disable the rendering of the element 	TokenNameCOMMENT_LINE	disable the rendering of the element 
return	TokenNamereturn	
null	TokenNamenull	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
markerTxf	TokenNameIdentifier	 marker Txf
.	TokenNameDOT	
concatenate	TokenNameIdentifier	 concatenate
(	TokenNameLPAREN	
preserveAspectRatioTransform	TokenNameIdentifier	 preserve Aspect Ratio Transform
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// now we can set the transform to the 'markerContentNode' 	TokenNameCOMMENT_LINE	now we can set the transform to the 'markerContentNode' 
markerContentNode	TokenNameIdentifier	 marker Content Node
.	TokenNameDOT	
setTransform	TokenNameIdentifier	 set Transform
(	TokenNameLPAREN	
markerTxf	TokenNameIdentifier	 marker Txf
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
// 'overflow' property 	TokenNameCOMMENT_LINE	'overflow' property 
if	TokenNameif	
(	TokenNameLPAREN	
CSSUtilities	TokenNameIdentifier	 CSS Utilities
.	TokenNameDOT	
convertOverflow	TokenNameIdentifier	 convert Overflow
(	TokenNameLPAREN	
markerElement	TokenNameIdentifier	 marker Element
)	TokenNameRPAREN	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// overflow:hidden 	TokenNameCOMMENT_LINE	overflow:hidden 
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
markerClip	TokenNameIdentifier	 marker Clip
;	TokenNameSEMICOLON	
float	TokenNamefloat	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
offsets	TokenNameIdentifier	 offsets
=	TokenNameEQUAL	
CSSUtilities	TokenNameIdentifier	 CSS Utilities
.	TokenNameDOT	
convertClip	TokenNameIdentifier	 convert Clip
(	TokenNameLPAREN	
markerElement	TokenNameIdentifier	 marker Element
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
offsets	TokenNameIdentifier	 offsets
==	TokenNameEQUAL_EQUAL	
null	TokenNamenull	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
// clip:auto 	TokenNameCOMMENT_LINE	clip:auto 
markerClip	TokenNameIdentifier	 marker Clip
=	TokenNameEQUAL	
new	TokenNamenew	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
.	TokenNameDOT	
Float	TokenNameIdentifier	 Float
(	TokenNameLPAREN	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
strokeWidth	TokenNameIdentifier	 stroke Width
*	TokenNameMULTIPLY	
markerWidth	TokenNameIdentifier	 marker Width
,	TokenNameCOMMA	
strokeWidth	TokenNameIdentifier	 stroke Width
*	TokenNameMULTIPLY	
markerHeight	TokenNameIdentifier	 marker Height
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
else	TokenNameelse	
{	TokenNameLBRACE	
// clip:rect(<x>, <y>, <w>, <h>) 	TokenNameCOMMENT_LINE	clip:rect(<x>, <y>, <w>, <h>) 
// offsets[0] = top 	TokenNameCOMMENT_LINE	offsets[0] = top 
// offsets[1] = right 	TokenNameCOMMENT_LINE	offsets[1] = right 
// offsets[2] = bottom 	TokenNameCOMMENT_LINE	offsets[2] = bottom 
// offsets[3] = left 	TokenNameCOMMENT_LINE	offsets[3] = left 
markerClip	TokenNameIdentifier	 marker Clip
=	TokenNameEQUAL	
new	TokenNamenew	
Rectangle2D	TokenNameIdentifier	 Rectangle2 D
.	TokenNameDOT	
Float	TokenNameIdentifier	 Float
(	TokenNameLPAREN	
offsets	TokenNameIdentifier	 offsets
[	TokenNameLBRACKET	
3	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
,	TokenNameCOMMA	
offsets	TokenNameIdentifier	 offsets
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
,	TokenNameCOMMA	
strokeWidth	TokenNameIdentifier	 stroke Width
*	TokenNameMULTIPLY	
markerWidth	TokenNameIdentifier	 marker Width
-	TokenNameMINUS	
offsets	TokenNameIdentifier	 offsets
[	TokenNameLBRACKET	
1	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
-	TokenNameMINUS	
offsets	TokenNameIdentifier	 offsets
[	TokenNameLBRACKET	
3	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
,	TokenNameCOMMA	
strokeWidth	TokenNameIdentifier	 stroke Width
*	TokenNameMULTIPLY	
markerHeight	TokenNameIdentifier	 marker Height
-	TokenNameMINUS	
offsets	TokenNameIdentifier	 offsets
[	TokenNameLBRACKET	
2	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
-	TokenNameMINUS	
offsets	TokenNameIdentifier	 offsets
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
comp	TokenNameIdentifier	 comp
=	TokenNameEQUAL	
new	TokenNamenew	
CompositeGraphicsNode	TokenNameIdentifier	 Composite Graphics Node
(	TokenNameLPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
comp	TokenNameIdentifier	 comp
.	TokenNameDOT	
getChildren	TokenNameIdentifier	 get Children
(	TokenNameLPAREN	
)	TokenNameRPAREN	
.	TokenNameDOT	
add	TokenNameIdentifier	 add
(	TokenNameLPAREN	
markerContentNode	TokenNameIdentifier	 marker Content Node
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Filter	TokenNameIdentifier	 Filter
clipSrc	TokenNameIdentifier	 clip Src
=	TokenNameEQUAL	
comp	TokenNameIdentifier	 comp
.	TokenNameDOT	
getGraphicsNodeRable	TokenNameIdentifier	 get Graphics Node Rable
(	TokenNameLPAREN	
true	TokenNametrue	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
comp	TokenNameIdentifier	 comp
.	TokenNameDOT	
setClip	TokenNameIdentifier	 set Clip
(	TokenNameLPAREN	
new	TokenNamenew	
ClipRable8Bit	TokenNameIdentifier	 Clip Rable8 Bit
(	TokenNameLPAREN	
clipSrc	TokenNameIdentifier	 clip Src
,	TokenNameCOMMA	
markerClip	TokenNameIdentifier	 marker Clip
)	TokenNameRPAREN	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
markerContentNode	TokenNameIdentifier	 marker Content Node
=	TokenNameEQUAL	
comp	TokenNameIdentifier	 comp
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// 'refX' attribute - default is 0 	TokenNameCOMMENT_LINE	'refX' attribute - default is 0 
float	TokenNamefloat	
refX	TokenNameIdentifier	 ref X
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
s	TokenNameIdentifier	 s
=	TokenNameEQUAL	
markerElement	TokenNameIdentifier	 marker Element
.	TokenNameDOT	
getAttributeNS	TokenNameIdentifier	 get Attribute NS
(	TokenNameLPAREN	
null	TokenNamenull	
,	TokenNameCOMMA	
SVG_REF_X_ATTRIBUTE	TokenNameIdentifier	 SVG  REF  X  ATTRIBUTE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
refX	TokenNameIdentifier	 ref X
=	TokenNameEQUAL	
UnitProcessor	TokenNameIdentifier	 Unit Processor
.	TokenNameDOT	
svgHorizontalCoordinateToUserSpace	TokenNameIdentifier	 svg Horizontal Coordinate To User Space
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
,	TokenNameCOMMA	
SVG_REF_X_ATTRIBUTE	TokenNameIdentifier	 SVG  REF  X  ATTRIBUTE
,	TokenNameCOMMA	
uctx	TokenNameIdentifier	 uctx
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// 'refY' attribute - default is 0 	TokenNameCOMMENT_LINE	'refY' attribute - default is 0 
float	TokenNamefloat	
refY	TokenNameIdentifier	 ref Y
=	TokenNameEQUAL	
0	TokenNameIntegerLiteral	
;	TokenNameSEMICOLON	
s	TokenNameIdentifier	 s
=	TokenNameEQUAL	
markerElement	TokenNameIdentifier	 marker Element
.	TokenNameDOT	
getAttributeNS	TokenNameIdentifier	 get Attribute NS
(	TokenNameLPAREN	
null	TokenNamenull	
,	TokenNameCOMMA	
SVG_REF_Y_ATTRIBUTE	TokenNameIdentifier	 SVG  REF  Y  ATTRIBUTE
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
if	TokenNameif	
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
.	TokenNameDOT	
length	TokenNameIdentifier	 length
(	TokenNameLPAREN	
)	TokenNameRPAREN	
!=	TokenNameNOT_EQUAL	
0	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
{	TokenNameLBRACE	
refY	TokenNameIdentifier	 ref Y
=	TokenNameEQUAL	
UnitProcessor	TokenNameIdentifier	 Unit Processor
.	TokenNameDOT	
svgVerticalCoordinateToUserSpace	TokenNameIdentifier	 svg Vertical Coordinate To User Space
(	TokenNameLPAREN	
s	TokenNameIdentifier	 s
,	TokenNameCOMMA	
SVG_REF_Y_ATTRIBUTE	TokenNameIdentifier	 SVG  REF  Y  ATTRIBUTE
,	TokenNameCOMMA	
uctx	TokenNameIdentifier	 uctx
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
// TK: Warning at this time, refX and refY are relative to the 	TokenNameCOMMENT_LINE	TK: Warning at this time, refX and refY are relative to the 
// paintedElement's coordinate system. We need to move the 	TokenNameCOMMENT_LINE	paintedElement's coordinate system. We need to move the 
// reference point to the marker's coordinate system 	TokenNameCOMMENT_LINE	reference point to the marker's coordinate system 
// Watch out: the reference point is defined a little weirdly in the 	TokenNameCOMMENT_LINE	Watch out: the reference point is defined a little weirdly in the 
// SVG spec., but the bottom line is that the marker content should 	TokenNameCOMMENT_LINE	SVG spec., but the bottom line is that the marker content should 
// not be translated. Rather, the reference point should be computed 	TokenNameCOMMENT_LINE	not be translated. Rather, the reference point should be computed 
// in viewport space (this is what the following transform 	TokenNameCOMMENT_LINE	in viewport space (this is what the following transform 
// does) and used when placing the marker. 	TokenNameCOMMENT_LINE	does) and used when placing the marker. 
// 	TokenNameCOMMENT_LINE	 
float	TokenNamefloat	
[	TokenNameLBRACKET	
]	TokenNameRBRACKET	
ref	TokenNameIdentifier	 ref
=	TokenNameEQUAL	
{	TokenNameLBRACE	
refX	TokenNameIdentifier	 ref X
,	TokenNameCOMMA	
refY	TokenNameIdentifier	 ref Y
}	TokenNameRBRACE	
;	TokenNameSEMICOLON	
markerTxf	TokenNameIdentifier	 marker Txf
.	TokenNameDOT	
transform	TokenNameIdentifier	 transform
(	TokenNameLPAREN	
ref	TokenNameIdentifier	 ref
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
ref	TokenNameIdentifier	 ref
,	TokenNameCOMMA	
0	TokenNameIntegerLiteral	
,	TokenNameCOMMA	
1	TokenNameIntegerLiteral	
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
Marker	TokenNameIdentifier	 Marker
marker	TokenNameIdentifier	 marker
=	TokenNameEQUAL	
new	TokenNamenew	
Marker	TokenNameIdentifier	 Marker
(	TokenNameLPAREN	
markerContentNode	TokenNameIdentifier	 marker Content Node
,	TokenNameCOMMA	
new	TokenNamenew	
Point2D	TokenNameIdentifier	 Point2 D
.	TokenNameDOT	
Float	TokenNameIdentifier	 Float
(	TokenNameLPAREN	
ref	TokenNameIdentifier	 ref
[	TokenNameLBRACKET	
0	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
,	TokenNameCOMMA	
ref	TokenNameIdentifier	 ref
[	TokenNameLBRACKET	
1	TokenNameIntegerLiteral	
]	TokenNameRBRACKET	
)	TokenNameRPAREN	
,	TokenNameCOMMA	
orient	TokenNameIdentifier	 orient
)	TokenNameRPAREN	
;	TokenNameSEMICOLON	
return	TokenNamereturn	
marker	TokenNameIdentifier	 marker
;	TokenNameSEMICOLON	
}	TokenNameRBRACE	
}	TokenNameRBRACE	
